(self.webpackChunkTV_Project=self.webpackChunkTV_Project||[]).push([[179],{2011:(jt,Ze,F)=>{"use strict";F.d(Ze,{Dh:()=>_e,GT:()=>me,cc:()=>xe,hO:()=>be,on:()=>ie,pX:()=>Ae,xv:()=>Me});var a=F(4650),K=F(9260),B=F(4976);jt=F.hmd(jt);const Ee=["ngOnDestroy"],Ae=(le,ue,Be,Ce={})=>new Proxy(le,{get:(Ne,Le)=>Be.runOutsideAngular(()=>{var $e;if(le[Le])return!(null===($e=Ce?.spy)||void 0===$e)&&$e.get&&Ce.spy.get(Le,le[Le]),le[Le];if(Ee.indexOf(Le)>-1)return()=>{};const Z=ue.toPromise().then(he=>{const ve=he&&he[Le];return"function"==typeof ve?ve.bind(he):ve&&ve.then?ve.then(Te=>Be.run(()=>Te)):Be.run(()=>ve)});return new Proxy(()=>{},{get:(he,ve)=>Z[ve],apply:(he,ve,Te)=>Z.then(Ye=>{var rt;const Qe=Ye&&Ye(...Te);return!(null===(rt=Ce?.spy)||void 0===rt)&&rt.apply&&Ce.spy.apply(Le,Te,Qe),Qe})})})}),me=(le,ue)=>{ue.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(Ce=>{Object.defineProperty(le.prototype,Ce,Object.getOwnPropertyDescriptor(Be.prototype||Be,Ce))})})};class oe{constructor(ue){return ue}}const _e=new a.OlP("angularfire2.app.options"),Me=new a.OlP("angularfire2.app.name");function ie(le,ue,Be){const Ne="object"==typeof Be&&Be||{};Ne.name=Ne.name||"string"==typeof Be&&Be||"[DEFAULT]";const $e=K.Z.apps.filter(Z=>Z&&Z.name===Ne.name)[0]||ue.runOutsideAngular(()=>K.Z.initializeApp(le,Ne));try{JSON.stringify(le)!==JSON.stringify($e.options)&&X("error",`${$e.name} Firebase App already initialized with different options${jt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new oe($e)}const X=(le,...ue)=>{(0,a.X6Q)()&&typeof console<"u"&&console[le](...ue)},se={provide:oe,useFactory:ie,deps:[_e,a.R0b,[new a.FiY,Me]]};let be=(()=>{class le{constructor(Be){K.Z.registerVersion("angularfire",B.q4.full,"core"),K.Z.registerVersion("angularfire",B.q4.full,"app-compat"),K.Z.registerVersion("angular",a.q4F.full,Be.toString())}static initializeApp(Be,Ce){return{ngModule:le,providers:[{provide:_e,useValue:Be},{provide:Me,useValue:Ce}]}}}return le.\u0275fac=function(Be){return new(Be||le)(a.LFG(a.Lbi))},le.\u0275mod=a.oAB({type:le}),le.\u0275inj=a.cJS({providers:[se]}),le})();function xe(le,ue,Be,Ce,Ne){const[,Le,$e]=globalThis.\u0275AngularfireInstanceCache.find(Z=>Z[0]===le)||[];if(Le)return function ke(le,ue){try{return le.toString()===ue.toString()}catch{return le===ue}}(Ne,$e)||(te("error",`${ue} was already initialized on the ${Be} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),te("warn",{is:Ne,was:$e})),Le;{const Z=Ce();return globalThis.\u0275AngularfireInstanceCache.push([le,Z,Ne]),Z}}const Ue=!!jt.hot,te=(le,...ue)=>{(0,a.X6Q)()&&typeof console<"u"&&console[le](...ue)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(jt,Ze,F)=>{"use strict";F.d(Ze,{q4:()=>kr,iC:()=>rd,HU:()=>gl,vb:()=>xh,JM:()=>Jc,u3:()=>Ig});var a=F(4650),K=F(259),B=F(5861),Ee=F(6881),Ae=F(2090),me=F(4859),oe=F(1877);const _e=(D,A)=>A.some(O=>D instanceof O);let Me,ie;const be=new WeakMap,xe=new WeakMap,ke=new WeakMap,Ue=new WeakMap,te=new WeakMap;let Be={get(D,A,O){if(D instanceof IDBTransaction){if("done"===A)return xe.get(D);if("objectStoreNames"===A)return D.objectStoreNames||ke.get(D);if("store"===A)return O.objectStoreNames[1]?void 0:O.objectStore(O.objectStoreNames[0])}return $e(D[A])},set:(D,A,O)=>(D[A]=O,!0),has:(D,A)=>D instanceof IDBTransaction&&("done"===A||"store"===A)||A in D};function Le(D){return"function"==typeof D?function Ne(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function se(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...A){return D.apply(Z(this),A),$e(be.get(this))}:function(...A){return $e(D.apply(Z(this),A))}:function(A,...O){const Y=D.call(Z(this),A,...O);return ke.set(Y,A.sort?A.sort():[A]),$e(Y)}}(D):(D instanceof IDBTransaction&&function ue(D){if(xe.has(D))return;const A=new Promise((O,Y)=>{const ce=()=>{D.removeEventListener("complete",Pe),D.removeEventListener("error",Je),D.removeEventListener("abort",Je)},Pe=()=>{O(),ce()},Je=()=>{Y(D.error||new DOMException("AbortError","AbortError")),ce()};D.addEventListener("complete",Pe),D.addEventListener("error",Je),D.addEventListener("abort",Je)});xe.set(D,A)}(D),_e(D,function X(){return Me||(Me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,Be):D)}function $e(D){if(D instanceof IDBRequest)return function le(D){const A=new Promise((O,Y)=>{const ce=()=>{D.removeEventListener("success",Pe),D.removeEventListener("error",Je)},Pe=()=>{O($e(D.result)),ce()},Je=()=>{Y(D.error),ce()};D.addEventListener("success",Pe),D.addEventListener("error",Je)});return A.then(O=>{O instanceof IDBCursor&&be.set(O,D)}).catch(()=>{}),te.set(A,D),A}(D);if(Ue.has(D))return Ue.get(D);const A=Le(D);return A!==D&&(Ue.set(D,A),te.set(A,D)),A}const Z=D=>te.get(D),Te=["get","getKey","getAll","getAllKeys","count"],Ye=["put","add","delete","clear"],rt=new Map;function Qe(D,A){var O;if(!(D instanceof IDBDatabase)||A in D||"string"!=typeof A)return;if(rt.get(A))return rt.get(A);const Y=A.replace(/FromIndex$/,""),ce=A!==Y,Pe=Ye.includes(Y);if(!(Y in(ce?IDBIndex:IDBObjectStore).prototype)||!Pe&&!Te.includes(Y))return;const Je=function(Ot){return(O=O||(0,B.Z)(function*(tn,...yn){const Tn=this.transaction(tn,Pe?"readwrite":"readonly");let ni=Tn.store;return ce&&(ni=ni.index(yn.shift())),(yield Promise.all([ni[Y](...yn),Pe&&Tn.done]))[0]})).apply(this,arguments)};return rt.set(A,Je),Je}var on,vt,$t,Fe,G,Q,de,fe,Xe,He,kt,Tt,Rt,Vt,vn,zn;!function Ce(D){Be=D(Be)}(D=>({...D,get:(A,O,Y)=>Qe(A,O)||D.get(A,O,Y),has:(A,O)=>!!Qe(A,O)||D.has(A,O)}));const Gt="@firebase/installations",Wt="0.6.4",lt=1e4,Ct=`w:${Wt}`,at="FIS_v2",st="https://firebaseinstallations.googleapis.com/v1",Dn=36e5,In=new Ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Zn(D){return D instanceof Ae.ZR&&D.code.includes("request-failed")}function Rn({projectId:D}){return`${st}/projects/${D}/installations`}function Xt(D){return{token:D.token,requestStatus:2,expiresIn:Xi(D.expiresIn),creationTime:Date.now()}}function qt(D,A){return(on=on||(0,B.Z)(function*(O,Y){const Pe=(yield Y.json()).error;return In.create("request-failed",{requestName:O,serverCode:Pe.code,serverMessage:Pe.message,serverStatus:Pe.status})})).apply(this,arguments)}function Ui({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Mi(D){return(vt=vt||(0,B.Z)(function*(A){const O=yield A();return O.status>=500&&O.status<600?A():O})).apply(this,arguments)}function Xi(D){return Number(D.replace("s","000"))}function bi(D){return new Promise(A=>{setTimeout(A,D)})}const $n=/^[cdef][\w-]{21}$/,hr="";function ri(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const O=function Sr(D){return function Ii(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return $n.test(O)?O:hr}catch{return hr}}function rr(D){return`${D.appName}!${D.appId}`}const fr=new Map;function Xr(D,A){const O=rr(D);as(O,A),function ge(D,A){const O=function z(){return!re&&"BroadcastChannel"in self&&(re=new BroadcastChannel("[Firebase] FID Change"),re.onmessage=D=>{as(D.data.key,D.data.fid)}),re}();O&&O.postMessage({key:D,fid:A}),function j(){0===fr.size&&re&&(re.close(),re=null)}()}(O,A)}function as(D,A){const O=fr.get(D);if(O)for(const Y of O)Y(A)}let re=null;const $="firebase-installations-database",pe=1,et="firebase-installations-store";let Ut=null;function Vn(){return Ut||(Ut=function he(D,A,{blocked:O,upgrade:Y,blocking:ce,terminated:Pe}={}){const Je=indexedDB.open(D,A),_t=$e(Je);return Y&&Je.addEventListener("upgradeneeded",Ot=>{Y($e(Je.result),Ot.oldVersion,Ot.newVersion,$e(Je.transaction))}),O&&Je.addEventListener("blocked",()=>O()),_t.then(Ot=>{Pe&&Ot.addEventListener("close",()=>Pe()),ce&&Ot.addEventListener("versionchange",()=>ce())}).catch(()=>{}),_t}($,pe,{upgrade:(D,A)=>{0===A&&D.createObjectStore(et)}})),Ut}function Mn(D,A){return(Fe=Fe||(0,B.Z)(function*(O,Y){const ce=rr(O),Je=(yield Vn()).transaction(et,"readwrite"),_t=Je.objectStore(et),Ot=yield _t.get(ce);return yield _t.put(Y,ce),yield Je.done,(!Ot||Ot.fid!==Y.fid)&&Xr(O,Y.fid),Y})).apply(this,arguments)}function Wn(D){return(G=G||(0,B.Z)(function*(A){const O=rr(A),ce=(yield Vn()).transaction(et,"readwrite");yield ce.objectStore(et).delete(O),yield ce.done})).apply(this,arguments)}function xn(D,A){return(Q=Q||(0,B.Z)(function*(O,Y){const ce=rr(O),Je=(yield Vn()).transaction(et,"readwrite"),_t=Je.objectStore(et),Ot=yield _t.get(ce),tn=Y(Ot);return void 0===tn?yield _t.delete(ce):yield _t.put(tn,ce),yield Je.done,tn&&(!Ot||Ot.fid!==tn.fid)&&Xr(O,tn.fid),tn})).apply(this,arguments)}function Ci(D){return(de=de||(0,B.Z)(function*(A){let O;const Y=yield xn(A.appConfig,ce=>{const Pe=function _i(D){return Mt(D||{fid:ri(),registrationStatus:0})}(ce),Je=function Qr(D,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(In.create("app-offline"))};const O={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},Y=function Jr(D,A){return(fe=fe||(0,B.Z)(function*(O,Y){try{const ce=yield function os(D,A){return($t=$t||(0,B.Z)(function*({appConfig:O,heartbeatServiceProvider:Y},{fid:ce}){const Pe=Rn(O),Je=Ui(O),_t=Y.getImmediate({optional:!0});if(_t){const Tn=yield _t.getHeartbeatsHeader();Tn&&Je.append("x-firebase-client",Tn)}const tn={method:"POST",headers:Je,body:JSON.stringify({fid:ce,authVersion:at,appId:O.appId,sdkVersion:Ct})},yn=yield Mi(()=>fetch(Pe,tn));if(yn.ok){const Tn=yield yn.json();return{fid:Tn.fid||ce,registrationStatus:2,refreshToken:Tn.refreshToken,authToken:Xt(Tn.authToken)}}throw yield qt("Create Installation",yn)})).apply(this,arguments)}(O,Y);return Mn(O.appConfig,ce)}catch(ce){throw Zn(ce)&&409===ce.customData.serverCode?yield Wn(O.appConfig):yield Mn(O.appConfig,{fid:Y.fid,registrationStatus:0}),ce}})).apply(this,arguments)}(D,O);return{installationEntry:O,registrationPromise:Y}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:nt(D)}:{installationEntry:A}}(A,Pe);return O=Je.registrationPromise,Je.installationEntry});return Y.fid===hr?{installationEntry:yield O}:{installationEntry:Y,registrationPromise:O}})).apply(this,arguments)}function nt(D){return(Xe=Xe||(0,B.Z)(function*(A){let O=yield ze(A.appConfig);for(;1===O.registrationStatus;)yield bi(100),O=yield ze(A.appConfig);if(0===O.registrationStatus){const{installationEntry:Y,registrationPromise:ce}=yield Ci(A);return ce||Y}return O})).apply(this,arguments)}function ze(D){return xn(D,A=>{if(!A)throw In.create("installation-not-found");return Mt(A)})}function Mt(D){return function hn(D){return 1===D.registrationStatus&&D.registrationTime+lt<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function fn(D,A){return(He=He||(0,B.Z)(function*({appConfig:O,heartbeatServiceProvider:Y},ce){const Pe=function gn(D,{fid:A}){return`${Rn(D)}/${A}/authTokens:generate`}(O,ce),Je=function Ti(D,{refreshToken:A}){const O=Ui(D);return O.append("Authorization",function $i(D){return`${at} ${D}`}(A)),O}(O,ce),_t=Y.getImmediate({optional:!0});if(_t){const Tn=yield _t.getHeartbeatsHeader();Tn&&Je.append("x-firebase-client",Tn)}const tn={method:"POST",headers:Je,body:JSON.stringify({installation:{sdkVersion:Ct,appId:O.appId}})},yn=yield Mi(()=>fetch(Pe,tn));if(yn.ok)return Xt(yield yn.json());throw yield qt("Generate Auth Token",yn)})).apply(this,arguments)}function _n(D){return(kt=kt||(0,B.Z)(function*(A,O=!1){let Y;const ce=yield xn(A.appConfig,Je=>{if(!Ai(Je))throw In.create("not-registered");const _t=Je.authToken;if(!O&&function wr(D){return 2===D.requestStatus&&!function Pi(D){const A=Date.now();return A<D.creationTime||D.creationTime+D.expiresIn<A+Dn}(D)}(_t))return Je;if(1===_t.requestStatus)return Y=function ci(D,A){return(Tt=Tt||(0,B.Z)(function*(O,Y){let ce=yield Yn(O.appConfig);for(;1===ce.authToken.requestStatus;)yield bi(100),ce=yield Yn(O.appConfig);const Pe=ce.authToken;return 0===Pe.requestStatus?_n(O,Y):Pe})).apply(this,arguments)}(A,O),Je;{if(!navigator.onLine)throw In.create("app-offline");const Ot=function oo(D){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:A})}(Je);return Y=function Et(D,A){return(Rt=Rt||(0,B.Z)(function*(O,Y){try{const ce=yield fn(O,Y),Pe=Object.assign(Object.assign({},Y),{authToken:ce});return yield Mn(O.appConfig,Pe),ce}catch(ce){if(!Zn(ce)||401!==ce.customData.serverCode&&404!==ce.customData.serverCode){const Pe=Object.assign(Object.assign({},Y),{authToken:{requestStatus:0}});yield Mn(O.appConfig,Pe)}else yield Wn(O.appConfig);throw ce}})).apply(this,arguments)}(A,Ot),Ot}});return Y?yield Y:ce.authToken})).apply(this,arguments)}function Yn(D){return xn(D,A=>{if(!Ai(A))throw In.create("not-registered");return function ls(D){return 1===D.requestStatus&&D.requestTime+lt<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Ai(D){return void 0!==D&&2===D.registrationStatus}function sr(D){return In.create("missing-app-config-values",{valueName:D})}const Pn="installations",co=D=>{const A=D.getProvider("app").getImmediate(),O=function Vi(D){if(!D||!D.options)throw sr("App Configuration");if(!D.name)throw sr("App Name");const A=["projectId","apiKey","appId"];for(const O of A)if(!D.options[O])throw sr(O);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(A);return{app:A,appConfig:O,heartbeatServiceProvider:(0,Ee._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},Ls=D=>{const A=D.getProvider("app").getImmediate(),O=(0,Ee._getProvider)(A,Pn).getImmediate();return{getId:()=>function Kt(D){return(Vt=Vt||(0,B.Z)(function*(A){const O=A,{installationEntry:Y,registrationPromise:ce}=yield Ci(O);return ce?ce.catch(console.error):_n(O).catch(console.error),Y.fid})).apply(this,arguments)}(O),getToken:ce=>function jn(D){return(vn=vn||(0,B.Z)(function*(A,O=!1){const Y=A;return yield function wi(D){return(zn=zn||(0,B.Z)(function*(A){const{registrationPromise:O}=yield Ci(A);O&&(yield O)})).apply(this,arguments)}(Y),(yield _n(Y,O)).token})).apply(this,arguments)}(O,ce)}};var W;(function Ge(){(0,Ee._registerComponent)(new me.wA(Pn,co,"PUBLIC")),(0,Ee._registerComponent)(new me.wA("installations-internal",Ls,"PRIVATE"))})(),(0,Ee.registerVersion)(Gt,Wt),(0,Ee.registerVersion)(Gt,Wt,"esm2017");const Oe="@firebase/remote-config",ct=new Ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Hd{constructor(A,O,Y,ce){this.client=A,this.storage=O,this.storageCache=Y,this.logger=ce}isCachedDataFresh(A,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Y=Date.now()-O,ce=Y<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Y}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${ce}.`),ce}fetch(A){var O=this;return(0,B.Z)(function*(){const[Y,ce]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(ce&&O.isCachedDataFresh(A.cacheMaxAgeMillis,Y))return ce;A.eTag=ce&&ce.eTag;const Pe=yield O.client.fetch(A),Je=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Pe.status&&Je.push(O.storage.setLastSuccessfulFetchResponse(Pe)),yield Promise.all(Je),Pe})()}}function zd(D=navigator){return D.languages&&D.languages[0]||D.language}class Jf{constructor(A,O,Y,ce,Pe,Je){this.firebaseInstallations=A,this.sdkVersion=O,this.namespace=Y,this.projectId=ce,this.apiKey=Pe,this.appId=Je}fetch(A){var O=this;return(0,B.Z)(function*(){const[Y,ce]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),Je=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,_t={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Ot={sdk_version:O.sdkVersion,app_instance_id:Y,app_instance_id_token:ce,app_id:O.appId,language_code:zd()},tn={method:"POST",headers:_t,body:JSON.stringify(Ot)},yn=fetch(Je,tn),Tn=new Promise((Qn,Tr)=>{A.signal.addEventListener(()=>{const qo=new Error("The operation was aborted.");qo.name="AbortError",Tr(qo)})});let ni;try{yield Promise.race([yn,Tn]),ni=yield yn}catch(Qn){let Tr="fetch-client-network";throw"AbortError"===Qn?.name&&(Tr="fetch-timeout"),ct.create(Tr,{originalErrorMessage:Qn?.message})}let Cn=ni.status;const Yi=ni.headers.get("ETag")||void 0;let vs,gr;if(200===ni.status){let Qn;try{Qn=yield ni.json()}catch(Tr){throw ct.create("fetch-client-parse",{originalErrorMessage:Tr?.message})}vs=Qn.entries,gr=Qn.state}if("INSTANCE_STATE_UNSPECIFIED"===gr?Cn=500:"NO_CHANGE"===gr?Cn=304:("NO_TEMPLATE"===gr||"EMPTY_CONFIG"===gr)&&(vs={}),304!==Cn&&200!==Cn)throw ct.create("fetch-status",{httpStatus:Cn});return{status:Cn,eTag:Yi,config:vs}})()}}class ku{constructor(A,O){this.client=A,this.storage=O}fetch(A){var O=this;return(0,B.Z)(function*(){const Y=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(A,Y)})()}attemptFetch(A,{throttleEndTimeMillis:O,backoffCount:Y}){var ce=this;return(0,B.Z)(function*(){yield function em(D,A){return new Promise((O,Y)=>{const ce=Math.max(A-Date.now(),0),Pe=setTimeout(O,ce);D.addEventListener(()=>{clearTimeout(Pe),Y(ct.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,O);try{const Pe=yield ce.client.fetch(A);return yield ce.storage.deleteThrottleMetadata(),Pe}catch(Pe){if(!function Ic(D){if(!(D instanceof Ae.ZR&&D.customData))return!1;const A=Number(D.customData.httpStatus);return 429===A||500===A||503===A||504===A}(Pe))throw Pe;const Je={throttleEndTimeMillis:Date.now()+(0,Ae.$s)(Y),backoffCount:Y+1};return yield ce.storage.setThrottleMetadata(Je),ce.attemptFetch(A,Je)}})()}}class Fl{constructor(A,O,Y,ce,Pe){this.app=A,this._client=O,this._storageCache=Y,this._storage=ce,this._logger=Pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sc(D,A){const O=D.target.error||void 0;return ct.create(A,{originalErrorMessage:O&&O?.message})}const ia="app_namespace_store";class nm{constructor(A,O,Y,ce=function tm(){return new Promise((D,A)=>{try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=Y=>{A(Sc(Y,"storage-open"))},O.onsuccess=Y=>{D(Y.target.result)},O.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(ia,{keyPath:"compositeKey"})}}catch(O){A(ct.create("storage-open",{originalErrorMessage:O?.message}))}})}()){this.appId=A,this.appName=O,this.namespace=Y,this.openDbPromise=ce}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var O=this;return(0,B.Z)(function*(){const Y=yield O.openDbPromise;return new Promise((ce,Pe)=>{const _t=Y.transaction([ia],"readonly").objectStore(ia),Ot=O.createCompositeKey(A);try{const tn=_t.get(Ot);tn.onerror=yn=>{Pe(Sc(yn,"storage-get"))},tn.onsuccess=yn=>{const Tn=yn.target.result;ce(Tn?Tn.value:void 0)}}catch(tn){Pe(ct.create("storage-get",{originalErrorMessage:tn?.message}))}})})()}set(A,O){var Y=this;return(0,B.Z)(function*(){const ce=yield Y.openDbPromise;return new Promise((Pe,Je)=>{const Ot=ce.transaction([ia],"readwrite").objectStore(ia),tn=Y.createCompositeKey(A);try{const yn=Ot.put({compositeKey:tn,value:O});yn.onerror=Tn=>{Je(Sc(Tn,"storage-set"))},yn.onsuccess=()=>{Pe()}}catch(yn){Je(ct.create("storage-set",{originalErrorMessage:yn?.message}))}})})()}delete(A){var O=this;return(0,B.Z)(function*(){const Y=yield O.openDbPromise;return new Promise((ce,Pe)=>{const _t=Y.transaction([ia],"readwrite").objectStore(ia),Ot=O.createCompositeKey(A);try{const tn=_t.delete(Ot);tn.onerror=yn=>{Pe(Sc(yn,"storage-delete"))},tn.onsuccess=()=>{ce()}}catch(tn){Pe(ct.create("storage-delete",{originalErrorMessage:tn?.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class Da{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,B.Z)(function*(){const O=A.storage.getLastFetchStatus(),Y=A.storage.getLastSuccessfulFetchTimestampMillis(),ce=A.storage.getActiveConfig(),Pe=yield O;Pe&&(A.lastFetchStatus=Pe);const Je=yield Y;Je&&(A.lastSuccessfulFetchTimestampMillis=Je);const _t=yield ce;_t&&(A.activeConfig=_t)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Pu(){return(W=W||(0,B.Z)(function*(){if(!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch{return!1}})).apply(this,arguments)}!function im(){(0,Ee._registerComponent)(new me.wA("remote-config",function D(A,{instanceIdentifier:O}){const Y=A.getProvider("app").getImmediate(),ce=A.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ct.create("registration-window");if(!(0,Ae.hl)())throw ct.create("indexed-db-unavailable");const{projectId:Pe,apiKey:Je,appId:_t}=Y.options;if(!Pe)throw ct.create("registration-project-id");if(!Je)throw ct.create("registration-api-key");if(!_t)throw ct.create("registration-app-id");const Ot=new nm(_t,Y.name,O=O||"firebase"),tn=new Da(Ot),yn=new oe.Yd(Oe);yn.logLevel=oe.in.ERROR;const Tn=new Jf(ce,Ee.SDK_VERSION,O,Pe,Je,_t),ni=new ku(Tn,Ot),Cn=new Hd(ni,Ot,tn,yn),Yi=new Fl(Y,Cn,tn,Ot,yn);return function Wi(D){const A=(0,Ae.m9)(D);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Yi),Yi},"PUBLIC").setMultipleInstances(!0)),(0,Ee.registerVersion)(Oe,"0.4.4"),(0,Ee.registerVersion)(Oe,"0.4.4","esm2017")}();const rm=(D,A)=>A.some(O=>D instanceof O);let Nl,Dc;const Lu=new WeakMap,sl=new WeakMap,Ar=new WeakMap,Ac=new WeakMap,Mc=new WeakMap;let ol={get(D,A,O){if(D instanceof IDBTransaction){if("done"===A)return sl.get(D);if("objectStoreNames"===A)return D.objectStoreNames||Ar.get(D);if("store"===A)return O.objectStoreNames[1]?void 0:O.objectStore(O.objectStoreNames[0])}return Ns(D[A])},set:(D,A,O)=>(D[A]=O,!0),has:(D,A)=>D instanceof IDBTransaction&&("done"===A||"store"===A)||A in D};function Fu(D){return"function"==typeof D?function Gd(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function om(){return Dc||(Dc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...A){return D.apply(es(this),A),Ns(Lu.get(this))}:function(...A){return Ns(D.apply(es(this),A))}:function(A,...O){const Y=D.call(es(this),A,...O);return Ar.set(Y,A.sort?A.sort():[A]),Ns(Y)}}(D):(D instanceof IDBTransaction&&function Bl(D){if(sl.has(D))return;const A=new Promise((O,Y)=>{const ce=()=>{D.removeEventListener("complete",Pe),D.removeEventListener("error",Je),D.removeEventListener("abort",Je)},Pe=()=>{O(),ce()},Je=()=>{Y(D.error||new DOMException("AbortError","AbortError")),ce()};D.addEventListener("complete",Pe),D.addEventListener("error",Je),D.addEventListener("abort",Je)});sl.set(D,A)}(D),rm(D,function sm(){return Nl||(Nl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,ol):D)}function Ns(D){if(D instanceof IDBRequest)return function yi(D){const A=new Promise((O,Y)=>{const ce=()=>{D.removeEventListener("success",Pe),D.removeEventListener("error",Je)},Pe=()=>{O(Ns(D.result)),ce()},Je=()=>{Y(D.error),ce()};D.addEventListener("success",Pe),D.addEventListener("error",Je)});return A.then(O=>{O instanceof IDBCursor&&Lu.set(O,D)}).catch(()=>{}),Mc.set(A,D),A}(D);if(Ac.has(D))return Ac.get(D);const A=Fu(D);return A!==D&&(Ac.set(D,A),Mc.set(A,D)),A}const es=D=>Mc.get(D);function Wd(D,A,{blocked:O,upgrade:Y,blocking:ce,terminated:Pe}={}){const Je=indexedDB.open(D,A),_t=Ns(Je);return Y&&Je.addEventListener("upgradeneeded",Ot=>{Y(Ns(Je.result),Ot.oldVersion,Ot.newVersion,Ns(Je.transaction))}),O&&Je.addEventListener("blocked",()=>O()),_t.then(Ot=>{Pe&&Ot.addEventListener("close",()=>Pe()),ce&&Ot.addEventListener("versionchange",()=>ce())}).catch(()=>{}),_t}function uo(D,{blocked:A}={}){const O=indexedDB.deleteDatabase(D);return A&&O.addEventListener("blocked",()=>A()),Ns(O).then(()=>{})}const Yd=["get","getKey","getAll","getAllKeys","count"],ra=["put","add","delete","clear"],kc=new Map;function al(D,A){var O;if(!(D instanceof IDBDatabase)||A in D||"string"!=typeof A)return;if(kc.get(A))return kc.get(A);const Y=A.replace(/FromIndex$/,""),ce=A!==Y,Pe=ra.includes(Y);if(!(Y in(ce?IDBIndex:IDBObjectStore).prototype)||!Pe&&!Yd.includes(Y))return;const Je=function(Ot){return(O=O||(0,B.Z)(function*(tn,...yn){const Tn=this.transaction(tn,Pe?"readwrite":"readonly");let ni=Tn.store;return ce&&(ni=ni.index(yn.shift())),(yield Promise.all([ni[Y](...yn),Pe&&Tn.done]))[0]})).apply(this,arguments)};return kc.set(A,Je),Je}var qn,Nu,qd,Rc,Kd,Zd,Bu,Ul,Io,ut,si,Xd,Qd,ts,Jd,$l,ns,Uu,$u,Vl;!function us(D){ol=D(ol)}(D=>({...D,get:(A,O,Y)=>al(A,O)||D.get(A,O,Y),has:(A,O)=>!!al(A,O)||D.has(A,O)}));const or="/firebase-messaging-sw.js",ds="/firebase-cloud-messaging-push-scope",ho="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zl="https://fcmregistrations.googleapis.com/v1",Uo="google.c.a.c_id",eh="google.c.a.c_l",Vu="google.c.a.ts",jl="google.c.a.e";var fo=(()=>{return(D=fo||(fo={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",fo;var D})();function qs(D){const A=new Uint8Array(D);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oc(D){const O=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Y=atob(O),ce=new Uint8Array(Y.length);for(let Pe=0;Pe<Y.length;++Pe)ce[Pe]=Y.charCodeAt(Pe);return ce}const ys="fcm_token_details_db",lm=5,th="fcm_token_object_Store",ih="firebase-messaging-database",cm=1,$o="firebase-messaging-store";let Aa=null;function Pc(){return Aa||(Aa=Wd(ih,cm,{upgrade:(D,A)=>{0===A&&D.createObjectStore($o)}})),Aa}function rh(D){return(Nu=Nu||(0,B.Z)(function*(A){const O=tr(A),ce=yield(yield Pc()).transaction($o).objectStore($o).get(O);if(ce)return ce;{const Pe=yield function Gl(D){return(qn=qn||(0,B.Z)(function*(A){var O;if("databases"in indexedDB&&!(yield indexedDB.databases()).map(_t=>_t.name).includes(ys))return null;let Y=null;return(yield Wd(ys,lm,{upgrade:function(Je,_t,Ot,tn){return(O=O||(0,B.Z)(function*(yn,Tn,ni,Cn){var Yi;if(Tn<2||!yn.objectStoreNames.contains(th))return;const vs=Cn.objectStore(th),gr=yield vs.index("fcmSenderId").get(A);if(yield vs.clear(),gr)if(2===Tn){const Qn=gr;if(!Qn.auth||!Qn.p256dh||!Qn.endpoint)return;Y={token:Qn.fcmToken,createTime:null!==(Yi=Qn.createTime)&&void 0!==Yi?Yi:Date.now(),subscriptionOptions:{auth:Qn.auth,p256dh:Qn.p256dh,endpoint:Qn.endpoint,swScope:Qn.swScope,vapidKey:"string"==typeof Qn.vapidKey?Qn.vapidKey:qs(Qn.vapidKey)}}}else if(3===Tn){const Qn=gr;Y={token:Qn.fcmToken,createTime:Qn.createTime,subscriptionOptions:{auth:qs(Qn.auth),p256dh:qs(Qn.p256dh),endpoint:Qn.endpoint,swScope:Qn.swScope,vapidKey:qs(Qn.vapidKey)}}}else if(4===Tn){const Qn=gr;Y={token:Qn.fcmToken,createTime:Qn.createTime,subscriptionOptions:{auth:qs(Qn.auth),p256dh:qs(Qn.p256dh),endpoint:Qn.endpoint,swScope:Qn.swScope,vapidKey:qs(Qn.vapidKey)}}}})).apply(this,arguments)}})).close(),yield uo(ys),yield uo("fcm_vapid_details_db"),yield uo("undefined"),function nh(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:A}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}(Y)?Y:null})).apply(this,arguments)}(A.appConfig.senderId);if(Pe)return yield Er(A,Pe),Pe}})).apply(this,arguments)}function Er(D,A){return(qd=qd||(0,B.Z)(function*(O,Y){const ce=tr(O),Je=(yield Pc()).transaction($o,"readwrite");return yield Je.objectStore($o).put(Y,ce),yield Je.done,Y})).apply(this,arguments)}function tr({appConfig:D}){return D.appId}const hs=new Ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Wl(D,A){return(Kd=Kd||(0,B.Z)(function*(O,Y){const ce=yield Yl(O),Pe=Lc(Y),Je={method:"POST",headers:ce,body:JSON.stringify(Pe)};let _t;try{_t=yield(yield fetch(Ma(O.appConfig),Je)).json()}catch(Ot){throw hs.create("token-subscribe-failed",{errorInfo:Ot?.toString()})}if(_t.error)throw hs.create("token-subscribe-failed",{errorInfo:_t.error.message});if(!_t.token)throw hs.create("token-subscribe-no-token");return _t.token})).apply(this,arguments)}function Hu(D,A){return(Bu=Bu||(0,B.Z)(function*(O,Y){const Pe={method:"DELETE",headers:yield Yl(O)};try{const _t=yield(yield fetch(`${Ma(O.appConfig)}/${Y}`,Pe)).json();if(_t.error)throw hs.create("token-unsubscribe-failed",{errorInfo:_t.error.message})}catch(Je){throw hs.create("token-unsubscribe-failed",{errorInfo:Je?.toString()})}})).apply(this,arguments)}function Ma({projectId:D}){return`${zl}/projects/${D}/registrations`}function Yl(D){return(Ul=Ul||(0,B.Z)(function*({appConfig:A,installations:O}){const Y=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${Y}`})})).apply(this,arguments)}function Lc({p256dh:D,auth:A,endpoint:O,vapidKey:Y}){const ce={web:{endpoint:O,auth:A,p256dh:D}};return Y!==ho&&(ce.web.applicationPubKey=Y),ce}const zu=6048e5;function Fc(D){return(Io=Io||(0,B.Z)(function*(A){const O=yield function oa(D,A){return(Qd=Qd||(0,B.Z)(function*(O,Y){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oc(Y)})})).apply(this,arguments)}(A.swRegistration,A.vapidKey),Y={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:O.endpoint,auth:qs(O.getKey("auth")),p256dh:qs(O.getKey("p256dh"))},ce=yield rh(A.firebaseDependencies);if(ce){if(function dm(D,A){return A.vapidKey===D.vapidKey&&A.endpoint===D.endpoint&&A.auth===D.auth&&A.p256dh===D.p256dh}(ce.subscriptionOptions,Y))return Date.now()>=ce.createTime+zu?function Kl(D,A){return(si=si||(0,B.Z)(function*(O,Y){try{const ce=yield function sh(D,A){return(Zd=Zd||(0,B.Z)(function*(O,Y){const ce=yield Yl(O),Pe=Lc(Y.subscriptionOptions),Je={method:"PATCH",headers:ce,body:JSON.stringify(Pe)};let _t;try{_t=yield(yield fetch(`${Ma(O.appConfig)}/${Y.token}`,Je)).json()}catch(Ot){throw hs.create("token-update-failed",{errorInfo:Ot?.toString()})}if(_t.error)throw hs.create("token-update-failed",{errorInfo:_t.error.message});if(!_t.token)throw hs.create("token-update-no-token");return _t.token})).apply(this,arguments)}(O.firebaseDependencies,Y),Pe=Object.assign(Object.assign({},Y),{token:ce,createTime:Date.now()});return yield Er(O.firebaseDependencies,Pe),ce}catch(ce){throw yield function ql(D){return(ut=ut||(0,B.Z)(function*(A){const O=yield rh(A.firebaseDependencies);O&&(yield Hu(A.firebaseDependencies,O.token),yield function sa(D){return(Rc=Rc||(0,B.Z)(function*(A){const O=tr(A),ce=(yield Pc()).transaction($o,"readwrite");yield ce.objectStore($o).delete(O),yield ce.done})).apply(this,arguments)}(A.firebaseDependencies));const Y=yield A.swRegistration.pushManager.getSubscription();return!Y||Y.unsubscribe()})).apply(this,arguments)}(O),ce}})).apply(this,arguments)}(A,{token:ce.token,createTime:Date.now(),subscriptionOptions:Y}):ce.token;try{yield Hu(A.firebaseDependencies,ce.token)}catch(Pe){console.warn(Pe)}return ka(A.firebaseDependencies,Y)}return ka(A.firebaseDependencies,Y)})).apply(this,arguments)}function ka(D,A){return(Xd=Xd||(0,B.Z)(function*(O,Y){const Pe={token:yield Wl(O,Y),createTime:Date.now(),subscriptionOptions:Y};return yield Er(O,Pe),Pe.token})).apply(this,arguments)}function oh(D){const A={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function ju(D,A){if(!A.notification)return;D.notification={};const O=A.notification.title;O&&(D.notification.title=O);const Y=A.notification.body;Y&&(D.notification.body=Y);const ce=A.notification.image;ce&&(D.notification.image=ce);const Pe=A.notification.icon;Pe&&(D.notification.icon=Pe)}(A,D),function vg(D,A){A.data&&(D.data=A.data)}(A,D),function hm(D,A){var O,Y,ce,Pe,Je;if(!(A.fcmOptions||null!==(O=A.notification)&&void 0!==O&&O.click_action))return;D.fcmOptions={};const _t=null!==(ce=null===(Y=A.fcmOptions)||void 0===Y?void 0:Y.link)&&void 0!==ce?ce:null===(Pe=A.notification)||void 0===Pe?void 0:Pe.click_action;_t&&(D.fcmOptions.link=_t);const Ot=null===(Je=A.fcmOptions)||void 0===Je?void 0:Je.analytics_label;Ot&&(D.fcmOptions.analyticsLabel=Ot)}(A,D),A}function Nc(D,A){const O=[];for(let Y=0;Y<D.length;Y++)O.push(D.charAt(Y)),Y<A.length&&O.push(A.charAt(Y));return O.join("")}function ll(D){return hs.create("missing-app-config-values",{valueName:D})}Nc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Nc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Wu{constructor(A,O,Y){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ce=function Gu(D){if(!D||!D.options)throw ll("App Configuration Object");if(!D.name)throw ll("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:O}=D;for(const Y of A)if(!O[Y])throw ll(Y);return{appName:D.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:ce,installations:O,analyticsProvider:Y}}_delete(){return Promise.resolve()}}function Zl(D,A){return(ns=ns||(0,B.Z)(function*(O,Y){if(!navigator)throw hs.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw hs.create("permission-blocked");return yield function Vo(D,A){return($l=$l||(0,B.Z)(function*(O,Y){Y?O.vapidKey=Y:O.vapidKey||(O.vapidKey=ho)})).apply(this,arguments)}(O,Y?.vapidKey),yield function Ra(D,A){return(Jd=Jd||(0,B.Z)(function*(O,Y){if(!Y&&!O.swRegistration&&(yield function aa(D){return(ts=ts||(0,B.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(or,{scope:ds}),A.swRegistration.update().catch(()=>{})}catch(O){throw hs.create("failed-service-worker-registration",{browserErrorMessage:O?.message})}})).apply(this,arguments)}(O)),Y||!O.swRegistration){if(!(Y instanceof ServiceWorkerRegistration))throw hs.create("invalid-sw-registration");O.swRegistration=Y}})).apply(this,arguments)}(O,Y?.serviceWorkerRegistration),Fc(O)})).apply(this,arguments)}function Bc(D,A){return($u=$u||(0,B.Z)(function*(O,Y){const ce=Y.data;if(!ce.isFirebaseMessaging)return;O.onMessageHandler&&ce.messageType===fo.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(oh(ce)):O.onMessageHandler.next(oh(ce)));const Pe=ce.data;(function fm(D){return"object"==typeof D&&!!D&&Uo in D})(Pe)&&"1"===Pe[jl]&&(yield function Xl(D,A,O){return(Uu=Uu||(0,B.Z)(function*(Y,ce,Pe){const Je=function mm(D){switch(D){case fo.NOTIFICATION_CLICKED:return"notification_open";case fo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(ce);(yield Y.firebaseDependencies.analyticsProvider.get()).logEvent(Je,{message_id:Pe[Uo],message_name:Pe[eh],message_time:Pe[Vu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}(O,ce.messageType,Pe))})).apply(this,arguments)}const Uc="@firebase/messaging",ev=D=>{const A=new Wu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>Bc(A,O)),A},pm=D=>{const A=D.getProvider("messaging").getImmediate();return{getToken:Y=>Zl(A,Y)}};function qu(){return(Vl=Vl||(0,B.Z)(function*(){try{yield(0,Ae.eu)()}catch{return!1}return typeof window<"u"&&(0,Ae.hl)()&&(0,Ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}var ca,Ku,Zu,$c,uh,Xu,Qu,Pa,hh;!function Yu(){(0,Ee._registerComponent)(new me.wA("messaging",ev,"PUBLIC")),(0,Ee._registerComponent)(new me.wA("messaging-internal",pm,"PRIVATE")),(0,Ee.registerVersion)(Uc,"0.12.4"),(0,Ee.registerVersion)(Uc,"0.12.4","esm2017")}();const ul="analytics",fh="firebase_id",mh="origin",dl=6e4,La="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jo="https://www.googletagmanager.com/gtag/js",Qi=new oe.Yd("@firebase/analytics"),xi=new Ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function hl(D){if(!D.startsWith(jo)){const A=xi.create("invalid-gtag-resource",{gtagURL:D});return Qi.warn(A.message),""}return D}function Vc(D){return Promise.all(D.map(A=>A.catch(O=>O)))}const yh=30,bm=new class vm{constructor(A={},O=1e3){this.throttleMetadata=A,this.intervalMillis=O}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,O){this.throttleMetadata[A]=O}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Hr(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function zc(D){return($c=$c||(0,B.Z)(function*(A,O=bm,Y){const{appId:ce,apiKey:Pe,measurementId:Je}=A.options;if(!ce)throw xi.create("no-app-id");if(!Pe){if(Je)return{measurementId:Je,appId:ce};throw xi.create("no-api-key")}const _t=O.getThrottleMetadata(ce)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ot=new wm;return setTimeout((0,B.Z)(function*(){Ot.abort()}),void 0!==Y?Y:dl),vh({appId:ce,apiKey:Pe,measurementId:Je},_t,Ot,O)})).apply(this,arguments)}function vh(D,A,O){return(uh=uh||(0,B.Z)(function*(Y,{throttleEndTimeMillis:ce,backoffCount:Pe},Je,_t=bm){var Ot;const{appId:tn,measurementId:yn}=Y;try{yield function So(D,A){return new Promise((O,Y)=>{const ce=Math.max(A-Date.now(),0),Pe=setTimeout(O,ce);D.addEventListener(()=>{clearTimeout(Pe),Y(xi.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(Je,ce)}catch(Tn){if(yn)return Qi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${Tn?.message}]`),{appId:tn,measurementId:yn};throw Tn}try{const Tn=yield function td(D){return(Zu=Zu||(0,B.Z)(function*(A){var O;const{appId:Y,apiKey:ce}=A,Pe={method:"GET",headers:Hr(ce)},Je=La.replace("{app-id}",Y),_t=yield fetch(Je,Pe);if(200!==_t.status&&304!==_t.status){let Ot="";try{const tn=yield _t.json();null!==(O=tn.error)&&void 0!==O&&O.message&&(Ot=tn.error.message)}catch{}throw xi.create("config-fetch-failed",{httpStatus:_t.status,responseMessage:Ot})}return _t.json()})).apply(this,arguments)}(Y);return _t.deleteThrottleMetadata(tn),Tn}catch(Tn){const ni=Tn;if(!function Fa(D){if(!(D instanceof Ae.ZR&&D.customData))return!1;const A=Number(D.customData.httpStatus);return 429===A||500===A||503===A||504===A}(ni)){if(_t.deleteThrottleMetadata(tn),yn)return Qi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${ni?.message}]`),{appId:tn,measurementId:yn};throw Tn}const Cn=503===Number(null===(Ot=ni?.customData)||void 0===Ot?void 0:Ot.httpStatus)?(0,Ae.$s)(Pe,_t.intervalMillis,yh):(0,Ae.$s)(Pe,_t.intervalMillis),Yi={throttleEndTimeMillis:Date.now()+Cn,backoffCount:Pe+1};return _t.setThrottleMetadata(tn,Yi),Qi.debug(`Calling attemptFetch again in ${Cn} millis`),vh(Y,Yi,Je,_t)}})).apply(this,arguments)}class wm{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let Jl,Hi;function As(D,A,O,Y,ce,Pe,Je){return(Pa=Pa||(0,B.Z)(function*(_t,Ot,tn,yn,Tn,ni,Cn){var Yi;const vs=zc(_t);vs.then(_o=>{tn[_o.measurementId]=_o.appId,_t.options.measurementId&&_o.measurementId!==_t.options.measurementId&&Qi.warn(`The measurement ID in the local Firebase config (${_t.options.measurementId}) does not match the measurement ID fetched from the server (${_o.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_o=>Qi.error(_o)),Ot.push(vs);const gr=function Ln(){return(Qu=Qu||(0,B.Z)(function*(){if(!(0,Ae.hl)())return Qi.warn(xi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ae.eu)()}catch(D){return Qi.warn(xi.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}().then(_o=>{if(_o)return yn.getId()}),[Qn,Tr]=yield Promise.all([vs,gr]);(function ed(D){const A=window.document.getElementsByTagName("script");for(const O of Object.values(A))if(O.src&&O.src.includes(jo)&&O.src.includes(D))return O;return null})(ni)||function Si(D,A){const O=function gh(D,A){let O;return window.trustedTypes&&(O=window.trustedTypes.createPolicy(D,A)),O}("firebase-js-sdk-policy",{createScriptURL:hl}),Y=document.createElement("script"),ce=`${jo}?l=${D}&id=${A}`;Y.src=O?O?.createScriptURL(ce):ce,Y.async=!0,document.head.appendChild(Y)}(ni,Qn.measurementId),Hi&&(Tn("consent","default",Hi),function Ds(D){Hi=D}(void 0)),Tn("js",new Date);const qo=null!==(Yi=Cn?.config)&&void 0!==Yi?Yi:{};return qo[mh]="firebase",qo.update=!0,null!=Tr&&(qo[fh]=Tr),Tn("config",Qn.measurementId,qo),Jl&&(Tn("set",Jl),function mn(D){Jl=D}(void 0)),Qn.measurementId})).apply(this,arguments)}class xm{constructor(A){this.app=A}_delete(){return delete Bs[this.app.options.appId],Promise.resolve()}}let Bs={},zr=[];const wh={};let Na,Ms,Wc="dataLayer",Yc="gtag",Ba=!1;function Tm(D,A,O){!function pn(){const D=[];if((0,Ae.ru)()&&D.push("This is a browser extension environment."),(0,Ae.zI)()||D.push("Cookies are not available."),D.length>0){const A=D.map((Y,ce)=>`(${ce+1}) ${Y}`).join(" "),O=xi.create("invalid-analytics-context",{errorInfo:A});Qi.warn(O.message)}}();const Y=D.options.appId;if(!Y)throw xi.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw xi.create("no-api-key");Qi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Bs[Y])throw xi.create("already-exists",{id:Y});if(!Ba){!function bg(D){let A=[];Array.isArray(window[D])?A=window[D]:window[D]=A}(Wc);const{wrappedGtag:Pe,gtagCore:Je}=function wg(D,A,O,Y,ce){let Pe=function(...Je){window[Y].push(arguments)};return window[ce]&&"function"==typeof window[ce]&&(Pe=window[ce]),window[ce]=function Hc(D,A,O,Y){var ce;return function Pe(Je){return(ce=ce||(0,B.Z)(function*(_t,...Ot){try{if("event"===_t){const[tn,yn]=Ot;yield function _h(D,A,O,Y,ce){return(Ku=Ku||(0,B.Z)(function*(Pe,Je,_t,Ot,tn){try{let yn=[];if(tn&&tn.send_to){let Tn=tn.send_to;Array.isArray(Tn)||(Tn=[Tn]);const ni=yield Vc(_t);for(const Cn of Tn){const Yi=ni.find(gr=>gr.measurementId===Cn),vs=Yi&&Je[Yi.appId];if(!vs){yn=[];break}yn.push(vs)}}0===yn.length&&(yn=Object.values(Je)),yield Promise.all(yn),Pe("event",Ot,tn||{})}catch(yn){Qi.error(yn)}})).apply(this,arguments)}(D,A,O,tn,yn)}else if("config"===_t){const[tn,yn]=Ot;yield function ym(D,A,O,Y,ce,Pe){return(ca=ca||(0,B.Z)(function*(Je,_t,Ot,tn,yn,Tn){const ni=tn[yn];try{if(ni)yield _t[ni];else{const Yi=(yield Vc(Ot)).find(vs=>vs.measurementId===yn);Yi&&(yield _t[Yi.appId])}}catch(Cn){Qi.error(Cn)}Je("config",yn,Tn)})).apply(this,arguments)}(D,A,O,Y,tn,yn)}else if("consent"===_t){const[tn]=Ot;D("consent","update",tn)}else if("get"===_t){const[tn,yn,Tn]=Ot;D("get",tn,yn,Tn)}else if("set"===_t){const[tn]=Ot;D("set",tn)}else D(_t,...Ot)}catch(tn){Qi.error(tn)}})).apply(this,arguments)}}(Pe,D,A,O),{gtagCore:Pe,wrappedGtag:window[ce]}}(Bs,zr,wh,Wc,Yc);Ms=Pe,Na=Je,Ba=!0}return Bs[Y]=As(D,zr,wh,A,Na,Wc,O),new xm(D)}function Ua(){return(hh=hh||(0,B.Z)(function*(){if((0,Ae.ru)()||!(0,Ae.zI)()||!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch{return!1}})).apply(this,arguments)}const mo="@firebase/analytics";!function ic(){(0,Ee._registerComponent)(new me.wA(ul,(A,{options:O})=>Tm(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,Ee._registerComponent)(new me.wA("analytics-internal",function D(A){try{const O=A.getProvider(ul).getImmediate();return{logEvent:(Y,ce,Pe)=>function Tg(D,A,O,Y){D=(0,Ae.m9)(D),function jc(D,A,O,Y,ce){return(Xu=Xu||(0,B.Z)(function*(Pe,Je,_t,Ot,tn){if(tn&&tn.global)Pe("event",_t,Ot);else{const yn=yield Je;Pe("event",_t,Object.assign(Object.assign({},Ot),{send_to:yn}))}})).apply(this,arguments)}(Ms,Bs[D.app.options.appId],A,O,Y).catch(ce=>Qi.error(ce))}(O,Y,ce,Pe)}}catch(O){throw xi.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,Ee.registerVersion)(mo,"0.10.0"),(0,Ee.registerVersion)(mo,"0.10.0","esm2017")}();var Do=F(4408),$s=F(7565);const xr=new class Xs extends $s.v{}(class ml extends Do.o{constructor(A,O){super(A,O),this.scheduler=A,this.work=O}schedule(A,O=0){return O>0?super.schedule(A,O):(this.delay=O,this.state=A,this.scheduler.flush(this),this)}execute(A,O){return O>0||this.closed?super.execute(A,O):this._execute(A,O)}requestAsyncId(A,O,Y=0){return null!=Y&&Y>0||null==Y&&this.delay>0?super.requestAsyncId(A,O,Y):(A.flush(this),0)}});var Eh=F(4986),nr=F(9751),Mr=F(8505),ks=F(9468),Di=F(5363);const kr=new a.GfV("7.6.1"),rc="__angularfire_symbol__analyticsIsSupportedValue",id="__angularfire_symbol__analyticsIsSupported",$a="__angularfire_symbol__remoteConfigIsSupportedValue",po="__angularfire_symbol__remoteConfigIsSupported",Go="__angularfire_symbol__messagingIsSupportedValue",ur="__angularfire_symbol__messagingIsSupported";function Jc(D,A,O){if(A){if(1===A.length)return A[0];const Pe=A.filter(Je=>Je.app===O);if(1===Pe.length)return Pe[0]}return O.container.getProvider(D).getImmediate({optional:!0})}globalThis[id]||(globalThis[id]=Ua().then(D=>globalThis[rc]=D).catch(()=>globalThis[rc]=!1)),globalThis[ur]||(globalThis[ur]=qu().then(D=>globalThis[Go]=D).catch(()=>globalThis[Go]=!1)),globalThis[po]||(globalThis[po]=Pu().then(D=>globalThis[$a]=D).catch(()=>globalThis[$a]=!1));const xh=(D,A)=>{const O=A?[A]:(0,K.C6)(),Y=[];return O.forEach(ce=>{ce.container.getProvider(D).instances.forEach(Je=>{Y.includes(Je)||Y.push(Je)})}),Y};function Ao(){}class pl{constructor(A,O=xr){this.zone=A,this.delegate=O}now(){return this.delegate.now()}schedule(A,O,Y){const ce=this.zone;return this.delegate.schedule(function(Je){ce.runGuarded(()=>{A.apply(this,[Je])})},O,Y)}}class Fn{constructor(A){this.zone=A,this.task=null}call(A,O){const Y=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ao,{},Ao,Ao)),O.pipe((0,Mr.b)({next:Y,complete:Y,error:Y})).subscribe(A).add(Y)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gl=(()=>{class D{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new pl(Zone.current)),this.insideAngular=O.run(()=>new pl(Zone.current,Eh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(O){return new(O||D)(a.LFG(a.R0b))},D.\u0275prov=a.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Va(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ua(D){return Va().ngZone.run(()=>D())}function rd(D){return Va(),function Ch(D){return function(O){return(O=O.lift(new Fn(D.ngZone))).pipe((0,ks.R)(D.outsideAngular),(0,Di.Q)(D.insideAngular))}}(Va())(D)}const sd=(D,A)=>function(){const Y=arguments;return A&&setTimeout(()=>{"scheduled"===A.state&&A.invoke()},10),ua(()=>D.apply(void 0,Y))},Ig=(D,A)=>function(){let O;const Y=arguments;for(let Pe=0;Pe<arguments.length;Pe++)"function"==typeof Y[Pe]&&(A&&(O||(O=ua(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ao,{},Ao,Ao)))),Y[Pe]=sd(Y[Pe],O));const ce=function Wo(D){return Va().ngZone.runOutsideAngular(()=>D())}(()=>D.apply(this,Y));if(!A){if(ce instanceof nr.y){const Pe=Va();return ce.pipe((0,ks.R)(Pe.outsideAngular),(0,Di.Q)(Pe.insideAngular))}return ua(()=>ce)}return ce instanceof nr.y?ce.pipe(rd):ce instanceof Promise?ua(()=>new Promise((Pe,Je)=>ce.then(_t=>ua(()=>Pe(_t)),_t=>ua(()=>Je(_t))))):"function"==typeof ce&&O?function(){return setTimeout(()=>{O&&"scheduled"===O.state&&O.invoke()},10),ce.apply(this,arguments)}:ua(()=>ce)}},1389:(jt,Ze,F)=>{"use strict";F.d(Ze,{$:()=>Er,A:()=>Wn,D:()=>_i,I:()=>Gd,J:()=>uo,L:()=>si,N:()=>Tc,P:()=>Cm,Q:()=>Hl,R:()=>Wc,U:()=>zl,V:()=>Uo,W:()=>eh,X:()=>ho,Y:()=>fo,Z:()=>qs,_:()=>th,a:()=>dl,a0:()=>sa,a1:()=>tr,a2:()=>hs,a3:()=>Yl,a4:()=>Lc,a5:()=>zu,a6:()=>Fc,a7:()=>ql,a8:()=>Kl,a9:()=>ka,aA:()=>Et,aB:()=>ur,aC:()=>mr,aD:()=>Fs,aE:()=>$a,aF:()=>xr,aG:()=>Xs,aH:()=>yi,aL:()=>Qi,aO:()=>jl,aa:()=>oa,ab:()=>dm,ac:()=>oh,ad:()=>vg,ae:()=>hm,af:()=>fm,ai:()=>Gu,aj:()=>ll,ak:()=>Wu,an:()=>cm,ao:()=>cl,aq:()=>Ku,ar:()=>_m,as:()=>wr,at:()=>Ru,au:()=>Ic,av:()=>fn,aw:()=>ni,ax:()=>Qc,ay:()=>Fl,az:()=>gn,b:()=>fh,c:()=>qc,d:()=>nc,e:()=>Tg,f:()=>nr,g:()=>kr,h:()=>ks,i:()=>Fa,j:()=>id,k:()=>gr,l:()=>Ba,m:()=>qo,o:()=>Ih,p:()=>Ut,r:()=>ec,s:()=>Ms,u:()=>Tm});var oe,_e,Me,ie,X,se,be,xe,ke,Ue,te,le,ue,Be,Ce,Ne,Le,$e,Z,he,ve,Te,Ye,rt,Qe,on,vt,$t,Fe,G,Q,de,fe,Xe,He,kt,Tt,Rt,Vt,vn,zn,Bn,Zt,Gt,Wt,lt,Ct,at,st,Dn,mi,bn,ai,In,Zn,Rn,Xt,Ui,Ti,Mi,Xi,$i,os,bi,Ii,$n,hr,ri,Sr,rr,fr,Xr,Ji,_s,as,ge,re,z,j,$,pe,a=F(5861),K=F(2090),B=F(6881),Ee=F(7582),Ae=F(1877),me=F(4859);const Ut={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Wn={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const _i=function xn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Qr=function Ci(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Jr=new K.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ze=new Ae.Yd("@firebase/auth");function hn(M,...v){ze.logLevel<=Ae.in.ERROR&&ze.error(`Auth (${B.SDK_VERSION}): ${M}`,...v)}function fn(M,...v){throw Yn(M,...v)}function gn(M,...v){return Yn(M,...v)}function _n(M,v,b){const T=Object.assign(Object.assign({},Qr()),{[v]:b});return new K.LL("auth","Firebase",T).create(v,{appName:M.name})}function ci(M,v,b){if(!(v instanceof b))throw b.name!==v.constructor.name&&fn(M,"argument-error"),_n(M,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yn(M,...v){if("string"!=typeof M){const b=v[0],T=[...v.slice(1)];return T[0]&&(T[0].appName=M.name),M._errorFactory.create(b,...T)}return Jr.create(M,...v)}function Et(M,v,...b){if(!M)throw Yn(v,...b)}function Ai(M){const v="INTERNAL ASSERTION FAILED: "+M;throw hn(v),new Error(v)}function wr(M,v){M||Ai(v)}function Pi(){var M;return typeof self<"u"&&(null===(M=self.location)||void 0===M?void 0:M.href)||""}function oo(){return"http:"===ls()||"https:"===ls()}function ls(){var M;return typeof self<"u"&&(null===(M=self.location)||void 0===M?void 0:M.protocol)||null}class wi{constructor(v,b){this.shortDelay=v,this.longDelay=b,wr(b>v,"Short delay should be less than long delay!"),this.isMobile=(0,K.uI)()||(0,K.b$)()}get(){return function Kt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(oo()||(0,K.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ei(M,v){wr(M.emulator,"Emulator should always be set here");const{url:b}=M.emulator;return v?`${b}${v.startsWith("/")?v.slice(1):v}`:b}class ti{static initialize(v,b,T){this.fetchImpl=v,b&&(this.headersImpl=b),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ao=new wi(3e4,6e4);function Xn(M,v){return M.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:M.tenantId}):v}function Vi(M,v,b,T){return(oe=oe||(0,a.Z)(function*(L,V,ne,we,qe={}){return sr(L,qe,(0,a.Z)(function*(){let yt={},An={};we&&("GET"===V?An=we:yt={body:JSON.stringify(we)});const wn=(0,K.xO)(Object.assign({key:L.config.apiKey},An)).slice(1),On=yield L._getAdditionalHeaders();return On["Content-Type"]="application/json",L.languageCode&&(On["X-Firebase-Locale"]=L.languageCode),ti.fetch()(lo(L,L.config.apiHost,ne,wn),Object.assign({method:V,headers:On,referrerPolicy:"no-referrer"},yt))}))})).apply(this,arguments)}function sr(M,v,b){return(_e=_e||(0,a.Z)(function*(T,L,V){T._canInitEmulator=!1;const ne=Object.assign(Object.assign({},Dr),L);try{const we=new co(T),qe=yield Promise.race([V(),we.promise]);we.clearNetworkTimeout();const yt=yield qe.json();if("needConfirmation"in yt)throw Ls(T,"account-exists-with-different-credential",yt);if(qe.ok&&!("errorMessage"in yt))return yt;{const An=qe.ok?yt.errorMessage:yt.error.message,[wn,On]=An.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===wn)throw Ls(T,"credential-already-in-use",yt);if("EMAIL_EXISTS"===wn)throw Ls(T,"email-already-in-use",yt);if("USER_DISABLED"===wn)throw Ls(T,"user-disabled",yt);const Ri=ne[wn]||wn.toLowerCase().replace(/[_\s]+/g,"-");if(On)throw _n(T,Ri,On);fn(T,Ri)}}catch(we){if(we instanceof K.ZR)throw we;fn(T,"network-request-failed",{message:String(we)})}})).apply(this,arguments)}function Pn(M,v,b,T){return(Me=Me||(0,a.Z)(function*(L,V,ne,we,qe={}){const yt=yield Vi(L,V,ne,we,qe);return"mfaPendingCredential"in yt&&fn(L,"multi-factor-auth-required",{_serverResponse:yt}),yt})).apply(this,arguments)}function lo(M,v,b,T){const L=`${v}${b}?${T}`;return M.config.emulator?Ei(M.config,L):`${M.config.apiScheme}://${L}`}class co{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((b,T)=>{this.timer=setTimeout(()=>T(gn(this.auth,"network-request-failed")),ao.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ls(M,v,b){const T={appName:M.name};b.email&&(T.email=b.email),b.phoneNumber&&(T.phoneNumber=b.phoneNumber);const L=gn(M,v,T);return L.customData._tokenResponse=b,L}function N(M){if(M)try{const v=new Date(Number(M));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}function Se(M){return 1e3*Number(M)}function We(M){const[v,b,T]=M.split(".");if(void 0===v||void 0===b||void 0===T)return hn("JWT malformed, contained fewer than 3 sections"),null;try{const L=(0,K.tV)(b);return L?JSON.parse(L):(hn("Failed to decode base64 JWT payload"),null)}catch(L){return hn("Caught error parsing JWT payload as JSON",L?.toString()),null}}function pt(M,v){return(xe=xe||(0,a.Z)(function*(b,T,L=!1){if(L)return T;try{return yield T}catch(V){throw V instanceof K.ZR&&function ct({code:M}){return"auth/user-disabled"===M||"auth/user-token-expired"===M}(V)&&b.auth.currentUser===b&&(yield b.auth.signOut()),V}})).apply(this,arguments)}class At{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var b;if(v){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const L=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,L)}}schedule(v=!1){var b=this;if(!this.isRunning)return;const T=this.getInterval(v);this.timerId=setTimeout((0,a.Z)(function*(){yield b.iteration()}),T)}iteration(){var v=this;return(0,a.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===b?.code&&v.schedule(!0))}v.schedule()})()}}class gt{constructor(v,b){this.createdAt=v,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=N(this.lastLoginAt),this.creationTime=N(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Lt(M){return(ke=ke||(0,a.Z)(function*(v){var b;const T=v.auth,L=yield v.getIdToken(),V=yield pt(v,function Qt(M,v){return(se=se||(0,a.Z)(function*(b,T){return Vi(b,"POST","/v1/accounts:lookup",T)})).apply(this,arguments)}(T,{idToken:L}));Et(V?.users.length,T,"internal-error");const ne=V.users[0];v._notifyReloadListener(ne);const we=null!==(b=ne.providerUserInfo)&&void 0!==b&&b.length?function Sn(M){return M.map(v=>{var{providerId:b}=v,T=(0,Ee._T)(v,["providerId"]);return{providerId:b,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}(ne.providerUserInfo):[],qe=function Yt(M,v){return[...M.filter(T=>!v.some(L=>L.providerId===T.providerId)),...v]}(v.providerData,we),wn=!!v.isAnonymous&&!(v.email&&ne.passwordHash||qe?.length),On={uid:ne.localId,displayName:ne.displayName||null,photoURL:ne.photoUrl||null,email:ne.email||null,emailVerified:ne.emailVerified||!1,phoneNumber:ne.phoneNumber||null,tenantId:ne.tenantId||null,providerData:qe,metadata:new gt(ne.createdAt,ne.lastLoginAt),isAnonymous:wn};Object.assign(v,On)})).apply(this,arguments)}class er{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){Et(v.idToken,"internal-error"),Et(typeof v.idToken<"u","internal-error"),Et(typeof v.refreshToken<"u","internal-error");const b="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function Ve(M){const v=We(M);return Et(v,"internal-error"),Et(typeof v.exp<"u","internal-error"),Et(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,b)}getToken(v,b=!1){var T=this;return(0,a.Z)(function*(){return Et(!T.accessToken||T.refreshToken,v,"user-token-expired"),b||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(v,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,b){var T=this;return(0,a.Z)(function*(){const{accessToken:L,refreshToken:V,expiresIn:ne}=yield function ki(M,v){return(te=te||(0,a.Z)(function*(b,T){const L=yield sr(b,{},(0,a.Z)(function*(){const V=(0,K.xO)({grant_type:"refresh_token",refresh_token:T}).slice(1),{tokenApiHost:ne,apiKey:we}=b.config,qe=lo(b,ne,"/v1/token",`key=${we}`),yt=yield b._getAdditionalHeaders();return yt["Content-Type"]="application/x-www-form-urlencoded",ti.fetch()(qe,{method:"POST",headers:yt,body:V})}));return{accessToken:L.access_token,expiresIn:L.expires_in,refreshToken:L.refresh_token}})).apply(this,arguments)}(v,b);T.updateTokensAndExpiration(L,V,Number(ne))})()}updateTokensAndExpiration(v,b,T){this.refreshToken=b||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(v,b){const{refreshToken:T,accessToken:L,expirationTime:V}=b,ne=new er;return T&&(Et("string"==typeof T,"internal-error",{appName:v}),ne.refreshToken=T),L&&(Et("string"==typeof L,"internal-error",{appName:v}),ne.accessToken=L),V&&(Et("number"==typeof V,"internal-error",{appName:v}),ne.expirationTime=V),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new er,this.toJSON())}_performRefresh(){return Ai("not implemented")}}function Wi(M,v){Et("string"==typeof M||typeof M>"u","internal-error",{appName:v})}class Zi{constructor(v){var{uid:b,auth:T,stsTokenManager:L}=v,V=(0,Ee._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new At(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=T,this.stsTokenManager=L,this.accessToken=L.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.providerData=V.providerData?[...V.providerData]:[],this.metadata=new gt(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(v){var b=this;return(0,a.Z)(function*(){const T=yield pt(b,b.stsTokenManager.getToken(b.auth,v));return Et(T,b.auth,"internal-error"),b.accessToken!==T&&(b.accessToken=T,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),T})()}getIdTokenResult(v){return function Oe(M){return(be=be||(0,a.Z)(function*(v,b=!1){const T=(0,K.m9)(v),L=yield T.getIdToken(b),V=We(L);Et(V&&V.exp&&V.auth_time&&V.iat,T.auth,"internal-error");const ne="object"==typeof V.firebase?V.firebase:void 0,we=ne?.sign_in_provider;return{claims:V,token:L,authTime:N(Se(V.auth_time)),issuedAtTime:N(Se(V.iat)),expirationTime:N(Se(V.exp)),signInProvider:we||null,signInSecondFactor:ne?.sign_in_second_factor||null}})).apply(this,arguments)}(this,v)}reload(){return function Bt(M){return(Ue=Ue||(0,a.Z)(function*(v){const b=(0,K.m9)(v);yield Lt(b),yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)})).apply(this,arguments)}(this)}_assign(v){this!==v&&(Et(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(b=>Object.assign({},b)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const b=new Zi(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}));return b.metadata._copy(this.metadata),b}_onReload(v){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,b=!1){var T=this;return(0,a.Z)(function*(){let L=!1;v.idToken&&v.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(v),L=!0),b&&(yield Lt(T)),yield T.auth._persistUserIfCurrent(T),L&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var v=this;return(0,a.Z)(function*(){const b=yield v.getIdToken();return yield pt(v,function Ge(M,v){return(ie=ie||(0,a.Z)(function*(b,T){return Vi(b,"POST","/v1/accounts:delete",T)})).apply(this,arguments)}(v.auth,{idToken:b})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,b){var T,L,V,ne,we,qe,yt,An;const wn=null!==(T=b.displayName)&&void 0!==T?T:void 0,On=null!==(L=b.email)&&void 0!==L?L:void 0,Ri=null!==(V=b.phoneNumber)&&void 0!==V?V:void 0,is=null!==(ne=b.photoURL)&&void 0!==ne?ne:void 0,yo=null!==(we=b.tenantId)&&void 0!==we?we:void 0,rs=null!==(qe=b._redirectEventId)&&void 0!==qe?qe:void 0,ac=null!==(yt=b.createdAt)&&void 0!==yt?yt:void 0,Sh=null!==(An=b.lastLoginAt)&&void 0!==An?An:void 0,{uid:od,emailVerified:yl,isAnonymous:Dh,providerData:Ah,stsTokenManager:iu}=b;Et(od&&iu,v,"internal-error");const Mh=er.fromJSON(this.name,iu);Et("string"==typeof od,v,"internal-error"),Wi(wn,v.name),Wi(On,v.name),Et("boolean"==typeof yl,v,"internal-error"),Et("boolean"==typeof Dh,v,"internal-error"),Wi(Ri,v.name),Wi(is,v.name),Wi(yo,v.name),Wi(rs,v.name),Wi(ac,v.name),Wi(Sh,v.name);const ru=new Zi({uid:od,auth:v,email:On,emailVerified:yl,displayName:wn,isAnonymous:Dh,photoURL:is,phoneNumber:Ri,tenantId:yo,stsTokenManager:Mh,createdAt:ac,lastLoginAt:Sh});return Ah&&Array.isArray(Ah)&&(ru.providerData=Ah.map(vl=>Object.assign({},vl))),rs&&(ru._redirectEventId=rs),ru}static _fromIdTokenResponse(v,b,T=!1){return(0,a.Z)(function*(){const L=new er;L.updateFromServerResponse(b);const V=new Zi({uid:b.localId,auth:v,stsTokenManager:L,isAnonymous:T});return yield Lt(V),V})()}}const cs=new Map;function mr(M){wr(M instanceof Function,"Expected a class definition");let v=cs.get(M);return v?(wr(v instanceof M,"Instance stored in cache mismatched with class"),v):(v=new M,cs.set(M,v),v)}const Tc=(()=>{class M{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(b,T){var L=this;return(0,a.Z)(function*(){L.storage[b]=T})()}_get(b){var T=this;return(0,a.Z)(function*(){const L=T.storage[b];return void 0===L?null:L})()}_remove(b){var T=this;return(0,a.Z)(function*(){delete T.storage[b]})()}_addListener(b,T){}_removeListener(b,T){}}return M.type="NONE",M})();function Fs(M,v,b){return`firebase:${M}:${v}:${b}`}class Cc{constructor(v,b,T){this.persistence=v,this.auth=b,this.userKey=T;const{config:L,name:V}=this.auth;this.fullUserKey=Fs(this.userKey,L.apiKey,V),this.fullPersistenceKey=Fs("persistence",L.apiKey,V),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,a.Z)(function*(){const b=yield v.persistence._get(v.fullUserKey);return b?Zi._fromJSON(v.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var b=this;return(0,a.Z)(function*(){if(b.persistence===v)return;const T=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=v,T?b.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,b,T="authUser"){return(0,a.Z)(function*(){var L,V;if(!b.length)return new Cc(mr(Tc),v,T);const ne=(yield Promise.all(b.map(function(wn){return(L=L||(0,a.Z)(function*(On){if(yield On._isAvailable())return On})).apply(this,arguments)}))).filter(wn=>wn);let we=ne[0]||mr(Tc);const qe=Fs(T,v.config.apiKey,v.name);let yt=null;for(const wn of b)try{const On=yield wn._get(qe);if(On){const Ri=Zi._fromJSON(v,On);wn!==we&&(yt=Ri),we=wn;break}}catch{}const An=ne.filter(wn=>wn._shouldAllowMigration);return we._shouldAllowMigration&&An.length?(we=An[0],yt&&(yield we._set(qe,yt.toJSON())),yield Promise.all(b.map(function(wn){return(V=V||(0,a.Z)(function*(On){if(On!==we)try{yield On._remove(qe)}catch{}})).apply(this,arguments)})),new Cc(we,v,T)):new Cc(we,v,T)})()}}function Qf(M){const v=M.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(em(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(Hd(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(ku(v))return"Blackberry";if(_g(v))return"Webos";if(zd(v))return"Safari";if((v.includes("chrome/")||Jf(v))&&!v.includes("edge/"))return"Chrome";if(Ic(v))return"Android";{const T=M.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function Hd(M=(0,K.z$)()){return/firefox\//i.test(M)}function zd(M=(0,K.z$)()){const v=M.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function Jf(M=(0,K.z$)()){return/crios\//i.test(M)}function em(M=(0,K.z$)()){return/iemobile/i.test(M)}function Ic(M=(0,K.z$)()){return/android/i.test(M)}function ku(M=(0,K.z$)()){return/blackberry/i.test(M)}function _g(M=(0,K.z$)()){return/webos/i.test(M)}function Ru(M=(0,K.z$)()){return/iphone|ipad|ipod/i.test(M)||/macintosh/i.test(M)&&/mobile/i.test(M)}function Fl(M=(0,K.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(M)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(M)}function Ou(M=(0,K.z$)()){return Ru(M)||Ic(M)||_g(M)||ku(M)||/windows phone/i.test(M)||em(M)}function tm(M,v=[]){let b;switch(M){case"Browser":b=Qf((0,K.z$)());break;case"Worker":b=`${Qf((0,K.z$)())}-${M}`;break;default:b=M}const T=v.length?v.join(","):"FirebaseCore-web";return`${b}/JsCore/${B.SDK_VERSION}/${T}`}function Da(M,v){return(ue=ue||(0,a.Z)(function*(b,T){return Vi(b,"GET","/v2/recaptchaConfig",Xn(b,T))})).apply(this,arguments)}function im(M){return void 0!==M&&void 0!==M.getResponse}function jd(M){return void 0!==M&&void 0!==M.enterprise}class Pu{constructor(v){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===v.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=v.recaptchaKey.split("/")[3],this.emailPasswordEnabled=v.recaptchaEnforcementState.some(b=>"EMAIL_PASSWORD_PROVIDER"===b.provider&&"OFF"!==b.enforcementState)}}function Nl(M){return new Promise((v,b)=>{const T=document.createElement("script");T.setAttribute("src",M),T.onload=v,T.onerror=L=>{const V=gn("internal-error");V.customData=L,b(V)},T.type="text/javascript",T.charset="UTF-8",function rm(){var M,v;return null!==(v=null===(M=document.getElementsByTagName("head"))||void 0===M?void 0:M[0])&&void 0!==v?v:document}().appendChild(T)})}function Dc(M){return`__${M}${Math.floor(1e6*Math.random())}`}const Lu="NO_RECAPTCHA";class sl{constructor(v){this.type="recaptcha-enterprise",this.auth=yi(v)}verify(v="verify",b=!1){var T=this;return(0,a.Z)(function*(){var L;function ne(we,qe,yt){const An=window.grecaptcha;jd(An)?An.enterprise.ready(()=>{An.enterprise.execute(we,{action:v}).then(wn=>{qe(wn)}).catch(()=>{qe(Lu)})}):yt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((we,qe)=>{(function V(we){return(L=L||(0,a.Z)(function*(qe){var yt;if(!b){if(null==qe.tenantId&&null!=qe._agentRecaptchaConfig)return qe._agentRecaptchaConfig.siteKey;if(null!=qe.tenantId&&void 0!==qe._tenantRecaptchaConfigs[qe.tenantId])return qe._tenantRecaptchaConfigs[qe.tenantId].siteKey}return new Promise(function(An,wn){return(yt=yt||(0,a.Z)(function*(On,Ri){Da(qe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(is=>{if(void 0!==is.recaptchaKey){const yo=new Pu(is);return null==qe.tenantId?qe._agentRecaptchaConfig=yo:qe._tenantRecaptchaConfigs[qe.tenantId]=yo,On(yo.siteKey)}Ri(new Error("recaptcha Enterprise site key undefined"))}).catch(is=>{Ri(is)})})).apply(this,arguments)})})).apply(this,arguments)})(T.auth).then(yt=>{if(!b&&jd(window.grecaptcha))ne(yt,we,qe);else{if(typeof window>"u")return void qe(new Error("RecaptchaVerifier is only supported in browser"));Nl("https://www.google.com/recaptcha/enterprise.js?render="+yt).then(()=>{ne(yt,we,qe)}).catch(An=>{qe(An)})}}).catch(yt=>{qe(yt)})})})()}}function Ar(M,v,b){return(Be=Be||(0,a.Z)(function*(T,L,V,ne=!1){const we=new sl(T);let qe;try{qe=yield we.verify(V)}catch{qe=yield we.verify(V,!0)}const yt=Object.assign({},L);return Object.assign(yt,ne?{captchaResp:qe}:{captchaResponse:qe}),Object.assign(yt,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(yt,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),yt})).apply(this,arguments)}class Ac{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,b){const T=V=>new Promise((ne,we)=>{try{ne(v(V))}catch(qe){we(qe)}});T.onAbort=b,this.queue.push(T);const L=this.queue.length-1;return()=>{this.queue[L]=()=>Promise.resolve()}}runMiddleware(v){var b=this;return(0,a.Z)(function*(){if(b.auth.currentUser===v)return;const T=[];try{for(const L of b.queue)yield L(v),L.onAbort&&T.push(L.onAbort)}catch(L){T.reverse();for(const V of T)try{V()}catch{}throw b.auth._errorFactory.create("login-blocked",{originalMessage:L?.message})}})()}}class Mc{constructor(v,b,T,L){this.app=v,this.heartbeatServiceProvider=b,this.appCheckServiceProvider=T,this.config=L,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bl(this),this.idTokenSubscription=new Bl(this),this.beforeStateQueue=new Ac(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=L.sdkClientVersion}_initializeWithPersistence(v,b){var T=this;return b&&(this._popupRedirectResolver=mr(b)),this._initializationPromise=this.queue((0,a.Z)(function*(){var L,V;if(!T._deleted&&(T.persistenceManager=yield Cc.create(T,v),!T._deleted)){if(null!==(L=T._popupRedirectResolver)&&void 0!==L&&L._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(b),T.lastNotifiedUid=(null===(V=T.currentUser)||void 0===V?void 0:V.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,a.Z)(function*(){if(v._deleted)return;const b=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||b){if(v.currentUser&&b&&v.currentUser.uid===b.uid)return v._currentUser._assign(b),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(b,!0)}})()}initializeCurrentUser(v){var b=this;return(0,a.Z)(function*(){var T;const L=yield b.assertedPersistence.getCurrentUser();let V=L,ne=!1;if(v&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const we=null===(T=b.redirectUser)||void 0===T?void 0:T._redirectEventId,qe=V?._redirectEventId,yt=yield b.tryRedirectSignIn(v);(!we||we===qe)&&yt?.user&&(V=yt.user,ne=!0)}if(!V)return b.directlySetCurrentUser(null);if(!V._redirectEventId){if(ne)try{yield b.beforeStateQueue.runMiddleware(V)}catch(we){V=L,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(we))}return V?b.reloadAndSetCurrentUserOrClear(V):b.directlySetCurrentUser(null)}return Et(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===V._redirectEventId?b.directlySetCurrentUser(V):b.reloadAndSetCurrentUserOrClear(V)})()}tryRedirectSignIn(v){var b=this;return(0,a.Z)(function*(){let T=null;try{T=yield b._popupRedirectResolver._completeRedirectFn(b,v,!0)}catch{yield b._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(v){var b=this;return(0,a.Z)(function*(){try{yield Lt(v)}catch(T){if("auth/network-request-failed"!==T?.code)return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function jn(){if(typeof navigator>"u")return null;const M=navigator;return M.languages&&M.languages[0]||M.language||null}()}_delete(){var v=this;return(0,a.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var b=this;return(0,a.Z)(function*(){const T=v?(0,K.m9)(v):null;return T&&Et(T.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(T&&T._clone(b))})()}_updateCurrentUser(v,b=!1){var T=this;return(0,a.Z)(function*(){if(!T._deleted)return v&&Et(T.tenantId===v.tenantId,T,"tenant-id-mismatch"),b||(yield T.beforeStateQueue.runMiddleware(v)),T.queue((0,a.Z)(function*(){yield T.directlySetCurrentUser(v),T.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,a.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var b=this;return this.queue((0,a.Z)(function*(){yield b.assertedPersistence.setPersistence(mr(v))}))}initializeRecaptchaConfig(){var v=this;return(0,a.Z)(function*(){const b=yield Da(v,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),T=new Pu(b);null==v.tenantId?v._agentRecaptchaConfig=T:v._tenantRecaptchaConfigs[v.tenantId]=T,T.emailPasswordEnabled&&new sl(v).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new K.LL("auth","Firebase",v())}onAuthStateChanged(v,b,T){return this.registerStateListener(this.authStateSubscription,v,b,T)}beforeAuthStateChanged(v,b){return this.beforeStateQueue.pushCallback(v,b)}onIdTokenChanged(v,b,T){return this.registerStateListener(this.idTokenSubscription,v,b,T)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,b){var T=this;return(0,a.Z)(function*(){const L=yield T.getOrInitRedirectPersistenceManager(b);return null===v?L.removeCurrentUser():L.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var b=this;return(0,a.Z)(function*(){if(!b.redirectPersistenceManager){const T=v&&mr(v)||b._popupRedirectResolver;Et(T,b,"argument-error"),b.redirectPersistenceManager=yield Cc.create(b,[mr(T._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(v){var b=this;return(0,a.Z)(function*(){var T,L;return b._isInitialized&&(yield b.queue((0,a.Z)(function*(){}))),(null===(T=b._currentUser)||void 0===T?void 0:T._redirectEventId)===v?b._currentUser:(null===(L=b.redirectUser)||void 0===L?void 0:L._redirectEventId)===v?b.redirectUser:null})()}_persistUserIfCurrent(v){var b=this;return(0,a.Z)(function*(){if(v===b.currentUser)return b.queue((0,a.Z)(function*(){return b.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(b=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,b,T,L){if(this._deleted)return()=>{};const V="function"==typeof b?b:b.next.bind(b),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return Et(ne,this,"internal-error"),ne.then(()=>V(this.currentUser)),"function"==typeof b?v.addObserver(b,T,L):v.addObserver(b)}directlySetCurrentUser(v){var b=this;return(0,a.Z)(function*(){b.currentUser&&b.currentUser!==v&&b._currentUser._stopProactiveRefresh(),v&&b.isProactiveRefreshEnabled&&v._startProactiveRefresh(),b.currentUser=v,v?yield b.assertedPersistence.setCurrentUser(v):yield b.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=tm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,a.Z)(function*(){var b;const T={"X-Client-Version":v.clientVersion};v.app.options.appId&&(T["X-Firebase-gmpid"]=v.app.options.appId);const L=yield null===(b=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();L&&(T["X-Firebase-Client"]=L);const V=yield v._getAppCheckToken();return V&&(T["X-Firebase-AppCheck"]=V),T})()}_getAppCheckToken(){var v=this;return(0,a.Z)(function*(){var b;const T=yield null===(b=v.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getToken();return T?.error&&function Mt(M,...v){ze.logLevel<=Ae.in.WARN&&ze.warn(`Auth (${B.SDK_VERSION}): ${M}`,...v)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function yi(M){return(0,K.m9)(M)}class Bl{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,K.ne)(b=>this.observer=b)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Gd(M,v,b){const T=yi(M);Et(T._canInitEmulator,T,"emulator-config-failed"),Et(/^https?:\/\//.test(v),T,"invalid-emulator-scheme");const L=!!b?.disableWarnings,V=Fu(v),{host:ne,port:we}=function Ns(M){const v=Fu(M),b=/(\/\/)?([^?#/]+)/.exec(M.substr(v.length));if(!b)return{host:"",port:null};const T=b[2].split("@").pop()||"",L=/^(\[[^\]]+\])(:|$)/.exec(T);if(L){const V=L[1];return{host:V,port:es(T.substr(V.length+1))}}{const[V,ne]=T.split(":");return{host:V,port:es(ne)}}}(v);T.config.emulator={url:`${V}//${ne}${null===we?"":`:${we}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:ne,port:we,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:L})}),L||function Wd(){function M(){const v=document.createElement("p"),b=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",M):M())}()}function Fu(M){const v=M.indexOf(":");return v<0?"":M.substr(0,v+1)}function es(M){if(!M)return null;const v=Number(M);return isNaN(v)?null:v}class uo{constructor(v,b){this.providerId=v,this.signInMethod=b}toJSON(){return Ai("not implemented")}_getIdTokenResponse(v){return Ai("not implemented")}_linkToIdToken(v,b){return Ai("not implemented")}_getReauthenticationResolver(v){return Ai("not implemented")}}function Yd(M,v){return(Ce=Ce||(0,a.Z)(function*(b,T){return Vi(b,"POST","/v1/accounts:resetPassword",Xn(b,T))})).apply(this,arguments)}function ra(M,v){return(Ne=Ne||(0,a.Z)(function*(b,T){return Vi(b,"POST","/v1/accounts:update",T)})).apply(this,arguments)}function al(M,v){return($e=$e||(0,a.Z)(function*(b,T){return Pn(b,"POST","/v1/accounts:signInWithPassword",Xn(b,T))})).apply(this,arguments)}function qn(M,v){return(Z=Z||(0,a.Z)(function*(b,T){return Vi(b,"POST","/v1/accounts:sendOobCode",Xn(b,T))})).apply(this,arguments)}function qd(M,v){return(ve=ve||(0,a.Z)(function*(b,T){return qn(b,T)})).apply(this,arguments)}function Rc(M,v){return(Te=Te||(0,a.Z)(function*(b,T){return qn(b,T)})).apply(this,arguments)}class Ul extends uo{constructor(v,b,T,L=null){super("password",T),this._email=v,this._password=b,this._tenantId=L}static _fromEmailAndPassword(v,b){return new Ul(v,b,"password")}static _fromEmailAndCode(v,b,T=null){return new Ul(v,b,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v;if(b?.email&&b?.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(v){var b=this;return(0,a.Z)(function*(){var T;switch(b.signInMethod){case"password":const V={returnSecureToken:!0,email:b._email,password:b._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=v._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const ne=yield Ar(v,V,"signInWithPassword");return al(v,ne)}var L;return al(v,V).catch(function(ne){return(L=L||(0,a.Z)(function*(we){if("auth/missing-recaptcha-token"===we.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const qe=yield Ar(v,V,"signInWithPassword");return al(v,qe)}return Promise.reject(we)})).apply(this,arguments)});case"emailLink":return function Zd(M,v){return(rt=rt||(0,a.Z)(function*(b,T){return Pn(b,"POST","/v1/accounts:signInWithEmailLink",Xn(b,T))})).apply(this,arguments)}(v,{email:b._email,oobCode:b._password});default:fn(v,"internal-error")}})()}_linkToIdToken(v,b){var T=this;return(0,a.Z)(function*(){switch(T.signInMethod){case"password":return ra(v,{idToken:b,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function Bu(M,v){return(Qe=Qe||(0,a.Z)(function*(b,T){return Pn(b,"POST","/v1/accounts:signInWithEmailLink",Xn(b,T))})).apply(this,arguments)}(v,{idToken:b,email:T._email,oobCode:T._password});default:fn(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function Io(M,v){return(on=on||(0,a.Z)(function*(b,T){return Pn(b,"POST","/v1/accounts:signInWithIdp",Xn(b,T))})).apply(this,arguments)}class si extends uo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const b=new si(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(b.idToken=v.idToken),v.accessToken&&(b.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(b.nonce=v.nonce),v.pendingToken&&(b.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(b.accessToken=v.oauthToken,b.secret=v.oauthTokenSecret):fn("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:T,signInMethod:L}=b,V=(0,Ee._T)(b,["providerId","signInMethod"]);if(!T||!L)return null;const ne=new si(T,L);return ne.idToken=V.idToken||void 0,ne.accessToken=V.accessToken||void 0,ne.secret=V.secret,ne.nonce=V.nonce,ne.pendingToken=V.pendingToken||null,ne}_getIdTokenResponse(v){return Io(v,this.buildRequest())}_linkToIdToken(v,b){const T=this.buildRequest();return T.idToken=b,Io(v,T)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,Io(v,b)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),v.postBody=(0,K.xO)(b)}return v}}const Jd={USER_NOT_FOUND:"user-not-found"};class ns extends uo{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,b){return new ns({verificationId:v,verificationCode:b})}static _fromTokenResponse(v,b){return new ns({phoneNumber:v,temporaryProof:b})}_getIdTokenResponse(v){return function Qd(M,v){return($t=$t||(0,a.Z)(function*(b,T){return Pn(b,"POST","/v1/accounts:signInWithPhoneNumber",Xn(b,T))})).apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,b){return function ts(M,v){return(Fe=Fe||(0,a.Z)(function*(b,T){const L=yield Pn(b,"POST","/v1/accounts:signInWithPhoneNumber",Xn(b,T));if(L.temporaryProof)throw Ls(b,"account-exists-with-different-credential",L);return L})).apply(this,arguments)}(v,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function $l(M,v){return(G=G||(0,a.Z)(function*(b,T){return Pn(b,"POST","/v1/accounts:signInWithPhoneNumber",Xn(b,Object.assign(Object.assign({},T),{operation:"REAUTH"})),Jd)})).apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:b,verificationId:T,verificationCode:L}=this.params;return v&&b?{temporaryProof:v,phoneNumber:b}:{sessionInfo:T,code:L}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:b,verificationCode:T,phoneNumber:L,temporaryProof:V}=v;return T||b||L||V?new ns({verificationId:b,verificationCode:T,phoneNumber:L,temporaryProof:V}):null}}class Vl{constructor(v){var b,T,L,V,ne,we;const qe=(0,K.zd)((0,K.pd)(v)),yt=null!==(b=qe.apiKey)&&void 0!==b?b:null,An=null!==(T=qe.oobCode)&&void 0!==T?T:null,wn=function Uu(M){switch(M){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(L=qe.mode)&&void 0!==L?L:null);Et(yt&&An&&wn,"argument-error"),this.apiKey=yt,this.operation=wn,this.code=An,this.continueUrl=null!==(V=qe.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(ne=qe.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(we=qe.tenantId)&&void 0!==we?we:null}static parseLink(v){const b=function $u(M){const v=(0,K.zd)((0,K.pd)(M)).link,b=v?(0,K.zd)((0,K.pd)(v)).deep_link_id:null,T=(0,K.zd)((0,K.pd)(M)).deep_link_id;return(T?(0,K.zd)((0,K.pd)(T)).link:null)||T||b||v||M}(v);try{return new Vl(b)}catch{return null}}}let Hl=(()=>{class M{constructor(){this.providerId=M.PROVIDER_ID}static credential(b,T){return Ul._fromEmailAndPassword(b,T)}static credentialWithLink(b,T){const L=Vl.parseLink(T);return Et(L,"argument-error"),Ul._fromEmailAndCode(b,L.code,L.tenantId)}}return M.PROVIDER_ID="password",M.EMAIL_PASSWORD_SIGN_IN_METHOD="password",M.EMAIL_LINK_SIGN_IN_METHOD="emailLink",M})();class or{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class ds extends or{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class ho extends ds{static credentialFromJSON(v){const b="string"==typeof v?JSON.parse(v):v;return Et("providerId"in b&&"signInMethod"in b,"argument-error"),si._fromParams(b)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return Et(v.idToken||v.accessToken,"argument-error"),si._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return ho.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return ho.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:b,oauthAccessToken:T,oauthTokenSecret:L,pendingToken:V,nonce:ne,providerId:we}=v;if(!T&&!L&&!b&&!V||!we)return null;try{return new ho(we)._credential({idToken:b,accessToken:T,nonce:ne,pendingToken:V})}catch{return null}}}let zl=(()=>{class M extends ds{constructor(){super("facebook.com")}static credential(b){return si._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return M.credentialFromTaggedObject(b)}static credentialFromError(b){return M.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return M.credential(b.oauthAccessToken)}catch{return null}}}return M.FACEBOOK_SIGN_IN_METHOD="facebook.com",M.PROVIDER_ID="facebook.com",M})(),Uo=(()=>{class M extends ds{constructor(){super("google.com"),this.addScope("profile")}static credential(b,T){return si._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:T})}static credentialFromResult(b){return M.credentialFromTaggedObject(b)}static credentialFromError(b){return M.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:T,oauthAccessToken:L}=b;if(!T&&!L)return null;try{return M.credential(T,L)}catch{return null}}}return M.GOOGLE_SIGN_IN_METHOD="google.com",M.PROVIDER_ID="google.com",M})(),eh=(()=>{class M extends ds{constructor(){super("github.com")}static credential(b){return si._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return M.credentialFromTaggedObject(b)}static credentialFromError(b){return M.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return M.credential(b.oauthAccessToken)}catch{return null}}}return M.GITHUB_SIGN_IN_METHOD="github.com",M.PROVIDER_ID="github.com",M})();class jl extends uo{constructor(v,b){super(v,v),this.pendingToken=b}_getIdTokenResponse(v){return Io(v,this.buildRequest())}_linkToIdToken(v,b){const T=this.buildRequest();return T.idToken=b,Io(v,T)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,Io(v,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:T,signInMethod:L,pendingToken:V}=b;return T&&L&&V&&T===L?new jl(T,V):null}static _create(v,b){return new jl(v,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fo extends or{constructor(v){Et(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return fo.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return fo.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const b=jl.fromJSON(v);return Et(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:b,providerId:T}=v;if(!b||!T)return null;try{return jl._create(T,b)}catch{return null}}}let qs=(()=>{class M extends ds{constructor(){super("twitter.com")}static credential(b,T){return si._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:T})}static credentialFromResult(b){return M.credentialFromTaggedObject(b)}static credentialFromError(b){return M.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:T,oauthTokenSecret:L}=b;if(!T||!L)return null;try{return M.credential(T,L)}catch{return null}}}return M.TWITTER_SIGN_IN_METHOD="twitter.com",M.PROVIDER_ID="twitter.com",M})();function Oc(M,v){return(Q=Q||(0,a.Z)(function*(b,T){return Pn(b,"POST","/v1/accounts:signUp",Xn(b,T))})).apply(this,arguments)}class ys{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,b,T,L=!1){return(0,a.Z)(function*(){const V=yield Zi._fromIdTokenResponse(v,T,L),ne=lm(T);return new ys({user:V,providerId:ne,_tokenResponse:T,operationType:b})})()}static _forOperation(v,b,T){return(0,a.Z)(function*(){yield v._updateTokensIfNecessary(T,!0);const L=lm(T);return new ys({user:v,providerId:L,_tokenResponse:T,operationType:b})})()}}function lm(M){return M.providerId?M.providerId:"phoneNumber"in M?"phone":null}function th(M){return(de=de||(0,a.Z)(function*(v){var b;const T=yi(v);if(yield T._initializationPromise,null!==(b=T.currentUser)&&void 0!==b&&b.isAnonymous)return new ys({user:T.currentUser,providerId:null,operationType:"signIn"});const L=yield Oc(T,{returnSecureToken:!0}),V=yield ys._fromIdTokenResponse(T,"signIn",L,!0);return yield T._updateCurrentUser(V.user),V})).apply(this,arguments)}class Gl extends K.ZR{constructor(v,b,T,L){var V;super(b.code,b.message),this.operationType=T,this.user=L,Object.setPrototypeOf(this,Gl.prototype),this.customData={appName:v.name,tenantId:null!==(V=v.tenantId)&&void 0!==V?V:void 0,_serverResponse:b.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(v,b,T,L){return new Gl(v,b,T,L)}}function nh(M,v,b,T){return("reauthenticate"===v?b._getReauthenticationResolver(M):b._getIdTokenResponse(M)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?Gl._fromErrorAndOperation(M,V,v,T):V})}function ih(M){return new Set(M.map(({providerId:v})=>v).filter(v=>!!v))}function cm(M,v){return(fe=fe||(0,a.Z)(function*(b,T){const L=(0,K.m9)(b);yield Aa(!0,L,T);const{providerUserInfo:V}=yield function It(M,v){return(X=X||(0,a.Z)(function*(b,T){return Vi(b,"POST","/v1/accounts:update",T)})).apply(this,arguments)}(L.auth,{idToken:yield L.getIdToken(),deleteProvider:[T]}),ne=ih(V||[]);return L.providerData=L.providerData.filter(we=>ne.has(we.providerId)),ne.has("phone")||(L.phoneNumber=null),yield L.auth._persistUserIfCurrent(L),L})).apply(this,arguments)}function $o(M,v){return(Xe=Xe||(0,a.Z)(function*(b,T,L=!1){const V=yield pt(b,T._linkToIdToken(b.auth,yield b.getIdToken()),L);return ys._forOperation(b,"link",V)})).apply(this,arguments)}function Aa(M,v,b){return(He=He||(0,a.Z)(function*(T,L,V){yield Lt(L);const we=!1===T?"provider-already-linked":"no-such-provider";Et(ih(L.providerData).has(V)===T,L.auth,we)})).apply(this,arguments)}function Pc(M,v){return(kt=kt||(0,a.Z)(function*(b,T,L=!1){const{auth:V}=b,ne="reauthenticate";try{const we=yield pt(b,nh(V,ne,T,b),L);Et(we.idToken,V,"internal-error");const qe=We(we.idToken);Et(qe,V,"internal-error");const{sub:yt}=qe;return Et(b.uid===yt,V,"user-mismatch"),ys._forOperation(b,ne,we)}catch(we){throw"auth/user-not-found"===we?.code&&fn(V,"user-mismatch"),we}})).apply(this,arguments)}function rh(M,v){return(Tt=Tt||(0,a.Z)(function*(b,T,L=!1){const V="signIn",ne=yield nh(b,V,T),we=yield ys._fromIdTokenResponse(b,V,ne);return L||(yield b._updateCurrentUser(we.user)),we})).apply(this,arguments)}function Er(M,v){return(Rt=Rt||(0,a.Z)(function*(b,T){return rh(yi(b),T)})).apply(this,arguments)}function sa(M,v){return(Vt=Vt||(0,a.Z)(function*(b,T){const L=(0,K.m9)(b);return yield Aa(!1,L,T.providerId),$o(L,T)})).apply(this,arguments)}function tr(M,v){return(vn=vn||(0,a.Z)(function*(b,T){return Pc((0,K.m9)(b),T)})).apply(this,arguments)}function hs(M,v){return(Bn=Bn||(0,a.Z)(function*(b,T){const L=yi(b),V=yield function um(M,v){return(zn=zn||(0,a.Z)(function*(b,T){return Pn(b,"POST","/v1/accounts:signInWithCustomToken",Xn(b,T))})).apply(this,arguments)}(L,{token:T,returnSecureToken:!0}),ne=yield ys._fromIdTokenResponse(L,"signIn",V);return yield L._updateCurrentUser(ne.user),ne})).apply(this,arguments)}class Wl{constructor(v,b){this.factorId=v,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(v,b){return"phoneInfo"in b?sh._fromServerResponse(v,b):"totpInfo"in b?Hu._fromServerResponse(v,b):fn(v,"internal-error")}}class sh extends Wl{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,b){return new sh(b)}}class Hu extends Wl{constructor(v){super("totp",v)}static _fromServerResponse(v,b){return new Hu(b)}}function Ma(M,v,b){var T;Et((null===(T=b.url)||void 0===T?void 0:T.length)>0,M,"invalid-continue-uri"),Et(typeof b.dynamicLinkDomain>"u"||b.dynamicLinkDomain.length>0,M,"invalid-dynamic-link-domain"),v.continueUrl=b.url,v.dynamicLinkDomain=b.dynamicLinkDomain,v.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(Et(b.iOS.bundleId.length>0,M,"missing-ios-bundle-id"),v.iOSBundleId=b.iOS.bundleId),b.android&&(Et(b.android.packageName.length>0,M,"missing-android-pkg-name"),v.androidInstallApp=b.android.installApp,v.androidMinimumVersionCode=b.android.minimumVersion,v.androidPackageName=b.android.packageName)}function Yl(M,v,b){return(Zt=Zt||(0,a.Z)(function*(T,L,V){var ne;const we=yi(T),qe={requestType:"PASSWORD_RESET",email:L,clientType:"CLIENT_TYPE_WEB"};if(null!==(ne=we._getRecaptchaConfig())&&void 0!==ne&&ne.emailPasswordEnabled){const An=yield Ar(we,qe,"getOobCode",!0);V&&Ma(we,An,V),yield qd(we,An)}else{var yt;V&&Ma(we,qe,V),yield qd(we,qe).catch(function(An){return(yt=yt||(0,a.Z)(function*(wn){if("auth/missing-recaptcha-token"!==wn.code)return Promise.reject(wn);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const On=yield Ar(we,qe,"getOobCode",!0);V&&Ma(we,On,V),yield qd(we,On)}})).apply(this,arguments)})}})).apply(this,arguments)}function Lc(M,v,b){return(Gt=Gt||(0,a.Z)(function*(T,L,V){yield Yd((0,K.m9)(T),{oobCode:L,newPassword:V})})).apply(this,arguments)}function zu(M,v){return(Wt=Wt||(0,a.Z)(function*(b,T){yield function kc(M,v){return(Le=Le||(0,a.Z)(function*(b,T){return Vi(b,"POST","/v1/accounts:update",Xn(b,T))})).apply(this,arguments)}((0,K.m9)(b),{oobCode:T})})).apply(this,arguments)}function Fc(M,v){return(lt=lt||(0,a.Z)(function*(b,T){const L=(0,K.m9)(b),V=yield Yd(L,{oobCode:T}),ne=V.requestType;switch(Et(ne,L,"internal-error"),ne){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Et(V.newEmail,L,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Et(V.mfaInfo,L,"internal-error");default:Et(V.email,L,"internal-error")}let we=null;return V.mfaInfo&&(we=Wl._fromServerResponse(yi(L),V.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===V.requestType?V.newEmail:V.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===V.requestType?V.email:V.newEmail)||null,multiFactorInfo:we},operation:ne}})).apply(this,arguments)}function ql(M,v){return(Ct=Ct||(0,a.Z)(function*(b,T){const{data:L}=yield Fc((0,K.m9)(b),T);return L.email})).apply(this,arguments)}function Kl(M,v,b){return(at=at||(0,a.Z)(function*(T,L,V){var ne;const we=yi(T),qe={returnSecureToken:!0,email:L,password:V,clientType:"CLIENT_TYPE_WEB"};let yt;if(null!==(ne=we._getRecaptchaConfig())&&void 0!==ne&&ne.emailPasswordEnabled){const Ri=yield Ar(we,qe,"signUpPassword");yt=Oc(we,Ri)}else{var An;yt=Oc(we,qe).catch(function(Ri){return(An=An||(0,a.Z)(function*(is){if("auth/missing-recaptcha-token"===is.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const yo=yield Ar(we,qe,"signUpPassword");return Oc(we,yo)}return Promise.reject(is)})).apply(this,arguments)})}const wn=yield yt.catch(Ri=>Promise.reject(Ri)),On=yield ys._fromIdTokenResponse(we,"signIn",wn);return yield we._updateCurrentUser(On.user),On})).apply(this,arguments)}function ka(M,v,b){return Er((0,K.m9)(M),Hl.credential(v,b))}function oa(M,v,b){return(st=st||(0,a.Z)(function*(T,L,V){var ne;const we=yi(T),qe={requestType:"EMAIL_SIGNIN",email:L,clientType:"CLIENT_TYPE_WEB"};function yt(wn,On){Et(On.handleCodeInApp,we,"argument-error"),On&&Ma(we,wn,On)}if(null!==(ne=we._getRecaptchaConfig())&&void 0!==ne&&ne.emailPasswordEnabled){const wn=yield Ar(we,qe,"getOobCode",!0);yt(wn,V),yield Rc(we,wn)}else{var An;yt(qe,V),yield Rc(we,qe).catch(function(wn){return(An=An||(0,a.Z)(function*(On){if("auth/missing-recaptcha-token"!==On.code)return Promise.reject(On);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ri=yield Ar(we,qe,"getOobCode",!0);yt(Ri,V),yield Rc(we,Ri)}})).apply(this,arguments)})}})).apply(this,arguments)}function dm(M,v){return"EMAIL_SIGNIN"===Vl.parseLink(v)?.operation}function oh(M,v,b){return(Dn=Dn||(0,a.Z)(function*(T,L,V){const ne=(0,K.m9)(T),we=Hl.credentialWithLink(L,V||Pi());return Et(we._tenantId===(ne.tenantId||null),ne,"tenant-id-mismatch"),Er(ne,we)})).apply(this,arguments)}function vg(M,v){return(bn=bn||(0,a.Z)(function*(b,T){const V={identifier:T,continueUri:oo()?Pi():"http://localhost"},{signinMethods:ne}=yield function ju(M,v){return(mi=mi||(0,a.Z)(function*(b,T){return Vi(b,"POST","/v1/accounts:createAuthUri",Xn(b,T))})).apply(this,arguments)}((0,K.m9)(b),V);return ne||[]})).apply(this,arguments)}function hm(M,v){return(ai=ai||(0,a.Z)(function*(b,T){const L=(0,K.m9)(b),ne={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};T&&Ma(L.auth,ne,T);const{email:we}=yield function Nu(M,v){return(he=he||(0,a.Z)(function*(b,T){return qn(b,T)})).apply(this,arguments)}(L.auth,ne);we!==b.email&&(yield b.reload())})).apply(this,arguments)}function fm(M,v,b){return(In=In||(0,a.Z)(function*(T,L,V){const ne=(0,K.m9)(T),qe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:L};V&&Ma(ne.auth,qe,V);const{email:yt}=yield function Kd(M,v){return(Ye=Ye||(0,a.Z)(function*(b,T){return qn(b,T)})).apply(this,arguments)}(ne.auth,qe);yt!==T.email&&(yield T.reload())})).apply(this,arguments)}function Gu(M,v){return(Rn=Rn||(0,a.Z)(function*(b,{displayName:T,photoURL:L}){if(void 0===T&&void 0===L)return;const V=(0,K.m9)(b),we={idToken:yield V.getIdToken(),displayName:T,photoUrl:L,returnSecureToken:!0},qe=yield pt(V,function Nc(M,v){return(Zn=Zn||(0,a.Z)(function*(b,T){return Vi(b,"POST","/v1/accounts:update",T)})).apply(this,arguments)}(V.auth,we));V.displayName=qe.displayName||null,V.photoURL=qe.photoUrl||null;const yt=V.providerData.find(({providerId:An})=>"password"===An);yt&&(yt.displayName=V.displayName,yt.photoURL=V.photoURL),yield V._updateTokensIfNecessary(qe)})).apply(this,arguments)}function ll(M,v){return aa((0,K.m9)(M),v,null)}function Wu(M,v){return aa((0,K.m9)(M),null,v)}function aa(M,v,b){return(Xt=Xt||(0,a.Z)(function*(T,L,V){const{auth:ne}=T,qe={idToken:yield T.getIdToken(),returnSecureToken:!0};L&&(qe.email=L),V&&(qe.password=V);const yt=yield pt(T,ra(ne,qe));yield T._updateTokensIfNecessary(yt,!0)})).apply(this,arguments)}class Vo{constructor(v,b,T={}){this.isNewUser=v,this.providerId=b,this.profile=T}}class Zl extends Vo{constructor(v,b,T,L){super(v,b,T),this.username=L}}class Xl extends Vo{constructor(v,b){super(v,"facebook.com",b)}}class mm extends Zl{constructor(v,b){super(v,"github.com",b,"string"==typeof b?.login?b?.login:null)}}class Bc extends Vo{constructor(v,b){super(v,"google.com",b)}}class Uc extends Zl{constructor(v,b,T){super(v,"twitter.com",b,T)}}function cl(M){const{user:v,_tokenResponse:b}=M;return v.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function Ra(M){var v,b;if(!M)return null;const{providerId:T}=M,L=M.rawUserInfo?JSON.parse(M.rawUserInfo):{},V=M.isNewUser||"identitytoolkit#SignupNewUserResponse"===M.kind;if(!T&&M?.idToken){const ne=null===(b=null===(v=We(M.idToken))||void 0===v?void 0:v.firebase)||void 0===b?void 0:b.sign_in_provider;if(ne)return new Vo(V,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!T)return null;switch(T){case"facebook.com":return new Xl(V,L);case"github.com":return new mm(V,L);case"google.com":return new Bc(V,L);case"twitter.com":return new Uc(V,L,M.screenName||null);case"custom":case"anonymous":return new Vo(V,null);default:return new Vo(V,T,L)}}(b)}class la{constructor(v,b,T){this.type=v,this.credential=b,this.auth=T}static _fromIdtoken(v,b){return new la("enroll",v,b)}static _fromMfaPendingCredential(v){return new la("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var b,T;if(v?.multiFactorSession){if(null!==(b=v.multiFactorSession)&&void 0!==b&&b.pendingCredential)return la._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(T=v.multiFactorSession)&&void 0!==T&&T.idToken)return la._fromIdtoken(v.multiFactorSession.idToken)}return null}}class ca{constructor(v,b,T){this.session=v,this.hints=b,this.signInResolver=T}static _fromError(v,b){var T;const L=yi(v),V=b.customData._serverResponse,ne=(V.mfaInfo||[]).map(qe=>Wl._fromServerResponse(L,qe));Et(V.mfaPendingCredential,L,"internal-error");const we=la._fromMfaPendingCredential(V.mfaPendingCredential);return new ca(we,ne,function(qe){return(T=T||(0,a.Z)(function*(yt){const An=yield yt._process(L,we);delete V.mfaInfo,delete V.mfaPendingCredential;const wn=Object.assign(Object.assign({},V),{idToken:An.idToken,refreshToken:An.refreshToken});switch(b.operationType){case"signIn":const On=yield ys._fromIdTokenResponse(L,b.operationType,wn);return yield L._updateCurrentUser(On.user),On;case"reauthenticate":return Et(b.user,L,"internal-error"),ys._forOperation(b.user,b.operationType,wn);default:fn(L,"internal-error")}})).apply(this,arguments)})}resolveSignIn(v){var b=this;return(0,a.Z)(function*(){return b.signInResolver(v)})()}}function Ku(M,v){var b;const T=(0,K.m9)(M),L=v;return Et(v.customData.operationType,T,"argument-error"),Et(null===(b=L.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,T,"argument-error"),ca._fromError(T,L)}class Ho{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(T=>Wl._fromServerResponse(v.auth,T)))})}static _fromUser(v){return new Ho(v)}getSession(){var v=this;return(0,a.Z)(function*(){return la._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,b){var T=this;return(0,a.Z)(function*(){const L=v,V=yield T.getSession(),ne=yield pt(T.user,L._process(T.user.auth,V,b));return yield T.user._updateTokensIfNecessary(ne),T.user.reload()})()}unenroll(v){var b=this;return(0,a.Z)(function*(){const T="string"==typeof v?v:v.uid,L=yield b.user.getIdToken();try{const V=yield pt(b.user,function dh(M,v){return Vi(M,"POST","/v2/accounts/mfaEnrollment:withdraw",Xn(M,v))}(b.user.auth,{idToken:L,mfaEnrollmentId:T}));b.enrolledFactors=b.enrolledFactors.filter(({uid:ne})=>ne!==T),yield b.user._updateTokensIfNecessary(V),yield b.user.reload()}catch(V){throw V}})()}}const zo=new WeakMap;function _m(M){const v=(0,K.m9)(M);return zo.has(v)||zo.set(v,Ho._fromUser(v)),zo.get(v)}const Oa="__sak";class Qu{constructor(v,b){this.storageRetriever=v,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(Oa,"1"),this.storage.removeItem(Oa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,b){return this.storage.setItem(v,JSON.stringify(b)),Promise.resolve()}_get(v){const b=this.storage.getItem(v);return Promise.resolve(b?JSON.parse(b):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const fh=(()=>{class M extends Qu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,T)=>this.onStorageEvent(b,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pa(){const M=(0,K.z$)();return zd(M)||Ru(M)}()&&function yg(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ou(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const T of Object.keys(this.listeners)){const L=this.storage.getItem(T),V=this.localCache[T];L!==V&&b(T,V,L)}}onStorageEvent(b,T=!1){if(!b.key)return void this.forAllChangedKeys((we,qe,yt)=>{this.notifyListeners(we,yt)});const L=b.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const we=this.storage.getItem(L);if(b.newValue!==we)null!==b.newValue?this.storage.setItem(L,b.newValue):this.storage.removeItem(L);else if(this.localCache[L]===b.newValue&&!T)return}const V=()=>{const we=this.storage.getItem(L);!T&&this.localCache[L]===we||this.notifyListeners(L,we)},ne=this.storage.getItem(L);!function ia(){return(0,K.w1)()&&10===document.documentMode}()||ne===b.newValue||b.newValue===b.oldValue?V():setTimeout(V,10)}notifyListeners(b,T){this.localCache[b]=T;const L=this.listeners[b];if(L)for(const V of Array.from(L))V(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,T,L)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:T,newValue:L}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(T)}_removeListener(b,T){this.listeners[b]&&(this.listeners[b].delete(T),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,T){var L=()=>super._set,V=this;return(0,a.Z)(function*(){yield L().call(V,b,T),V.localCache[b]=JSON.stringify(T)})()}_get(b){var T=()=>super._get,L=this;return(0,a.Z)(function*(){const V=yield T().call(L,b);return L.localCache[b]=JSON.stringify(V),V})()}_remove(b){var T=()=>super._remove,L=this;return(0,a.Z)(function*(){yield T().call(L,b),delete L.localCache[b]})()}}return M.type="LOCAL",M})(),dl=(()=>{class M extends Qu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,T){}_removeListener(b,T){}}return M.type="SESSION",M})();let jo=(()=>{class M{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const T=this.receivers.find(V=>V.isListeningto(b));if(T)return T;const L=new M(b);return this.receivers.push(L),L}isListeningto(b){return this.eventTarget===b}handleEvent(b){var T=this;return(0,a.Z)(function*(){var L;const V=b,{eventId:ne,eventType:we,data:qe}=V.data,yt=T.handlersMap[we];if(!yt?.size)return;V.ports[0].postMessage({status:"ack",eventId:ne,eventType:we});const An=Array.from(yt).map(function(On){return(L=L||(0,a.Z)(function*(Ri){return Ri(V.origin,qe)})).apply(this,arguments)}),wn=yield function La(M){var v;return Promise.all(M.map(function(b){return(v=v||(0,a.Z)(function*(T){try{return{fulfilled:!0,value:yield T}}catch(L){return{fulfilled:!1,reason:L}}})).apply(this,arguments)}))}(An);V.ports[0].postMessage({status:"done",eventId:ne,eventType:we,response:wn})})()}_subscribe(b,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(T)}_unsubscribe(b,T){this.handlersMap[b]&&T&&this.handlersMap[b].delete(T),(!T||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return M.receivers=[],M})();function Qi(M="",v=10){let b="";for(let T=0;T<v;T++)b+=Math.floor(10*Math.random());return M+b}class ph{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,b,T=50){var L=this;return(0,a.Z)(function*(){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let ne,we;return new Promise((qe,yt)=>{const An=Qi("",20);V.port1.start();const wn=setTimeout(()=>{yt(new Error("unsupported_event"))},T);we={messageChannel:V,onMessage(On){const Ri=On;if(Ri.data.eventId===An)switch(Ri.data.status){case"ack":clearTimeout(wn),ne=setTimeout(()=>{yt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),qe(Ri.data.response);break;default:clearTimeout(wn),clearTimeout(ne),yt(new Error("invalid_response"))}}},L.handlers.add(we),V.port1.addEventListener("message",we.onMessage),L.target.postMessage({eventType:v,eventId:An,data:b},[V.port2])}).finally(()=>{we&&L.removeMessageHandler(we)})})()}}function xi(){return window}function Vc(){return typeof xi().WorkerGlobalScope<"u"&&"function"==typeof xi().importScripts}const ym="firebaseLocalStorageDb",_h=1,Hc="firebaseLocalStorage",wg="fbase_key";class ed{constructor(v){this.request=v}toPromise(){return new Promise((v,b)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function yh(M,v){return M.transaction([Hc],v?"readwrite":"readonly").objectStore(Hc)}function vm(){const M=indexedDB.open(ym,_h);return new Promise((v,b)=>{M.addEventListener("error",()=>{b(M.error)}),M.addEventListener("upgradeneeded",()=>{const T=M.result;try{T.createObjectStore(Hc,{keyPath:wg})}catch(L){b(L)}}),M.addEventListener("success",(0,a.Z)(function*(){const T=M.result;T.objectStoreNames.contains(Hc)?v(T):(T.close(),yield function Ql(){const M=indexedDB.deleteDatabase(ym);return new ed(M).toPromise()}(),v(yield vm()))}))})}function bm(M,v,b){return(Ti=Ti||(0,a.Z)(function*(T,L,V){const ne=yh(T,!0).put({[wg]:L,value:V});return new ed(ne).toPromise()})).apply(this,arguments)}function td(M,v){const b=yh(M,!0).delete(v);return new ed(b).toPromise()}const Fa=(()=>{class M{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,a.Z)(function*(){return b.db||(b.db=yield vm()),b.db})()}_withRetries(b){var T=this;return(0,a.Z)(function*(){let L=0;for(;;)try{const V=yield T._openDb();return yield b(V)}catch(V){if(L++>3)throw V;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,a.Z)(function*(){return Vc()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,a.Z)(function*(){var T,L;b.receiver=jo._getInstance(function bg(){return Vc()?self:null}()),b.receiver._subscribe("keyChanged",function(V,ne){return(T=T||(0,a.Z)(function*(we,qe){return{keyProcessed:(yield b._poll()).includes(qe.key)}})).apply(this,arguments)}),b.receiver._subscribe("ping",function(V,ne){return(L=L||(0,a.Z)(function*(we,qe){return["keyChanged"]})).apply(this,arguments)})})()}initializeSender(){var b=this;return(0,a.Z)(function*(){var T,L;if(b.activeServiceWorker=yield function gh(){return(Ui=Ui||(0,a.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new ph(b.activeServiceWorker);const V=yield b.sender._send("ping",{},800);V&&null!==(T=V[0])&&void 0!==T&&T.fulfilled&&null!==(L=V[0])&&void 0!==L&&L.value.includes("keyChanged")&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var T=this;return(0,a.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function Si(){var M;return(null===(M=navigator?.serviceWorker)||void 0===M?void 0:M.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:b},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const b=yield vm();return yield bm(b,Oa,"1"),yield td(b,Oa),!0}catch{}return!1})()}_withPendingWrite(b){var T=this;return(0,a.Z)(function*(){T.pendingWrites++;try{yield b()}finally{T.pendingWrites--}})()}_set(b,T){var L=this;return(0,a.Z)(function*(){return L._withPendingWrite((0,a.Z)(function*(){return yield L._withRetries(V=>bm(V,b,T)),L.localCache[b]=T,L.notifyServiceWorker(b)}))})()}_get(b){var T=this;return(0,a.Z)(function*(){const L=yield T._withRetries(V=>function Hr(M,v){return(Mi=Mi||(0,a.Z)(function*(b,T){const L=yh(b,!1).get(T),V=yield new ed(L).toPromise();return void 0===V?null:V.value})).apply(this,arguments)}(V,b));return T.localCache[b]=L,L})()}_remove(b){var T=this;return(0,a.Z)(function*(){return T._withPendingWrite((0,a.Z)(function*(){return yield T._withRetries(L=>td(L,b)),delete T.localCache[b],T.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,a.Z)(function*(){const T=yield b._withRetries(ne=>{const we=yh(ne,!1).getAll();return new ed(we).toPromise()});if(!T)return[];if(0!==b.pendingWrites)return[];const L=[],V=new Set;for(const{fbase_key:ne,value:we}of T)V.add(ne),JSON.stringify(b.localCache[ne])!==JSON.stringify(we)&&(b.notifyListeners(ne,we),L.push(ne));for(const ne of Object.keys(b.localCache))b.localCache[ne]&&!V.has(ne)&&(b.notifyListeners(ne,null),L.push(ne));return L})()}notifyListeners(b,T){this.localCache[b]=T;const L=this.listeners[b];if(L)for(const V of Array.from(L))V(T)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(T)}_removeListener(b,T){this.listeners[b]&&(this.listeners[b].delete(T),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return M.type="LOCAL",M})(),Gc=1e12;class Em{constructor(v){this.auth=v,this.counter=Gc,this._widgets=new Map}render(v,b){const T=this.counter;return this._widgets.set(T,new Zs(v,this.auth.name,b||{})),this.counter++,T}reset(v){var b;const T=v||Gc;null===(b=this._widgets.get(T))||void 0===b||b.delete(),this._widgets.delete(T)}getResponse(v){var b;return(null===(b=this._widgets.get(v||Gc))||void 0===b?void 0:b.getResponse())||""}execute(v){var b=this;return(0,a.Z)(function*(){var T;return null===(T=b._widgets.get(v||Gc))||void 0===T||T.execute(),""})()}}class Zs{constructor(v,b,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const L="string"==typeof v?document.getElementById(v):v;Et(L,"argument-error",{appName:b}),this.container=L,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Hi(M){const v=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<M;T++)v.push(b.charAt(Math.floor(Math.random()*b.length)));return v.join("")}(50);const{callback:v,"expired-callback":b}=this.params;if(v)try{v(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ds=Dc("rcb"),mn=new wi(3e4,6e4);class As{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=xi().grecaptcha)||void 0===v||!v.render)}load(v,b=""){return Et(function xm(M){return M.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(M)}(b),v,"argument-error"),this.shouldResolveImmediately(b)&&im(xi().grecaptcha)?Promise.resolve(xi().grecaptcha):new Promise((T,L)=>{const V=xi().setTimeout(()=>{L(gn(v,"network-request-failed"))},mn.get());xi()[Ds]=()=>{xi().clearTimeout(V),delete xi()[Ds];const we=xi().grecaptcha;if(!we||!im(we))return void L(gn(v,"internal-error"));const qe=we.render;we.render=(yt,An)=>{const wn=qe(yt,An);return this.counter++,wn},this.hostLanguage=b,T(we)},Nl(`https://www.google.com/recaptcha/api.js??${(0,K.xO)({onload:Ds,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(V),L(gn(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var b;return!(null===(b=xi().grecaptcha)||void 0===b||!b.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bs{load(v){return(0,a.Z)(function*(){return new Em(v)})()}clearedOneInstance(){}}const zr="recaptcha",wh={theme:"light",type:"image"};class Wc{constructor(v,b=Object.assign({},wh),T){this.parameters=b,this.type=zr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yi(T),this.isInvisible="invisible"===this.parameters.size,Et(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const L="string"==typeof v?document.getElementById(v):v;Et(L,this.auth,"argument-error"),this.container=L,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bs:new As,this.validateStartingState()}verify(){var v=this;return(0,a.Z)(function*(){v.assertNotDestroyed();const b=yield v.render(),T=v.getAssertedRecaptcha();return T.getResponse(b)||new Promise(V=>{const ne=we=>{we&&(v.tokenChangeListeners.delete(ne),V(we))};v.tokenChangeListeners.add(ne),v.isInvisible&&T.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){Et(!this.parameters.sitekey,this.auth,"argument-error"),Et(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Et(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return b=>{if(this.tokenChangeListeners.forEach(T=>T(b)),"function"==typeof v)v(b);else if("string"==typeof v){const T=xi()[v];"function"==typeof T&&T(b)}}}assertNotDestroyed(){Et(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,a.Z)(function*(){if(yield v.init(),!v.widgetId){let b=v.container;if(!v.isInvisible){const T=document.createElement("div");b.appendChild(T),b=T}v.widgetId=v.getAssertedRecaptcha().render(b,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,a.Z)(function*(){Et(oo()&&!Vc(),v.auth,"internal-error"),yield function Yc(){let M=null;return new Promise(v=>{"complete"!==document.readyState?(M=()=>v(),window.addEventListener("load",M)):v()}).catch(v=>{throw M&&window.removeEventListener("load",M),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const b=yield function nm(M){return(le=le||(0,a.Z)(function*(v){return(yield Vi(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}(v.auth);Et(b,v.auth,"internal-error"),v.parameters.sitekey=b})()}getAssertedRecaptcha(){return Et(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Na{constructor(v,b){this.verificationId=v,this.onConfirmation=b}confirm(v){const b=ns._fromVerification(this.verificationId,v);return this.onConfirmation(b)}}function Ms(M,v,b){return(Xi=Xi||(0,a.Z)(function*(T,L,V){const ne=yi(T),we=yield pn(ne,L,(0,K.m9)(V));return new Na(we,qe=>Er(ne,qe))})).apply(this,arguments)}function Ba(M,v,b){return($i=$i||(0,a.Z)(function*(T,L,V){const ne=(0,K.m9)(T);yield Aa(!1,ne,"phone");const we=yield pn(ne.auth,L,(0,K.m9)(V));return new Na(we,qe=>sa(ne,qe))})).apply(this,arguments)}function ec(M,v,b){return(os=os||(0,a.Z)(function*(T,L,V){const ne=(0,K.m9)(T),we=yield pn(ne.auth,L,(0,K.m9)(V));return new Na(we,qe=>tr(ne,qe))})).apply(this,arguments)}function pn(M,v,b){return(bi=bi||(0,a.Z)(function*(T,L,V){var ne;const we=yield V.verify();try{let qe;if(Et("string"==typeof we,T,"argument-error"),Et(V.type===zr,T,"argument-error"),qe="string"==typeof L?{phoneNumber:L}:L,"session"in qe){const yt=qe.session;if("phoneNumber"in qe)return Et("enroll"===yt.type,T,"internal-error"),(yield function Zu(M,v){return Vi(M,"POST","/v2/accounts/mfaEnrollment:start",Xn(M,v))}(T,{idToken:yt.credential,phoneEnrollmentInfo:{phoneNumber:qe.phoneNumber,recaptchaToken:we}})).phoneSessionInfo.sessionInfo;{Et("signin"===yt.type,T,"internal-error");const An=(null===(ne=qe.multiFactorHint)||void 0===ne?void 0:ne.uid)||qe.multiFactorUid;return Et(An,T,"missing-multi-factor-info"),(yield function wm(M,v){return Vi(M,"POST","/v2/accounts/mfaSignIn:start",Xn(M,v))}(T,{mfaPendingCredential:yt.credential,mfaEnrollmentId:An,phoneSignInInfo:{recaptchaToken:we}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:yt}=yield function Xd(M,v){return(vt=vt||(0,a.Z)(function*(b,T){return Vi(b,"POST","/v1/accounts:sendVerificationCode",Xn(b,T))})).apply(this,arguments)}(T,{phoneNumber:qe.phoneNumber,recaptchaToken:we});return yt}}finally{V._reset()}})).apply(this,arguments)}function Tm(M,v){return(Ii=Ii||(0,a.Z)(function*(b,T){yield $o((0,K.m9)(b),T)})).apply(this,arguments)}let Cm=(()=>{class M{constructor(b){this.providerId=M.PROVIDER_ID,this.auth=yi(b)}verifyPhoneNumber(b,T){return pn(this.auth,b,(0,K.m9)(T))}static credential(b,T){return ns._fromVerification(b,T)}static credentialFromResult(b){return M.credentialFromTaggedObject(b)}static credentialFromError(b){return M.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:T,temporaryProof:L}=b;return T&&L?ns._fromTokenResponse(T,L):null}}return M.PROVIDER_ID="phone",M.PHONE_SIGN_IN_METHOD="phone",M})();function Us(M,v){return v?mr(v):(Et(M._popupRedirectResolver,M,"argument-error"),M._popupRedirectResolver)}class Ua extends uo{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return Io(v,this._buildIdpRequest())}_linkToIdToken(v,b){return Io(v,this._buildIdpRequest(b))}_getReauthenticationResolver(v){return Io(v,this._buildIdpRequest())}_buildIdpRequest(v){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(b.idToken=v),b}}function pr(M){return rh(M.auth,new Ua(M),M.bypassAuthState)}function xg(M){const{auth:v,user:b}=M;return Et(b,v,"internal-error"),Pc(b,new Ua(M),M.bypassAuthState)}function nd(M){return($n=$n||(0,a.Z)(function*(v){const{auth:b,user:T}=v;return Et(T,b,"internal-error"),$o(T,new Ua(v),v.bypassAuthState)})).apply(this,arguments)}class fl{constructor(v,b,T,L,V=!1){this.auth=v,this.resolver=T,this.user=L,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var b,v=this;return new Promise(function(T,L){return(b=b||(0,a.Z)(function*(V,ne){v.pendingPromise={resolve:V,reject:ne};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(we){v.reject(we)}})).apply(this,arguments)})}onAuthEvent(v){var b=this;return(0,a.Z)(function*(){const{urlResponse:T,sessionId:L,postBody:V,tenantId:ne,error:we,type:qe}=v;if(we)return void b.reject(we);const yt={auth:b.auth,requestUri:T,sessionId:L,tenantId:ne||void 0,postBody:V||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(qe)(yt))}catch(An){b.reject(An)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return pr;case"linkViaPopup":case"linkViaRedirect":return nd;case"reauthViaPopup":case"reauthViaRedirect":return xg;default:fn(this.auth,"internal-error")}}resolve(v){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tc=new wi(2e3,1e4);function qc(M,v,b){return(hr=hr||(0,a.Z)(function*(T,L,V){const ne=yi(T);ci(T,L,or);const we=Us(ne,V);return new mo(ne,"signInViaPopup",L,we).executeNotNull()})).apply(this,arguments)}function Tg(M,v,b){return(ri=ri||(0,a.Z)(function*(T,L,V){const ne=(0,K.m9)(T);ci(ne.auth,L,or);const we=Us(ne.auth,V);return new mo(ne.auth,"reauthViaPopup",L,we,ne).executeNotNull()})).apply(this,arguments)}function nc(M,v,b){return(Sr=Sr||(0,a.Z)(function*(T,L,V){const ne=(0,K.m9)(T);ci(ne.auth,L,or);const we=Us(ne.auth,V);return new mo(ne.auth,"linkViaPopup",L,we,ne).executeNotNull()})).apply(this,arguments)}let mo=(()=>{class M extends fl{constructor(b,T,L,V,ne){super(b,T,V,ne),this.provider=L,this.authWindow=null,this.pollId=null,M.currentPopupAction&&M.currentPopupAction.cancel(),M.currentPopupAction=this}executeNotNull(){var b=this;return(0,a.Z)(function*(){const T=yield b.execute();return Et(T,b.auth,"internal-error"),T})()}onExecution(){var b=this;return(0,a.Z)(function*(){wr(1===b.filter.length,"Popup operations only handle one event");const T=Qi();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],T),b.authWindow.associatedEvent=T,b.resolver._originValidation(b.auth).catch(L=>{b.reject(L)}),b.resolver._isIframeWebStorageSupported(b.auth,L=>{L||b.reject(gn(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,M.currentPopupAction=null}pollUserCancellation(){const b=()=>{var T,L;this.pollId=null!==(L=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==L&&L.closed?window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(b,tc.get())};b()}}return M.currentPopupAction=null,M})();const Kc="pendingRedirect",ic=new Map;class Do extends fl{constructor(v,b,T=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,T),this.eventId=null}execute(){var v=()=>super.execute,b=this;return(0,a.Z)(function*(){let T=ic.get(b.auth._key());if(!T){try{const V=(yield function ml(M,v){return(rr=rr||(0,a.Z)(function*(b,T){const L=Eh(T),V=Zc(b);if(!(yield V._isAvailable()))return!1;const ne="true"===(yield V._get(L));return yield V._remove(L),ne})).apply(this,arguments)}(b.resolver,b.auth))?yield v().call(b):null;T=()=>Promise.resolve(V)}catch(L){T=()=>Promise.reject(L)}ic.set(b.auth._key(),T)}return b.bypassAuthState||ic.set(b.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(v){var b=()=>super.onAuthEvent,T=this;return(0,a.Z)(function*(){if("signInViaRedirect"===v.type)return b().call(T,v);if("unknown"!==v.type){if(v.eventId){const L=yield T.auth._redirectUserForId(v.eventId);if(L)return T.user=L,b().call(T,v);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function $s(M,v){return(fr=fr||(0,a.Z)(function*(b,T){return Zc(b)._set(Eh(T),"true")})).apply(this,arguments)}function Xs(){ic.clear()}function xr(M,v){ic.set(M._key(),v)}function Zc(M){return mr(M._redirectPersistence)}function Eh(M){return Fs(Kc,M.config.apiKey,M.name)}function nr(M,v,b){return function Mr(M,v,b){return(Xr=Xr||(0,a.Z)(function*(T,L,V){const ne=yi(T);ci(T,L,or),yield ne._initializationPromise;const we=Us(ne,V);return yield $s(we,ne),we._openRedirect(ne,L,"signInViaRedirect")})).apply(this,arguments)}(M,v,b)}function ks(M,v,b){return function Di(M,v,b){return(Ji=Ji||(0,a.Z)(function*(T,L,V){const ne=(0,K.m9)(T);ci(ne.auth,L,or),yield ne.auth._initializationPromise;const we=Us(ne.auth,V);yield $s(we,ne.auth);const qe=yield po(ne);return we._openRedirect(ne.auth,L,"reauthViaRedirect",qe)})).apply(this,arguments)}(M,v,b)}function kr(M,v,b){return function rc(M,v,b){return(_s=_s||(0,a.Z)(function*(T,L,V){const ne=(0,K.m9)(T);ci(ne.auth,L,or),yield ne.auth._initializationPromise;const we=Us(ne.auth,V);yield Aa(!1,ne,L.providerId),yield $s(we,ne.auth);const qe=yield po(ne);return we._openRedirect(ne.auth,L,"linkViaRedirect",qe)})).apply(this,arguments)}(M,v,b)}function id(M,v){return(as=as||(0,a.Z)(function*(b,T){return yield yi(b)._initializationPromise,$a(b,T,!1)})).apply(this,arguments)}function $a(M,v){return(ge=ge||(0,a.Z)(function*(b,T,L=!1){const V=yi(b),ne=Us(V,T),qe=yield new Do(V,ne,L).execute();return qe&&!L&&(delete qe.user._redirectEventId,yield V._persistUserIfCurrent(qe.user),yield V._setRedirectUser(null,T)),qe})).apply(this,arguments)}function po(M){return(re=re||(0,a.Z)(function*(v){const b=Qi(`${v.uid}:::`);return v._redirectEventId=b,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),b})).apply(this,arguments)}class ur{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let b=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(v,T)&&(b=!0,this.sendToConsumer(v,T),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function Xc(M){switch(M.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cg(M);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=v,b=!0)),b}sendToConsumer(v,b){var T;if(v.error&&!Cg(v)){const L=(null===(T=v.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";b.onError(gn(this.auth,L))}else b.onAuthEvent(v)}isEventForConsumer(v,b){const T=null===b.eventId||!!v.eventId&&v.eventId===b.eventId;return b.filter.includes(v.type)&&T}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(go(v))}saveEventToCache(v){this.cachedEventUids.add(go(v)),this.lastProcessedEventTime=Date.now()}}function go(M){return[M.type,M.eventId,M.sessionId,M.tenantId].filter(v=>v).join("-")}function Cg({type:M,error:v}){return"unknown"===M&&"auth/no-auth-event"===v?.code}function Qc(M){return(z=z||(0,a.Z)(function*(v,b={}){return Vi(v,"GET","/v1/projects",b)})).apply(this,arguments)}const Jc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xh=/^https?/;function pl(M){const v=Pi(),{protocol:b,hostname:T}=new URL(v);if(M.startsWith("chrome-extension://")){const ne=new URL(M);return""===ne.hostname&&""===T?"chrome-extension:"===b&&M.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===b&&ne.hostname===T}if(!xh.test(b))return!1;if(Jc.test(M))return T===M;const L=M.replace(/\./g,"\\.");return new RegExp("^(.+\\."+L+"|"+L+")$","i").test(T)}const Fn=new wi(3e4,6e4);function gl(){const M=xi().___jsl;if(M?.H)for(const v of Object.keys(M.H))if(M.H[v].r=M.H[v].r||[],M.H[v].L=M.H[v].L||[],M.H[v].r=[...M.H[v].L],M.CP)for(let b=0;b<M.CP.length;b++)M.CP[b]=null}let Wo=null;const Th=new wi(5e3,15e3),Yo="__/auth/iframe",rd="emulator/auth/iframe",Ch={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ig(M){const v=M.config;Et(v.authDomain,M,"auth-domain-config-required");const b=v.emulator?Ei(v,rd):`https://${M.config.authDomain}/${Yo}`,T={apiKey:v.apiKey,appName:M.name,v:B.SDK_VERSION},L=sd.get(M.config.apiHost);L&&(T.eid=L);const V=M._getFrameworks();return V.length&&(T.fw=V.join(",")),`${b}?${(0,K.xO)(T).slice(1)}`}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},O=500,Y=600,ce="_blank",Pe="http://localhost";class Je{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const tn="__/auth/handler",yn="emulator/auth/handler",Tn=encodeURIComponent("fac");function ni(M,v,b,T,L,V){return(pe=pe||(0,a.Z)(function*(ne,we,qe,yt,An,wn){Et(ne.config.authDomain,ne,"auth-domain-config-required"),Et(ne.config.apiKey,ne,"invalid-api-key");const On={apiKey:ne.config.apiKey,appName:ne.name,authType:qe,redirectUrl:yt,v:B.SDK_VERSION,eventId:An};if(we instanceof or){we.setDefaultLanguage(ne.languageCode),On.providerId=we.providerId||"",(0,K.xb)(we.getCustomParameters())||(On.customParameters=JSON.stringify(we.getCustomParameters()));for(const[rs,ac]of Object.entries(wn||{}))On[rs]=ac}if(we instanceof ds){const rs=we.getScopes().filter(ac=>""!==ac);rs.length>0&&(On.scopes=rs.join(","))}ne.tenantId&&(On.tid=ne.tenantId);const Ri=On;for(const rs of Object.keys(Ri))void 0===Ri[rs]&&delete Ri[rs];const is=yield ne._getAppCheckToken(),yo=is?`#${Tn}=${encodeURIComponent(is)}`:"";return`${function Cn({config:M}){return M.emulator?Ei(M,yn):`https://${M.authDomain}/${tn}`}(ne)}?${(0,K.xO)(Ri).slice(1)}${yo}`})).apply(this,arguments)}const Yi="webStorageSupport",gr=class vs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dl,this._completeRedirectFn=$a,this._overrideRedirectResult=xr}_openPopup(v,b,T,L){var V=this;return(0,a.Z)(function*(){var ne;wr(null===(ne=V.eventManagers[v._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const we=yield ni(v,b,T,Pi(),L);return function _t(M,v,b,T=O,L=Y){const V=Math.max((window.screen.availHeight-L)/2,0).toString(),ne=Math.max((window.screen.availWidth-T)/2,0).toString();let we="";const qe=Object.assign(Object.assign({},A),{width:T.toString(),height:L.toString(),top:V,left:ne}),yt=(0,K.z$)().toLowerCase();b&&(we=Jf(yt)?ce:b),Hd(yt)&&(v=v||Pe,qe.scrollbars="yes");const An=Object.entries(qe).reduce((On,[Ri,is])=>`${On}${Ri}=${is},`,"");if(function Sc(M=(0,K.z$)()){var v;return Ru(M)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(yt)&&"_self"!==we)return function Ot(M,v){const b=document.createElement("a");b.href=M,b.target=v;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(T)}(v||"",we),new Je(null);const wn=window.open(v||"",we,An);Et(wn,M,"popup-blocked");try{wn.focus()}catch{}return new Je(wn)}(v,we,Qi())})()}_openRedirect(v,b,T,L){var V=this;return(0,a.Z)(function*(){return yield V._originValidation(v),function hl(M){xi().location.href=M}(yield ni(v,b,T,Pi(),L)),new Promise(()=>{})})()}_initialize(v){const b=v._key();if(this.eventManagers[b]){const{manager:L,promise:V}=this.eventManagers[b];return L?Promise.resolve(L):(wr(V,"If manager is not set, promise should be"),V)}const T=this.initAndGetManager(v);return this.eventManagers[b]={promise:T},T.catch(()=>{delete this.eventManagers[b]}),T}initAndGetManager(v){var b=this;return(0,a.Z)(function*(){const T=yield function D(M){return($=$||(0,a.Z)(function*(v){const b=yield function ua(M){return Wo=Wo||function Va(M){return new Promise((v,b)=>{var T,L,V;function ne(){gl(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{gl(),b(gn(M,"network-request-failed"))},timeout:Fn.get()})}if(null!==(L=null===(T=xi().gapi)||void 0===T?void 0:T.iframes)&&void 0!==L&&L.Iframe)v(gapi.iframes.getContext());else{if(null===(V=xi().gapi)||void 0===V||!V.load){const we=Dc("iframefcb");return xi()[we]=()=>{gapi.load?ne():b(gn(M,"network-request-failed"))},Nl(`https://apis.google.com/js/api.js?onload=${we}`).catch(qe=>b(qe))}ne()}}).catch(v=>{throw Wo=null,v})}(M),Wo}(v),T=xi().gapi;return Et(T,v,"internal-error"),b.open({where:document.body,url:Ig(v),messageHandlersFilter:T.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ch,dontclear:!0},L=>{var V;return new Promise(function(ne,we){return(V=V||(0,a.Z)(function*(qe,yt){yield L.restyle({setHideOnLeave:!1});const An=gn(v,"network-request-failed"),wn=xi().setTimeout(()=>{yt(An)},Th.get());function On(){xi().clearTimeout(wn),qe(L)}L.ping(On).then(On,()=>{yt(An)})})).apply(this,arguments)})})})).apply(this,arguments)}(v),L=new ur(v);return T.register("authEvent",V=>(Et(V?.authEvent,v,"invalid-auth-event"),{status:L.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[v._key()]={manager:L},b.iframes[v._key()]=T,L})()}_isIframeWebStorageSupported(v,b){this.iframes[v._key()].send(Yi,{type:Yi},L=>{var V;const ne=null===(V=L?.[0])||void 0===V?void 0:V[Yi];void 0!==ne&&b(!!ne),fn(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const b=v._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function Ao(M){return(j=j||(0,a.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:b}=yield Qc(v);for(const T of b)try{if(pl(T))return}catch{}fn(v,"unauthorized-domain")})).apply(this,arguments)}(v)),this.originValidationPromises[b]}get _shouldInitProactively(){return Ou()||zd()||Ru()}};class Qn{constructor(v){this.factorId=v}_process(v,b,T){switch(b.type){case"enroll":return this._finalizeEnroll(v,b.credential,T);case"signin":return this._finalizeSignIn(v,b.credential);default:return Ai("unexpected MultiFactorSessionType")}}}class Tr extends Qn{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new Tr(v)}_finalizeEnroll(v,b,T){return function $c(M,v){return Vi(M,"POST","/v2/accounts/mfaEnrollment:finalize",Xn(M,v))}(v,{idToken:b,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,b){return function Jl(M,v){return Vi(M,"POST","/v2/accounts/mfaSignIn:finalize",Xn(M,v))}(v,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qo=(()=>{class M{constructor(){}static assertion(b){return Tr._fromCredential(b)}}return M.FACTOR_ID="phone",M})();var oc="@firebase/auth";class _l{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var b=this;return(0,a.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const b=this.auth.onIdTokenChanged(T=>{v(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(v,b),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const b=this.internalListeners.get(v);b&&(this.internalListeners.delete(v),b(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Dm=(0,K.Pz)("authIdTokenMaxAge")||300;let Dg=null;const tv=M=>{var v;return function(b){return(v=v||(0,a.Z)(function*(T){const L=T&&(yield T.getIdTokenResult()),V=L&&((new Date).getTime()-Date.parse(L.issuedAtTime))/1e3;if(V&&V>Dm)return;const ne=L?.token;Dg!==ne&&(Dg=ne,yield fetch(M,{method:ne?"POST":"DELETE",headers:ne?{Authorization:`Bearer ${ne}`}:{}}))})).apply(this,arguments)}};function Ih(M=(0,B.getApp)()){const v=(0,B._getProvider)(M,"auth");if(v.isInitialized())return v.getImmediate();const b=function ol(M,v){const b=(0,B._getProvider)(M,"auth");if(b.isInitialized()){const L=b.getImmediate(),V=b.getOptions();if((0,K.vZ)(V,v??{}))return L;fn(L,"already-initialized")}return b.initialize({options:v})}(M,{popupRedirectResolver:gr,persistence:[Fa,fh,dl]}),T=(0,K.Pz)("authTokenSyncURL");if(T){const V=tv(T);(function qu(M,v,b){(0,K.m9)(M).beforeAuthStateChanged(v,b)})(b,V,()=>V(b.currentUser)),function Yu(M,v,b,T){(0,K.m9)(M).onIdTokenChanged(v,b,T)}(b,ne=>V(ne))}const L=(0,K.q4)("auth");return L&&Gd(b,`http://${L}`),b}!function Sm(M){(0,B._registerComponent)(new me.wA("auth",(v,{options:b})=>{const T=v.getProvider("app").getImmediate(),L=v.getProvider("heartbeat"),V=v.getProvider("app-check-internal"),{apiKey:ne,authDomain:we}=T.options;Et(ne&&!ne.includes(":"),"invalid-api-key",{appName:T.name});const qe={apiKey:ne,authDomain:we,clientPlatform:M,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tm(M)},yt=new Mc(T,L,V,qe);return function us(M,v){const b=v?.persistence||[],T=(Array.isArray(b)?b:[b]).map(mr);v?.errorMap&&M._updateErrorMap(v.errorMap),M._initializeWithPersistence(T,v?.popupRedirectResolver)}(yt,b),yt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,b,T)=>{v.getProvider("auth-internal").initialize()})),(0,B._registerComponent)(new me.wA("auth-internal",v=>{const b=yi(v.getProvider("auth").getImmediate());return new _l(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,B.registerVersion)(oc,"0.23.2",function nu(M){switch(M){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(M)),(0,B.registerVersion)(oc,"0.23.2","esm2017")}("Browser")},2090:(jt,Ze,F)=>{"use strict";F.d(Ze,{$s:()=>Xr,BH:()=>Le,G6:()=>Fe,L:()=>Me,LL:()=>He,P0:()=>Be,Pz:()=>Ne,Sg:()=>$e,UG:()=>ve,US:()=>me,ZB:()=>se,ZR:()=>Xe,aH:()=>Ce,b$:()=>rt,eu:()=>Q,hl:()=>G,jU:()=>Te,m9:()=>as,ne:()=>Rn,pd:()=>In,q4:()=>ue,r3:()=>Wt,ru:()=>Ye,tV:()=>ie,uI:()=>he,vZ:()=>st,w1:()=>on,xO:()=>bn,xb:()=>Ct,z$:()=>Z,zI:()=>de,zd:()=>ai});const Ee=function(ge){const re=[];let z=0;for(let j=0;j<ge.length;j++){let $=ge.charCodeAt(j);$<128?re[z++]=$:$<2048?(re[z++]=$>>6|192,re[z++]=63&$|128):55296==(64512&$)&&j+1<ge.length&&56320==(64512&ge.charCodeAt(j+1))?($=65536+((1023&$)<<10)+(1023&ge.charCodeAt(++j)),re[z++]=$>>18|240,re[z++]=$>>12&63|128,re[z++]=$>>6&63|128,re[z++]=63&$|128):(re[z++]=$>>12|224,re[z++]=$>>6&63|128,re[z++]=63&$|128)}return re},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,re){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=re?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let $=0;$<ge.length;$+=3){const pe=ge[$],et=$+1<ge.length,Ut=et?ge[$+1]:0,Vn=$+2<ge.length,Mn=Vn?ge[$+2]:0;let Ci=(15&Ut)<<2|Mn>>6,_i=63&Mn;Vn||(_i=64,et||(Ci=64)),j.push(z[pe>>2],z[(3&pe)<<4|Ut>>4],z[Ci],z[_i])}return j.join("")},encodeString(ge,re){return this.HAS_NATIVE_SUPPORT&&!re?btoa(ge):this.encodeByteArray(Ee(ge),re)},decodeString(ge,re){return this.HAS_NATIVE_SUPPORT&&!re?atob(ge):function(ge){const re=[];let z=0,j=0;for(;z<ge.length;){const $=ge[z++];if($<128)re[j++]=String.fromCharCode($);else if($>191&&$<224){const pe=ge[z++];re[j++]=String.fromCharCode((31&$)<<6|63&pe)}else if($>239&&$<365){const Vn=((7&$)<<18|(63&ge[z++])<<12|(63&ge[z++])<<6|63&ge[z++])-65536;re[j++]=String.fromCharCode(55296+(Vn>>10)),re[j++]=String.fromCharCode(56320+(1023&Vn))}else{const pe=ge[z++],et=ge[z++];re[j++]=String.fromCharCode((15&$)<<12|(63&pe)<<6|63&et)}}return re.join("")}(this.decodeStringToByteArray(ge,re))},decodeStringToByteArray(ge,re){this.init_();const z=re?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let $=0;$<ge.length;){const pe=z[ge.charAt($++)],Ut=$<ge.length?z[ge.charAt($)]:0;++$;const Mn=$<ge.length?z[ge.charAt($)]:64;++$;const xn=$<ge.length?z[ge.charAt($)]:64;if(++$,null==pe||null==Ut||null==Mn||null==xn)throw new oe;j.push(pe<<2|Ut>>4),64!==Mn&&(j.push(Ut<<4&240|Mn>>2),64!==xn&&j.push(Mn<<6&192|xn))}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}};class oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Me=function(ge){return function(ge){const re=Ee(ge);return me.encodeByteArray(re,!0)}(ge).replace(/\./g,"")},ie=function(ge){try{return me.decodeString(ge,!0)}catch(re){console.error("base64Decode failed: ",re)}return null};function se(ge,re){if(!(re instanceof Object))return re;switch(re.constructor){case Date:return new Date(re.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return re}for(const z in re)!re.hasOwnProperty(z)||!be(z)||(ge[z]=se(ge[z],re[z]));return ge}function be(ge){return"__proto__"!==ge}const le=()=>{try{return function xe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ge=process.env.__FIREBASE_DEFAULTS__;return ge?JSON.parse(ge):void 0})()||(()=>{if(typeof document>"u")return;let ge;try{ge=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const re=ge&&ie(ge[1]);return re&&JSON.parse(re)})()}catch(ge){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ge}`)}},ue=ge=>{var re,z;return null===(z=null===(re=le())||void 0===re?void 0:re.emulatorHosts)||void 0===z?void 0:z[ge]},Be=ge=>{const re=ue(ge);if(!re)return;const z=re.lastIndexOf(":");if(z<=0||z+1===re.length)throw new Error(`Invalid host ${re} with no separate hostname and port!`);const j=parseInt(re.substring(z+1),10);return"["===re[0]?[re.substring(1,z-1),j]:[re.substring(0,z),j]},Ce=()=>{var ge;return null===(ge=le())||void 0===ge?void 0:ge.config},Ne=ge=>{var re;return null===(re=le())||void 0===re?void 0:re[`_${ge}`]};class Le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((re,z)=>{this.resolve=re,this.reject=z})}wrapCallback(re){return(z,j)=>{z?this.reject(z):this.resolve(j),"function"==typeof re&&(this.promise.catch(()=>{}),1===re.length?re(z):re(z,j))}}}function $e(ge,re){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const j=re||"demo-project",$=ge.iat||0,pe=ge.sub||ge.user_id;if(!pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const et=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:$,exp:$+3600,auth_time:$,sub:pe,user_id:pe,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(et)),""].join(".")}function Z(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Z())}function ve(){var ge;const re=null===(ge=le())||void 0===ge?void 0:ge.forceEnvironment;if("node"===re)return!0;if("browser"===re)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Te(){return"object"==typeof self&&self.self===self}function Ye(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function on(){const ge=Z();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function Fe(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G(){try{return"object"==typeof indexedDB}catch{return!1}}function Q(){return new Promise((ge,re)=>{try{let z=!0;const j="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(j);$.onsuccess=()=>{$.result.close(),z||self.indexedDB.deleteDatabase(j),ge(!0)},$.onupgradeneeded=()=>{z=!1},$.onerror=()=>{var pe;re((null===(pe=$.error)||void 0===pe?void 0:pe.message)||"")}}catch(z){re(z)}})}function de(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Xe extends Error{constructor(re,z,j){super(z),this.code=re,this.customData=j,this.name="FirebaseError",Object.setPrototypeOf(this,Xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(re,z,j){this.service=re,this.serviceName=z,this.errors=j}create(re,...z){const j=z[0]||{},$=`${this.service}/${re}`,pe=this.errors[re],et=pe?function kt(ge,re){return ge.replace(Tt,(z,j)=>{const $=re[j];return null!=$?String($):`<${j}?>`})}(pe,j):"Error";return new Xe($,`${this.serviceName}: ${et} (${$}).`,j)}}const Tt=/\{\$([^}]+)}/g;function Wt(ge,re){return Object.prototype.hasOwnProperty.call(ge,re)}function Ct(ge){for(const re in ge)if(Object.prototype.hasOwnProperty.call(ge,re))return!1;return!0}function st(ge,re){if(ge===re)return!0;const z=Object.keys(ge),j=Object.keys(re);for(const $ of z){if(!j.includes($))return!1;const pe=ge[$],et=re[$];if(Dn(pe)&&Dn(et)){if(!st(pe,et))return!1}else if(pe!==et)return!1}for(const $ of j)if(!z.includes($))return!1;return!0}function Dn(ge){return null!==ge&&"object"==typeof ge}function bn(ge){const re=[];for(const[z,j]of Object.entries(ge))Array.isArray(j)?j.forEach($=>{re.push(encodeURIComponent(z)+"="+encodeURIComponent($))}):re.push(encodeURIComponent(z)+"="+encodeURIComponent(j));return re.length?"&"+re.join("&"):""}function ai(ge){const re={};return ge.replace(/^\?/,"").split("&").forEach(j=>{if(j){const[$,pe]=j.split("=");re[decodeURIComponent($)]=decodeURIComponent(pe)}}),re}function In(ge){const re=ge.indexOf("?");if(!re)return"";const z=ge.indexOf("#",re);return ge.substring(re,z>0?z:void 0)}function Rn(ge,re){const z=new Xt(ge,re);return z.subscribe.bind(z)}class Xt{constructor(re,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{re(this)}).catch(j=>{this.error(j)})}next(re){this.forEachObserver(z=>{z.next(re)})}error(re){this.forEachObserver(z=>{z.error(re)}),this.close(re)}complete(){this.forEachObserver(re=>{re.complete()}),this.close()}subscribe(re,z,j){let $;if(void 0===re&&void 0===z&&void 0===j)throw new Error("Missing Observer.");$=function Ui(ge,re){if("object"!=typeof ge||null===ge)return!1;for(const z of re)if(z in ge&&"function"==typeof ge[z])return!0;return!1}(re,["next","error","complete"])?re:{next:re,error:z,complete:j},void 0===$.next&&($.next=Ti),void 0===$.error&&($.error=Ti),void 0===$.complete&&($.complete=Ti);const pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch{}}),this.observers.push($),pe}unsubscribeOne(re){void 0===this.observers||void 0===this.observers[re]||(delete this.observers[re],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(re){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,re)}sendOne(re,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[re])try{z(this.observers[re])}catch(j){typeof console<"u"&&console.error&&console.error(j)}})}close(re){this.finalized||(this.finalized=!0,void 0!==re&&(this.finalError=re),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ti(){}const ri=1e3,Sr=2,rr=144e5,fr=.5;function Xr(ge,re=ri,z=Sr){const j=re*Math.pow(z,ge),$=Math.round(fr*j*(Math.random()-.5)*2);return Math.min(rr,j+$)}function as(ge){return ge&&ge._delegate?ge._delegate:ge}},9804:(jt,Ze,F)=>{"use strict";F.d(Ze,{c:()=>B,r:()=>X});const B=(Z,he)=>{Z.componentOnReady?Z.componentOnReady().then(ve=>he(ve)):X(()=>he(Z))},X=Z=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Z):"function"==typeof requestAnimationFrame?requestAnimationFrame(Z):setTimeout(Z)},3435:(jt,Ze,F)=>{"use strict";F.d(Ze,{L:()=>_e,a:()=>Me,b:()=>ie,c:()=>X,d:()=>se,g:()=>on});const _e="ionViewWillEnter",Me="ionViewDidEnter",ie="ionViewWillLeave",X="ionViewDidLeave",se="ionViewWillUnload",on=vt=>vt.classList.contains("ion-page")?vt:vt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||vt},2876:(jt,Ze,F)=>{"use strict";F.d(Ze,{c:()=>Ue});var a=F(2972),K=F(2961);let B;const Ae=te=>te.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),me=te=>(void 0===B&&(B=void 0===te.style.animationName&&void 0!==te.style.webkitAnimationName?"-webkit-":""),B),oe=(te,le,ue)=>{const Be=le.startsWith("animation")?me(te):"";te.style.setProperty(Be+le,ue)},_e=(te,le)=>{const ue=le.startsWith("animation")?me(te):"";te.style.removeProperty(ue+le)},X=[],ke=(te=[],le)=>{if(void 0!==le){const ue=Array.isArray(le)?le:[le];return[...te,...ue]}return te},Ue=te=>{let le,ue,Be,Ce,Ne,Le,Te,G,Q,de,fe,Tt,Rt,$e=[],Z=[],he=[],ve=!1,Ye={},rt=[],Qe=[],on={},vt=0,$t=!1,Fe=!1,Xe=!0,He=!1,kt=!0,Vt=!1;const vn=te,zn=[],Bn=[],Zt=[],Gt=[],Wt=[],lt=[],Ct=[],at=[],st=[],Dn=[],mi=[],bn="function"==typeof AnimationEffect||void 0!==a.w&&"function"==typeof a.w.AnimationEffect,ai="function"==typeof Element&&"function"==typeof Element.prototype.animate&&bn,Zn=()=>mi,Ti=(Ge,It)=>{const Qt=It.findIndex(N=>N.c===Ge);Qt>-1&&It.splice(Qt,1)},Xi=(Ge,It)=>((It?.oneTimeCallback?Bn:zn).push({c:Ge,o:It}),Rt),os=()=>{if(ai)mi.forEach(Ge=>{Ge.cancel()}),mi.length=0;else{const Ge=Gt.slice();(0,K.r)(()=>{Ge.forEach(It=>{_e(It,"animation-name"),_e(It,"animation-duration"),_e(It,"animation-timing-function"),_e(It,"animation-iteration-count"),_e(It,"animation-delay"),_e(It,"animation-play-state"),_e(It,"animation-fill-mode"),_e(It,"animation-direction")})})}},bi=()=>{lt.forEach(Ge=>{Ge?.parentNode&&Ge.parentNode.removeChild(Ge)}),lt.length=0},re=()=>void 0!==Ne?Ne:Te?Te.getFill():"both",z=()=>void 0!==Q?Q:void 0!==Le?Le:Te?Te.getDirection():"normal",j=()=>$t?"linear":void 0!==Be?Be:Te?Te.getEasing():"linear",$=()=>Fe?0:void 0!==de?de:void 0!==ue?ue:Te?Te.getDuration():0,pe=()=>void 0!==Ce?Ce:Te?Te.getIterations():1,et=()=>void 0!==fe?fe:void 0!==le?le:Te?Te.getDelay():0,gn=()=>{0!==vt&&(vt--,0===vt&&((()=>{ti(),st.forEach(W=>W()),Dn.forEach(W=>W());const Ge=Xe?1:0,It=rt,Qt=Qe,N=on;Gt.forEach(W=>{const Oe=W.classList;It.forEach(Se=>Oe.add(Se)),Qt.forEach(Se=>Oe.remove(Se));for(const Se in N)N.hasOwnProperty(Se)&&oe(W,Se,N[Se])}),de=void 0,Q=void 0,fe=void 0,zn.forEach(W=>W.c(Ge,Rt)),Bn.forEach(W=>W.c(Ge,Rt)),Bn.length=0,kt=!0,Xe&&(He=!0),Xe=!0})(),Te&&Te.animationFinish()))},_n=(Ge=!0)=>{bi();const It=(te=>(te.forEach(le=>{for(const ue in le)if(le.hasOwnProperty(ue)){const Be=le[ue];if("easing"===ue)le["animation-timing-function"]=Be,delete le[ue];else{const Ce=Ae(ue);Ce!==ue&&(le[Ce]=Be,delete le[ue])}}}),te))($e);Gt.forEach(Qt=>{if(It.length>0){const N=((te=[])=>te.map(le=>{const ue=le.offset,Be=[];for(const Ce in le)le.hasOwnProperty(Ce)&&"offset"!==Ce&&Be.push(`${Ce}: ${le[Ce]};`);return`${100*ue}% { ${Be.join(" ")} }`}).join(" "))(It);Tt=void 0!==te?te:(te=>{let le=X.indexOf(te);return le<0&&(le=X.push(te)-1),`ion-animation-${le}`})(N);const W=((te,le,ue)=>{var Be;const Ce=(te=>{const le=void 0!==te.getRootNode?te.getRootNode():te;return le.head||le})(ue),Ne=me(ue),Le=Ce.querySelector("#"+te);if(Le)return Le;const $e=(null!==(Be=ue.ownerDocument)&&void 0!==Be?Be:document).createElement("style");return $e.id=te,$e.textContent=`@${Ne}keyframes ${te} { ${le} } @${Ne}keyframes ${te}-alt { ${le} }`,Ce.appendChild($e),$e})(Tt,N,Qt);lt.push(W),oe(Qt,"animation-duration",`${$()}ms`),oe(Qt,"animation-timing-function",j()),oe(Qt,"animation-delay",`${et()}ms`),oe(Qt,"animation-fill-mode",re()),oe(Qt,"animation-direction",z());const Oe=pe()===1/0?"infinite":pe().toString();oe(Qt,"animation-iteration-count",Oe),oe(Qt,"animation-play-state","paused"),Ge&&oe(Qt,"animation-name",`${W.id}-alt`),(0,K.r)(()=>{oe(Qt,"animation-name",W.id||null)})}})},Yn=(Ge=!0)=>{(()=>{Ct.forEach(N=>N()),at.forEach(N=>N());const Ge=Z,It=he,Qt=Ye;Gt.forEach(N=>{const W=N.classList;Ge.forEach(Oe=>W.add(Oe)),It.forEach(Oe=>W.remove(Oe));for(const Oe in Qt)Qt.hasOwnProperty(Oe)&&oe(N,Oe,Qt[Oe])})})(),$e.length>0&&(ai?(Gt.forEach(Ge=>{const It=Ge.animate($e,{id:vn,delay:et(),duration:$(),easing:j(),iterations:pe(),fill:re(),direction:z()});It.pause(),mi.push(It)}),mi.length>0&&(mi[0].onfinish=()=>{gn()})):_n(Ge)),ve=!0},Et=Ge=>{if(Ge=Math.min(Math.max(Ge,0),.9999),ai)mi.forEach(It=>{It.currentTime=It.effect.getComputedTiming().delay+$()*Ge,It.pause()});else{const It=`-${$()*Ge}ms`;Gt.forEach(Qt=>{$e.length>0&&(oe(Qt,"animation-delay",It),oe(Qt,"animation-play-state","paused"))})}},Ai=Ge=>{mi.forEach(It=>{It.effect.updateTiming({delay:et(),duration:$(),easing:j(),iterations:pe(),fill:re(),direction:z()})}),void 0!==Ge&&Et(Ge)},wr=(Ge=!0,It)=>{(0,K.r)(()=>{Gt.forEach(Qt=>{oe(Qt,"animation-name",Tt||null),oe(Qt,"animation-duration",`${$()}ms`),oe(Qt,"animation-timing-function",j()),oe(Qt,"animation-delay",void 0!==It?`-${It*$()}ms`:`${et()}ms`),oe(Qt,"animation-fill-mode",re()||null),oe(Qt,"animation-direction",z()||null);const N=pe()===1/0?"infinite":pe().toString();oe(Qt,"animation-iteration-count",N),Ge&&oe(Qt,"animation-name",`${Tt}-alt`),(0,K.r)(()=>{oe(Qt,"animation-name",Tt||null)})})})},Pi=(Ge=!1,It=!0,Qt)=>(Ge&&Wt.forEach(N=>{N.update(Ge,It,Qt)}),ai?Ai(Qt):wr(It,Qt),Rt),jn=()=>{ve&&(ai?mi.forEach(Ge=>{Ge.pause()}):Gt.forEach(Ge=>{oe(Ge,"animation-play-state","paused")}),Vt=!0)},Ei=()=>{G=void 0,gn()},ti=()=>{G&&clearTimeout(G)},sr=Ge=>new Promise(It=>{Ge?.sync&&(Fe=!0,Xi(()=>Fe=!1,{oneTimeCallback:!0})),ve||Yn(),He&&(ai?(Et(0),Ai()):wr(),He=!1),kt&&(vt=Wt.length+1,kt=!1);const Qt=()=>{Ti(N,Bn),It()},N=()=>{Ti(Qt,Zt),It()};Xi(N,{oneTimeCallback:!0}),((Ge,It)=>{Zt.push({c:Ge,o:{oneTimeCallback:!0}})})(Qt),Wt.forEach(W=>{W.play()}),ai?(mi.forEach(Ge=>{Ge.play()}),(0===$e.length||0===Gt.length)&&gn()):(()=>{if(ti(),(0,K.r)(()=>{Gt.forEach(Ge=>{$e.length>0&&oe(Ge,"animation-play-state","running")})}),0===$e.length||0===Gt.length)gn();else{const Ge=et()||0,It=$()||0,Qt=pe()||1;isFinite(Qt)&&(G=setTimeout(Ei,Ge+It*Qt+100)),((te,le)=>{let ue;const Be={passive:!0},Ne=Le=>{te===Le.target&&(ue&&ue(),ti(),(0,K.r)(()=>{Gt.forEach(Ge=>{_e(Ge,"animation-duration"),_e(Ge,"animation-delay"),_e(Ge,"animation-play-state")}),(0,K.r)(gn)}))};te&&(te.addEventListener("webkitAnimationEnd",Ne,Be),te.addEventListener("animationend",Ne,Be),ue=()=>{te.removeEventListener("webkitAnimationEnd",Ne,Be),te.removeEventListener("animationend",Ne,Be)})})(Gt[0])}})(),Vt=!1}),lo=(Ge,It)=>{const Qt=$e[0];return void 0===Qt||void 0!==Qt.offset&&0!==Qt.offset?$e=[{offset:0,[Ge]:It},...$e]:Qt[Ge]=It,Rt};return Rt={parentAnimation:Te,elements:Gt,childAnimations:Wt,id:vn,animationFinish:gn,from:lo,to:(Ge,It)=>{const Qt=$e[$e.length-1];return void 0===Qt||void 0!==Qt.offset&&1!==Qt.offset?$e=[...$e,{offset:1,[Ge]:It}]:Qt[Ge]=It,Rt},fromTo:(Ge,It,Qt)=>lo(Ge,It).to(Ge,Qt),parent:Ge=>(Te=Ge,Rt),play:sr,pause:()=>(Wt.forEach(Ge=>{Ge.pause()}),jn(),Rt),stop:()=>{Wt.forEach(Ge=>{Ge.stop()}),ve&&(os(),ve=!1),$t=!1,Fe=!1,kt=!0,Q=void 0,de=void 0,fe=void 0,vt=0,He=!1,Xe=!0,Vt=!1,Zt.forEach(Ge=>Ge.c(0,Rt)),Zt.length=0},destroy:Ge=>(Wt.forEach(It=>{It.destroy(Ge)}),(Ge=>{os(),Ge&&bi()})(Ge),Gt.length=0,Wt.length=0,$e.length=0,zn.length=0,Bn.length=0,ve=!1,kt=!0,Rt),keyframes:Ge=>{const It=$e!==Ge;return $e=Ge,It&&(Ge=>{ai?Zn().forEach(It=>{const Qt=It.effect;if(Qt.setKeyframes)Qt.setKeyframes(Ge);else{const N=new KeyframeEffect(Qt.target,Ge,Qt.getTiming());It.effect=N}}):_n()})($e),Rt},addAnimation:Ge=>{if(null!=Ge)if(Array.isArray(Ge))for(const It of Ge)It.parent(Rt),Wt.push(It);else Ge.parent(Rt),Wt.push(Ge);return Rt},addElement:Ge=>{if(null!=Ge)if(1===Ge.nodeType)Gt.push(Ge);else if(Ge.length>=0)for(let It=0;It<Ge.length;It++)Gt.push(Ge[It]);else console.error("Invalid addElement value");return Rt},update:Pi,fill:Ge=>(Ne=Ge,Pi(!0),Rt),direction:Ge=>(Le=Ge,Pi(!0),Rt),iterations:Ge=>(Ce=Ge,Pi(!0),Rt),duration:Ge=>(!ai&&0===Ge&&(Ge=1),ue=Ge,Pi(!0),Rt),easing:Ge=>(Be=Ge,Pi(!0),Rt),delay:Ge=>(le=Ge,Pi(!0),Rt),getWebAnimations:Zn,getKeyframes:()=>$e,getFill:re,getDirection:z,getDelay:et,getIterations:pe,getEasing:j,getDuration:$,afterAddRead:Ge=>(st.push(Ge),Rt),afterAddWrite:Ge=>(Dn.push(Ge),Rt),afterClearStyles:(Ge=[])=>{for(const It of Ge)on[It]="";return Rt},afterStyles:(Ge={})=>(on=Ge,Rt),afterRemoveClass:Ge=>(Qe=ke(Qe,Ge),Rt),afterAddClass:Ge=>(rt=ke(rt,Ge),Rt),beforeAddRead:Ge=>(Ct.push(Ge),Rt),beforeAddWrite:Ge=>(at.push(Ge),Rt),beforeClearStyles:(Ge=[])=>{for(const It of Ge)Ye[It]="";return Rt},beforeStyles:(Ge={})=>(Ye=Ge,Rt),beforeRemoveClass:Ge=>(he=ke(he,Ge),Rt),beforeAddClass:Ge=>(Z=ke(Z,Ge),Rt),onFinish:Xi,isRunning:()=>0!==vt&&!Vt,progressStart:(Ge=!1,It)=>(Wt.forEach(Qt=>{Qt.progressStart(Ge,It)}),jn(),$t=Ge,ve||Yn(),Pi(!1,!0,It),Rt),progressStep:Ge=>(Wt.forEach(It=>{It.progressStep(Ge)}),Et(Ge),Rt),progressEnd:(Ge,It,Qt)=>($t=!1,Wt.forEach(N=>{N.progressEnd(Ge,It,Qt)}),void 0!==Qt&&(de=Qt),He=!1,Xe=!0,0===Ge?(Q="reverse"===z()?"normal":"reverse","reverse"===Q&&(Xe=!1),ai?(Pi(),Et(1-It)):(fe=(1-It)*$()*-1,Pi(!1,!1))):1===Ge&&(ai?(Pi(),Et(It)):(fe=It*$()*-1,Pi(!1,!1))),void 0!==Ge&&!Te&&sr(),Rt)}}},7036:(jt,Ze,F)=>{"use strict";F.d(Ze,{E:()=>ie,a:()=>a,s:()=>_e});const a=X=>{try{if(X instanceof oe)return X.value;if(!Ee()||"string"!=typeof X||""===X)return X;if(X.includes("onload="))return"";const se=document.createDocumentFragment(),be=document.createElement("div");se.appendChild(be),be.innerHTML=X,me.forEach(te=>{const le=se.querySelectorAll(te);for(let ue=le.length-1;ue>=0;ue--){const Be=le[ue];Be.parentNode?Be.parentNode.removeChild(Be):se.removeChild(Be);const Ce=B(Be);for(let Ne=0;Ne<Ce.length;Ne++)K(Ce[Ne])}});const xe=B(se);for(let te=0;te<xe.length;te++)K(xe[te]);const ke=document.createElement("div");ke.appendChild(se);const Ue=ke.querySelector("div");return null!==Ue?Ue.innerHTML:ke.innerHTML}catch(se){return console.error(se),""}},K=X=>{if(X.nodeType&&1!==X.nodeType)return;if(typeof NamedNodeMap<"u"&&!(X.attributes instanceof NamedNodeMap))return void X.remove();for(let be=X.attributes.length-1;be>=0;be--){const xe=X.attributes.item(be),ke=xe.name;if(!Ae.includes(ke.toLowerCase())){X.removeAttribute(ke);continue}const Ue=xe.value,te=X[ke];(null!=Ue&&Ue.toLowerCase().includes("javascript:")||null!=te&&te.toLowerCase().includes("javascript:"))&&X.removeAttribute(ke)}const se=B(X);for(let be=0;be<se.length;be++)K(se[be])},B=X=>null!=X.children?X.children:X.childNodes,Ee=()=>{var X;const be=null===(X=window?.Ionic)||void 0===X?void 0:X.config;return!be||(be.get?be.get("sanitizerEnabled",!0):!0===be.sanitizerEnabled||void 0===be.sanitizerEnabled)},Ae=["class","id","href","src","name","slot"],me=["script","style","iframe","meta","link","object","embed"];class oe{constructor(se){this.value=se}}const _e=X=>{const se=window,be=se.Ionic;if(!be||!be.config||"Object"===be.config.constructor.name)return se.Ionic=se.Ionic||{},se.Ionic.config=Object.assign(Object.assign({},se.Ionic.config),X),se.Ionic.config},ie=!1},7869:(jt,Ze,F)=>{"use strict";F.d(Ze,{C:()=>me,a:()=>Ee,d:()=>Ae});var B,a=F(5861),K=F(2961);const Ee=function(_e,Me,ie,X,se,be){return(B=B||(0,a.Z)(function*(xe,ke,Ue,te,le,ue){var Be;if(xe)return xe.attachViewToDom(ke,Ue,le,te);if(!(ue||"string"==typeof Ue||Ue instanceof HTMLElement))throw new Error("framework delegate is missing");const Ce="string"==typeof Ue?null===(Be=ke.ownerDocument)||void 0===Be?void 0:Be.createElement(Ue):Ue;return te&&te.forEach(Ne=>Ce.classList.add(Ne)),le&&Object.assign(Ce,le),ke.appendChild(Ce),yield new Promise(Ne=>(0,K.c)(Ce,Ne)),Ce})).apply(this,arguments)},Ae=(oe,_e)=>{if(_e){if(oe)return oe.removeViewFromDom(_e.parentElement,_e);_e.remove()}return Promise.resolve()},me=()=>{var oe;let _e,Me;return{attachViewToDom:function(be,xe){return(oe=oe||(0,a.Z)(function*(ke,Ue,te={},le=[]){var ue,Be;let Ce;if(_e=ke,Ue){const Le="string"==typeof Ue?null===(ue=_e.ownerDocument)||void 0===ue?void 0:ue.createElement(Ue):Ue;le.forEach($e=>Le.classList.add($e)),Object.assign(Le,te),_e.appendChild(Le),Ce=Le,yield new Promise($e=>(0,K.c)(Le,$e))}else if(_e.children.length>0&&("ION-MODAL"===_e.tagName||"ION-POPOVER"===_e.tagName)&&!(Ce=_e.children[0]).classList.contains("ion-delegate-host")){const $e=null===(Be=_e.ownerDocument)||void 0===Be?void 0:Be.createElement("div");$e.classList.add("ion-delegate-host"),le.forEach(Z=>$e.classList.add(Z)),$e.append(..._e.children),_e.appendChild($e),Ce=$e}const Ne=document.querySelector("ion-app")||document.body;return Me=document.createComment("ionic teleport"),_e.parentNode.insertBefore(Me,_e),Ne.appendChild(_e),Ce??_e})).apply(this,arguments)},removeViewFromDom:()=>(_e&&Me&&(Me.parentNode.insertBefore(_e,Me),Me.remove()),Promise.resolve())}}},2889:(jt,Ze,F)=>{"use strict";F.d(Ze,{G:()=>Ae});class K{constructor(oe,_e,Me,ie,X){this.id=_e,this.name=Me,this.disableScroll=X,this.priority=1e6*ie+_e,this.ctrl=oe}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const oe=this.ctrl.capture(this.name,this.id,this.priority);return oe&&this.disableScroll&&this.ctrl.disableScroll(this.id),oe}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class B{constructor(oe,_e,Me,ie){this.id=_e,this.disable=Me,this.disableScroll=ie,this.ctrl=oe}block(){if(this.ctrl){if(this.disable)for(const oe of this.disable)this.ctrl.disableGesture(oe,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const oe of this.disable)this.ctrl.enableGesture(oe,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Ee="backdrop-no-scroll",Ae=new class a{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(oe){var _e;return new K(this,this.newID(),oe.name,null!==(_e=oe.priority)&&void 0!==_e?_e:0,!!oe.disableScroll)}createBlocker(oe={}){return new B(this,this.newID(),oe.disable,!!oe.disableScroll)}start(oe,_e,Me){return this.canStart(oe)?(this.requestedStart.set(_e,Me),!0):(this.requestedStart.delete(_e),!1)}capture(oe,_e,Me){if(!this.start(oe,_e,Me))return!1;const ie=this.requestedStart;let X=-1e4;if(ie.forEach(se=>{X=Math.max(X,se)}),X===Me){this.capturedId=_e,ie.clear();const se=new CustomEvent("ionGestureCaptured",{detail:{gestureName:oe}});return document.dispatchEvent(se),!0}return ie.delete(_e),!1}release(oe){this.requestedStart.delete(oe),this.capturedId===oe&&(this.capturedId=void 0)}disableGesture(oe,_e){let Me=this.disabledGestures.get(oe);void 0===Me&&(Me=new Set,this.disabledGestures.set(oe,Me)),Me.add(_e)}enableGesture(oe,_e){const Me=this.disabledGestures.get(oe);void 0!==Me&&Me.delete(_e)}disableScroll(oe){this.disabledScroll.add(oe),1===this.disabledScroll.size&&document.body.classList.add(Ee)}enableScroll(oe){this.disabledScroll.delete(oe),0===this.disabledScroll.size&&document.body.classList.remove(Ee)}canStart(oe){return!(void 0!==this.capturedId||this.isDisabled(oe))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(oe){const _e=this.disabledGestures.get(oe);return!!(_e&&_e.size>0)}newID(){return this.gestureId++,this.gestureId}}},8261:(jt,Ze,F)=>{"use strict";F.r(Ze),F.d(Ze,{MENU_BACK_BUTTON_PRIORITY:()=>Ae,OVERLAY_BACK_BUTTON_PRIORITY:()=>Ee,blockHardwareBackButton:()=>K,startHardwareBackButton:()=>B});var a=F(5861);const K=()=>{document.addEventListener("backbutton",()=>{})},B=()=>{const me=document;let oe=!1;me.addEventListener("backbutton",()=>{var _e;if(oe)return;let Me=0,ie=[];const X=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(xe,ke){ie.push({priority:xe,handler:ke,id:Me++})}}});me.dispatchEvent(X);const be=()=>{if(ie.length>0){let xe={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};ie.forEach(ke=>{ke.priority>=xe.priority&&(xe=ke)}),oe=!0,ie=ie.filter(ke=>ke.id!==xe.id),function(ke){return(_e=_e||(0,a.Z)(function*(Ue){try{if(Ue?.handler){const te=Ue.handler(be);null!=te&&(yield te)}}catch(te){console.error(te)}})).apply(this,arguments)}(xe).then(()=>oe=!1)}};be()})},Ee=100,Ae=99},2961:(jt,Ze,F)=>{"use strict";F.d(Ze,{a:()=>_e,b:()=>Me,c:()=>B,d:()=>Ue,e:()=>ke,f:()=>xe,g:()=>ie,h:()=>be,i:()=>oe,j:()=>Ne,k:()=>Ae,l:()=>te,m:()=>Ee,n:()=>se,o:()=>le,p:()=>Ce,q:()=>Le,r:()=>X,s:()=>$e,t:()=>a,u:()=>ue,v:()=>Be});const a=(Z,he=0)=>new Promise(ve=>{K(Z,he,ve)}),K=(Z,he=0,ve)=>{let Te,Ye;const rt={passive:!0},on=()=>{Te&&Te()},vt=$t=>{(void 0===$t||Z===$t.target)&&(on(),ve($t))};return Z&&(Z.addEventListener("webkitTransitionEnd",vt,rt),Z.addEventListener("transitionend",vt,rt),Ye=setTimeout(vt,he+500),Te=()=>{Ye&&(clearTimeout(Ye),Ye=void 0),Z.removeEventListener("webkitTransitionEnd",vt,rt),Z.removeEventListener("transitionend",vt,rt)}),on},B=(Z,he)=>{Z.componentOnReady?Z.componentOnReady().then(ve=>he(ve)):X(()=>he(Z))},Ee=Z=>void 0!==Z.componentOnReady,Ae=(Z,he=[])=>{const ve={};return he.forEach(Te=>{Z.hasAttribute(Te)&&(null!==Z.getAttribute(Te)&&(ve[Te]=Z.getAttribute(Te)),Z.removeAttribute(Te))}),ve},me=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],oe=(Z,he)=>{let ve=me;return he&&he.length>0&&(ve=ve.filter(Te=>!he.includes(Te))),Ae(Z,ve)},_e=(Z,he,ve,Te)=>{var Ye;if(typeof window<"u"){const Qe=null===(Ye=window?.Ionic)||void 0===Ye?void 0:Ye.config;if(Qe){const on=Qe.get("_ael");if(on)return on(Z,he,ve,Te);if(Qe._ael)return Qe._ael(Z,he,ve,Te)}}return Z.addEventListener(he,ve,Te)},Me=(Z,he,ve,Te)=>{var Ye;if(typeof window<"u"){const Qe=null===(Ye=window?.Ionic)||void 0===Ye?void 0:Ye.config;if(Qe){const on=Qe.get("_rel");if(on)return on(Z,he,ve,Te);if(Qe._rel)return Qe._rel(Z,he,ve,Te)}}return Z.removeEventListener(he,ve,Te)},ie=(Z,he=Z)=>Z.shadowRoot||he,X=Z=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Z):"function"==typeof requestAnimationFrame?requestAnimationFrame(Z):setTimeout(Z),se=Z=>!!Z.shadowRoot&&!!Z.attachShadow,be=Z=>{const he=Z.closest("ion-item");return he?he.querySelector("ion-label"):null},xe=Z=>{if(Z.focus(),Z.classList.contains("ion-focusable")){const he=Z.closest("ion-app");he&&he.setFocus([Z])}},ke=(Z,he)=>{let ve;const Te=Z.getAttribute("aria-labelledby"),Ye=Z.id;let rt=null!==Te&&""!==Te.trim()?Te:he+"-lbl",Qe=null!==Te&&""!==Te.trim()?document.getElementById(Te):be(Z);return Qe?(null===Te&&(Qe.id=rt),ve=Qe.textContent,Qe.setAttribute("aria-hidden","true")):""!==Ye.trim()&&(Qe=document.querySelector(`label[for="${Ye}"]`),Qe&&(""!==Qe.id?rt=Qe.id:Qe.id=rt=`${Ye}-lbl`,ve=Qe.textContent)),{label:Qe,labelId:rt,labelText:ve}},Ue=(Z,he,ve,Te,Ye)=>{if(Z||se(he)){let rt=he.querySelector("input.aux-input");rt||(rt=he.ownerDocument.createElement("input"),rt.type="hidden",rt.classList.add("aux-input"),he.appendChild(rt)),rt.disabled=Ye,rt.name=ve,rt.value=Te||""}},te=(Z,he,ve)=>Math.max(Z,Math.min(he,ve)),le=(Z,he)=>{if(!Z){const ve="ASSERT: "+he;throw console.error(ve),new Error(ve)}},ue=Z=>Z.timeStamp||Date.now(),Be=Z=>{if(Z){const he=Z.changedTouches;if(he&&he.length>0){const ve=he[0];return{x:ve.clientX,y:ve.clientY}}if(void 0!==Z.pageX)return{x:Z.pageX,y:Z.pageY}}return{x:0,y:0}},Ce=Z=>{const he="rtl"===document.dir;switch(Z){case"start":return he;case"end":return!he;default:throw new Error(`"${Z}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Ne=(Z,he)=>{const ve=Z._original||Z;return{_original:Z,emit:Le(ve.emit.bind(ve),he)}},Le=(Z,he=0)=>{let ve;return(...Te)=>{clearTimeout(ve),ve=setTimeout(Z,he,...Te)}},$e=(Z,he)=>{if(Z??(Z={}),he??(he={}),Z===he)return!0;const ve=Object.keys(Z);if(ve.length!==Object.keys(he).length)return!1;for(const Te of ve)if(!(Te in he)||Z[Te]!==he[Te])return!1;return!0}},8931:(jt,Ze,F)=>{"use strict";F.d(Ze,{m:()=>be});var a=F(5861),K=F(2972),B=F(8261),Ee=F(8909),Ae=F(2961),me=F(4649),oe=F(2876);const _e=xe=>(0,oe.c)().duration(xe?400:300),Me=xe=>{let ke,Ue;const te=xe.width+8,le=(0,oe.c)(),ue=(0,oe.c)();xe.isEndSide?(ke=te+"px",Ue="0px"):(ke=-te+"px",Ue="0px"),le.addElement(xe.menuInnerEl).fromTo("transform",`translateX(${ke})`,`translateX(${Ue})`);const Ce="ios"===(0,me.b)(xe),Ne=Ce?.2:.25;return ue.addElement(xe.backdropEl).fromTo("opacity",.01,Ne),_e(Ce).addAnimation([le,ue])},ie=xe=>{let ke,Ue;const te=(0,me.b)(xe),le=xe.width;xe.isEndSide?(ke=-le+"px",Ue=le+"px"):(ke=le+"px",Ue=-le+"px");const ue=(0,oe.c)().addElement(xe.menuInnerEl).fromTo("transform",`translateX(${Ue})`,"translateX(0px)"),Be=(0,oe.c)().addElement(xe.contentEl).fromTo("transform","translateX(0px)",`translateX(${ke})`),Ce=(0,oe.c)().addElement(xe.backdropEl).fromTo("opacity",.01,.32);return _e("ios"===te).addAnimation([ue,Be,Ce])},X=xe=>{const ke=(0,me.b)(xe),Ue=xe.width*(xe.isEndSide?-1:1)+"px",te=(0,oe.c)().addElement(xe.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ue})`);return _e("ios"===ke).addAnimation(te)},be=(()=>{var xe,ke,Ue,te,le,ue,Be,Ce,Ne,Le,$e,Z;const he=new Map,ve=[],Fe=function(Gt){return(Ce=Ce||(0,a.Z)(function*(Wt,lt=!1){if(yield Bn(),"start"===Wt||"end"===Wt){const at=ve.filter(Dn=>Dn.side===Wt&&!Dn.disabled);if(at.length>=1)return at.length>1&&lt&&(0,Ee.p)(`menuController queried for a menu on the "${Wt}" side, but ${at.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,at.map(Dn=>Dn.el)),at[0].el;const st=ve.filter(Dn=>Dn.side===Wt);if(st.length>=1)return st.length>1&&lt&&(0,Ee.p)(`menuController queried for a menu on the "${Wt}" side, but ${st.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,st.map(Dn=>Dn.el)),st[0].el}else if(null!=Wt)return zn(at=>at.menuId===Wt);return zn(at=>!at.disabled)||(ve.length>0?ve[0].el:void 0)})).apply(this,arguments)},G=function(){return(Ne=Ne||(0,a.Z)(function*(){return yield Bn(),Rt()})).apply(this,arguments)},fe=(Zt,Gt)=>{he.set(Zt,Gt)},Rt=()=>zn(Zt=>Zt._isOpen),Vt=()=>ve.map(Zt=>Zt.el),vn=()=>ve.some(Zt=>Zt.isAnimating),zn=Zt=>{const Gt=ve.find(Zt);if(void 0!==Gt)return Gt.el},Bn=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Zt=>new Promise(Gt=>(0,Ae.c)(Zt,Gt))));return fe("reveal",X),fe("push",ie),fe("overlay",Me),null==K.d||K.d.addEventListener("ionBackButton",Zt=>{const Gt=Rt();Gt&&Zt.detail.register(B.MENU_BACK_BUTTON_PRIORITY,()=>Gt.close())}),{registerAnimation:fe,get:Fe,getMenus:function(){return(Le=Le||(0,a.Z)(function*(){return yield Bn(),Vt()})).apply(this,arguments)},getOpen:G,isEnabled:function(Gt){return(Be=Be||(0,a.Z)(function*(Wt){const lt=yield Fe(Wt);return!!lt&&!lt.disabled})).apply(this,arguments)},swipeGesture:function(Gt,Wt){return(le=le||(0,a.Z)(function*(lt,Ct){const at=yield Fe(Ct);return at&&(at.swipeGesture=lt),at})).apply(this,arguments)},isAnimating:function(){return($e=$e||(0,a.Z)(function*(){return yield Bn(),vn()})).apply(this,arguments)},isOpen:function(Gt){return(ue=ue||(0,a.Z)(function*(Wt){if(null!=Wt){const lt=yield Fe(Wt);return void 0!==lt&&lt.isOpen()}return void 0!==(yield G())})).apply(this,arguments)},enable:function(Gt,Wt){return(te=te||(0,a.Z)(function*(lt,Ct){const at=yield Fe(Ct);return at&&(at.disabled=!lt),at})).apply(this,arguments)},toggle:function(Gt){return(Ue=Ue||(0,a.Z)(function*(Wt){const lt=yield Fe(Wt,!0);return!!lt&&lt.toggle()})).apply(this,arguments)},close:function(Gt){return(ke=ke||(0,a.Z)(function*(Wt){const lt=yield void 0!==Wt?Fe(Wt,!0):G();return void 0!==lt&&lt.close()})).apply(this,arguments)},open:function(Gt){return(xe=xe||(0,a.Z)(function*(Wt){const lt=yield Fe(Wt,!0);return!!lt&&lt.open()})).apply(this,arguments)},_getOpenSync:Rt,_createAnimation:(Zt,Gt)=>{const Wt=he.get(Zt);if(!Wt)throw new Error("animation not registered");return Wt(Gt)},_register:Zt=>{ve.indexOf(Zt)<0&&ve.push(Zt)},_unregister:Zt=>{const Gt=ve.indexOf(Zt);Gt>-1&&ve.splice(Gt,1)},_setOpen:function(Gt,Wt,lt){return(Z=Z||(0,a.Z)(function*(Ct,at,st){if(vn())return!1;if(at){const Dn=yield G();Dn&&Ct.el!==Dn&&(yield Dn.setOpen(!1,!1))}return Ct._setOpen(at,st)})).apply(this,arguments)}}})()},5067:(jt,Ze,F)=>{"use strict";F.r(Ze),F.d(Ze,{GESTURE_CONTROLLER:()=>a.G,createGesture:()=>Me});var a=F(2889);const K=(be,xe,ke,Ue)=>{const te=B(be)?{capture:!!Ue.capture,passive:!!Ue.passive}:!!Ue.capture;let le,ue;return be.__zone_symbol__addEventListener?(le="__zone_symbol__addEventListener",ue="__zone_symbol__removeEventListener"):(le="addEventListener",ue="removeEventListener"),be[le](xe,ke,te),()=>{be[ue](xe,ke,te)}},B=be=>{if(void 0===Ee)try{const xe=Object.defineProperty({},"passive",{get:()=>{Ee=!0}});be.addEventListener("optsTest",()=>{},xe)}catch{Ee=!1}return!!Ee};let Ee;const oe=be=>be instanceof Document?be:be.ownerDocument,Me=be=>{let xe=!1,ke=!1,Ue=!0,te=!1;const le=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},be),ue=le.canStart,Be=le.onWillStart,Ce=le.onStart,Ne=le.onEnd,Le=le.notCaptured,$e=le.onMove,Z=le.threshold,he=le.passive,ve=le.blurOnStart,Te={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Ye=((be,xe,ke)=>{const Ue=ke*(Math.PI/180),te="x"===be,le=Math.cos(Ue),ue=xe*xe;let Be=0,Ce=0,Ne=!1,Le=0;return{start($e,Z){Be=$e,Ce=Z,Le=0,Ne=!0},detect($e,Z){if(!Ne)return!1;const he=$e-Be,ve=Z-Ce,Te=he*he+ve*ve;if(Te<ue)return!1;const Ye=Math.sqrt(Te),rt=(te?he:ve)/Ye;return Le=rt>le?1:rt<-le?-1:0,Ne=!1,!0},isGesture:()=>0!==Le,getDirection:()=>Le}})(le.direction,le.threshold,le.maxAngle),rt=a.G.createGesture({name:be.gestureName,priority:be.gesturePriority,disableScroll:be.disableScroll}),vt=()=>{xe&&(te=!1,$e&&$e(Te))},$t=()=>!!rt.capture()&&(xe=!0,Ue=!1,Te.startX=Te.currentX,Te.startY=Te.currentY,Te.startTime=Te.currentTime,Be?Be(Te).then(G):G(),!0),G=()=>{ve&&(()=>{if(typeof document<"u"){const He=document.activeElement;He?.blur&&He.blur()}})(),Ce&&Ce(Te),Ue=!0},Q=()=>{xe=!1,ke=!1,te=!1,Ue=!0,rt.release()},de=He=>{const kt=xe,Tt=Ue;if(Q(),Tt){if(ie(Te,He),kt)return void(Ne&&Ne(Te));Le&&Le(Te)}},fe=((be,xe,ke,Ue,te)=>{let le,ue,Be,Ce,Ne,Le,$e,Z=0;const he=Fe=>{Z=Date.now()+2e3,xe(Fe)&&(!ue&&ke&&(ue=K(be,"touchmove",ke,te)),Be||(Be=K(Fe.target,"touchend",Te,te)),Ce||(Ce=K(Fe.target,"touchcancel",Te,te)))},ve=Fe=>{Z>Date.now()||xe(Fe)&&(!Le&&ke&&(Le=K(oe(be),"mousemove",ke,te)),$e||($e=K(oe(be),"mouseup",Ye,te)))},Te=Fe=>{rt(),Ue&&Ue(Fe)},Ye=Fe=>{Qe(),Ue&&Ue(Fe)},rt=()=>{ue&&ue(),Be&&Be(),Ce&&Ce(),ue=Be=Ce=void 0},Qe=()=>{Le&&Le(),$e&&$e(),Le=$e=void 0},on=()=>{rt(),Qe()},vt=(Fe=!0)=>{Fe?(le||(le=K(be,"touchstart",he,te)),Ne||(Ne=K(be,"mousedown",ve,te))):(le&&le(),Ne&&Ne(),le=Ne=void 0,on())};return{enable:vt,stop:on,destroy:()=>{vt(!1),Ue=ke=xe=void 0}}})(le.el,He=>{const kt=se(He);return!(ke||!Ue||(X(He,Te),Te.startX=Te.currentX,Te.startY=Te.currentY,Te.startTime=Te.currentTime=kt,Te.velocityX=Te.velocityY=Te.deltaX=Te.deltaY=0,Te.event=He,ue&&!1===ue(Te))||(rt.release(),!rt.start()))&&(ke=!0,0===Z?$t():(Ye.start(Te.startX,Te.startY),!0))},He=>{xe?!te&&Ue&&(te=!0,ie(Te,He),requestAnimationFrame(vt)):(ie(Te,He),Ye.detect(Te.currentX,Te.currentY)&&(!Ye.isGesture()||!$t())&&Xe())},de,{capture:!1,passive:he}),Xe=()=>{Q(),fe.stop(),Le&&Le(Te)};return{enable(He=!0){He||(xe&&de(void 0),Q()),fe.enable(He)},destroy(){rt.destroy(),fe.destroy()}}},ie=(be,xe)=>{if(!xe)return;const ke=be.currentX,Ue=be.currentY,te=be.currentTime;X(xe,be);const le=be.currentX,ue=be.currentY,Ce=(be.currentTime=se(xe))-te;if(Ce>0&&Ce<100){const Le=(ue-Ue)/Ce;be.velocityX=(le-ke)/Ce*.7+.3*be.velocityX,be.velocityY=.7*Le+.3*be.velocityY}be.deltaX=le-be.startX,be.deltaY=ue-be.startY,be.event=xe},X=(be,xe)=>{let ke=0,Ue=0;if(be){const te=be.changedTouches;if(te&&te.length>0){const le=te[0];ke=le.clientX,Ue=le.clientY}else void 0!==be.pageX&&(ke=be.pageX,Ue=be.pageY)}xe.currentX=ke,xe.currentY=Ue},se=be=>be.timeStamp||Date.now()},9528:(jt,Ze,F)=>{"use strict";F.d(Ze,{b:()=>be,c:()=>xe,d:()=>ke,e:()=>on,g:()=>Fe,l:()=>rt,s:()=>vt,t:()=>le,w:()=>Qe});var Ee,Ae,me,oe,_e,Me,ie,a=F(5861),K=F(408),B=F(2961);const be="ionViewWillLeave",xe="ionViewDidLeave",ke="ionViewWillUnload",Ue=()=>Promise.resolve().then(F.bind(F,1838)),te=()=>Promise.resolve().then(F.bind(F,6705)),le=G=>new Promise((Q,de)=>{(0,K.w)(()=>{ue(G),Be(G).then(fe=>{fe.animation&&fe.animation.destroy(),Ce(G),Q(fe)},fe=>{Ce(G),de(fe)})})}),ue=G=>{const Q=G.enteringEl,de=G.leavingEl;$t(Q,de,G.direction),G.showGoBack?Q.classList.add("can-go-back"):Q.classList.remove("can-go-back"),vt(Q,!1),Q.style.setProperty("pointer-events","none"),de&&(vt(de,!1),de.style.setProperty("pointer-events","none"))},Be=function(Q){return(Ee=Ee||(0,a.Z)(function*(de){const fe=yield Ne(de);return fe&&K.B.isBrowser?Le(fe,de):$e(de)})).apply(this,arguments)},Ce=G=>{const Q=G.enteringEl,de=G.leavingEl;Q.classList.remove("ion-page-invisible"),Q.style.removeProperty("pointer-events"),void 0!==de&&(de.classList.remove("ion-page-invisible"),de.style.removeProperty("pointer-events"))},Ne=function(Q){return(Ae=Ae||(0,a.Z)(function*(de){return de.leavingEl&&de.animated&&0!==de.duration?de.animationBuilder?de.animationBuilder:"ios"===de.mode?(yield Ue()).iosTransitionAnimation:(yield te()).mdTransitionAnimation:void 0})).apply(this,arguments)},Le=function(Q,de){return(me=me||(0,a.Z)(function*(fe,Xe){yield Z(Xe,!0);const He=fe(Xe.baseEl,Xe);Te(Xe.enteringEl,Xe.leavingEl);const kt=yield ve(He,Xe);return Xe.progressCallback&&Xe.progressCallback(void 0),kt&&Ye(Xe.enteringEl,Xe.leavingEl),{hasCompleted:kt,animation:He}})).apply(this,arguments)},$e=function(Q){return(oe=oe||(0,a.Z)(function*(de){const fe=de.enteringEl,Xe=de.leavingEl;return yield Z(de,!1),Te(fe,Xe),Ye(fe,Xe),{hasCompleted:!0}})).apply(this,arguments)},Z=function(Q,de){return(_e=_e||(0,a.Z)(function*(fe,Xe){(void 0!==fe.deepWait?fe.deepWait:Xe)&&(yield Promise.all([on(fe.enteringEl),on(fe.leavingEl)])),yield he(fe.viewIsReady,fe.enteringEl)})).apply(this,arguments)},he=function(Q,de){return(Me=Me||(0,a.Z)(function*(fe,Xe){fe&&(yield fe(Xe))})).apply(this,arguments)},ve=(G,Q)=>{const de=Q.progressCallback,fe=new Promise(Xe=>{G.onFinish(He=>Xe(1===He))});return de?(G.progressStart(!0),de(G)):G.play(),fe},Te=(G,Q)=>{rt(Q,be),rt(G,"ionViewWillEnter")},Ye=(G,Q)=>{rt(G,"ionViewDidEnter"),rt(Q,xe)},rt=(G,Q)=>{if(G){const de=new CustomEvent(Q,{bubbles:!1,cancelable:!1});G.dispatchEvent(de)}},Qe=()=>new Promise(G=>(0,B.r)(()=>(0,B.r)(()=>G()))),on=function G(Q){return(ie=ie||(0,a.Z)(function*(de){const fe=de;if(fe){if(null!=fe.componentOnReady){if(null!=(yield fe.componentOnReady()))return}else if(null!=fe.__registerHost)return void(yield new Promise(He=>(0,B.r)(He)));yield Promise.all(Array.from(fe.children).map(G))}})).apply(this,arguments)},vt=(G,Q)=>{Q?(G.setAttribute("aria-hidden","true"),G.classList.add("ion-page-hidden")):(G.hidden=!1,G.removeAttribute("aria-hidden"),G.classList.remove("ion-page-hidden"))},$t=(G,Q,de)=>{void 0!==G&&(G.style.zIndex="back"===de?"99":"101"),void 0!==Q&&(Q.style.zIndex="100")},Fe=G=>G.classList.contains("ion-page")?G:G.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||G},8909:(jt,Ze,F)=>{"use strict";F.d(Ze,{a:()=>K,b:()=>B,p:()=>a});const a=(Ee,...Ae)=>console.warn(`[Ionic Warning]: ${Ee}`,...Ae),K=(Ee,...Ae)=>console.error(`[Ionic Error]: ${Ee}`,...Ae),B=(Ee,...Ae)=>console.error(`<${Ee.tagName.toLowerCase()}> must be used inside ${Ae.join(" or ")}.`)},2972:(jt,Ze,F)=>{"use strict";F.d(Ze,{d:()=>K,w:()=>a});const a=typeof window<"u"?window:void 0,K=typeof document<"u"?document:void 0},408:(jt,Ze,F)=>{"use strict";F.d(Ze,{B:()=>ke,H:()=>Q,a:()=>Dr,b:()=>ze,c:()=>vn,d:()=>Gt,e:()=>It,f:()=>Zt,g:()=>zn,h:()=>Fe,i:()=>$,j:()=>Ue,r:()=>Et,w:()=>Qt});var K,B,Ee,a=F(5861);let oe,_e,Me,ie=!1,X=!1,se=!1,be=!1,xe=!1;const ke={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},Ue=N=>{const W=new URL(N,ti.$resourcesUrl$);return W.origin!==wi.location.origin?W.href:W.pathname},te=(N,W="")=>()=>{},le=(N,W)=>()=>{},Le="s-id",$e="sty-id",Z="c-id",ve="slot-fb{display:contents}slot-fb[hidden]{display:none}",Te="http://www.w3.org/1999/xlink",Ye={},vt=N=>"object"==(N=typeof N)||"function"===N;function $t(N){var W,Oe,Se;return null!==(Se=null===(Oe=null===(W=N.head)||void 0===W?void 0:W.querySelector('meta[name="csp-nonce"]'))||void 0===Oe?void 0:Oe.getAttribute("content"))&&void 0!==Se?Se:void 0}const Fe=(N,W,...Oe)=>{let Se=null,We=null,Ve=null,pt=!1,ct=!1;const At=[],gt=Bt=>{for(let Yt=0;Yt<Bt.length;Yt++)Se=Bt[Yt],Array.isArray(Se)?gt(Se):null!=Se&&"boolean"!=typeof Se&&((pt="function"!=typeof N&&!vt(Se))&&(Se=String(Se)),pt&&ct?At[At.length-1].$text$+=Se:At.push(pt?G(null,Se):Se),ct=pt)};if(gt(Oe),W){W.key&&(We=W.key),W.name&&(Ve=W.name);{const Bt=W.className||W.class;Bt&&(W.class="object"!=typeof Bt?Bt:Object.keys(Bt).filter(Yt=>Bt[Yt]).join(" "))}}if("function"==typeof N)return N(null===W?{}:W,At,fe);const Lt=G(N,null);return Lt.$attrs$=W,At.length>0&&(Lt.$children$=At),Lt.$key$=We,Lt.$name$=Ve,Lt},G=(N,W)=>({$flags$:0,$tag$:N,$text$:W,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Q={},fe={forEach:(N,W)=>N.map(Xe).forEach(W),map:(N,W)=>N.map(Xe).map(W).map(He)},Xe=N=>({vattrs:N.$attrs$,vchildren:N.$children$,vkey:N.$key$,vname:N.$name$,vtag:N.$tag$,vtext:N.$text$}),He=N=>{if("function"==typeof N.vtag){const Oe=Object.assign({},N.vattrs);return N.vkey&&(Oe.key=N.vkey),N.vname&&(Oe.name=N.vname),Fe(N.vtag,Oe,...N.vchildren||[])}const W=G(N.vtag,N.vtext);return W.$attrs$=N.vattrs,W.$children$=N.vchildren,W.$key$=N.vkey,W.$name$=N.vname,W},Tt=(N,W,Oe,Se,We,Ve,pt)=>{let ct,At,gt,Lt;if(1===Ve.nodeType){for(ct=Ve.getAttribute(Z),ct&&(At=ct.split("."),(At[0]===pt||"0"===At[0])&&(gt={$flags$:0,$hostId$:At[0],$nodeId$:At[1],$depth$:At[2],$index$:At[3],$tag$:Ve.tagName.toLowerCase(),$elm$:Ve,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},W.push(gt),Ve.removeAttribute(Z),N.$children$||(N.$children$=[]),N.$children$[gt.$index$]=gt,N=gt,Se&&"0"===gt.$depth$&&(Se[gt.$index$]=gt.$elm$))),Lt=Ve.childNodes.length-1;Lt>=0;Lt--)Tt(N,W,Oe,Se,We,Ve.childNodes[Lt],pt);if(Ve.shadowRoot)for(Lt=Ve.shadowRoot.childNodes.length-1;Lt>=0;Lt--)Tt(N,W,Oe,Se,We,Ve.shadowRoot.childNodes[Lt],pt)}else if(8===Ve.nodeType)At=Ve.nodeValue.split("."),(At[1]===pt||"0"===At[1])&&(ct=At[0],gt={$flags$:0,$hostId$:At[1],$nodeId$:At[2],$depth$:At[3],$index$:At[4],$elm$:Ve,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===ct?(gt.$elm$=Ve.nextSibling,gt.$elm$&&3===gt.$elm$.nodeType&&(gt.$text$=gt.$elm$.textContent,W.push(gt),Ve.remove(),N.$children$||(N.$children$=[]),N.$children$[gt.$index$]=gt,Se&&"0"===gt.$depth$&&(Se[gt.$index$]=gt.$elm$))):gt.$hostId$===pt&&("s"===ct?(gt.$tag$="slot",Ve["s-sn"]=At[5]?gt.$name$=At[5]:"",Ve["s-sr"]=!0,Se&&(gt.$elm$=Ei.createElement(gt.$tag$),gt.$name$&&gt.$elm$.setAttribute("name",gt.$name$),Ve.parentNode.insertBefore(gt.$elm$,Ve),Ve.remove(),"0"===gt.$depth$&&(Se[gt.$index$]=gt.$elm$)),Oe.push(gt),N.$children$||(N.$children$=[]),N.$children$[gt.$index$]=gt):"r"===ct&&(Se?Ve.remove():(We["s-cr"]=Ve,Ve["s-cn"]=!0))));else if(N&&"style"===N.$tag$){const Bt=G(null,Ve.textContent);Bt.$elm$=Ve,Bt.$index$="0",N.$children$=[Bt]}},Rt=(N,W)=>{if(1===N.nodeType){let Oe=0;for(;Oe<N.childNodes.length;Oe++)Rt(N.childNodes[Oe],W);if(N.shadowRoot)for(Oe=0;Oe<N.shadowRoot.childNodes.length;Oe++)Rt(N.shadowRoot.childNodes[Oe],W)}else if(8===N.nodeType){const Oe=N.nodeValue.split(".");"o"===Oe[0]&&(W.set(Oe[1]+"."+Oe[2],N),N.nodeValue="",N["s-en"]=Oe[3])}},Vt=N=>jn.map(W=>W(N)).find(W=>!!W),vn=N=>jn.push(N),zn=N=>Yn(N).$modeName$,Zt=N=>Yn(N).$hostElement$,Gt=(N,W,Oe)=>{const Se=Zt(N);return{emit:We=>Wt(Se,W,{bubbles:!!(4&Oe),composed:!!(2&Oe),cancelable:!!(1&Oe),detail:We})}},Wt=(N,W,Oe)=>{const Se=ti.ce(W,Oe);return N.dispatchEvent(Se),Se},lt=new WeakMap,Ct=(N,W,Oe)=>{let Se=Kt.get(N);Vi&&Oe?(Se=Se||new CSSStyleSheet,"string"==typeof Se?Se=W:Se.replaceSync(W)):Se=W,Kt.set(N,Se)},at=(N,W,Oe)=>{var Se;const We=Dn(W,Oe),Ve=Kt.get(We);if(N=11===N.nodeType?N:Ei,Ve)if("string"==typeof Ve){let ct,pt=lt.get(N=N.head||N);if(pt||lt.set(N,pt=new Set),!pt.has(We)){if(N.host&&(ct=N.querySelector(`[${$e}="${We}"]`)))ct.innerHTML=Ve;else{ct=Ei.createElement("style"),ct.innerHTML=Ve;const At=null!==(Se=ti.$nonce$)&&void 0!==Se?Se:$t(Ei);null!=At&&ct.setAttribute("nonce",At),N.insertBefore(ct,N.querySelector("link"))}4&W.$flags$&&(ct.innerHTML+=ve),pt&&pt.add(We)}}else N.adoptedStyleSheets.includes(Ve)||(N.adoptedStyleSheets=[...N.adoptedStyleSheets,Ve]);return We},st=N=>{const W=N.$cmpMeta$,Oe=N.$hostElement$,Se=W.$flags$,We=te("attachStyles",W.$tagName$),Ve=at(Oe.shadowRoot?Oe.shadowRoot:Oe.getRootNode(),W,N.$modeName$);10&Se&&(Oe["s-sc"]=Ve,Oe.classList.add(Ve+"-h"),2&Se&&Oe.classList.add(Ve+"-s")),We()},Dn=(N,W)=>"sc-"+(W&&32&N.$flags$?N.$tagName$+"-"+W:N.$tagName$),mi=N=>N.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),bn=(N,W,Oe,Se,We,Ve)=>{if(Oe!==Se){let pt=wr(N,W),ct=W.toLowerCase();if("class"===W){const At=N.classList,gt=In(Oe),Lt=In(Se);At.remove(...gt.filter(Bt=>Bt&&!Lt.includes(Bt))),At.add(...Lt.filter(Bt=>Bt&&!gt.includes(Bt)))}else if("style"===W){for(const At in Oe)(!Se||null==Se[At])&&(At.includes("-")?N.style.removeProperty(At):N.style[At]="");for(const At in Se)(!Oe||Se[At]!==Oe[At])&&(At.includes("-")?N.style.setProperty(At,Se[At]):N.style[At]=Se[At])}else if("key"!==W)if("ref"===W)Se&&Se(N);else if(pt||"o"!==W[0]||"n"!==W[1]){const At=vt(Se);if((pt||At&&null!==Se)&&!We)try{if(N.tagName.includes("-"))N[W]=Se;else{const Lt=Se??"";"list"===W?pt=!1:(null==Oe||N[W]!=Lt)&&(N[W]=Lt)}}catch{}let gt=!1;ct!==(ct=ct.replace(/^xlink\:?/,""))&&(W=ct,gt=!0),null==Se||!1===Se?(!1!==Se||""===N.getAttribute(W))&&(gt?N.removeAttributeNS(Te,W):N.removeAttribute(W)):(!pt||4&Ve||We)&&!At&&(Se=!0===Se?"":Se,gt?N.setAttributeNS(Te,W,Se):N.setAttribute(W,Se))}else if(W="-"===W[2]?W.slice(3):wr(wi,ct)?ct.slice(2):ct[2]+W.slice(3),Oe||Se){const At=W.endsWith(Zn);W=W.replace(Rn,""),Oe&&ti.rel(N,W,Oe,At),Se&&ti.ael(N,W,Se,At)}}},ai=/\s/,In=N=>N?N.split(ai):[],Zn="Capture",Rn=new RegExp(Zn+"$"),Xt=(N,W,Oe,Se)=>{const We=11===W.$elm$.nodeType&&W.$elm$.host?W.$elm$.host:W.$elm$,Ve=N&&N.$attrs$||Ye,pt=W.$attrs$||Ye;for(Se in Ve)Se in pt||bn(We,Se,Ve[Se],void 0,Oe,W.$flags$);for(Se in pt)bn(We,Se,Ve[Se],pt[Se],Oe,W.$flags$)},qt=(N,W,Oe,Se)=>{var We;const Ve=W.$children$[Oe];let ct,At,gt,pt=0;if(ie||(se=!0,"slot"===Ve.$tag$&&(oe&&Se.classList.add(oe+"-s"),Ve.$flags$|=Ve.$children$?2:1)),null!==Ve.$text$)ct=Ve.$elm$=Ei.createTextNode(Ve.$text$);else if(1&Ve.$flags$)ct=Ve.$elm$=Ei.createTextNode("");else{if(be||(be="svg"===Ve.$tag$),ct=Ve.$elm$=Ei.createElementNS(be?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Ve.$flags$?"slot-fb":Ve.$tag$),be&&"foreignObject"===Ve.$tag$&&(be=!1),Xt(null,Ve,be),(N=>null!=N)(oe)&&ct["s-si"]!==oe&&ct.classList.add(ct["s-si"]=oe),Ve.$children$)for(pt=0;pt<Ve.$children$.length;++pt)At=qt(N,Ve,pt,ct),At&&ct.appendChild(At);"svg"===Ve.$tag$?be=!1:"foreignObject"===ct.tagName&&(be=!0)}return ct["s-hn"]=Me,3&Ve.$flags$&&(ct["s-sr"]=!0,ct["s-fs"]=null===(We=Ve.$attrs$)||void 0===We?void 0:We.slot,ct["s-cr"]=_e,ct["s-sn"]=Ve.$name$||"",gt=N&&N.$children$&&N.$children$[Oe],gt&&gt.$tag$===Ve.$tag$&&N.$elm$&&Ui(N.$elm$,!1)),ct},Ui=(N,W)=>{var Oe;ti.$flags$|=1;const Se=N.childNodes;for(let We=Se.length-1;We>=0;We--){const Ve=Se[We];Ve["s-hn"]!==Me&&Ve["s-ol"]&&(bi(Ve).insertBefore(Ve,os(Ve)),Ve["s-ol"].remove(),Ve["s-ol"]=void 0,Ve["s-sh"]=void 0,1===Ve.nodeType&&Ve.setAttribute("slot",null!==(Oe=Ve["s-sn"])&&void 0!==Oe?Oe:""),se=!0),W&&Ui(Ve,W)}ti.$flags$&=-2},Ti=(N,W,Oe,Se,We,Ve)=>{let ct,pt=N["s-cr"]&&N["s-cr"].parentNode||N;for(pt.shadowRoot&&pt.tagName===Me&&(pt=pt.shadowRoot);We<=Ve;++We)Se[We]&&(ct=qt(null,Oe,We,N),ct&&(Se[We].$elm$=ct,pt.insertBefore(ct,os(W))))},Mi=(N,W,Oe)=>{for(let Se=W;Se<=Oe;++Se){const We=N[Se];if(We){const Ve=We.$elm$;rr(We),Ve&&(X=!0,Ve["s-ol"]?Ve["s-ol"].remove():Ui(Ve,!0),Ve.remove())}}},$i=(N,W)=>N.$tag$===W.$tag$&&("slot"===N.$tag$?N.$name$===W.$name$:N.$key$===W.$key$),os=N=>N&&N["s-ol"]||N,bi=N=>(N["s-ol"]?N["s-ol"]:N).parentNode,Ii=(N,W)=>{const Oe=W.$elm$=N.$elm$,Se=N.$children$,We=W.$children$,Ve=W.$tag$,pt=W.$text$;let ct;null===pt?(be="svg"===Ve||"foreignObject"!==Ve&&be,"slot"===Ve||Xt(N,W,be),null!==Se&&null!==We?((N,W,Oe,Se)=>{let ki,er,We=0,Ve=0,pt=0,ct=0,At=W.length-1,gt=W[0],Lt=W[At],Bt=Se.length-1,Yt=Se[0],Sn=Se[Bt];for(;We<=At&&Ve<=Bt;)if(null==gt)gt=W[++We];else if(null==Lt)Lt=W[--At];else if(null==Yt)Yt=Se[++Ve];else if(null==Sn)Sn=Se[--Bt];else if($i(gt,Yt))Ii(gt,Yt),gt=W[++We],Yt=Se[++Ve];else if($i(Lt,Sn))Ii(Lt,Sn),Lt=W[--At],Sn=Se[--Bt];else if($i(gt,Sn))("slot"===gt.$tag$||"slot"===Sn.$tag$)&&Ui(gt.$elm$.parentNode,!1),Ii(gt,Sn),N.insertBefore(gt.$elm$,Lt.$elm$.nextSibling),gt=W[++We],Sn=Se[--Bt];else if($i(Lt,Yt))("slot"===gt.$tag$||"slot"===Sn.$tag$)&&Ui(Lt.$elm$.parentNode,!1),Ii(Lt,Yt),N.insertBefore(Lt.$elm$,gt.$elm$),Lt=W[--At],Yt=Se[++Ve];else{for(pt=-1,ct=We;ct<=At;++ct)if(W[ct]&&null!==W[ct].$key$&&W[ct].$key$===Yt.$key$){pt=ct;break}pt>=0?(er=W[pt],er.$tag$!==Yt.$tag$?ki=qt(W&&W[Ve],Oe,pt,N):(Ii(er,Yt),W[pt]=void 0,ki=er.$elm$),Yt=Se[++Ve]):(ki=qt(W&&W[Ve],Oe,Ve,N),Yt=Se[++Ve]),ki&&bi(gt.$elm$).insertBefore(ki,os(gt.$elm$))}We>At?Ti(N,null==Se[Bt+1]?null:Se[Bt+1].$elm$,Oe,Se,Ve,Bt):Ve>Bt&&Mi(W,We,At)})(Oe,Se,W,We):null!==We?(null!==N.$text$&&(Oe.textContent=""),Ti(Oe,null,W,We,0,We.length-1)):null!==Se&&Mi(Se,0,Se.length-1),be&&"svg"===Ve&&(be=!1)):(ct=Oe["s-cr"])?ct.parentNode.textContent=pt:N.$text$!==pt&&(Oe.data=pt)},$n=N=>{const W=N.childNodes;for(const Oe of W)if(1===Oe.nodeType){if(Oe["s-sr"]){const Se=Oe["s-sn"];Oe.hidden=!1;for(const We of W)if(We!==Oe)if(We["s-hn"]!==Oe["s-hn"]||""!==Se){if(1===We.nodeType&&(Se===We.getAttribute("slot")||Se===We["s-sn"])){Oe.hidden=!0;break}}else if(1===We.nodeType||3===We.nodeType&&""!==We.textContent.trim()){Oe.hidden=!0;break}}$n(Oe)}},hr=[],ri=N=>{let W,Oe,Se;for(const We of N.childNodes){if(We["s-sr"]&&(W=We["s-cr"])&&W.parentNode){Oe=W.parentNode.childNodes;const Ve=We["s-sn"];for(Se=Oe.length-1;Se>=0;Se--)if(W=Oe[Se],!W["s-cn"]&&!W["s-nr"]&&W["s-hn"]!==We["s-hn"])if(Sr(W,Ve)){let pt=hr.find(ct=>ct.$nodeToRelocate$===W);X=!0,W["s-sn"]=W["s-sn"]||Ve,pt?(pt.$nodeToRelocate$["s-sh"]=We["s-hn"],pt.$slotRefNode$=We):(W["s-sh"]=We["s-hn"],hr.push({$slotRefNode$:We,$nodeToRelocate$:W})),W["s-sr"]&&hr.map(ct=>{Sr(ct.$nodeToRelocate$,W["s-sn"])&&(pt=hr.find(At=>At.$nodeToRelocate$===W),pt&&!ct.$slotRefNode$&&(ct.$slotRefNode$=pt.$slotRefNode$))})}else hr.some(pt=>pt.$nodeToRelocate$===W)||hr.push({$nodeToRelocate$:W})}1===We.nodeType&&ri(We)}},Sr=(N,W)=>1===N.nodeType?null===N.getAttribute("slot")&&""===W||N.getAttribute("slot")===W:N["s-sn"]===W||""===W,rr=N=>{N.$attrs$&&N.$attrs$.ref&&N.$attrs$.ref(null),N.$children$&&N.$children$.map(rr)},Xr=(N,W)=>{W&&!N.$onRenderResolve$&&W["s-p"]&&W["s-p"].push(new Promise(Oe=>N.$onRenderResolve$=Oe))},Ji=(N,W)=>{if(N.$flags$|=16,!(4&N.$flags$))return Xr(N,N.$ancestorComponent$),Qt(()=>_s(N,W));N.$flags$|=512},_s=(N,W)=>{const Oe=te("scheduleUpdate",N.$cmpMeta$.$tagName$),Se=N.$lazyInstance$;let We;return W&&(N.$flags$|=256,N.$queuedListeners$&&(N.$queuedListeners$.map(([Ve,pt])=>et(Se,Ve,pt)),N.$queuedListeners$=void 0),We=et(Se,"componentWillLoad")),We=as(We,()=>et(Se,"componentWillRender")),Oe(),as(We,()=>re(N,Se,W))},as=(N,W)=>ge(N)?N.then(W):W(),ge=N=>N instanceof Promise||N&&N.then&&"function"==typeof N.then,re=function(W,Oe,Se){return(K=K||(0,a.Z)(function*(We,Ve,pt){var ct;const At=We.$hostElement$,gt=te("update",We.$cmpMeta$.$tagName$),Lt=At["s-rc"];pt&&st(We);const Bt=te("render",We.$cmpMeta$.$tagName$);z(We,Ve,At,pt),Lt&&(Lt.map(Yt=>Yt()),At["s-rc"]=void 0),Bt(),gt();{const Yt=null!==(ct=At["s-p"])&&void 0!==ct?ct:[],Sn=()=>j(We);0===Yt.length?Sn():(Promise.all(Yt).then(Sn),We.$flags$|=4,Yt.length=0)}})).apply(this,arguments)},z=(N,W,Oe,Se)=>{try{W=W.render&&W.render(),N.$flags$&=-17,N.$flags$|=2,((N,W,Oe=!1)=>{var Se,We,Ve,pt;const ct=N.$hostElement$,At=N.$cmpMeta$,gt=N.$vnode$||G(null,null),Lt=(N=>N&&N.$tag$===Q)(W)?W:Fe(null,null,W);if(Me=ct.tagName,At.$attrsToReflect$&&(Lt.$attrs$=Lt.$attrs$||{},At.$attrsToReflect$.map(([Bt,Yt])=>Lt.$attrs$[Yt]=ct[Bt])),Oe&&Lt.$attrs$)for(const Bt of Object.keys(Lt.$attrs$))ct.hasAttribute(Bt)&&!["key","ref","style","class"].includes(Bt)&&(Lt.$attrs$[Bt]=ct[Bt]);if(Lt.$tag$=null,Lt.$flags$|=4,N.$vnode$=Lt,Lt.$elm$=gt.$elm$=ct.shadowRoot||ct,oe=ct["s-sc"],_e=ct["s-cr"],ie=0!=(1&At.$flags$),X=!1,Ii(gt,Lt),ti.$flags$|=1,se){ri(Lt.$elm$);for(const Bt of hr){const Yt=Bt.$nodeToRelocate$;if(!Yt["s-ol"]){const Sn=Ei.createTextNode("");Sn["s-nr"]=Yt,Yt.parentNode.insertBefore(Yt["s-ol"]=Sn,Yt)}}for(const Bt of hr){const Yt=Bt.$nodeToRelocate$,Sn=Bt.$slotRefNode$;if(Sn){const ki=Sn.parentNode;let er=Sn.nextSibling;{let Wi=null===(Se=Yt["s-ol"])||void 0===Se?void 0:Se.previousSibling;for(;Wi;){let Zi=null!==(We=Wi["s-nr"])&&void 0!==We?We:null;if(Zi&&Zi["s-sn"]===Yt["s-sn"]&&ki===Zi.parentNode&&(Zi=Zi.nextSibling,!Zi||!Zi["s-nr"])){er=Zi;break}Wi=Wi.previousSibling}}(!er&&ki!==Yt.parentNode||Yt.nextSibling!==er)&&Yt!==er&&(!Yt["s-hn"]&&Yt["s-ol"]&&(Yt["s-hn"]=Yt["s-ol"].parentNode.nodeName),ki.insertBefore(Yt,er),1===Yt.nodeType&&(Yt.hidden=null!==(Ve=Yt["s-ih"])&&void 0!==Ve&&Ve))}else 1===Yt.nodeType&&(Oe&&(Yt["s-ih"]=null!==(pt=Yt.hidden)&&void 0!==pt&&pt),Yt.hidden=!0)}}X&&$n(Lt.$elm$),ti.$flags$&=-2,hr.length=0})(N,W,Se)}catch(We){Pi(We,N.$hostElement$)}return null},j=N=>{const Oe=N.$hostElement$,Se=te("postUpdate",N.$cmpMeta$.$tagName$),We=N.$lazyInstance$,Ve=N.$ancestorComponent$;et(We,"componentDidRender"),64&N.$flags$?(et(We,"componentDidUpdate"),Se()):(N.$flags$|=64,Ut(Oe),et(We,"componentDidLoad"),Se(),N.$onReadyResolve$(Oe),Ve||pe()),N.$onInstanceResolve$(Oe),N.$onRenderResolve$&&(N.$onRenderResolve$(),N.$onRenderResolve$=void 0),512&N.$flags$&&Ge(()=>Ji(N,!1)),N.$flags$&=-517},$=N=>{{const W=Yn(N),Oe=W.$hostElement$.isConnected;return Oe&&2==(18&W.$flags$)&&Ji(W,!1),Oe}},pe=N=>{Ut(Ei.documentElement),Ge(()=>Wt(wi,"appload",{detail:{namespace:"ionic"}}))},et=(N,W,Oe)=>{if(N&&N[W])try{return N[W](Oe)}catch(Se){Pi(Se)}},Ut=N=>N.classList.add("hydrated"),Wn=(N,W,Oe)=>{var Se;const We=N.prototype;if(W.$members$){N.watchers&&(W.$watchers$=N.watchers);const Ve=Object.entries(W.$members$);if(Ve.map(([pt,[ct]])=>{31&ct||2&Oe&&32&ct?Object.defineProperty(We,pt,{get(){return((N,W)=>Yn(this).$instanceValues$.get(W))(0,pt)},set(At){((N,W,Oe,Se)=>{const We=Yn(N),Ve=We.$hostElement$,pt=We.$instanceValues$.get(W),ct=We.$flags$,At=We.$lazyInstance$;Oe=((N,W)=>null==N||vt(N)?N:4&W?"false"!==N&&(""===N||!!N):2&W?parseFloat(N):1&W?String(N):N)(Oe,Se.$members$[W][0]);const gt=Number.isNaN(pt)&&Number.isNaN(Oe);if((!(8&ct)||void 0===pt)&&Oe!==pt&&!gt&&(We.$instanceValues$.set(W,Oe),At)){if(Se.$watchers$&&128&ct){const Bt=Se.$watchers$[W];Bt&&Bt.map(Yt=>{try{At[Yt](Oe,pt,W)}catch(Sn){Pi(Sn,Ve)}})}2==(18&ct)&&Ji(We,!1)}})(this,pt,At,W)},configurable:!0,enumerable:!0}):1&Oe&&64&ct&&Object.defineProperty(We,pt,{value(...At){var gt;const Lt=Yn(this);return null===(gt=Lt?.$onInstancePromise$)||void 0===gt?void 0:gt.then(()=>{var Bt;return null===(Bt=Lt.$lazyInstance$)||void 0===Bt?void 0:Bt[pt](...At)})}})}),1&Oe){const pt=new Map;We.attributeChangedCallback=function(ct,At,gt){ti.jmp(()=>{var Lt;const Bt=pt.get(ct);if(this.hasOwnProperty(Bt))gt=this[Bt],delete this[Bt];else{if(We.hasOwnProperty(Bt)&&"number"==typeof this[Bt]&&this[Bt]==gt)return;if(null==Bt){const Yt=Yn(this),Sn=Yt?.$flags$;if(Sn&&!(8&Sn)&&128&Sn&&gt!==At){const ki=Yt.$lazyInstance$;(null===(Lt=W.$watchers$)||void 0===Lt?void 0:Lt[ct])?.forEach(Wi=>{null!=ki[Wi]&&ki[Wi].call(ki,gt,At,ct)})}return}}this[Bt]=(null!==gt||"boolean"!=typeof this[Bt])&&gt})},N.observedAttributes=Array.from(new Set([...Object.keys(null!==(Se=W.$watchers$)&&void 0!==Se?Se:{}),...Ve.filter(([ct,At])=>15&At[0]).map(([ct,At])=>{var gt;const Lt=At[1]||ct;return pt.set(Lt,ct),512&At[0]&&(null===(gt=W.$attrsToReflect$)||void 0===gt||gt.push([ct,Lt])),Lt})]))}}return N},Ci=N=>{et(N,"connectedCallback")},_i=N=>{if(!(1&ti.$flags$)){const W=Yn(N),Oe=W.$cmpMeta$,Se=te("connectedCallback",Oe.$tagName$);if(1&W.$flags$)Mt(N,W,Oe.$listeners$),W?.$lazyInstance$?Ci(W.$lazyInstance$):W?.$onReadyPromise$&&W.$onReadyPromise$.then(()=>Ci(W.$lazyInstance$));else{let We;if(W.$flags$|=1,We=N.getAttribute(Le),We){if(1&Oe.$flags$){const Ve=at(N.shadowRoot,Oe,N.getAttribute("s-mode"));N.classList.remove(Ve+"-h",Ve+"-s")}((N,W,Oe,Se)=>{const We=te("hydrateClient",W),Ve=N.shadowRoot,pt=[],At=Ve?[]:null,gt=Se.$vnode$=G(W,null);ti.$orgLocNodes$||Rt(Ei.body,ti.$orgLocNodes$=new Map),N[Le]=Oe,N.removeAttribute(Le),Tt(gt,pt,[],At,N,N,Oe),pt.map(Lt=>{const Bt=Lt.$hostId$+"."+Lt.$nodeId$,Yt=ti.$orgLocNodes$.get(Bt),Sn=Lt.$elm$;Yt&&ao&&""===Yt["s-en"]&&Yt.parentNode.insertBefore(Sn,Yt.nextSibling),Ve||(Sn["s-hn"]=W,Yt&&(Sn["s-ol"]=Yt,Sn["s-ol"]["s-nr"]=Sn)),ti.$orgLocNodes$.delete(Bt)}),Ve&&At.map(Lt=>{Lt&&Ve.appendChild(Lt)}),We()})(N,Oe.$tagName$,We,W)}We||12&Oe.$flags$&&Qr(N);{let Ve=N;for(;Ve=Ve.parentNode||Ve.host;)if(1===Ve.nodeType&&Ve.hasAttribute("s-id")&&Ve["s-p"]||Ve["s-p"]){Xr(W,W.$ancestorComponent$=Ve);break}}Oe.$members$&&Object.entries(Oe.$members$).map(([Ve,[pt]])=>{if(31&pt&&N.hasOwnProperty(Ve)){const ct=N[Ve];delete N[Ve],N[Ve]=ct}}),function(W,Oe,Se,We){(B=B||(0,a.Z)(function*(Ve,pt,ct,At){let gt;if(!(32&pt.$flags$)){pt.$flags$|=32;{if(gt=ls(ct),gt.then){const Sn=le();gt=yield gt,Sn()}gt.isProxied||(ct.$watchers$=gt.watchers,Wn(gt,ct,2),gt.isProxied=!0);const Yt=te("createInstance",ct.$tagName$);pt.$flags$|=8;try{new gt(pt)}catch(Sn){Pi(Sn)}pt.$flags$&=-9,pt.$flags$|=128,Yt(),Ci(pt.$lazyInstance$)}if(gt.style){let Yt=gt.style;"string"!=typeof Yt&&(Yt=Yt[pt.$modeName$=Vt(Ve)]);const Sn=Dn(ct,pt.$modeName$);if(!Kt.has(Sn)){const ki=te("registerStyles",ct.$tagName$);Ct(Sn,Yt,!!(1&ct.$flags$)),ki()}}}const Lt=pt.$ancestorComponent$,Bt=()=>Ji(pt,!0);Lt&&Lt["s-rc"]?Lt["s-rc"].push(Bt):Bt()})).apply(this,arguments)}(N,W,Oe)}Se()}},Qr=N=>{const W=N["s-cr"]=Ei.createComment("");W["s-cn"]=!0,N.insertBefore(W,N.firstChild)},Jr=N=>{et(N,"disconnectedCallback")},ze=(N,W={})=>{var Oe;const Se=te(),We=[],Ve=W.exclude||[],pt=wi.customElements,ct=Ei.head,At=ct.querySelector("meta[charset]"),gt=Ei.createElement("style"),Lt=[],Bt=Ei.querySelectorAll(`[${$e}]`);let Yt,Sn=!0,ki=0;for(Object.assign(ti,W),ti.$resourcesUrl$=new URL(W.resourcesUrl||"./",Ei.baseURI).href,ti.$flags$|=2;ki<Bt.length;ki++)Ct(Bt[ki].getAttribute($e),mi(Bt[ki].innerHTML),!0);let er=!1;if(N.map(Wi=>{Wi[1].map(Zi=>{var cs;const mr={$flags$:Zi[0],$tagName$:Zi[1],$members$:Zi[2],$listeners$:Zi[3]};4&mr.$flags$&&(er=!0),mr.$members$=Zi[2],mr.$listeners$=Zi[3],mr.$attrsToReflect$=[],mr.$watchers$=null!==(cs=Zi[4])&&void 0!==cs?cs:{};const Mu=mr.$tagName$,Tc=class extends HTMLElement{constructor(Fs){super(Fs),Ai(Fs=this,mr),1&mr.$flags$&&Fs.attachShadow({mode:"open",delegatesFocus:!!(16&mr.$flags$)})}connectedCallback(){Yt&&(clearTimeout(Yt),Yt=null),Sn?Lt.push(this):ti.jmp(()=>_i(this))}disconnectedCallback(){ti.jmp(()=>function(W){return(Ee=Ee||(0,a.Z)(function*(Oe){if(!(1&ti.$flags$)){const Se=Yn(Oe);Se.$rmListeners$&&(Se.$rmListeners$.map(We=>We()),Se.$rmListeners$=void 0),Se?.$lazyInstance$?Jr(Se.$lazyInstance$):Se?.$onReadyPromise$&&Se.$onReadyPromise$.then(()=>Jr(Se.$lazyInstance$))}})).apply(this,arguments)}(this))}componentOnReady(){return Yn(this).$onReadyPromise$}};mr.$lazyBundleId$=Wi[0],!Ve.includes(Mu)&&!pt.get(Mu)&&(We.push(Mu),pt.define(Mu,Wn(Tc,mr,1)))})}),er&&(gt.innerHTML+=ve),gt.innerHTML+=We+"{visibility:hidden}.hydrated{visibility:inherit}",gt.innerHTML.length){gt.setAttribute("data-styles","");const Wi=null!==(Oe=ti.$nonce$)&&void 0!==Oe?Oe:$t(Ei);null!=Wi&&gt.setAttribute("nonce",Wi),ct.insertBefore(gt,At?At.nextSibling:ct.firstChild)}Sn=!1,Lt.length?Lt.map(Wi=>Wi.connectedCallback()):ti.jmp(()=>Yt=setTimeout(pe,30)),Se()},Mt=(N,W,Oe,Se)=>{Oe&&Oe.map(([We,Ve,pt])=>{const ct=fn(N,We),At=hn(W,pt),gt=gn(We);ti.ael(ct,Ve,At,gt),(W.$rmListeners$=W.$rmListeners$||[]).push(()=>ti.rel(ct,Ve,At,gt))})},hn=(N,W)=>Oe=>{try{256&N.$flags$?N.$lazyInstance$[W](Oe):(N.$queuedListeners$=N.$queuedListeners$||[]).push([W,Oe])}catch(Se){Pi(Se)}},fn=(N,W)=>4&W?Ei:8&W?wi:16&W?Ei.body:N,gn=N=>0!=(2&N),ci=new WeakMap,Yn=N=>ci.get(N),Et=(N,W)=>ci.set(W.$lazyInstance$=N,W),Ai=(N,W)=>{const Oe={$flags$:0,$hostElement$:N,$cmpMeta$:W,$instanceValues$:new Map};return Oe.$onInstancePromise$=new Promise(Se=>Oe.$onInstanceResolve$=Se),Oe.$onReadyPromise$=new Promise(Se=>Oe.$onReadyResolve$=Se),N["s-p"]=[],N["s-rc"]=[],Mt(N,Oe,W.$listeners$),ci.set(N,Oe)},wr=(N,W)=>W in N,Pi=(N,W)=>(0,console.error)(N,W),oo=new Map,ls=(N,W,Oe)=>{const Se=N.$tagName$.replace(/-/g,"_"),We=N.$lazyBundleId$,Ve=oo.get(We);return Ve?Ve[Se]:F(863)(`./${We}.entry.js`).then(pt=>(oo.set(We,pt),pt[Se]),Pi)},Kt=new Map,jn=[],wi=typeof window<"u"?window:{},Ei=wi.document||{head:{}},ti={$flags$:0,$resourcesUrl$:"",jmp:N=>N(),raf:N=>requestAnimationFrame(N),ael:(N,W,Oe,Se)=>N.addEventListener(W,Oe,Se),rel:(N,W,Oe,Se)=>N.removeEventListener(W,Oe,Se),ce:(N,W)=>new CustomEvent(N,W)},Dr=N=>{Object.assign(ti,N)},ao=!0,Vi=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),sr=[],Pn=[],lo=(N,W)=>Oe=>{N.push(Oe),xe||(xe=!0,W&&4&ti.$flags$?Ge(Ls):ti.raf(Ls))},co=N=>{for(let W=0;W<N.length;W++)try{N[W](performance.now())}catch(Oe){Pi(Oe)}N.length=0},Ls=()=>{co(sr),co(Pn),(xe=sr.length>0)&&ti.raf(Ls)},Ge=N=>Promise.resolve(void 0).then(N),It=lo(sr,!1),Qt=lo(Pn,!0)},4649:(jt,Ze,F)=>{"use strict";F.d(Ze,{a:()=>X,b:()=>vt,c:()=>B,i:()=>$t});var a=F(408);class K{constructor(){this.m=new Map}reset(G){this.m=new Map(Object.entries(G))}get(G,Q){const de=this.m.get(G);return void 0!==de?de:Q}getBoolean(G,Q=!1){const de=this.m.get(G);return void 0===de?Q:"string"==typeof de?"true"===de:!!de}getNumber(G,Q){const de=parseFloat(this.m.get(G));return isNaN(de)?void 0!==Q?Q:NaN:de}set(G,Q){this.m.set(G,Q)}}const B=new K,Me="ionic-persist-config",X=(Fe,G)=>("string"==typeof Fe&&(G=Fe,Fe=void 0),(Fe=>se(Fe))(Fe).includes(G)),se=(Fe=window)=>{if(typeof Fe>"u")return[];Fe.Ionic=Fe.Ionic||{};let G=Fe.Ionic.platforms;return null==G&&(G=Fe.Ionic.platforms=be(Fe),G.forEach(Q=>Fe.document.documentElement.classList.add(`plt-${Q}`))),G},be=Fe=>{const G=B.get("platform");return Object.keys(Qe).filter(Q=>{const de=G?.[Q];return"function"==typeof de?de(Fe):Qe[Q](Fe)})},ke=Fe=>!!(Ye(Fe,/iPad/i)||Ye(Fe,/Macintosh/i)&&Ne(Fe)),le=Fe=>Ye(Fe,/android|sink/i),Ne=Fe=>rt(Fe,"(any-pointer:coarse)"),$e=Fe=>Z(Fe)||he(Fe),Z=Fe=>!!(Fe.cordova||Fe.phonegap||Fe.PhoneGap),he=Fe=>!!Fe.Capacitor?.isNative,Ye=(Fe,G)=>G.test(Fe.navigator.userAgent),rt=(Fe,G)=>{var Q;return null===(Q=Fe.matchMedia)||void 0===Q?void 0:Q.call(Fe,G).matches},Qe={ipad:ke,iphone:Fe=>Ye(Fe,/iPhone/i),ios:Fe=>Ye(Fe,/iPhone|iPod/i)||ke(Fe),android:le,phablet:Fe=>{const G=Fe.innerWidth,Q=Fe.innerHeight,de=Math.min(G,Q),fe=Math.max(G,Q);return de>390&&de<520&&fe>620&&fe<800},tablet:Fe=>{const G=Fe.innerWidth,Q=Fe.innerHeight,de=Math.min(G,Q),fe=Math.max(G,Q);return ke(Fe)||(Fe=>le(Fe)&&!Ye(Fe,/mobile/i))(Fe)||de>460&&de<820&&fe>780&&fe<1400},cordova:Z,capacitor:he,electron:Fe=>Ye(Fe,/electron/i),pwa:Fe=>{var G;return!!(null!==(G=Fe.matchMedia)&&void 0!==G&&G.call(Fe,"(display-mode: standalone)").matches||Fe.navigator.standalone)},mobile:Ne,mobileweb:Fe=>Ne(Fe)&&!$e(Fe),desktop:Fe=>!Ne(Fe),hybrid:$e};let on;const vt=Fe=>Fe&&(0,a.g)(Fe)||on,$t=(Fe={})=>{if(typeof window>"u")return;const G=window.document,Q=window,de=Q.Ionic=Q.Ionic||{},fe={};Fe._ael&&(fe.ael=Fe._ael),Fe._rel&&(fe.rel=Fe._rel),Fe._ce&&(fe.ce=Fe._ce),(0,a.a)(fe);const Xe=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Fe=>{try{const G=Fe.sessionStorage.getItem(Me);return null!==G?JSON.parse(G):{}}catch{return{}}})(Q)),{persistConfig:!1}),de.config),(Fe=>{const G={};return Fe.location.search.slice(1).split("&").map(Q=>Q.split("=")).map(([Q,de])=>[decodeURIComponent(Q),decodeURIComponent(de)]).filter(([Q])=>((Fe,G)=>Fe.substr(0,G.length)===G)(Q,"ionic:")).map(([Q,de])=>[Q.slice("ionic:".length),de]).forEach(([Q,de])=>{G[Q]=de}),G})(Q)),Fe);B.reset(Xe),B.getBoolean("persistConfig")&&((Fe,G)=>{try{Fe.sessionStorage.setItem(Me,JSON.stringify(G))}catch{return}})(Q,Xe),se(Q),de.config=B,de.mode=on=B.get("mode",G.documentElement.getAttribute("mode")||(X(Q,"ios")?"ios":"md")),B.set("mode",on),G.documentElement.setAttribute("mode",on),G.documentElement.classList.add(on),B.getBoolean("_testing")&&B.set("animated",!1);const He=Tt=>{var Rt;return null===(Rt=Tt.tagName)||void 0===Rt?void 0:Rt.startsWith("ION-")},kt=Tt=>["ios","md"].includes(Tt);(0,a.c)(Tt=>{for(;Tt;){const Rt=Tt.mode||Tt.getAttribute("mode");if(Rt){if(kt(Rt))return Rt;He(Tt)&&console.warn('Invalid ionic mode: "'+Rt+'", expected: "ios" or "md"')}Tt=Tt.parentElement}return on})}},1838:(jt,Ze,F)=>{"use strict";F.r(Ze),F.d(Ze,{iosTransitionAnimation:()=>be,shadow:()=>oe});var a=F(2876),K=F(9528);F(2972),F(408);const me=ke=>document.querySelector(`${ke}.ion-cloned-element`),oe=ke=>ke.shadowRoot||ke,_e=ke=>{const Ue="ION-TABS"===ke.tagName?ke:ke.querySelector("ion-tabs"),te="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Ue){const le=Ue.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=le?le.querySelector(te):null}return ke.querySelector(te)},Me=(ke,Ue)=>{const te="ION-TABS"===ke.tagName?ke:ke.querySelector("ion-tabs");let le=[];if(null!=te){const ue=te.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ue&&(le=ue.querySelectorAll("ion-buttons"))}else le=ke.querySelectorAll("ion-buttons");for(const ue of le){const Be=ue.closest("ion-header"),Ce=Be&&!Be.classList.contains("header-collapse-condense-inactive"),Ne=ue.querySelector("ion-back-button"),Le=ue.classList.contains("buttons-collapse");if(null!==Ne&&("start"===ue.slot||""===ue.slot)&&(Le&&Ce&&Ue||!Le))return Ne}return null},X=(ke,Ue,te,le,ue,Be,Ce,Ne,Le)=>{var $e,Z;const he=Ue?`calc(100% - ${ue.right+4}px)`:ue.left-4+"px",ve=Ue?"right":"left",Te=Ue?"left":"right",Ye=Ue?"right":"left",rt=(null===($e=Be.textContent)||void 0===$e?void 0:$e.trim())===(null===(Z=Ne.textContent)||void 0===Z?void 0:Z.trim()),on=(Le.height-xe)/Ce.height,vt=rt?`scale(${Le.width/Ce.width}, ${on})`:`scale(${on})`,$t="scale(1)",G=oe(le).querySelector("ion-icon").getBoundingClientRect(),Q=Ue?G.width/2-(G.right-ue.right)+"px":ue.left-G.width/2+"px",de=Ue?`-${window.innerWidth-ue.right}px`:`${ue.left}px`,fe=`${Le.top}px`,Xe=`${ue.top}px`,Tt=te?[{offset:0,transform:`translate3d(${de}, ${Xe}, 0)`},{offset:1,transform:`translate3d(${Q}, ${fe}, 0)`}]:[{offset:0,transform:`translate3d(${Q}, ${fe}, 0)`},{offset:1,transform:`translate3d(${de}, ${Xe}, 0)`}],vn=te?[{offset:0,opacity:1,transform:$t},{offset:1,opacity:0,transform:vt}]:[{offset:0,opacity:0,transform:vt},{offset:1,opacity:1,transform:$t}],Zt=te?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],Gt=(0,a.c)(),Wt=(0,a.c)(),lt=(0,a.c)(),Ct=me("ion-back-button"),at=oe(Ct).querySelector(".button-text"),st=oe(Ct).querySelector("ion-icon");Ct.text=le.text,Ct.mode=le.mode,Ct.icon=le.icon,Ct.color=le.color,Ct.disabled=le.disabled,Ct.style.setProperty("display","block"),Ct.style.setProperty("position","fixed"),Wt.addElement(st),Gt.addElement(at),lt.addElement(Ct),lt.beforeStyles({position:"absolute",top:"0px",[Ye]:"0px"}).keyframes(Tt),Gt.beforeStyles({"transform-origin":`${ve} top`}).beforeAddWrite(()=>{le.style.setProperty("display","none"),Ct.style.setProperty(ve,he)}).afterAddWrite(()=>{le.style.setProperty("display",""),Ct.style.setProperty("display","none"),Ct.style.removeProperty(ve)}).keyframes(vn),Wt.beforeStyles({"transform-origin":`${Te} center`}).keyframes(Zt),ke.addAnimation([Gt,Wt,lt])},se=(ke,Ue,te,le,ue,Be,Ce,Ne)=>{var Le,$e;const Z=Ue?"right":"left",he=Ue?`calc(100% - ${ue.right}px)`:`${ue.left}px`,Te=`${ue.top}px`,rt=Ue?`-${window.innerWidth-Ne.right-8}px`:Ne.x-8+"px",on=Ne.y-2+"px",vt=(null===(Le=Ce.textContent)||void 0===Le?void 0:Le.trim())===(null===($e=le.textContent)||void 0===$e?void 0:$e.trim()),Fe=Ne.height/(Be.height-xe),G="scale(1)",Q=vt?`scale(${Ne.width/Be.width}, ${Fe})`:`scale(${Fe})`,Xe=te?[{offset:0,opacity:0,transform:`translate3d(${rt}, ${on}, 0) ${Q}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${Te}, 0) ${G}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${Te}, 0) ${G}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${rt}, ${on}, 0) ${Q}`}],He=me("ion-title"),kt=(0,a.c)();He.innerText=le.innerText,He.size=le.size,He.color=le.color,kt.addElement(He),kt.beforeStyles({"transform-origin":`${Z} top`,height:`${ue.height}px`,display:"",position:"relative",[Z]:he}).beforeAddWrite(()=>{le.style.setProperty("opacity","0")}).afterAddWrite(()=>{le.style.setProperty("opacity",""),He.style.setProperty("display","none")}).keyframes(Xe),ke.addAnimation(kt)},be=(ke,Ue)=>{var te;try{const le="cubic-bezier(0.32,0.72,0,1)",ue="opacity",Be="transform",Ce="0%",Le="rtl"===ke.ownerDocument.dir,$e=Le?"-99.5%":"99.5%",Z=Le?"33%":"-33%",he=Ue.enteringEl,ve=Ue.leavingEl,Te="back"===Ue.direction,Ye=he.querySelector(":scope > ion-content"),rt=he.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Qe=he.querySelectorAll(":scope > ion-header > ion-toolbar"),on=(0,a.c)(),vt=(0,a.c)();if(on.addElement(he).duration((null!==(te=Ue.duration)&&void 0!==te?te:0)||540).easing(Ue.easing||le).fill("both").beforeRemoveClass("ion-page-invisible"),ve&&null!=ke){const Q=(0,a.c)();Q.addElement(ke),on.addAnimation(Q)}if(Ye||0!==Qe.length||0!==rt.length?(vt.addElement(Ye),vt.addElement(rt)):vt.addElement(he.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),on.addAnimation(vt),Te?vt.beforeClearStyles([ue]).fromTo("transform",`translateX(${Z})`,`translateX(${Ce})`).fromTo(ue,.8,1):vt.beforeClearStyles([ue]).fromTo("transform",`translateX(${$e})`,`translateX(${Ce})`),Ye){const Q=oe(Ye).querySelector(".transition-effect");if(Q){const de=Q.querySelector(".transition-cover"),fe=Q.querySelector(".transition-shadow"),Xe=(0,a.c)(),He=(0,a.c)(),kt=(0,a.c)();Xe.addElement(Q).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),He.addElement(de).beforeClearStyles([ue]).fromTo(ue,0,.1),kt.addElement(fe).beforeClearStyles([ue]).fromTo(ue,.03,.7),Xe.addAnimation([He,kt]),vt.addAnimation([Xe])}}const $t=he.querySelector("ion-header.header-collapse-condense"),{forward:Fe,backward:G}=((ke,Ue,te,le,ue)=>{const Be=Me(le,te),Ce=_e(ue),Ne=_e(le),Le=Me(ue,te),$e=null!==Be&&null!==Ce&&!te,Z=null!==Ne&&null!==Le&&te;if($e){const he=Ce.getBoundingClientRect(),ve=Be.getBoundingClientRect(),Te=oe(Be).querySelector(".button-text"),Ye=Te.getBoundingClientRect(),Qe=oe(Ce).querySelector(".toolbar-title").getBoundingClientRect();se(ke,Ue,te,Ce,he,Qe,Te,Ye),X(ke,Ue,te,Be,ve,Te,Ye,Ce,Qe)}else if(Z){const he=Ne.getBoundingClientRect(),ve=Le.getBoundingClientRect(),Te=oe(Le).querySelector(".button-text"),Ye=Te.getBoundingClientRect(),Qe=oe(Ne).querySelector(".toolbar-title").getBoundingClientRect();se(ke,Ue,te,Ne,he,Qe,Te,Ye),X(ke,Ue,te,Le,ve,Te,Ye,Ne,Qe)}return{forward:$e,backward:Z}})(on,Le,Te,he,ve);if(Qe.forEach(Q=>{const de=(0,a.c)();de.addElement(Q),on.addAnimation(de);const fe=(0,a.c)();fe.addElement(Q.querySelector("ion-title"));const Xe=(0,a.c)(),He=Array.from(Q.querySelectorAll("ion-buttons,[menuToggle]")),kt=Q.closest("ion-header"),Tt=kt?.classList.contains("header-collapse-condense-inactive");let Rt;Rt=He.filter(Te?Zt=>{const Gt=Zt.classList.contains("buttons-collapse");return Gt&&!Tt||!Gt}:Zt=>!Zt.classList.contains("buttons-collapse")),Xe.addElement(Rt);const Vt=(0,a.c)();Vt.addElement(Q.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const vn=(0,a.c)();vn.addElement(oe(Q).querySelector(".toolbar-background"));const zn=(0,a.c)(),Bn=Q.querySelector("ion-back-button");if(Bn&&zn.addElement(Bn),de.addAnimation([fe,Xe,Vt,vn,zn]),Xe.fromTo(ue,.01,1),Vt.fromTo(ue,.01,1),Te)Tt||fe.fromTo("transform",`translateX(${Z})`,`translateX(${Ce})`).fromTo(ue,.01,1),Vt.fromTo("transform",`translateX(${Z})`,`translateX(${Ce})`),zn.fromTo(ue,.01,1);else if($t||fe.fromTo("transform",`translateX(${$e})`,`translateX(${Ce})`).fromTo(ue,.01,1),Vt.fromTo("transform",`translateX(${$e})`,`translateX(${Ce})`),vn.beforeClearStyles([ue,"transform"]),kt?.translucent?vn.fromTo("transform",Le?"translateX(-100%)":"translateX(100%)","translateX(0px)"):vn.fromTo(ue,.01,"var(--opacity)"),Fe||zn.fromTo(ue,.01,1),Bn&&!Fe){const Gt=(0,a.c)();Gt.addElement(oe(Bn).querySelector(".button-text")).fromTo("transform",Le?"translateX(-100px)":"translateX(100px)","translateX(0px)"),de.addAnimation(Gt)}}),ve){const Q=(0,a.c)(),de=ve.querySelector(":scope > ion-content"),fe=ve.querySelectorAll(":scope > ion-header > ion-toolbar"),Xe=ve.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(de||0!==fe.length||0!==Xe.length?(Q.addElement(de),Q.addElement(Xe)):Q.addElement(ve.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),on.addAnimation(Q),Te){Q.beforeClearStyles([ue]).fromTo("transform",`translateX(${Ce})`,Le?"translateX(-100%)":"translateX(100%)");const He=(0,K.g)(ve);on.afterAddWrite(()=>{"normal"===on.getDirection()&&He.style.setProperty("display","none")})}else Q.fromTo("transform",`translateX(${Ce})`,`translateX(${Z})`).fromTo(ue,1,.8);if(de){const He=oe(de).querySelector(".transition-effect");if(He){const kt=He.querySelector(".transition-cover"),Tt=He.querySelector(".transition-shadow"),Rt=(0,a.c)(),Vt=(0,a.c)(),vn=(0,a.c)();Rt.addElement(He).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Vt.addElement(kt).beforeClearStyles([ue]).fromTo(ue,.1,0),vn.addElement(Tt).beforeClearStyles([ue]).fromTo(ue,.7,.03),Rt.addAnimation([Vt,vn]),Q.addAnimation([Rt])}}fe.forEach(He=>{const kt=(0,a.c)();kt.addElement(He);const Tt=(0,a.c)();Tt.addElement(He.querySelector("ion-title"));const Rt=(0,a.c)(),Vt=He.querySelectorAll("ion-buttons,[menuToggle]"),vn=He.closest("ion-header"),zn=vn?.classList.contains("header-collapse-condense-inactive"),Bn=Array.from(Vt).filter(at=>{const st=at.classList.contains("buttons-collapse");return st&&!zn||!st});Rt.addElement(Bn);const Zt=(0,a.c)(),Gt=He.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Gt.length>0&&Zt.addElement(Gt);const Wt=(0,a.c)();Wt.addElement(oe(He).querySelector(".toolbar-background"));const lt=(0,a.c)(),Ct=He.querySelector("ion-back-button");if(Ct&&lt.addElement(Ct),kt.addAnimation([Tt,Rt,Zt,lt,Wt]),on.addAnimation(kt),lt.fromTo(ue,.99,0),Rt.fromTo(ue,.99,0),Zt.fromTo(ue,.99,0),Te){if(zn||Tt.fromTo("transform",`translateX(${Ce})`,Le?"translateX(-100%)":"translateX(100%)").fromTo(ue,.99,0),Zt.fromTo("transform",`translateX(${Ce})`,Le?"translateX(-100%)":"translateX(100%)"),Wt.beforeClearStyles([ue,"transform"]),vn?.translucent?Wt.fromTo("transform","translateX(0px)",Le?"translateX(-100%)":"translateX(100%)"):Wt.fromTo(ue,"var(--opacity)",0),Ct&&!G){const st=(0,a.c)();st.addElement(oe(Ct).querySelector(".button-text")).fromTo("transform",`translateX(${Ce})`,`translateX(${(Le?-124:124)+"px"})`),kt.addAnimation(st)}}else zn||Tt.fromTo("transform",`translateX(${Ce})`,`translateX(${Z})`).fromTo(ue,.99,0).afterClearStyles([Be,ue]),Zt.fromTo("transform",`translateX(${Ce})`,`translateX(${Z})`).afterClearStyles([Be,ue]),lt.afterClearStyles([ue]),Tt.afterClearStyles([ue]),Rt.afterClearStyles([ue])})}return on}catch(le){throw le}},xe=10},6705:(jt,Ze,F)=>{"use strict";F.r(Ze),F.d(Ze,{mdTransitionAnimation:()=>Ae});var a=F(2876),K=F(9528);F(2972),F(408);const Ae=(me,oe)=>{var _e,Me,ie;const X="40px",be="back"===oe.direction,ke=oe.leavingEl,Ue=(0,K.g)(oe.enteringEl),te=Ue.querySelector("ion-toolbar"),le=(0,a.c)();if(le.addElement(Ue).fill("both").beforeRemoveClass("ion-page-invisible"),be?le.duration((null!==(_e=oe.duration)&&void 0!==_e?_e:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):le.duration((null!==(Me=oe.duration)&&void 0!==Me?Me:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${X})`,"translateY(0px)").fromTo("opacity",.01,1),te){const ue=(0,a.c)();ue.addElement(te),le.addAnimation(ue)}if(ke&&be){le.duration((null!==(ie=oe.duration)&&void 0!==ie?ie:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ue=(0,a.c)();ue.addElement((0,K.g)(ke)).onFinish(Be=>{1===Be&&ue.elements.length>0&&ue.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${X})`).fromTo("opacity",1,0),le.addAnimation(ue)}return le}},8042:(jt,Ze,F)=>{"use strict";F.d(Ze,{B:()=>zn,G:()=>Bn,O:()=>Zt,a:()=>Ue,b:()=>te,c:()=>Ce,d:()=>Gt,e:()=>Wt,f:()=>Q,g:()=>fe,h:()=>kt,i:()=>Rt,j:()=>Le,k:()=>$e,m:()=>ue,n:()=>xe,o:()=>ve,q:()=>Fe,s:()=>vn});var _e,Me,ie,X,a=F(5861),K=F(2972),B=F(4649),Ee=F(7869),Ae=F(8261),me=F(2961),oe=F(8909);let se=0,be=0;const xe=new WeakMap,ke=lt=>({create:Ct=>Z(lt,Ct),dismiss:(Ct,at,st)=>on(document,Ct,at,lt,st),getTop:()=>(0,a.Z)(function*(){return Fe(document,lt)})()}),Ue=ke("ion-alert"),te=ke("ion-action-sheet"),ue=ke("ion-modal"),Ce=ke("ion-popover"),Le=lt=>{typeof document<"u"&&Qe(document);const Ct=se++;lt.overlayIndex=Ct},$e=lt=>(lt.hasAttribute("id")||(lt.id="ion-overlay-"+ ++be),lt.id),Z=(lt,Ct)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(lt).then(()=>{const at=document.createElement(lt);return at.classList.add("overlay-hidden"),Object.assign(at,Object.assign(Object.assign({},Ct),{hasController:!0})),Xe(document).appendChild(at),new Promise(st=>(0,me.c)(at,st))}):Promise.resolve(),he='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',ve=(lt,Ct)=>{let at=lt.querySelector(he);const st=at?.shadowRoot;st&&(at=st.querySelector(he)||at),at?(0,me.f)(at):Ct.focus()},Ye=(lt,Ct)=>{const at=Array.from(lt.querySelectorAll(he));let st=at.length>0?at[at.length-1]:null;const Dn=st?.shadowRoot;Dn&&(st=Dn.querySelector(he)||st),st?st.focus():Ct.focus()},Qe=lt=>{0===se&&(se=1,lt.addEventListener("focus",Ct=>{((lt,Ct)=>{const at=Fe(Ct,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),st=lt.target;at&&st&&!at.classList.contains("ion-disable-focus-trap")&&(at.shadowRoot?(()=>{if(at.contains(st))at.lastFocus=st;else{const bn=at.lastFocus;ve(at,at),bn===Ct.activeElement&&Ye(at,at),at.lastFocus=Ct.activeElement}})():(()=>{if(at===st)at.lastFocus=void 0;else{const bn=(0,me.g)(at);if(!bn.contains(st))return;const ai=bn.querySelector(".ion-overlay-wrapper");if(!ai)return;if(ai.contains(st)||st===bn.querySelector("ion-backdrop"))at.lastFocus=st;else{const In=at.lastFocus;ve(ai,at),In===Ct.activeElement&&Ye(ai,at),at.lastFocus=Ct.activeElement}}})())})(Ct,lt)},!0),lt.addEventListener("ionBackButton",Ct=>{const at=Fe(lt);at?.backdropDismiss&&Ct.detail.register(Ae.OVERLAY_BACK_BUTTON_PRIORITY,()=>at.dismiss(void 0,zn))}),lt.addEventListener("keydown",Ct=>{if("Escape"===Ct.key){const at=Fe(lt);at?.backdropDismiss&&at.dismiss(void 0,zn)}}))},on=(lt,Ct,at,st,Dn)=>{const mi=Fe(lt,st,Dn);return mi?mi.dismiss(Ct,at):Promise.reject("overlay does not exist")},$t=(lt,Ct)=>((lt,Ct)=>(void 0===Ct&&(Ct="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(lt.querySelectorAll(Ct)).filter(at=>at.overlayIndex>0)))(lt,Ct).filter(at=>!(lt=>lt.classList.contains("overlay-hidden"))(at)),Fe=(lt,Ct,at)=>{const st=$t(lt,Ct);return void 0===at?st[st.length-1]:st.find(Dn=>Dn.id===at)},G=(lt=!1)=>{const at=Xe(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");at&&(lt?at.setAttribute("aria-hidden","true"):at.removeAttribute("aria-hidden"))},Q=function(Ct,at,st,Dn,mi){return(_e=_e||(0,a.Z)(function*(bn,ai,In,Zn,Rn){var Xt,qt;if(bn.presented)return;G(!0),bn.presented=!0,bn.willPresent.emit(),null===(Xt=bn.willPresentShorthand)||void 0===Xt||Xt.emit();const Ui=(0,B.b)(bn),Ti=bn.enterAnimation?bn.enterAnimation:B.c.get(ai,"ios"===Ui?In:Zn);(yield He(bn,Ti,bn.el,Rn))&&(bn.didPresent.emit(),null===(qt=bn.didPresentShorthand)||void 0===qt||qt.emit()),"ION-TOAST"!==bn.el.tagName&&de(bn.el),bn.keyboardClose&&(null===document.activeElement||!bn.el.contains(document.activeElement))&&bn.el.focus()})).apply(this,arguments)},de=function(Ct){return(Me=Me||(0,a.Z)(function*(at){let st=document.activeElement;if(!st)return;const Dn=st?.shadowRoot;Dn&&(st=Dn.querySelector(he)||st),yield at.onDidDismiss(),st.focus()})).apply(this,arguments)},fe=function(Ct,at,st,Dn,mi,bn,ai){return(ie=ie||(0,a.Z)(function*(In,Zn,Rn,Xt,qt,Ui,Ti){var Mi,Xi;if(!In.presented)return!1;void 0!==K.d&&1===$t(K.d).length&&G(!1),In.presented=!1;try{In.el.style.setProperty("pointer-events","none"),In.willDismiss.emit({data:Zn,role:Rn}),null===(Mi=In.willDismissShorthand)||void 0===Mi||Mi.emit({data:Zn,role:Rn});const $i=(0,B.b)(In),os=In.leaveAnimation?In.leaveAnimation:B.c.get(Xt,"ios"===$i?qt:Ui);Rn!==Bn&&(yield He(In,os,In.el,Ti)),In.didDismiss.emit({data:Zn,role:Rn}),null===(Xi=In.didDismissShorthand)||void 0===Xi||Xi.emit({data:Zn,role:Rn}),xe.delete(In),In.el.classList.add("overlay-hidden"),In.el.style.removeProperty("pointer-events"),void 0!==In.el.lastFocus&&(In.el.lastFocus=void 0)}catch($i){console.error($i)}return In.el.remove(),!0})).apply(this,arguments)},Xe=lt=>lt.querySelector("ion-app")||lt.body,He=function(Ct,at,st,Dn){return(X=X||(0,a.Z)(function*(mi,bn,ai,In){ai.classList.remove("overlay-hidden");const Rn=bn(mi.el,In);(!mi.animated||!B.c.getBoolean("animated",!0))&&Rn.duration(0),mi.keyboardClose&&Rn.beforeAddWrite(()=>{const qt=ai.ownerDocument.activeElement;qt?.matches("input,ion-input, ion-textarea")&&qt.blur()});const Xt=xe.get(mi)||[];return xe.set(mi,[...Xt,Rn]),yield Rn.play(),!0})).apply(this,arguments)},kt=(lt,Ct)=>{let at;const st=new Promise(Dn=>at=Dn);return Tt(lt,Ct,Dn=>{at(Dn.detail)}),st},Tt=(lt,Ct,at)=>{const st=Dn=>{(0,me.b)(lt,Ct,st),at(Dn)};(0,me.a)(lt,Ct,st)},Rt=lt=>"cancel"===lt||lt===zn,Vt=lt=>lt(),vn=(lt,Ct)=>{if("function"==typeof lt)return B.c.get("_zoneGate",Vt)(()=>{try{return lt(Ct)}catch(st){throw st}})},zn="backdrop",Bn="gesture",Zt=39,Gt=lt=>{var Ct;let st,at=!1;const Dn=(0,Ee.C)(),mi=(In=!1)=>{if(st&&!In)return{delegate:st,inline:at};const{el:Zn,hasController:Rn,delegate:Xt}=lt;return at=null!==Zn.parentNode&&!Rn,st=at?Xt||Dn:Xt,{inline:at,delegate:st}};return{attachViewToDom:function(Zn){return(Ct=Ct||(0,a.Z)(function*(Rn){const{delegate:Xt}=mi(!0);if(Xt)return yield Xt.attachViewToDom(lt.el,Rn);const{hasController:qt}=lt;if(qt&&void 0!==Rn)throw new Error("framework delegate is missing");return null})).apply(this,arguments)},removeViewFromDom:()=>{const{delegate:In}=mi();In&&void 0!==lt.el&&In.removeViewFromDom(lt.el.parentElement,lt.el)}}},Wt=()=>{let lt;const Ct=()=>{lt&&(lt(),lt=void 0)};return{addClickListener:(st,Dn)=>{Ct();const mi=void 0!==Dn?document.getElementById(Dn):null;mi?lt=((ai,In)=>{const Zn=()=>{In.present()};return ai.addEventListener("click",Zn),()=>{ai.removeEventListener("click",Zn)}})(mi,st):(0,oe.p)(`A trigger element with the ID "${Dn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,st)},removeClickListener:Ct}}},2697:(jt,Ze,F)=>{"use strict";var a=F(4650);let K=null;function B(){return K}class Ae{}const me=new a.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return function _e(){return(0,a.LFG)(ie)}()},providedIn:"platform"}),n})();const Me=new a.OlP("Location Initialized");let ie=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(t){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){X()?this._history.pushState(t,i,r):this._location.hash=r}replaceState(t,i,r){X()?this._history.replaceState(t,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(me))},n.\u0275prov=a.Yz7({token:n,factory:function(){return function se(){return new ie((0,a.LFG)(me))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ke(n){return n&&"?"!==n[0]?"?"+n:n}let Ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(le)},providedIn:"root"}),n})();const te=new a.OlP("appBaseHref");let le=(()=>{class n extends Ue{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,a.f3M)(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return be(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+ke(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+ke(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+ke(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(oe),a.LFG(te,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ue=(()=>{class n extends Ue{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=be(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+ke(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+ke(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(oe),a.LFG(te,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Be=(()=>{class n{constructor(t){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function $e(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(xe(Le(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ke(i))}normalize(t){return n.stripTrailingSlash(function Ne(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Le(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=ke,n.joinWithSlash=be,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(a.LFG(Ue))},n.\u0275prov=a.Yz7({token:n,factory:function(){return function Ce(){return new Be((0,a.LFG)(Ue))}()},providedIn:"root"}),n})();function Le(n){return n.replace(/\/index.html$/,"")}var Te=(()=>((Te=Te||{})[Te.Format=0]="Format",Te[Te.Standalone=1]="Standalone",Te))(),Ye=(()=>((Ye=Ye||{})[Ye.Narrow=0]="Narrow",Ye[Ye.Abbreviated=1]="Abbreviated",Ye[Ye.Wide=2]="Wide",Ye[Ye.Short=3]="Short",Ye))(),rt=(()=>((rt=rt||{})[rt.Short=0]="Short",rt[rt.Medium=1]="Medium",rt[rt.Long=2]="Long",rt[rt.Full=3]="Full",rt))(),Qe=(()=>((Qe=Qe||{})[Qe.Decimal=0]="Decimal",Qe[Qe.Group=1]="Group",Qe[Qe.List=2]="List",Qe[Qe.PercentSign=3]="PercentSign",Qe[Qe.PlusSign=4]="PlusSign",Qe[Qe.MinusSign=5]="MinusSign",Qe[Qe.Exponential=6]="Exponential",Qe[Qe.SuperscriptingExponent=7]="SuperscriptingExponent",Qe[Qe.PerMille=8]="PerMille",Qe[Qe.Infinity=9]="Infinity",Qe[Qe.NaN=10]="NaN",Qe[Qe.TimeSeparator=11]="TimeSeparator",Qe[Qe.CurrencyDecimal=12]="CurrencyDecimal",Qe[Qe.CurrencyGroup=13]="CurrencyGroup",Qe))();function Xe(n,e){return at((0,a.cg1)(n)[a.wAp.DateFormat],e)}function He(n,e){return at((0,a.cg1)(n)[a.wAp.TimeFormat],e)}function kt(n,e){return at((0,a.cg1)(n)[a.wAp.DateTimeFormat],e)}function Tt(n,e){const t=(0,a.cg1)(n),i=t[a.wAp.NumberSymbols][e];if(typeof i>"u"){if(e===Qe.CurrencyDecimal)return t[a.wAp.NumberSymbols][Qe.Decimal];if(e===Qe.CurrencyGroup)return t[a.wAp.NumberSymbols][Qe.Group]}return i}function Gt(n){if(!n[a.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[a.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function at(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function st(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const ai=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,In={},Zn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Rn=(()=>((Rn=Rn||{})[Rn.Short=0]="Short",Rn[Rn.ShortGMT=1]="ShortGMT",Rn[Rn.Long=2]="Long",Rn[Rn.Extended=3]="Extended",Rn))(),Xt=(()=>((Xt=Xt||{})[Xt.FullYear=0]="FullYear",Xt[Xt.Month=1]="Month",Xt[Xt.Date=2]="Date",Xt[Xt.Hours=3]="Hours",Xt[Xt.Minutes=4]="Minutes",Xt[Xt.Seconds=5]="Seconds",Xt[Xt.FractionalSeconds=6]="FractionalSeconds",Xt[Xt.Day=7]="Day",Xt))(),qt=(()=>((qt=qt||{})[qt.DayPeriods=0]="DayPeriods",qt[qt.Days=1]="Days",qt[qt.Months=2]="Months",qt[qt.Eras=3]="Eras",qt))();function Ui(n,e,t,i){let r=function $(n){if(et(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(u=>+u);return Ti(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(ai))return function pe(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,u=Number(n[5]||0)-i,h=Number(n[6]||0),m=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,u,h,m),e}(i)}const e=new Date(n);if(!et(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Mi(t,e)||e;let u,o=[];for(;e;){if(u=Zn.exec(e),!u){o.push(e);break}{o=o.concat(u.slice(1));const g=o.pop();if(!g)break;e=g}}let h=r.getTimezoneOffset();i&&(h=re(i,h),r=function j(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function z(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(re(e,r)-r))}(r,i,!0));let m="";return o.forEach(g=>{const y=function ge(n){if(as[n])return as[n];let e;switch(n){case"G":case"GG":case"GGG":e=$n(qt.Eras,Ye.Abbreviated);break;case"GGGG":e=$n(qt.Eras,Ye.Wide);break;case"GGGGG":e=$n(qt.Eras,Ye.Narrow);break;case"y":e=bi(Xt.FullYear,1,0,!1,!0);break;case"yy":e=bi(Xt.FullYear,2,0,!0,!0);break;case"yyy":e=bi(Xt.FullYear,3,0,!1,!0);break;case"yyyy":e=bi(Xt.FullYear,4,0,!1,!0);break;case"Y":e=_s(1);break;case"YY":e=_s(2,!0);break;case"YYY":e=_s(3);break;case"YYYY":e=_s(4);break;case"M":case"L":e=bi(Xt.Month,1,1);break;case"MM":case"LL":e=bi(Xt.Month,2,1);break;case"MMM":e=$n(qt.Months,Ye.Abbreviated);break;case"MMMM":e=$n(qt.Months,Ye.Wide);break;case"MMMMM":e=$n(qt.Months,Ye.Narrow);break;case"LLL":e=$n(qt.Months,Ye.Abbreviated,Te.Standalone);break;case"LLLL":e=$n(qt.Months,Ye.Wide,Te.Standalone);break;case"LLLLL":e=$n(qt.Months,Ye.Narrow,Te.Standalone);break;case"w":e=Ji(1);break;case"ww":e=Ji(2);break;case"W":e=Ji(1,!0);break;case"d":e=bi(Xt.Date,1);break;case"dd":e=bi(Xt.Date,2);break;case"c":case"cc":e=bi(Xt.Day,1);break;case"ccc":e=$n(qt.Days,Ye.Abbreviated,Te.Standalone);break;case"cccc":e=$n(qt.Days,Ye.Wide,Te.Standalone);break;case"ccccc":e=$n(qt.Days,Ye.Narrow,Te.Standalone);break;case"cccccc":e=$n(qt.Days,Ye.Short,Te.Standalone);break;case"E":case"EE":case"EEE":e=$n(qt.Days,Ye.Abbreviated);break;case"EEEE":e=$n(qt.Days,Ye.Wide);break;case"EEEEE":e=$n(qt.Days,Ye.Narrow);break;case"EEEEEE":e=$n(qt.Days,Ye.Short);break;case"a":case"aa":case"aaa":e=$n(qt.DayPeriods,Ye.Abbreviated);break;case"aaaa":e=$n(qt.DayPeriods,Ye.Wide);break;case"aaaaa":e=$n(qt.DayPeriods,Ye.Narrow);break;case"b":case"bb":case"bbb":e=$n(qt.DayPeriods,Ye.Abbreviated,Te.Standalone,!0);break;case"bbbb":e=$n(qt.DayPeriods,Ye.Wide,Te.Standalone,!0);break;case"bbbbb":e=$n(qt.DayPeriods,Ye.Narrow,Te.Standalone,!0);break;case"B":case"BB":case"BBB":e=$n(qt.DayPeriods,Ye.Abbreviated,Te.Format,!0);break;case"BBBB":e=$n(qt.DayPeriods,Ye.Wide,Te.Format,!0);break;case"BBBBB":e=$n(qt.DayPeriods,Ye.Narrow,Te.Format,!0);break;case"h":e=bi(Xt.Hours,1,-12);break;case"hh":e=bi(Xt.Hours,2,-12);break;case"H":e=bi(Xt.Hours,1);break;case"HH":e=bi(Xt.Hours,2);break;case"m":e=bi(Xt.Minutes,1);break;case"mm":e=bi(Xt.Minutes,2);break;case"s":e=bi(Xt.Seconds,1);break;case"ss":e=bi(Xt.Seconds,2);break;case"S":e=bi(Xt.FractionalSeconds,1);break;case"SS":e=bi(Xt.FractionalSeconds,2);break;case"SSS":e=bi(Xt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ri(Rn.Short);break;case"ZZZZZ":e=ri(Rn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ri(Rn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ri(Rn.Long);break;default:return null}return as[n]=e,e}(g);m+=y?y(r,t,h):"''"===g?"'":g.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),m}function Ti(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Mi(n,e){const t=function vt(n){return(0,a.cg1)(n)[a.wAp.LocaleId]}(n);if(In[t]=In[t]||{},In[t][e])return In[t][e];let i="";switch(e){case"shortDate":i=Xe(n,rt.Short);break;case"mediumDate":i=Xe(n,rt.Medium);break;case"longDate":i=Xe(n,rt.Long);break;case"fullDate":i=Xe(n,rt.Full);break;case"shortTime":i=He(n,rt.Short);break;case"mediumTime":i=He(n,rt.Medium);break;case"longTime":i=He(n,rt.Long);break;case"fullTime":i=He(n,rt.Full);break;case"short":const r=Mi(n,"shortTime"),s=Mi(n,"shortDate");i=Xi(kt(n,rt.Short),[r,s]);break;case"medium":const o=Mi(n,"mediumTime"),u=Mi(n,"mediumDate");i=Xi(kt(n,rt.Medium),[o,u]);break;case"long":const h=Mi(n,"longTime"),m=Mi(n,"longDate");i=Xi(kt(n,rt.Long),[h,m]);break;case"full":const g=Mi(n,"fullTime"),y=Mi(n,"fullDate");i=Xi(kt(n,rt.Full),[g,y])}return i&&(In[t][e]=i),i}function Xi(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function $i(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function bi(n,e,t=0,i=!1,r=!1){return function(s,o){let u=function Ii(n,e){switch(n){case Xt.FullYear:return e.getFullYear();case Xt.Month:return e.getMonth();case Xt.Date:return e.getDate();case Xt.Hours:return e.getHours();case Xt.Minutes:return e.getMinutes();case Xt.Seconds:return e.getSeconds();case Xt.FractionalSeconds:return e.getMilliseconds();case Xt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||u>-t)&&(u+=t),n===Xt.Hours)0===u&&-12===t&&(u=12);else if(n===Xt.FractionalSeconds)return function os(n,e){return $i(n,3).substring(0,e)}(u,e);const h=Tt(o,Qe.MinusSign);return $i(u,e,h,i,r)}}function $n(n,e,t=Te.Format,i=!1){return function(r,s){return function hr(n,e,t,i,r,s){switch(t){case qt.Months:return function G(n,e,t){const i=(0,a.cg1)(n),s=at([i[a.wAp.MonthsFormat],i[a.wAp.MonthsStandalone]],e);return at(s,t)}(e,r,i)[n.getMonth()];case qt.Days:return function Fe(n,e,t){const i=(0,a.cg1)(n),s=at([i[a.wAp.DaysFormat],i[a.wAp.DaysStandalone]],e);return at(s,t)}(e,r,i)[n.getDay()];case qt.DayPeriods:const o=n.getHours(),u=n.getMinutes();if(s){const m=function Wt(n){const e=(0,a.cg1)(n);return Gt(e),(e[a.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?st(i):[st(i[0]),st(i[1])])}(e),g=function lt(n,e,t){const i=(0,a.cg1)(n);Gt(i);const s=at([i[a.wAp.ExtraData][0],i[a.wAp.ExtraData][1]],e)||[];return at(s,t)||[]}(e,r,i),y=m.findIndex(E=>{if(Array.isArray(E)){const[x,I]=E,k=o>=x.hours&&u>=x.minutes,P=o<I.hours||o===I.hours&&u<I.minutes;if(x.hours<I.hours){if(k&&P)return!0}else if(k||P)return!0}else if(E.hours===o&&E.minutes===u)return!0;return!1});if(-1!==y)return g[y]}return function $t(n,e,t){const i=(0,a.cg1)(n),s=at([i[a.wAp.DayPeriodsFormat],i[a.wAp.DayPeriodsStandalone]],e);return at(s,t)}(e,r,i)[o<12?0:1];case qt.Eras:return function Q(n,e){return at((0,a.cg1)(n)[a.wAp.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function ri(n){return function(e,t,i){const r=-1*i,s=Tt(t,Qe.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Rn.Short:return(r>=0?"+":"")+$i(o,2,s)+$i(Math.abs(r%60),2,s);case Rn.ShortGMT:return"GMT"+(r>=0?"+":"")+$i(o,1,s);case Rn.Long:return"GMT"+(r>=0?"+":"")+$i(o,2,s)+":"+$i(Math.abs(r%60),2,s);case Rn.Extended:return 0===i?"Z":(r>=0?"+":"")+$i(o,2,s)+":"+$i(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const Sr=0,rr=4;function Xr(n){return Ti(n.getFullYear(),n.getMonth(),n.getDate()+(rr-n.getDay()))}function Ji(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=Xr(t),o=function fr(n){const e=Ti(n,Sr,1).getDay();return Ti(n,0,1+(e<=rr?rr:rr+7)-e)}(s.getFullYear()),u=s.getTime()-o.getTime();r=1+Math.round(u/6048e5)}return $i(r,n,Tt(i,Qe.MinusSign))}}function _s(n,e=!1){return function(t,i){return $i(Xr(t).getFullYear(),n,Tt(i,Qe.MinusSign),e)}}const as={};function re(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function et(n){return n instanceof Date&&!isNaN(n.valueOf())}const ls=/\s+/,Kt=[];let jn=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=Kt,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(ls):Kt}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(ls):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,Boolean(t[i]));this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(ls).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.ZZ4),a.Y36(a.aQg),a.Y36(a.SBq),a.Y36(a.Qsj))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Dr{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ao=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Dr(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const u=i.get(s);i.move(u,o),Xn(u,r)}});for(let r=0,s=i.length;r<s;r++){const u=i.get(r).context;u.index=r,u.count=s,u.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Xn(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Xn(n,e){n.context.$implicit=e.item}let sr=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Pn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.s_b),a.Y36(a.Rgc))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Pn{constructor(){this.$implicit=null,this.ngIf=null}}function lo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,a.AaK)(e)}'.`)}function Ve(n,e){return new a.vHH(2100,!1)}class pt{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class ct{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const At=new ct,gt=new pt;let Lt=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if((0,a.QGY)(t))return At;if((0,a.F4k)(t))return gt;throw Ve()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.sBO,16))},n.\u0275pipe=a.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const Wi=new a.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Zi=new a.OlP("DATE_PIPE_DEFAULT_OPTIONS");let cs=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,s){if(null==t||""===t||t!=t)return null;try{return Ui(t,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw Ve()}}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.soG,16),a.Y36(Wi,24),a.Y36(Zi,24))},n.\u0275pipe=a.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Fl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const Sc="browser",ia="server";function nm(n){return n===ia}let Pu=(()=>{class n{}return n.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new rm((0,a.LFG)(me),window)}),n})();class rm{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Dc(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Nl(this.window.history)||Nl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Nl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Fc extends Ae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ql extends Fc{static makeCurrent(){!function Ee(n){K||(K=n)}(new ql)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ka(){return Kl=Kl||document.querySelector("base"),Kl?Kl.getAttribute("href"):null}();return null==t?null:function dm(n){oa=oa||document.createElement("a"),oa.setAttribute("href",n);const e=oa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Kl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function oo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let oa,Kl=null;const oh=new a.OlP("TRANSITION_ID"),vg=[{provide:a.ip1,useFactory:function ju(n,e,t){return()=>{t.get(a.CZH).donePromise.then(()=>{const i=B(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[oh,me,a.zs3],multi:!0}];let fm=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Nc=new a.OlP("EventManagerPlugins");let Gu=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Nc),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class ll{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=B().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Wu=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const r=this.usageCount;let s=r.get(t)??0;return s+=i,s>0?r.set(t,s):r.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),aa=(()=>{class n extends Wu{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(s=>s.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const r=this.doc.createElement("style");r.textContent=i,t.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(me))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Ra={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vo=/%COMP%/g,cl=new a.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Yu(n,e){return e.flat(100).map(t=>t.replace(Vo,n))}function qu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ks=(()=>{class n{constructor(t,i,r,s){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new ah(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(t,i);return r instanceof Ku?r.applyToHost(t):r instanceof ca&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestory;switch(i.encapsulation){case a.ifc.Emulated:s=new Ku(o,u,i,this.appId,h);break;case a.ifc.ShadowDom:return new la(o,u,t,i);default:s=new ca(o,u,i,h)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Gu),a.LFG(aa),a.LFG(a.AFp),a.LFG(cl))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class ah{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ra[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(gm(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(gm(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Ra[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Ra[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(a.JOm.DashCase|a.JOm.Important)?e.style.setProperty(t,i,r&a.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&a.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,qu(i)):this.eventManager.addEventListener(e,t,qu(i))}}function gm(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class la extends ah{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Yu(r.id,r.styles);for(const o of s){const u=document.createElement("style");u.textContent=o,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ca extends ah{constructor(e,t,i,r,s=i.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=Yu(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ku extends ca{constructor(e,t,i,r,s){const o=r+"-"+i.id;super(e,t,i,s,o),this.contentAttr=function ev(n){return"_ngcontent-%COMP%".replace(Vo,n)}(o),this.hostAttr=function pm(n){return"_nghost-%COMP%".replace(Vo,n)}(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Zu=(()=>{class n extends ll{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(me))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const $c=["alt","control","meta","shift"],uh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let dh=(()=>{class n extends ll{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),o="code."),$c.forEach(m=>{const g=i.indexOf(m);g>-1&&(i.splice(g,1),o+=m+".")}),o+=s,0!=i.length||0===s.length)return null;const h={};return h.domEventName=r,h.fullKey=o,h}static matchEventFullKeyCode(t,i){let r=uh[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),$c.forEach(o=>{o!==r&&(0,Xu[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(me))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const fh=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:Sc},{provide:a.g9A,useValue:function Pa(){ql.makeCurrent()},multi:!0},{provide:me,useFactory:function Ju(){return(0,a.RDi)(document),document},deps:[]}]),mh=new a.OlP(""),dl=[{provide:a.rWj,useClass:class hm{addToWindow(e){a.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},a.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(i=>{const r=a.dqk.getAllAngularTestabilities();let s=r.length,o=!1;const u=function(h){o=o||h,s--,0==s&&i(o)};r.forEach(function(h){h.whenStable(u)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?B().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:a.lri,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]}],La=[{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function hh(){return new a.qLn},deps:[]},{provide:Nc,useClass:Zu,multi:!0,deps:[me,a.R0b,a.Lbi]},{provide:Nc,useClass:dh,multi:!0,deps:[me]},{provide:Ks,useClass:Ks,deps:[Gu,aa,a.AFp,cl]},{provide:a.FYo,useExisting:Ks},{provide:Wu,useExisting:aa},{provide:aa,useClass:aa,deps:[me]},{provide:Gu,useClass:Gu,deps:[Nc,a.R0b]},{provide:class om{},useClass:fm,deps:[]},[]];let jo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:a.AFp,useValue:t.appId},{provide:oh,useExisting:a.AFp},vg]}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(mh,12))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[...La,...dl],imports:[Fl,a.hGG]}),n})(),Vc=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(me))},n.\u0275prov=a.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function hl(){return new Vc((0,a.LFG)(me))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var Hi=F(8996),Ds=F(3269);function mn(...n){const e=(0,Ds.yG)(n);return(0,Hi.D)(n,e)}var Ln=F(7579);class As extends Ln.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const Bs=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var zr=F(9751);const{isArray:wh}=Array,{getPrototypeOf:Wc,prototype:Yc,keys:Na}=Object;function Ms(n){if(1===n.length){const e=n[0];if(wh(e))return{args:e,keys:null};if(function Ba(n){return n&&"object"==typeof n&&Wc(n)===Yc}(e)){const t=Na(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var ec=F(4671),pn=F(4004);const{isArray:Tm}=Array;function Us(n){return(0,pn.U)(e=>function Cm(n,e){return Tm(e)?n(...e):n(e)}(n,e))}function Ua(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var pr=F(5403),xg=F(9672);function nd(...n){const e=(0,Ds.yG)(n),t=(0,Ds.jO)(n),{args:i,keys:r}=Ms(n);if(0===i.length)return(0,Hi.D)([],e);const s=new zr.y(function fl(n,e,t=ec.y){return i=>{tc(e,()=>{const{length:r}=n,s=new Array(r);let o=r,u=r;for(let h=0;h<r;h++)tc(e,()=>{const m=(0,Hi.D)(n[h],e);let g=!1;m.subscribe((0,pr.x)(i,y=>{s[h]=y,g||(g=!0,u--),u||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>Ua(r,o):ec.y));return t?s.pipe(Us(t)):s}function tc(n,e,t){n?(0,xg.f)(t,n,e):e()}var qc=F(8189);function nc(...n){return function Tg(){return(0,qc.J)(1)}()((0,Hi.D)(n,(0,Ds.yG)(n)))}var mo=F(8421);function Kc(n){return new zr.y(e=>{(0,mo.Xf)(n()).subscribe(e)})}var ic=F(9635),Do=F(576);function ml(n,e){const t=(0,Do.m)(n)?n:()=>n,i=r=>r.error(t());return new zr.y(e?r=>e.schedule(i,0,r):i)}var $s=F(515),Xs=F(727),xr=F(4482);function Zc(){return(0,xr.e)((n,e)=>{let t=null;n._refCount++;const i=(0,pr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class Eh extends zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,xr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Xs.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pr.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Xs.w0.EMPTY)}return e}refCount(){return Zc()(this)}}function nr(n,e){return(0,xr.e)((t,i)=>{let r=null,s=0,o=!1;const u=()=>o&&!r&&i.complete();t.subscribe((0,pr.x)(i,h=>{r?.unsubscribe();let m=0;const g=s++;(0,mo.Xf)(n(h,g)).subscribe(r=(0,pr.x)(i,y=>i.next(e?e(h,y,g,m++):y),()=>{r=null,u()}))},()=>{o=!0,u()}))})}function Mr(n){return n<=0?()=>$s.E:(0,xr.e)((e,t)=>{let i=0;e.subscribe((0,pr.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function ks(...n){const e=(0,Ds.yG)(n);return(0,xr.e)((t,i)=>{(e?nc(n,t,e):nc(n,t)).subscribe(i)})}function Di(n,e){return(0,xr.e)((t,i)=>{let r=0;t.subscribe((0,pr.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}var kr=F(5577);function rc(n){return(0,xr.e)((e,t)=>{let i=!1;e.subscribe((0,pr.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function id(n=$a){return(0,xr.e)((e,t)=>{let i=!1;e.subscribe((0,pr.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function $a(){return new Bs}function po(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Di((r,s)=>n(r,s,i)):ec.y,Mr(1),t?rc(e):id(()=>new Bs))}function Go(n,e){return(0,Do.m)(e)?(0,kr.z)(n,e,1):(0,kr.z)(n,1)}var ur=F(8505);function go(n){return(0,xr.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,pr.x)(t,void 0,void 0,o=>{s=(0,mo.Xf)(n(o,go(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Xc(n,e){return(0,xr.e)(function Cg(n,e,t,i,r){return(s,o)=>{let u=t,h=e,m=0;s.subscribe((0,pr.x)(o,g=>{const y=m++;h=u?n(h,g,y):(u=!0,g),i&&o.next(h)},r&&(()=>{u&&o.next(h),o.complete()})))}}(n,e,arguments.length>=2,!0))}function Qc(n){return n<=0?()=>$s.E:(0,xr.e)((e,t)=>{let i=[];e.subscribe((0,pr.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Jc(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Di((r,s)=>n(r,s,i)):ec.y,Qc(1),t?rc(e):id(()=>new Bs))}function Ao(n){return(0,pn.U)(()=>n)}function pl(n){return(0,xr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Fn="primary",gl=Symbol("RouteTitle");class Va{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wo(n){return new Va(n)}function ua(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],u=n[s];if(o.startsWith(":"))r[o.substring(1)]=u;else if(o!==u.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Yo(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!rd(n[r],e[r]))return!1;return!0}function rd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Ch(n){return Array.prototype.concat.apply([],n)}function sd(n){return n.length>0?n[n.length-1]:null}function D(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function A(n){return(0,a.CqO)(n)?n:(0,a.QGY)(n)?(0,Hi.D)(Promise.resolve(n)):mn(n)}const O=!1,Y={exact:function _t(n,e,t){if(!gr(n.segments,e.segments)||!Tn(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!_t(n.children[i],e.children[i],t))return!1;return!0},subset:tn},ce={exact:function Je(n,e){return Yo(n,e)},subset:function Ot(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rd(n[t],e[t]))},ignored:()=>!0};function Pe(n,e,t){return Y[t.paths](n.root,e.root,t.matrixParams)&&ce[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function tn(n,e,t){return yn(n,e,e.segments,t)}function yn(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!gr(r,t)||e.hasChildren()||!Tn(r,t,i))}if(n.segments.length===t.length){if(!gr(n.segments,t)||!Tn(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!tn(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(gr(n.segments,r)&&Tn(n.segments,r,i)&&n.children[Fn])&&yn(n.children[Fn],e,s,i)}}function Tn(n,e,t){return e.every((i,r)=>ce[t](n[r].parameters,i.parameters))}class ni{constructor(e=new Cn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wo(this.queryParams)),this._queryParamMap}toString(){return _o.serialize(this)}}class Cn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,D(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return eu(this)}}class Yi{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wo(this.parameters)),this._parameterMap}toString(){return Sg(this)}}function gr(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Tr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return new qo},providedIn:"root"}),n})();class qo{parse(e){const t=new L(e);return new ni(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${tu(e.root,!0)}`,i=function Dg(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${oc(t)}=${oc(r)}`).join("&"):`${oc(t)}=${oc(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Im(n){return encodeURI(n)}(e.fragment)}`:""}`}}const _o=new qo;function eu(n){return n.segments.map(e=>Sg(e)).join("/")}function tu(n,e){if(!n.hasChildren())return eu(n);if(e){const t=n.children[Fn]?tu(n.children[Fn],!1):"",i=[];return D(n.children,(r,s)=>{s!==Fn&&i.push(`${s}:${tu(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Qn(n,e){let t=[];return D(n.children,(i,r)=>{r===Fn&&(t=t.concat(e(i,r)))}),D(n.children,(i,r)=>{r!==Fn&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Fn?[tu(n.children[Fn],!1)]:[`${r}:${tu(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Fn]?`${eu(n)}/${t[0]}`:`${eu(n)}/(${t.join("//")})`}}function sc(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oc(n){return sc(n).replace(/%3B/gi,";")}function _l(n){return sc(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nu(n){return decodeURIComponent(n)}function Sm(n){return nu(n.replace(/\+/g,"%20"))}function Sg(n){return`${_l(n.path)}${function Dm(n){return Object.keys(n).map(e=>`;${_l(e)}=${_l(n[e])}`).join("")}(n.parameters)}`}const tv=/^[^\/()?;=#]+/;function Ih(n){const e=n.match(tv);return e?e[0]:""}const M=/^[^=?&#]+/,b=/^[^&#]+/;class L{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Cn([],{}):new Cn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Fn]=new Cn(e,t)),i}parseSegment(){const e=Ih(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new a.vHH(4009,O);return this.capture(e),new Yi(nu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ih(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Ih(this.remaining);r&&(i=r,this.capture(i))}e[nu(t)]=nu(i)}parseQueryParam(e){const t=function v(n){const e=n.match(M);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function T(n){const e=n.match(b);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=Sm(t),s=Sm(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Ih(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new a.vHH(4010,O);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Fn);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Fn]:new Cn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new a.vHH(4011,O)}}function V(n){return n.segments.length>0?new Cn([],{[Fn]:n}):n}function ne(n){const e={};for(const i of Object.keys(n.children)){const s=ne(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function we(n){if(1===n.numberOfChildren&&n.children[Fn]){const e=n.children[Fn];return new Cn(n.segments.concat(e.segments),e.children)}return n}(new Cn(n.segments,e))}function qe(n){return n instanceof ni}const yt=!1;function Ri(n,e,t,i,r){if(0===t.length)return rs(e.root,e.root,e.root,i,r);const s=function od(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Sh(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const u={};return D(s.outlets,(h,m)=>{u[m]="string"==typeof h?h.split("/"):h}),[...r,{outlets:u}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((u,h)=>{0==h&&"."===u||(0==h&&""===u?t=!0:".."===u?e++:""!=u&&r.push(u))}),r):[...r,s]},[]);return new Sh(t,e,i)}(t);return s.toRoot()?rs(e.root,e.root,new Cn([],{}),i,r):function o(h){const m=function Ah(n,e,t,i){if(n.isAbsolute)return new yl(e.root,!0,0);if(-1===i)return new yl(t,t===e.root,0);return function iu(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new a.vHH(4005,yt&&"Invalid number of '../'");r=i.segments.length}return new yl(i,!1,r-s)}(t,i+(is(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,h),g=m.processChildren?vl(m.segmentGroup,m.index,s.commands):ru(m.segmentGroup,m.index,s.commands);return rs(e.root,m.segmentGroup,g,i,r)}(n.snapshot?._lastPathIndex)}function is(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function yo(n){return"object"==typeof n&&null!=n&&n.outlets}function rs(n,e,t,i,r){let o,s={};i&&D(i,(h,m)=>{s[m]=Array.isArray(h)?h.map(g=>`${g}`):`${h}`}),o=n===e?t:ac(n,e,t);const u=V(ne(o));return new ni(u,s,r)}function ac(n,e,t){const i={};return D(n.children,(r,s)=>{i[s]=r===e?t:ac(r,e,t)}),new Cn(n.segments,i)}class Sh{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&is(i[0]))throw new a.vHH(4003,yt&&"Root segment cannot have matrix parameters");const r=i.find(yo);if(r&&r!==sd(i))throw new a.vHH(4004,yt&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yl{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function ru(n,e,t){if(n||(n=new Cn([],{})),0===n.segments.length&&n.hasChildren())return vl(n,e,t);const i=function nv(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],u=t[i];if(yo(u))break;const h=`${u}`,m=i<t.length-1?t[i+1]:null;if(r>0&&void 0===h)break;if(h&&m&&"object"==typeof m&&void 0===m.outlets){if(!iv(h,m,o))return s;i+=2}else{if(!iv(h,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Cn(n.segments.slice(0,i.pathIndex),{});return s.children[Fn]=new Cn(n.segments.slice(i.pathIndex),n.children),vl(s,0,r)}return i.match&&0===r.length?new Cn(n.segments,{}):i.match&&!n.hasChildren()?Am(n,e,t):i.match?vl(n,0,r):Am(n,e,t)}function vl(n,e,t){if(0===t.length)return new Cn(n.segments,{});{const i=function Mh(n){return yo(n[0])?n[0].outlets:{[Fn]:n}}(t),r={};if(!i[Fn]&&n.children[Fn]&&1===n.numberOfChildren&&0===n.children[Fn].segments.length){const s=vl(n.children[Fn],e,t);return new Cn(n.segments,s.children)}return D(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=ru(n.children[o],e,s))}),D(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new Cn(n.segments,r)}}function Am(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(yo(s)){const h=Mm(s.outlets);return new Cn(i,h)}if(0===r&&is(t[0])){i.push(new Yi(n.segments[e].path,RE(t[0]))),r++;continue}const o=yo(s)?s.outlets[Fn]:`${s}`,u=r<t.length-1?t[r+1]:null;o&&u&&is(u)?(i.push(new Yi(o,RE(u))),r+=2):(i.push(new Yi(o,{})),r++)}return new Cn(i,{})}function Mm(n){const e={};return D(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=Am(new Cn([],{}),0,t))}),e}function RE(n){const e={};return D(n,(t,i)=>e[i]=`${t}`),e}function iv(n,e,t){return n==t.path&&Yo(e,t.parameters)}const km="imperative";class bl{constructor(e,t){this.id=e,this.url=t}}class Ag extends bl{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class su extends bl{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rm extends bl{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ad extends bl{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class Om extends bl{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kh extends bl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jD extends bl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GD extends bl{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class aL extends bl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WD extends bl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rv{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class YD{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class OE{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mg{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sv{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PE{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ov{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let qD=(()=>{class n{createUrlTree(t,i,r,s,o,u){return Ri(t||i.root,r,s,o,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),ZD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(e){return qD.\u0275fac(e)},providedIn:"root"}),n})();class FE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=av(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=av(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ha(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Ha(e,this._root).map(t=>t.value)}}function av(n,e){if(n===e.value)return e;for(const t of e.children){const i=av(n,t);if(i)return i}return null}function Ha(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Ha(n,t);if(i.length)return i.unshift(e),i}return[]}class Mo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Rh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class NE extends FE{constructor(e,t){super(e),this.snapshot=t,lv(this,e)}toString(){return this.snapshot.toString()}}function BE(n,e){const t=function XD(n,e){const o=new kg([],{},{},"",{},Fn,e,null,n.root,-1,{});return new VE("",new Mo(o,[]))}(n,e),i=new As([new Yi("",{})]),r=new As({}),s=new As({}),o=new As({}),u=new As(""),h=new za(i,r,o,u,s,Fn,e,t.root);return h.snapshot=t.root,new NE(new Mo(h,[]),t)}class za{constructor(e,t,i,r,s,o,u,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=u,this.title=this.data?.pipe((0,pn.U)(m=>m[gl]))??mn(void 0),this._futureSnapshot=h}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pn.U)(e=>Wo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pn.U)(e=>Wo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function UE(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function $E(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class kg{get title(){return this.data?.[gl]}constructor(e,t,i,r,s,o,u,h,m,g,y){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=u,this.routeConfig=h,this._urlSegment=m,this._lastPathIndex=g,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class VE extends FE{constructor(e,t){super(t),this.url=e,lv(this,t)}toString(){return HE(this._root)}}function lv(n,e){e.value._routerState=n,e.children.forEach(t=>lv(n,t))}function HE(n){const e=n.children.length>0?` { ${n.children.map(HE).join(", ")} } `:"";return`${n.value}${e}`}function Oh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Yo(e.params,t.params)||n.params.next(t.params),function Th(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Yo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ja(n,e){const t=Yo(n.params,e.params)&&function vs(n,e){return gr(n,e)&&n.every((t,i)=>Yo(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ja(n.parent,e.parent))}function Ph(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function zE(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Ph(n,i,r);return Ph(n,i)})}(n,e,t);return new Mo(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(u=>Ph(n,u)),o}}const i=function jE(n){return new za(new As(n.url),new As(n.params),new As(n.queryParams),new As(n.fragment),new As(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Ph(n,s));return new Mo(i,r)}}const GE="ngNavigationCancelingError";function QD(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=qe(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=JD(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function JD(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[GE]=!0,i.cancellationCode=e,t&&(i.url=t),i}function Rg(n){return Og(n)&&qe(n.url)}function Og(n){return n&&n[GE]}class lL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Lh,this.attachRef=null}}let Lh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new lL,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lm=!1;let Pg=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Fn,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.parentContexts=(0,a.f3M)(Lh),this.location=(0,a.f3M)(a.s_b),this.changeDetector=(0,a.f3M)(a.sBO),this.environmentInjector=(0,a.f3M)(a.lqb)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,Lm);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,Lm);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,Lm);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new a.vHH(4013,Lm);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,h=new eA(t,u,r.injector);if(i&&function tA(n){return!!n.resolveComponentFactory}(i)){const m=i.resolveComponentFactory(o);this.activated=r.createComponent(m,r.length,h)}else this.activated=r.createComponent(o,{index:r.length,injector:h,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[a.TTD]}),n})();class eA{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===za?this.route:e===Lh?this.childContexts:this.parent.get(e,t)}}let cv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:1,vars:0,template:function(t,i){1&t&&a._UZ(0,"router-outlet")},dependencies:[Pg],encapsulation:2}),n})();function uv(n,e){return n.providers&&!n._injector&&(n._injector=(0,a.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Lg(n){const e=n.children&&n.children.map(Lg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Fn&&(t.component=cv),t}function da(n){return n.outlet||Fn}function YE(n,e){const t=n.filter(i=>da(i)===e);return t.push(...n.filter(i=>da(i)!==e)),t}function Fm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class qE{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Oh(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Rh(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),D(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Rh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),u=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Rh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Rh(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new PE(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Mg(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(Oh(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(u.contexts),o.attachRef=u.componentRef,o.route=u.route.value,o.outlet&&o.outlet.attach(u.componentRef,u.route.value),Oh(u.route.value),this.activateChildRoutes(e,null,o.children)}else{const u=Fm(r.snapshot),h=u?.get(a._Vd)??null;o.attachRef=null,o.route=r,o.resolver=h,o.injector=u,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class oA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fv{constructor(e,t){this.component=e,this.route=t}}function Nm(n,e,t){const i=n._root;return Fh(i,e?e._root:null,t,[i.value])}function cd(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||(0,a.Z0I)(n)?e.get(n):n:i}function Fh(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Rh(e);return n.children.forEach(o=>{(function KE(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,u=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const h=function uL(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gr(n.url,e.url)||!Yo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ja(n,e)||!Yo(n.queryParams,e.queryParams);default:return!ja(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);h?r.canActivateChecks.push(new oA(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Fh(n,e,s.component?u?u.children:null:t,i,r),h&&u&&u.outlet&&u.outlet.isActivated&&r.canDeactivateChecks.push(new fv(u.outlet.component,o))}else o&&Bm(e,u,r),r.canActivateChecks.push(new oA(i)),Fh(n,null,s.component?u?u.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),D(s,(o,u)=>Bm(o,t.getContext(u),r)),r}function Bm(n,e,t){const i=Rh(n),r=n.value;D(i,(s,o)=>{Bm(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new fv(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Nh(n){return"function"==typeof n}function lc(n){return n instanceof Bs||"EmptyError"===n?.name}const Fg=Symbol("INITIAL_VALUE");function ou(){return nr(n=>nd(n.map(e=>e.pipe(Mr(1),ks(Fg)))).pipe((0,pn.U)(e=>{for(const t of e)if(!0!==t){if(t===Fg)return Fg;if(!1===t||t instanceof ni)return t}return!0}),Di(e=>e!==Fg),Mr(1)))}function bv(n){return(0,ic.z)((0,ur.b)(e=>{if(qe(e))throw QD(0,e)}),(0,pn.U)(e=>!0===e))}const wv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JE(n,e,t,i,r){const s=Ev(n,e,t);return s.matched?function Bh(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?mn(r.map(o=>{const u=cd(o,n);return A(function _v(n){return n&&Nh(n.canMatch)}(u)?u.canMatch(e,t):n.runInContext(()=>u(e,t)))})).pipe(ou(),bv()):mn(!0)}(i=uv(e,i),e,t).pipe((0,pn.U)(o=>!0===o?s:{...wv})):mn(s)}function Ev(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...wv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||ua)(t,n,e);if(!r)return{...wv};const s={};D(r.posParams,(u,h)=>{s[h]=u.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Uh(n,e,t,i){if(t.length>0&&function fA(n,e,t){return t.some(i=>xv(n,e,i)&&da(i)!==Fn)}(n,t,i)){const s=new Cn(e,function ex(n,e,t,i){const r={};r[Fn]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&da(s)!==Fn){const o=new Cn([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[da(s)]=o}return r}(n,e,i,new Cn(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function tx(n,e,t){return t.some(i=>xv(n,e,i))}(n,t,i)){const s=new Cn(n.segments,function hA(n,e,t,i,r){const s={};for(const o of i)if(xv(n,t,o)&&!r[da(o)]){const u=new Cn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,s[da(o)]=u}return{...r,...s}}(n,e,t,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new Cn(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function xv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function nx(n,e,t,i){return!!(da(n)===i||i!==Fn&&xv(e,t,n))&&("**"===n.path||Ev(e,n,t).matched)}function $h(n,e,t){return 0===e.length&&!n.children[t]}const Ug=!1;class cc{constructor(e){this.segmentGroup=e||null}}class Vh{constructor(e){this.urlTree=e}}function Um(n){return ml(new cc(n))}function Tv(n){return ml(new Vh(n))}class ix{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=Uh(this.urlTree.root,[],[],this.config).segmentGroup,t=new Cn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Fn).pipe((0,pn.U)(s=>this.createUrlTree(ne(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(go(s=>{if(s instanceof Vh)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof cc?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Fn).pipe((0,pn.U)(r=>this.createUrlTree(ne(r),e.queryParams,e.fragment))).pipe(go(r=>{throw r instanceof cc?this.noMatchError(r):r}))}noMatchError(e){return new a.vHH(4002,Ug)}createUrlTree(e,t,i){const r=V(e);return new ni(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,pn.U)(s=>new Cn([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,Hi.D)(r).pipe(Go(s=>{const o=i.children[s],u=YE(t,s);return this.expandSegmentGroup(e,u,o,s).pipe((0,pn.U)(h=>({segment:h,outlet:s})))}),Xc((s,o)=>(s[o.outlet]=o.segment,s),{}),Jc())}expandSegment(e,t,i,r,s,o){return(0,Hi.D)(i).pipe(Go(u=>this.expandSegmentAgainstRoute(e,t,i,u,r,s,o).pipe(go(m=>{if(m instanceof cc)return mn(null);throw m}))),po(u=>!!u),go((u,h)=>{if(lc(u))return $h(t,r,s)?mn(new Cn([],{})):Um(t);throw u}))}expandSegmentAgainstRoute(e,t,i,r,s,o,u){return nx(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):u&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):Um(t):Um(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Tv(s):this.lineralizeSegments(i,s).pipe((0,kr.z)(o=>{const u=new Cn(o,{});return this.expandSegment(e,u,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:u,consumedSegments:h,remainingSegments:m,positionalParamSegments:g}=Ev(t,r,s);if(!u)return Um(t);const y=this.applyRedirectCommands(h,r.redirectTo,g);return r.redirectTo.startsWith("/")?Tv(y):this.lineralizeSegments(r,y).pipe((0,kr.z)(E=>this.expandSegment(e,t,i,E.concat(m),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=uv(i,e),i.loadChildren?(i._loadedRoutes?mn({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe((0,pn.U)(u=>(i._loadedRoutes=u.routes,i._loadedInjector=u.injector,new Cn(r,{})))):mn(new Cn(r,{}))):JE(t,i,r,e).pipe(nr(({matched:o,consumedSegments:u,remainingSegments:h})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe((0,kr.z)(g=>{const y=g.injector??e,E=g.routes,{segmentGroup:x,slicedSegments:I}=Uh(t,u,h,E),k=new Cn(x.segments,x.children);if(0===I.length&&k.hasChildren())return this.expandChildren(y,E,k).pipe((0,pn.U)(ee=>new Cn(u,ee)));if(0===E.length&&0===I.length)return mn(new Cn(u,{}));const P=da(i)===s;return this.expandSegment(y,k,E,I,P?Fn:s,!0).pipe((0,pn.U)(ae=>new Cn(u.concat(ae.segments),ae.children)))})):Um(t)))}getChildConfig(e,t,i){return t.children?mn({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?mn({routes:t._loadedRoutes,injector:t._loadedInjector}):function dA(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?mn(!0):mn(r.map(o=>{const u=cd(o,n);return A(function pv(n){return n&&Nh(n.canLoad)}(u)?u.canLoad(e,t):n.runInContext(()=>u(e,t)))})).pipe(ou(),bv())}(e,t,i).pipe((0,kr.z)(r=>r?this.configLoader.loadChildren(e,t).pipe((0,ur.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function pA(n){return ml(JD(Ug,3))}())):mn({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return mn(i);if(r.numberOfChildren>1||!r.children[Fn])return e.redirectTo,ml(new a.vHH(4e3,Ug));r=r.children[Fn]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new ni(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return D(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const u=r.substring(1);i[s]=t[u]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return D(t.children,(u,h)=>{o[h]=this.createSegmentGroup(e,u,i,r)}),new Cn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new a.vHH(4001,Ug);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class Cv{}class $m{constructor(e,t,i,r,s,o,u){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=u}recognize(){const e=Uh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Fn).pipe((0,pn.U)(t=>{if(null===t)return null;const i=new kg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Fn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Mo(i,t),s=new VE(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=UE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return(0,Hi.D)(Object.keys(i.children)).pipe(Go(r=>{const s=i.children[r],o=YE(t,r);return this.processSegmentGroup(e,o,s,r)}),Xc((r,s)=>r&&s?(r.push(...s),r):null),function xh(n,e=!1){return(0,xr.e)((t,i)=>{let r=0;t.subscribe((0,pr.x)(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),rc(null),Jc(),(0,pn.U)(r=>{if(null===r)return null;const s=sx(r);return function yA(n){n.sort((e,t)=>e.value.outlet===Fn?-1:t.value.outlet===Fn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return(0,Hi.D)(t).pipe(Go(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),po(o=>!!o),go(o=>{if(lc(o))return $h(i,r,s)?mn([]):mn(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!nx(t,i,r,s))return mn(null);let o;if("**"===t.path){const u=r.length>0?sd(r).parameters:{},h=lx(i)+r.length;o=mn({snapshot:new kg(r,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wl(t),da(t),t.component??t._loadedComponent??null,t,ax(i),h,cx(t)),consumedSegments:[],remainingSegments:[]})}else o=JE(i,t,r,e).pipe((0,pn.U)(({matched:u,consumedSegments:h,remainingSegments:m,parameters:g})=>{if(!u)return null;const y=lx(i)+h.length;return{snapshot:new kg(h,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wl(t),da(t),t.component??t._loadedComponent??null,t,ax(i),y,cx(t)),consumedSegments:h,remainingSegments:m}}));return o.pipe(nr(u=>{if(null===u)return mn(null);const{snapshot:h,consumedSegments:m,remainingSegments:g}=u;e=t._injector??e;const y=t._loadedInjector??e,E=function vA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:x,slicedSegments:I}=Uh(i,m,g,E.filter(P=>void 0===P.redirectTo));if(0===I.length&&x.hasChildren())return this.processChildren(y,E,x).pipe((0,pn.U)(P=>null===P?null:[new Mo(h,P)]));if(0===E.length&&0===I.length)return mn([new Mo(h,[])]);const k=da(t)===s;return this.processSegment(y,E,x,I,k?Fn:s).pipe((0,pn.U)(P=>null===P?null:[new Mo(h,P)]))}))}}function bA(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function sx(n){const e=[],t=new Set;for(const i of n){if(!bA(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=sx(i.children);e.push(new Mo(i.value,r))}return e.filter(i=>!t.has(i))}function ax(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function lx(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function wl(n){return n.data||{}}function cx(n){return n.resolve||{}}function Sv(n){return"string"==typeof n.title||null===n.title}function Dv(n){return nr(e=>{const t=n(e);return t?(0,Hi.D)(t).pipe((0,pn.U)(()=>e)):mn(e)})}const Hh=new a.OlP("ROUTES");let Mv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,a.f3M)(a.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return mn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=A(t.loadComponent()).pipe((0,pn.U)(hx),(0,ur.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),pl(()=>{this.componentLoaders.delete(t)})),r=new Eh(i,()=>new Ln.x).pipe(Zc());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return mn({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,pn.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(i);let h,m,g=!1;Array.isArray(u)?m=u:(h=u.create(t).injector,m=Ch(h.get(Hh,[],a.XFs.Self|a.XFs.Optional)));return{routes:m.map(Lg),injector:h}}),pl(()=>{this.childrenLoaders.delete(i)})),o=new Eh(s,()=>new Ln.x).pipe(Zc());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return A(t()).pipe((0,pn.U)(hx),(0,kr.z)(i=>i instanceof a.YKP||Array.isArray(i)?mn(i):(0,Hi.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hx(n){return function Ga(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Vg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ln.x,this.configLoader=(0,a.f3M)(Mv),this.environmentInjector=(0,a.f3M)(a.lqb),this.urlSerializer=(0,a.f3M)(Tr),this.rootContexts=(0,a.f3M)(Lh),this.navigationId=0,this.afterPreactivation=()=>mn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new YD(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new rv(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new As({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:km,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Di(i=>0!==i.id),(0,pn.U)(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),nr(i=>{let r=!1,s=!1;return mn(i).pipe((0,ur.b)(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),nr(o=>{const u=t.browserUrlTree.toString(),h=!t.navigated||o.extractedUrl.toString()!==u||u!==t.currentUrlTree.toString();if(!h&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new ad(o.id,t.serializeUrl(i.rawUrl),g,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),$s.E}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return fx(o.source)&&(t.browserUrlTree=o.extractedUrl),mn(o).pipe(nr(g=>{const y=this.transitions?.getValue();return this.events.next(new Ag(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?$s.E:Promise.resolve(g)}),function rx(n,e,t,i){return nr(r=>function gA(n,e,t,i,r){return new ix(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,pn.U)(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,ur.b)(g=>{this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects},i.urlAfterRedirects=g.urlAfterRedirects}),function wA(n,e,t,i,r){return(0,kr.z)(s=>function Iv(n,e,t,i,r,s,o="emptyOnly"){return new $m(n,e,t,i,r,o,s).recognize().pipe(nr(u=>null===u?function _A(n){return new zr.y(e=>e.error(n))}(new Cv):mn(u)))}(n,e,t,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe((0,pn.U)(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,ur.b)(g=>{if(i.targetSnapshot=g.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!g.extras.skipLocationChange){const E=t.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl);t.setBrowserUrl(E,g)}t.browserUrlTree=g.urlAfterRedirects}const y=new kh(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:g,extractedUrl:y,source:E,restoredState:x,extras:I}=o,k=new Ag(g,this.urlSerializer.serialize(y),E,x);this.events.next(k);const P=BE(y,this.rootComponentType).snapshot;return mn(i={...o,targetSnapshot:P,urlAfterRedirects:y,extras:{...I,skipLocationChange:!1,replaceUrl:!1}})}{const g="";return this.events.next(new ad(o.id,t.serializeUrl(i.extractedUrl),g,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),$s.E}}),(0,ur.b)(o=>{const u=new jD(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(u)}),(0,pn.U)(o=>i={...o,guards:Nm(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function Ng(n,e){return(0,kr.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?mn({...t,guardsResult:!0}):function cA(n,e,t,i){return(0,Hi.D)(n).pipe((0,kr.z)(r=>function uA(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return mn(!0);const o=s.map(u=>{const h=Fm(e)??r,m=cd(u,h);return A(function aA(n){return n&&Nh(n.canDeactivate)}(m)?m.canDeactivate(n,e,t,i):h.runInContext(()=>m(n,e,t,i))).pipe(po())});return mn(o).pipe(ou())}(r.component,r.route,t,e,i)),po(r=>!0!==r,!0))}(o,i,r,n).pipe((0,kr.z)(u=>u&&function ZE(n){return"boolean"==typeof n}(u)?function yv(n,e,t,i){return(0,Hi.D)(e).pipe(Go(r=>nc(function ud(n,e){return null!==n&&e&&e(new OE(n)),mn(!0)}(r.route.parent,i),function Bg(n,e){return null!==n&&e&&e(new sv(n)),mn(!0)}(r.route,i),function vv(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function mv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Kc(()=>mn(o.guards.map(h=>{const m=Fm(o.node)??t,g=cd(h,m);return A(function gv(n){return n&&Nh(n.canActivateChild)}(g)?g.canActivateChild(i,n):m.runInContext(()=>g(i,n))).pipe(po())})).pipe(ou())));return mn(s).pipe(ou())}(n,r.path,t),function QE(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return mn(!0);const r=i.map(s=>Kc(()=>{const o=Fm(e)??t,u=cd(s,o);return A(function dL(n){return n&&Nh(n.canActivate)}(u)?u.canActivate(e,n):o.runInContext(()=>u(e,n))).pipe(po())}));return mn(r).pipe(ou())}(n,r.route,t))),po(r=>!0!==r,!0))}(i,s,n,e):mn(u)),(0,pn.U)(u=>({...t,guardsResult:u})))})}(this.environmentInjector,o=>this.events.next(o)),(0,ur.b)(o=>{if(i.guardsResult=o.guardsResult,qe(o.guardsResult))throw QD(0,o.guardsResult);const u=new GD(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(u)}),Di(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),Dv(o=>{if(o.guards.canActivateChecks.length)return mn(o).pipe((0,ur.b)(u=>{const h=new aL(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),nr(u=>{let h=!1;return mn(u).pipe(function hL(n,e){return(0,kr.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return mn(t);let s=0;return(0,Hi.D)(r).pipe(Go(o=>function fL(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!Sv(r)&&(s[gl]=r.title),function ux(n,e,t,i){const r=function mL(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return mn({});const s={};return(0,Hi.D)(r).pipe((0,kr.z)(o=>function dx(n,e,t,i){const r=Fm(e)??i,s=cd(n,r);return A(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(po(),(0,ur.b)(u=>{s[o]=u}))),Qc(1),Ao(s),go(o=>lc(o)?$s.E:ml(o)))}(s,n,e,i).pipe((0,pn.U)(o=>(n._resolvedData=o,n.data=UE(n,t).resolve,r&&Sv(r)&&(n.data[gl]=r.title),null)))}(o.route,i,n,e)),(0,ur.b)(()=>s++),Qc(1),(0,kr.z)(o=>s===r.length?mn(t):$s.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,ur.b)({next:()=>h=!0,complete:()=>{h||(t.restoreHistory(u),this.cancelNavigationTransition(u,"",2))}}))}),(0,ur.b)(u=>{const h=new WD(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),Dv(o=>{const u=h=>{const m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe((0,ur.b)(g=>{h.component=g}),(0,pn.U)(()=>{})));for(const g of h.children)m.push(...u(g));return m};return nd(u(o.targetSnapshot.root)).pipe(rc(),Mr(1))}),Dv(()=>this.afterPreactivation()),(0,pn.U)(o=>{const u=function Pm(n,e,t){const i=Ph(n,e._root,t?t._root:void 0);return new NE(i,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:u}}),(0,ur.b)(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>(0,pn.U)(i=>(new qE(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),Mr(1),(0,ur.b)({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new su(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),pl(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),go(o=>{if(s=!0,Og(o)){Rg(o)||(t.navigated=!0,t.restoreHistory(i,!0));const u=new Rm(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(u),Rg(o)){const h=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),m={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||fx(i.source)};t.scheduleNavigation(h,km,null,m,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const u=new Om(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(u);try{i.resolve(t.errorHandler(o))}catch(h){i.reject(h)}}return $s.E}))}))}cancelNavigationTransition(t,i,r){const s=new Rm(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fx(n){return n!==km}let mx=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Fn);return i}getResolvedTitleForRoute(t){return t.data[gl]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(EA)},providedIn:"root"}),n})(),EA=(()=>{class n extends mx{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Vc))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),px=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(TA)},providedIn:"root"}),n})();class xA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let TA=(()=>{class n extends xA{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(n)))(i||n)}}(),n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oi=new a.OlP("",{providedIn:"root",factory:()=>({})});let gx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return(0,a.f3M)(_x)},providedIn:"root"}),n})(),_x=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function IA(n){throw n}function SA(n,e,t){return e.parse("/")}const yx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let jr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,a.f3M)(a.c2e),this.isNgZoneEnabled=!1,this.options=(0,a.f3M)(oi,{optional:!0})||{},this.errorHandler=this.options.errorHandler||IA,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||SA,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,a.f3M)(gx),this.routeReuseStrategy=(0,a.f3M)(px),this.urlCreationStrategy=(0,a.f3M)(ZD),this.titleStrategy=(0,a.f3M)(mx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ch((0,a.f3M)(Hh,{optional:!0})??[]),this.navigationTransitions=(0,a.f3M)(Vg),this.urlSerializer=(0,a.f3M)(Tr),this.location=(0,a.f3M)(Be),this.isNgZoneEnabled=(0,a.f3M)(a.R0b)instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ni,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=BE(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),km,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const h={...r};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(s.state=h)}const u=this.parseUrl(t);this.scheduleNavigation(u,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Lg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:u,preserveFragment:h}=i,m=h?this.currentUrlTree.fragment:o;let g=null;switch(u){case"merge":g={...this.currentUrlTree.queryParams,...s};break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}return null!==g&&(g=this.removeEmptyProps(g)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,g,m??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=qe(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,km,null,i)}navigate(t,i={skipLocationChange:!1}){return function AA(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new a.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...yx}:!1===i?{...DA}:i,qe(t))return Pe(this.currentUrlTree,t,r);const s=this.parseUrl(t);return Pe(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let u,h,m,g;return o?(u=o.resolve,h=o.reject,m=o.promise):m=new Promise((y,E)=>{u=y,h=E}),g="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:g,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:u,reject:h,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(y=>Promise.reject(y))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class kv{}let Rv=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Di(t=>t instanceof su),Go(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,a.MMx)(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,u=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(u,s.children??s._loadedRoutes))}return(0,Hi.D)(r).pipe((0,qc.J)())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):mn(null);const s=r.pipe((0,kr.z)(o=>null===o?mn(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(i.loadComponent&&!i._loadedComponent){const o=this.loader.loadComponent(i);return(0,Hi.D)([s,o]).pipe((0,qc.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(jr),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(kv),a.LFG(Mv))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jm=new a.OlP("");let bx=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ag?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof su&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ov&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ov(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){a.$Z()},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();var ha=(()=>((ha=ha||{})[ha.COMPLETE=0]="COMPLETE",ha[ha.FAILED=1]="FAILED",ha[ha.REDIRECTING=2]="REDIRECTING",ha))();const Gm=!1;function dd(n,e){return{\u0275kind:n,\u0275providers:e}}const Pv=new a.OlP("",{providedIn:"root",factory:()=>!1});function Wm(){const n=(0,a.f3M)(a.zs3);return e=>{const t=n.get(a.z2F);if(e!==t.components[0])return;const i=n.get(jr),r=n.get(wx);1===n.get(zg)&&i.initialNavigation(),n.get(Ex,null,a.XFs.Optional)?.setUpPreloading(),n.get(jm,null,a.XFs.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const wx=new a.OlP(Gm?"bootstrap done indicator":"",{factory:()=>new Ln.x}),zg=new a.OlP(Gm?"initial navigation":"",{providedIn:"root",factory:()=>1});function OA(){let n=[];return n=Gm?[{provide:a.Xts,multi:!0,useFactory:()=>{const e=(0,a.f3M)(jr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function LE(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],dd(1,n)}const Ex=new a.OlP(Gm?"router preloader":"");function PA(n){return dd(0,[{provide:Ex,useExisting:Rv},{provide:kv,useExisting:n}])}const Gh=!1,NA=new a.OlP(Gh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Lv=[Be,{provide:Tr,useClass:qo},jr,Lh,{provide:za,useFactory:function Ov(n){return n.routerState.root},deps:[jr]},Mv,Gh?{provide:Pv,useValue:!0}:[]];function BA(){return new a.PXZ("Router",jr)}let UA=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[Lv,Gh&&i?.enableTracing?OA().\u0275providers:[],{provide:Hh,multi:!0,useValue:t},{provide:NA,useFactory:Cx,deps:[[jr,new a.FiY,new a.tp0]]},{provide:oi,useValue:i||{}},i?.useHash?{provide:Ue,useClass:ue}:{provide:Ue,useClass:le},{provide:jm,useFactory:()=>{const n=(0,a.f3M)(Pu),e=(0,a.f3M)(a.R0b),t=(0,a.f3M)(oi),i=(0,a.f3M)(Vg),r=(0,a.f3M)(Tr);return t.scrollOffset&&n.setOffset(t.scrollOffset),new bx(r,i,n,e,t)}},i?.preloadingStrategy?PA(i.preloadingStrategy).\u0275providers:[],{provide:a.PXZ,multi:!0,useFactory:BA},i?.initialNavigation?VA(i):[],[{provide:Ix,useFactory:Wm},{provide:a.tb,multi:!0,useExisting:Ix}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Hh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(NA,8))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[cv]}),n})();function Cx(n){if(Gh&&n)throw new a.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function VA(n){return["disabled"===n.initialNavigation?dd(3,[{provide:a.ip1,multi:!0,useFactory:()=>{const e=(0,a.f3M)(jr);return()=>{e.setUpLocationChangeListener()}}},{provide:zg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?dd(2,[{provide:zg,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:e=>{const t=e.get(Me,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(jr),s=e.get(wx);(function _L(n,e){n.events.pipe(Di(t=>t instanceof su||t instanceof Rm||t instanceof Om||t instanceof ad),(0,pn.U)(t=>t instanceof su||t instanceof ad?ha.COMPLETE:t instanceof Rm&&(0===t.code||1===t.code)?ha.REDIRECTING:ha.FAILED),Di(t=>t!==ha.REDIRECTING),Mr(1)).subscribe(()=>{e()})})(r,()=>{i(!0)}),e.get(Vg).afterPreactivation=()=>(i(!0),s.closed?mn(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const Ix=new a.OlP(Gh?"Router Initializer":"");var Gg=F(1389),ui=F(2090),Gr=F(6881),Wa=F(1877),hd=F(4859),El=F(6451),Yh=F(5363),Fv=F(6063);class Sx extends Ln.x{constructor(e=1/0,t=1/0,i=Fv.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=t.now();let u=0;for(let h=1;h<i.length&&i[h]<=o;h+=2)u=h;u&&i.splice(0,u+1)}}}var Wg=F(3099);function Dx(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,(0,Wg.B)({connector:()=>new Sx(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Ax(n,e){return(0,Do.m)(e)?nr(()=>n,e):nr(()=>n)}var Yg=F(9468),pi=F(4976),fa=F(2011),ma=F(259);class au{constructor(e){return e}}class qm{constructor(){return(0,ma.C6)()}}const Nv=new a.OlP("angularfire2._apps"),wL={provide:au,useFactory:function HA(n){return n&&1===n.length?n[0]:new au((0,ma.Mq)())},deps:[[new a.FiY,Nv]]},Bv={provide:qm,deps:[[new a.FiY,Nv]]};function Mx(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new au(i)}}let zA=(()=>{class n{constructor(t){(0,ma.KN)("angularfire",pi.q4.full,"core"),(0,ma.KN)("angularfire",pi.q4.full,"app"),(0,ma.KN)("angular",a.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.Lbi))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[wL,Bv]}),n})();function jA(n,...e){return{ngModule:zA,providers:[{provide:Nv,useFactory:Mx(n),multi:!0,deps:[a.R0b,a.zs3,pi.HU,...e]}]}}const kx=(0,pi.u3)(ma.Mq,!0),GA=(0,pi.u3)(ma.ZF,!0);var Ox,Px,Fx,Uv,Nx,ot=F(5861);const Km=new Map,$x={activated:!1,tokenObservers:[]},WA={initialized:!1,enabled:!1};function _r(n){return Km.get(n)||Object.assign({},$x)}function fd(){return WA}const Vx="https://content-firebaseappcheck.googleapis.com/v1",Hx="exchangeDebugToken",Vv={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class jx{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ot.Z)(function*(){t.stop();try{t.pending=new ui.BH,yield function Hv(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ui.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fs=new ui.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function pd(n){if(!_r(n).activated)throw fs.create("use-before-activation",{appName:n.name})}function Xm(n,e){return(Ox=Ox||(0,ot.Z)(function*({url:t,body:i},r){const s={"Content-Type":"application/json"},o=r.getImmediate({optional:!0});if(o){const x=yield o.getHeartbeatsHeader();x&&(s["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(i),headers:s};let h,m;try{h=yield fetch(t,u)}catch(x){throw fs.create("fetch-network-error",{originalErrorMessage:x?.message})}if(200!==h.status)throw fs.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(x){throw fs.create("fetch-parse-error",{originalErrorMessage:x?.message})}const g=m.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw fs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const y=1e3*Number(g[1]),E=Date.now();return{token:m.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}})).apply(this,arguments)}function qh(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${Vx}/projects/${t}/apps/${i}:${Hx}?key=${r}`,body:{debug_token:e}}}const KA="firebase-app-check-database",SL=1,Qm="firebase-app-check-store";let Zg=null;function Xg(n,e){return(Px=Px||(0,ot.Z)(function*(t,i){const s=(yield function Wx(){return Zg||(Zg=new Promise((n,e)=>{try{const t=indexedDB.open(KA,SL);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(fs.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Qm,{keyPath:"compositeKey"})}}catch(t){e(fs.create("storage-open",{originalErrorMessage:t?.message}))}}),Zg)}()).transaction(Qm,"readwrite"),u=s.objectStore(Qm).put({compositeKey:t,value:i});return new Promise((h,m)=>{u.onsuccess=g=>{h()},s.onerror=g=>{var y;m(fs.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Jm=new Wa.Yd("@firebase/app-check");function jv(n,e){return(0,ui.hl)()?function XA(n,e){return Xg(function Qg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Jm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Gv(){return fd().enabled}function Wv(){return(Fx=Fx||(0,ot.Z)(function*(){const n=fd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Kx={error:"UNKNOWN_ERROR"};function Zx(n){return ui.US.encodeString(JSON.stringify(n),!1)}function Jg(n){return(Uv=Uv||(0,ot.Z)(function*(e,t=!1){const i=e.app;pd(i);const r=_r(i);let o,s=r.token;if(s&&!lu(s)&&(r.token=void 0,s=void 0),!s){const m=yield r.cachedTokenPromise;m&&(lu(m)?s=m:yield jv(i,void 0))}if(!t&&s&&lu(s))return{token:s.token};let h,u=!1;if(Gv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Xm(qh(i,yield Wv()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const m=yield r.exchangeTokenPromise;return yield jv(i,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),s=yield _r(i).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Jm.warn(m.message):Jm.error(m),o=m}return s?o?h=lu(s)?{token:s.token,internalError:o}:Jx(o):(h={token:s.token},r.token=s,yield jv(i,s)):h=Jx(o),u&&function Qx(n,e){const t=_r(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(i,h),h})).apply(this,arguments)}function Xx(n,e){const t=_r(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function ep(n){const{app:e}=n,t=_r(e);let i=t.tokenRefresher;i||(i=function r1(n){const{app:e}=n;return new jx((0,ot.Z)(function*(){let i;if(i=_r(e).token?yield Jg(n,!0):yield Jg(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=_r(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},Vv.RETRIAL_MIN_WAIT,Vv.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function lu(n){return n.expireTimeMillis-Date.now()>0}function Jx(n){return{token:Zx(Kx),error:n}}class xl{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=_r(this.app);for(const t of e)Xx(this.app,t.next);return Promise.resolve()}}const Qv="app-check-internal";!function u1(){(0,Gr._registerComponent)(new hd.wA("app-check",n=>function tp(n,e){return new xl(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Qv).initialize()})),(0,Gr._registerComponent)(new hd.wA(Qv,n=>function Qs(n){return{getToken:e=>Jg(n,e),getLimitedUseToken:()=>function n1(n){return(Nx=Nx||(0,ot.Z)(function*(e){const t=e.app;pd(t);const{provider:i}=_r(t);if(Gv()){const r=yield Wv(),{token:s}=yield Xm(qh(t,r),e.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield i.getToken();return{token:r}}})).apply(this,arguments)}(n),addTokenListener:e=>function e_(n,e,t,i){const{app:r}=n,s=_r(r);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:i,type:e}],s.token&&lu(s.token)){const u=s.token;Promise.resolve().then(()=>{t({token:u.token}),ep(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ep(n))}(n,"INTERNAL",e),removeTokenListener:e=>Xx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Gr.registerVersion)("@firebase/app-check","0.8.0")}();class hc{constructor(){return(0,pi.vb)("app-check")}}typeof window<"u"&&window;var rT=F(9260);const o0=new a.OlP("angularfire2.auth.use-emulator"),a0=new a.OlP("angularfire2.auth.settings"),oT=new a.OlP("angularfire2.auth.tenant-id"),l0=new a.OlP("angularfire2.auth.langugage-code"),c0=new a.OlP("angularfire2.auth.use-device-language"),n_=new a.OlP("angularfire.auth.persistence"),i_=(n,e,t,i,r,s,o,u)=>(0,fa.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const h=e.runOutsideAngular(()=>n.auth());if(t&&h.useEmulator(...t),i&&(h.tenantId=i),h.languageCode=r,s&&h.useDeviceLanguage(),o)for(const[m,g]of Object.entries(o))h.settings[m]=g;return u&&h.setPersistence(u),h},[t,i,r,s,o,u]);let cu=(()=>{class n{constructor(t,i,r,s,o,u,h,m,g,y,E,x){const I=new Ln.x,k=mn(void 0).pipe((0,Yh.Q)(o.outsideAngular),nr(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9568)))),(0,pn.U)(()=>(0,fa.on)(t,s,i)),(0,pn.U)(P=>i_(P,s,u,m,g,y,h,E)),Dx({bufferSize:1,refCount:!1}));if(nm(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mn(null);else{k.pipe(po()).subscribe();const q=k.pipe(nr(ye=>ye.getRedirectResult().then(De=>De,()=>null)),pi.iC,Dx({bufferSize:1,refCount:!1})),ae=k.pipe(nr(ye=>new zr.y(De=>({unsubscribe:s.runOutsideAngular(()=>ye.onAuthStateChanged(dt=>De.next(dt),dt=>De.error(dt),()=>De.complete()))})))),ee=k.pipe(nr(ye=>new zr.y(De=>({unsubscribe:s.runOutsideAngular(()=>ye.onIdTokenChanged(dt=>De.next(dt),dt=>De.error(dt),()=>De.complete()))}))));this.authState=q.pipe(Ax(ae),(0,Yg.R)(o.outsideAngular),(0,Yh.Q)(o.insideAngular)),this.user=q.pipe(Ax(ee),(0,Yg.R)(o.outsideAngular),(0,Yh.Q)(o.insideAngular)),this.idToken=this.user.pipe(nr(ye=>ye?(0,Hi.D)(ye.getIdToken()):mn(null))),this.idTokenResult=this.user.pipe(nr(ye=>ye?(0,Hi.D)(ye.getIdTokenResult()):mn(null))),this.credential=(0,El.T)(q,I,this.authState.pipe(Di(ye=>!ye))).pipe((0,pn.U)(ye=>ye?.user?ye:null),(0,Yg.R)(o.outsideAngular),(0,Yh.Q)(o.insideAngular))}return(0,fa.pX)(this,k,s,{spy:{apply:(P,q,ae)=>{(P.startsWith("signIn")||P.startsWith("createUser"))&&ae.then(ee=>I.next(ee))}}})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(fa.Dh),a.LFG(fa.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(pi.HU),a.LFG(o0,8),a.LFG(a0,8),a.LFG(oT,8),a.LFG(l0,8),a.LFG(c0,8),a.LFG(n_,8),a.LFG(hc,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tf=(()=>{var n;class e{constructor(i){this.afAuth=i,this.isLoading=!1}loginWithGoogle(){const i=new Gg.V;this.afAuth.signInWithPopup(i)}logout(){return this.userDataAuth=null,this.afAuth.signOut()}}return(n=e).\u0275fac=function(i){return new(i||n)(a.LFG(cu))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),u0=(()=>{var n;class e{constructor(i){this.auth=i,this.showLoading=!0}ngOnInit(){setTimeout(()=>{this.showLoading=!1},1e3)}}return(n=e).\u0275fac=function(i){return new(i||n)(a.Y36(tf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){1&i&&a._UZ(0,"router-outlet")},dependencies:[Pg]}),e})();function aT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var i,r,s,o,u,d0={exports:{}};i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,d0.exports=u={buildAbsoluteURL:function(h,m,g){if(g=g||{},h=h.trim(),!(m=m.trim())){if(!g.alwaysNormalize)return h;var y=u.parseURL(h);if(!y)throw new Error("Error trying to parse base URL.");return y.path=u.normalizePath(y.path),u.buildURLFromParts(y)}var E=u.parseURL(m);if(!E)throw new Error("Error trying to parse relative URL.");if(E.scheme)return g.alwaysNormalize?(E.path=u.normalizePath(E.path),u.buildURLFromParts(E)):m;var x=u.parseURL(h);if(!x)throw new Error("Error trying to parse base URL.");if(!x.netLoc&&x.path&&"/"!==x.path[0]){var I=r.exec(x.path);x.netLoc=I[1],x.path=I[2]}x.netLoc&&!x.path&&(x.path="/");var k={scheme:x.scheme,netLoc:E.netLoc,path:null,params:E.params,query:E.query,fragment:E.fragment};if(!E.netLoc&&(k.netLoc=x.netLoc,"/"!==E.path[0]))if(E.path){var P=x.path,q=P.substring(0,P.lastIndexOf("/")+1)+E.path;k.path=u.normalizePath(q)}else k.path=x.path,E.params||(k.params=x.params,E.query||(k.query=x.query));return null===k.path&&(k.path=g.alwaysNormalize?u.normalizePath(E.path):E.path),u.buildURLFromParts(k)},parseURL:function(h){var m=i.exec(h);return m?{scheme:m[1]||"",netLoc:m[2]||"",path:m[3]||"",params:m[4]||"",query:m[5]||"",fragment:m[6]||""}:null},normalizePath:function(h){for(h=h.split("").reverse().join("").replace(s,"");h.length!==(h=h.replace(o,"")).length;);return h.split("").reverse().join("")},buildURLFromParts:function(h){return h.scheme+h.netLoc+h.path+h.params+h.query+h.fragment}};var r_=d0.exports;function h0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Vs(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?h0(Object(t),!0).forEach(function(i){uu(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h0(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function uu(n,e,t){return e=function f0(n){var e=function p1(n,e){if("object"!=typeof n||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==typeof e?e:String(e)}(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bs(){return bs=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bs.apply(this,arguments)}const kn=Number.isFinite||function(n){return"number"==typeof n&&isFinite(n)};let U=function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n}({}),Jn=function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n}({}),ht=function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.UNKNOWN="unknown",n}({});const nf=function(){},lT={trace:nf,debug:nf,log:nf,warn:nf,info:nf,error:nf};let ip=lT;const Re=ip,uT=/^(\d+)x(\d+)$/,dT=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Or{constructor(e){"string"==typeof e&&(e=Or.parseAttrList(e));for(const t in e)e.hasOwnProperty(t)&&("X-"===t.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=e[t])}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const i=new Uint8Array(t.length/2);for(let r=0;r<t.length/2;r++)i[r]=parseInt(t.slice(2*r,2*r+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}bool(e){return"YES"===this[e]}decimalResolution(e){const t=uT.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const i={};for(dT.lastIndex=0;null!==(t=dT.exec(e));){let s=t[2];0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1&&(s=s.slice(1,-1)),i[t[1].trim()]=s}return i}}function y1(n){return"SCTE35-OUT"===n||"SCTE35-IN"===n}class m0{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const i=t.attr;for(const r in i)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r]!==i[r]){Re.warn(`DATERANGE tag attribute: "${r}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=r;break}e=bs(new Or({}),i,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const i=new Date(this.attr["END-DATE"]);kn(i.getTime())&&(this._endDate=i)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(kn(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&kn(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class rp{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var zi={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class fT{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[zi.AUDIO]:null,[zi.VIDEO]:null,[zi.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const i=e.split("@",2),r=[];r[0]=1===i.length?t?t.byteRangeEndOffset:0:parseInt(i[1]),r[1]=parseInt(i[0])+r[0],this._byteRange=r}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=r_.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class p0 extends fT{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new rp,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const i=Object.keys(this.levelkeys);if(1===i.length)return this._decryptdata=this.levelkeys[i[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime||!kn(this.programDateTime))return null;const e=kn(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),i=t.length;if(i>1||1===i&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,i,r,s,o=!1){const{elementaryStreams:u}=this,h=u[e];h?(h.startPTS=Math.min(h.startPTS,t),h.endPTS=Math.max(h.endPTS,i),h.startDTS=Math.min(h.startDTS,r),h.endDTS=Math.max(h.endDTS,s)):u[e]={startPTS:t,endPTS:i,startDTS:r,endDTS:s,partial:o}}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[zi.AUDIO]=null,e[zi.VIDEO]=null,e[zi.AUDIOVIDEO]=null}}class mT extends fT{constructor(e,t,i,r,s){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new rp,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}class pT{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&i>0,this.misses=this.updated||this.advanced?Math.floor(.6*e.misses):e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&kn(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function gT(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function _T(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}var Pr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Lr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function _a(n){switch(n){case Lr.FAIRPLAY:return Pr.FAIRPLAY;case Lr.PLAYREADY:return Pr.PLAYREADY;case Lr.WIDEVINE:return Pr.WIDEVINE;case Lr.CLEARKEY:return Pr.CLEARKEY}}var ya_WIDEVINE="edef8ba979d64acea3c827dcd51d21ed";function y0(n){switch(n){case Pr.FAIRPLAY:return Lr.FAIRPLAY;case Pr.PLAYREADY:return Lr.PLAYREADY;case Pr.WIDEVINE:return Lr.WIDEVINE;case Pr.CLEARKEY:return Lr.CLEARKEY}}function v0(n){const{drmSystems:e,widevineLicenseUrl:t}=n,i=e?[Pr.FAIRPLAY,Pr.WIDEVINE,Pr.PLAYREADY,Pr.CLEARKEY].filter(r=>!!e[r]):[];return!i[Pr.WIDEVINE]&&t&&i.push(Pr.WIDEVINE),i}const vT=typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function fc(n,e,t){return Uint8Array.prototype.slice?n.slice(e,t):new Uint8Array(Array.prototype.slice.call(n,e,t))}const bd=(n,e)=>e+10<=n.length&&73===n[e]&&68===n[e+1]&&51===n[e+2]&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,bT=(n,e)=>e+10<=n.length&&51===n[e]&&68===n[e+1]&&73===n[e+2]&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,sp=(n,e)=>{const t=e;let i=0;for(;bd(n,e);)i+=10,i+=s_(n,e+6),bT(n,e+10)&&(i+=10),e+=i;if(i>0)return n.subarray(t,t+i)},s_=(n,e)=>{let t=0;return t=(127&n[e])<<21,t|=(127&n[e+1])<<14,t|=(127&n[e+2])<<7,t|=127&n[e+3],t},E1=(n,e)=>bd(n,e)&&s_(n,e+6)+10<=n.length-e,b0=n=>n&&"PRIV"===n.key&&"com.apple.streaming.transportStreamTimestamp"===n.info,o_=n=>{const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=s_(n,4);return{type:e,size:t,data:n.subarray(10,10+t)}},ET=n=>{let e=0;const t=[];for(;bd(n,e);){const i=s_(n,e+6);e+=10;const r=e+i;for(;e+8<r;){const s=o_(n.subarray(e)),o=xT(s);o&&t.push(o),e+=s.size+10}bT(n,e)&&(e+=10)}return t},xT=n=>"PRIV"===n.type?TT(n):"W"===n.type[0]?a_(n):w0(n),TT=n=>{if(n.size<2)return;const e=qa(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}},w0=n=>{if(n.size<2)return;if("TXXX"===n.type){let t=1;const i=qa(n.data.subarray(t),!0);t+=i.length+1;const r=qa(n.data.subarray(t));return{key:n.type,info:i,data:r}}const e=qa(n.data.subarray(1));return{key:n.type,data:e}},a_=n=>{if("WXXX"===n.type){if(n.size<2)return;let t=1;const i=qa(n.data.subarray(t),!0);t+=i.length+1;const r=qa(n.data.subarray(t));return{key:n.type,info:i,data:r}}const e=qa(n.data);return{key:n.type,data:e}},E0=n=>{if(8===n.data.byteLength){const e=new Uint8Array(n.data);let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,1&e[3]&&(i+=47721858.84),Math.round(i)}},qa=(n,e=!1)=>{const t=function CT(){return!l_&&typeof self.TextDecoder<"u"&&(l_=new self.TextDecoder("utf-8")),l_}();if(t){const m=t.decode(n);if(e){const g=m.indexOf("\0");return-1!==g?m.substring(0,g):m}return m.replace(/\0/g,"")}const i=n.length;let r,s,o,u="",h=0;for(;h<i;){if(r=n[h++],0===r&&e)return u;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(r);break;case 12:case 13:s=n[h++],u+=String.fromCharCode((31&r)<<6|63&s);break;case 14:s=n[h++],o=n[h++],u+=String.fromCharCode((15&r)<<12|(63&s)<<6|(63&o)<<0)}}return u};let l_;const Ka_hexDump=function(n){let e="";for(let t=0;t<n.length;t++){let i=n[t].toString(16);i.length<2&&(i="0"+i),e+=i}return e},op=Math.pow(2,32)-1,IT=[].push,x0={video:1,audio:2,id3:3,text:4};function Hs(n){return String.fromCharCode.apply(null,n)}function ST(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function li(n,e){const t=DT(n,e);return t<0?4294967296+t:t}function DT(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function T0(n,e,t){n[e]=t>>24,n[e+1]=t>>16&255,n[e+2]=t>>8&255,n[e+3]=255&t}function ji(n,e){const t=[];if(!e.length)return t;const i=n.byteLength;for(let r=0;r<i;){const s=li(n,r),u=s>1?r+s:i;if(Hs(n.subarray(r+4,r+8))===e[0])if(1===e.length)t.push(n.subarray(r+8,u));else{const h=ji(n.subarray(r+8,u),e.slice(1));h.length&&IT.apply(t,h)}r=u}return t}function x1(n){const e=[],t=n[0];let i=8;const r=li(n,i);i+=4,i+=0===t?8:16,i+=2;let u=n.length+0;const h=ST(n,i);i+=2;for(let m=0;m<h;m++){let g=i;const y=li(n,g);g+=4;const E=2147483647&y;if((2147483648&y)>>>31==1)return Re.warn("SIDX has hierarchical references (not supported)"),null;const I=li(n,g);g+=4,e.push({referenceSize:E,subsegmentDuration:I,info:{duration:I/r,start:u,end:u+E-1}}),u+=E,g+=4,i=g}return{earliestPresentationTime:0,timescale:r,version:t,referencesCount:h,references:e}}function AT(n){const e=[],t=ji(n,["moov","trak"]);for(let r=0;r<t.length;r++){const s=t[r],o=ji(s,["tkhd"])[0];if(o){let u=o[0],h=0===u?12:20;const m=li(o,h),g=ji(s,["mdia","mdhd"])[0];if(g){u=g[0],h=0===u?12:20;const y=li(g,h),E=ji(s,["mdia","hdlr"])[0];if(E){const x=Hs(E.subarray(8,12)),I={soun:zi.AUDIO,vide:zi.VIDEO}[x];if(I){const k=ji(s,["mdia","minf","stbl","stsd"])[0];let P;k&&(P=Hs(k.subarray(12,16))),e[m]={timescale:y,type:I},e[I]={timescale:y,id:m,codec:P}}}}}}return ji(n,["moov","mvex","trex"]).forEach(r=>{const s=li(r,4),o=e[s];o&&(o.default={duration:li(r,12),flags:li(r,20)})}),e}function MT(n){const e=ji(n,["schm"])[0];if(e){const t=Hs(e.subarray(4,8));if("cbcs"===t||"cenc"===t)return ji(n,["schi","tenc"])[0]}return Re.error("[eme] missing 'schm' box"),null}function S1(n){const e=li(n,0);let t=8;1&e&&(t+=4),4&e&&(t+=4);let i=0;const r=li(n,4);for(let s=0;s<r;s++)256&e&&(i+=li(n,t),t+=4),512&e&&(t+=4),1024&e&&(t+=4),2048&e&&(t+=4);return i}function wd(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function kT(n,e){const t=[],i=e.samples,r=e.timescale,s=e.id;let o=!1;return ji(i,["moof"]).map(h=>{const m=h.byteOffset-8;ji(h,["traf"]).map(y=>{const E=ji(y,["tfdt"]).map(x=>{const I=x[0];let k=li(x,4);return 1===I&&(k*=Math.pow(2,32),k+=li(x,8)),k/r})[0];return void 0!==E&&(n=E),ji(y,["tfhd"]).map(x=>{const I=li(x,4),k=16777215&li(x,0);let ee=0;const ye=0!=(16&k);let De=0;const dt=0!=(32&k);let it=8;I===s&&(0!=(1&k)&&(it+=8),0!=(2&k)&&(it+=4),0!=(8&k)&&(ee=li(x,it),it+=4),ye&&(De=li(x,it),it+=4),dt&&(it+=4),"video"===e.type&&(o=function M1(n){if(!n)return!1;const e=n.indexOf("."),t=e<0?n:n.substring(0,e);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}(e.codec)),ji(y,["trun"]).map(Dt=>{const Nt=Dt[0],mt=16777215&li(Dt,0),Hn=0!=(1&mt);let dn=0;const Oi=0!=(4&mt),Ss=0!=(256&mt);let cr=0;const Ht=0!=(512&mt);let ln=0;const xt=0!=(1024&mt),zt=0!=(2048&mt);let fi=0;const Ni=li(Dt,4);let gi=8;Hn&&(dn=li(Dt,gi),gi+=4),Oi&&(gi+=4);let dr=dn+m;for(let Bi=0;Bi<Ni;Bi++){if(Ss?(cr=li(Dt,gi),gi+=4):cr=ee,Ht?(ln=li(Dt,gi),gi+=4):ln=De,xt&&(gi+=4),zt&&(fi=0===Nt?li(Dt,gi):DT(Dt,gi),gi+=4),e.type===zi.VIDEO){let Ia=0;for(;Ia<ln;){const Sa=li(i,dr);dr+=4,RT(o,i[dr])&&C0(i.subarray(dr,dr+Sa),o?2:1,n+fi/r,t),dr+=Sa,Ia+=Sa+4}}n+=cr/r}}))})})}),t}function RT(n,e){if(n){const t=e>>1&63;return 39===t||40===t}return 6==(31&e)}function C0(n,e,t,i){const r=I0(n);let s=0;s+=e;let o=0,u=0,h=!1,m=0;for(;s<r.length;){o=0;do{if(s>=r.length)break;m=r[s++],o+=m}while(255===m);u=0;do{if(s>=r.length)break;m=r[s++],u+=m}while(255===m);const g=r.length-s;if(!h&&4===o&&s<r.length){if(h=!0,181===r[s++]){const E=ST(r,s);if(s+=2,49===E){const x=li(r,s);if(s+=4,1195456820===x){const I=r[s++];if(3===I){const k=r[s++],q=64&k,ae=q?2+3*(31&k):0,ee=new Uint8Array(ae);if(q){ee[0]=k;for(let ye=1;ye<ae;ye++)ee[ye]=r[s++]}i.push({type:I,payloadType:o,pts:t,bytes:ee})}}}}}else if(5===o&&u<g){if(h=!0,u>16){const y=[];for(let I=0;I<16;I++){const k=r[s++].toString(16);y.push(1==k.length?"0"+k:k),(3===I||5===I||7===I||9===I)&&y.push("-")}const E=u-16,x=new Uint8Array(E);for(let I=0;I<E;I++)x[I]=r[s++];i.push({payloadType:o,pts:t,uuid:y.join(""),userData:qa(x),userDataBytes:x})}}else if(u<g)s+=u;else if(u>g)break}}function I0(n){const e=n.byteLength,t=[];let i=1;for(;i<e-2;)0===n[i]&&0===n[i+1]&&3===n[i+2]?(t.push(i+2),i+=2):i++;if(0===t.length)return n;const r=e-t.length,s=new Uint8Array(r);let o=0;for(i=0;i<r;o++,i++)o===t[0]&&(o++,t.shift()),s[i]=n[o];return s}let ap={};class rf{static clearKeyUriToKeyIdMap(){ap={}}constructor(e,t,i,r=[1],s=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=r,this.iv=s,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case Lr.FAIRPLAY:case Lr.WIDEVINE:case Lr.PLAYREADY:case Lr.CLEARKEY:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof e&&("AES-128"===this.method&&!this.iv&&Re.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const i=function S0(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}(e);return new rf(this.method,this.uri,"identity",this.keyFormatVersions,i)}const t=function Tl(n){const e=n.split(":");let t=null;if("data"===e[0]&&2===e.length){const i=e[1].split(";"),r=i[i.length-1].split(",");if(2===r.length){const o=r[1];"base64"===r[0]?(i.splice(-1,1),t=gT(o)):t=function g0(n){const e=_T(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}(o)}}return t}(this.uri);if(t)switch(this.keyFormat){case Lr.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case Lr.PLAYREADY:{const i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function LT(n,e,t){if(16!==n.byteLength)throw new RangeError("Invalid system id");let i,r,s;if(e){i=1,r=new Uint8Array(16*e.length);for(let u=0;u<e.length;u++){const h=e[u];if(16!==h.byteLength)throw new RangeError("Invalid key");r.set(h,16*u)}}else i=0,r=new Uint8Array;i>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const o=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(o.buffer).setUint32(0,t.byteLength,!1),function PT(n,...e){const t=e.length;let i=8,r=t;for(;r--;)i+=e[r].byteLength;const s=new Uint8Array(i);for(s[0]=i>>24&255,s[1]=i>>16&255,s[2]=i>>8&255,s[3]=255&i,s.set(n,4),r=0,i=8;r<t;r++)s.set(e[r],i),i+=e[r].byteLength;return s}([112,115,115,104],new Uint8Array([i,0,0,0]),n,s,r,o,t||new Uint8Array)}(i,null,t);const r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),s=String.fromCharCode.apply(null,Array.from(r)),o=s.substring(s.indexOf("<"),s.length),m=(new DOMParser).parseFromString(o,"text/xml").getElementsByTagName("KID")[0];if(m){const g=m.childNodes[0]?m.childNodes[0].nodeValue:m.getAttribute("VALUE");if(g){const y=gT(g).subarray(0,16);(function _0(n){const e=function(i,r,s){const o=i[r];i[r]=i[s],i[s]=o};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)})(y),this.keyId=y}}break}default:{let i=t.subarray(0,16);if(16!==i.length){const r=new Uint8Array(16);r.set(i,16-i.length),i=r}this.keyId=i;break}}if(!this.keyId||16!==this.keyId.byteLength){let i=ap[this.uri];if(!i){const r=Object.keys(ap).length%Number.MAX_SAFE_INTEGER;i=new Uint8Array(16),new DataView(i.buffer,12,4).setUint32(0,r),ap[this.uri]=i}this.keyId=i}return this}}const c_=/\{\$([a-zA-Z0-9-_]+)\}/g;function du(n){return c_.test(n)}function ko(n,e,t){if(null!==n.variableList||n.hasVariableRefs)for(let i=t.length;i--;){const r=t[i],s=e[r];s&&(e[r]=D0(n,s))}}function D0(n,e){if(null!==n.variableList||n.hasVariableRefs){const t=n.variableList;return e.replace(c_,i=>{const r=i.substring(2,i.length-1),s=t?.[r];return void 0===s?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),i):s})}return e}function Ed(n,e,t){let r,s,i=n.variableList;if(i||(n.variableList=i={}),"QUERYPARAM"in e){r=e.QUERYPARAM;try{const o=new self.URL(t).searchParams;if(!o.has(r))throw new Error(`"${r}" does not match any query parameter in URI: "${t}"`);s=o.get(r)}catch(o){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else r=e.NAME,s=e.VALUE;r in i?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):i[r]=s||""}function RL(n,e,t){const i=e.IMPORT;if(t&&i in t){let r=n.variableList;r||(n.variableList=r={}),r[i]=t[i]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}function sf(){if(!(typeof self>"u"))return self.MediaSource||self.WebKitMediaSource}const OL={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},A0=sf();function BT(n,e){var t;return null!=(t=A0?.isTypeSupported(`${e||"video"}/mp4;codecs="${n}"`))&&t}const Gn=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,UT=/#EXT-X-MEDIA:(.*)/g,k1=/^#EXT(?:INF|-X-TARGETDURATION):/m,$T=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),af=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Za{static findGroup(e,t){for(let i=0;i<e.length;i++){const r=e[i];if(r.id===t)return r}}static convertAVC1ToAVCOTI(e){const t=e.split(".");if(t.length>2){let i=t.shift()+".";return i+=parseInt(t.shift()).toString(16),i+=("000"+parseInt(t.shift()).toString(16)).slice(-4),i}return e}static resolve(e,t){return r_.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return k1.test(e)}static parseMasterPlaylist(e,t){const r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:du(e)},s=[];let o;for(Gn.lastIndex=0;null!=(o=Gn.exec(e));)if(o[1]){var u;const m=new Or(o[1]);ko(r,m,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const g=D0(r,o[2]),y={attrs:m,bitrate:m.decimalInteger("AVERAGE-BANDWIDTH")||m.decimalInteger("BANDWIDTH"),name:m.NAME,url:Za.resolve(g,t)},E=m.decimalResolution("RESOLUTION");E&&(y.width=E.width,y.height=E.height),Wr((m.CODECS||"").split(/[ ,]+/).filter(x=>x),y),y.videoCodec&&-1!==y.videoCodec.indexOf("avc1")&&(y.videoCodec=Za.convertAVC1ToAVCOTI(y.videoCodec)),null!=(u=y.unknownCodecs)&&u.length||s.push(y),r.levels.push(y)}else if(o[3]){const g=o[4];switch(o[3]){case"SESSION-DATA":{const y=new Or(g);ko(r,y,["DATA-ID","LANGUAGE","VALUE","URI"]);const E=y["DATA-ID"];E&&(null===r.sessionData&&(r.sessionData={}),r.sessionData[E]=y);break}case"SESSION-KEY":{const y=lp(g,t,r);y.encrypted&&y.isSupported()?(null===r.sessionKeys&&(r.sessionKeys=[]),r.sessionKeys.push(y)):Re.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${g}"`);break}case"DEFINE":{const y=new Or(g);ko(r,y,["NAME","VALUE","QUERYPARAM"]),Ed(r,y,t)}break;case"CONTENT-STEERING":{const y=new Or(g);ko(r,y,["SERVER-URI","PATHWAY-ID"]),r.contentSteering={uri:Za.resolve(y["SERVER-URI"],t),pathwayId:y["PATHWAY-ID"]||"."};break}case"START":r.startTimeOffset=cp(g)}}return r.levels=s.length>0&&s.length<r.levels.length?s:r.levels,0===r.levels.length&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,t,i){let r;const s={},o=i.levels,u={AUDIO:o.map(m=>({id:m.attrs.AUDIO,audioCodec:m.audioCodec})),SUBTITLES:o.map(m=>({id:m.attrs.SUBTITLES,textCodec:m.textCodec})),"CLOSED-CAPTIONS":[]};let h=0;for(UT.lastIndex=0;null!==(r=UT.exec(e));){const m=new Or(r[1]),g=m.TYPE;if(g){const y=u[g],E=s[g]||[];s[g]=E,ko(i,m,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const x={attrs:m,bitrate:0,id:h++,groupId:m["GROUP-ID"]||"",instreamId:m["INSTREAM-ID"],name:m.NAME||m.LANGUAGE||"",type:g,default:m.bool("DEFAULT"),autoselect:m.bool("AUTOSELECT"),forced:m.bool("FORCED"),lang:m.LANGUAGE,url:m.URI?Za.resolve(m.URI,t):""};if(null!=y&&y.length){const I=Za.findGroup(y,x.groupId)||y[0];R1(x,I,"audioCodec"),R1(x,I,"textCodec")}E.push(x)}}return s}static parseLevelPlaylist(e,t,i,r,s,o){const u=new pT(t),h=u.fragments;let P,q,ae,m=null,g=0,y=0,E=0,x=0,I=null,k=new p0(r,t),ee=-1,ye=!1;for($T.lastIndex=0,u.m3u8=e,u.hasVariableRefs=du(e);null!==(P=$T.exec(e));){ye&&(ye=!1,k=new p0(r,t),k.start=E,k.sn=g,k.cc=x,k.level=i,m&&(k.initSegment=m,k.rawProgramDateTime=m.rawProgramDateTime,m.rawProgramDateTime=null));const Dt=P[1];if(Dt){k.duration=parseFloat(Dt);const Nt=(" "+P[2]).slice(1);k.title=Nt||null,k.tagList.push(Nt?["INF",Dt,Nt]:["INF",Dt])}else if(P[3]){if(kn(k.duration)){k.start=E,ae&&k0(k,ae,u),k.sn=g,k.level=i,k.cc=x,k.urlId=s,h.push(k);const Nt=(" "+P[3]).slice(1);k.relurl=D0(u,Nt),M0(k,I),I=k,E+=k.duration,g++,y=0,ye=!0}}else if(P[4]){const Nt=(" "+P[4]).slice(1);I?k.setByteRange(Nt,I):k.setByteRange(Nt)}else if(P[5])k.rawProgramDateTime=(" "+P[5]).slice(1),k.tagList.push(["PROGRAM-DATE-TIME",k.rawProgramDateTime]),-1===ee&&(ee=h.length);else{if(P=P[0].match(af),!P){Re.warn("No matches on slow regex match for level playlist!");continue}for(q=1;q<P.length&&!(typeof P[q]<"u");q++);const Nt=(" "+P[q]).slice(1),mt=(" "+P[q+1]).slice(1),Hn=P[q+2]?(" "+P[q+2]).slice(1):"";switch(Nt){case"PLAYLIST-TYPE":u.type=mt.toUpperCase();break;case"MEDIA-SEQUENCE":g=u.startSN=parseInt(mt);break;case"SKIP":{const dn=new Or(mt);ko(u,dn,["RECENTLY-REMOVED-DATERANGES"]);const Oi=dn.decimalInteger("SKIPPED-SEGMENTS");if(kn(Oi)){u.skippedSegments=Oi;for(let cr=Oi;cr--;)h.unshift(null);g+=Oi}const Ss=dn.enumeratedString("RECENTLY-REMOVED-DATERANGES");Ss&&(u.recentlyRemovedDateranges=Ss.split("\t"));break}case"TARGETDURATION":u.targetduration=Math.max(parseInt(mt),1);break;case"VERSION":u.version=parseInt(mt);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"#":(mt||Hn)&&k.tagList.push(Hn?[mt,Hn]:[mt]);break;case"DISCONTINUITY":x++,k.tagList.push(["DIS"]);break;case"GAP":k.gap=!0,k.tagList.push([Nt]);break;case"BITRATE":k.tagList.push([Nt,mt]);break;case"DATERANGE":{const dn=new Or(mt);ko(u,dn,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),ko(u,dn,dn.clientAttrs);const Oi=new m0(dn,u.dateRanges[dn.ID]);Oi.isValid||u.skippedSegments?u.dateRanges[Oi.id]=Oi:Re.warn(`Ignoring invalid DATERANGE tag: "${mt}"`),k.tagList.push(["EXT-X-DATERANGE",mt]);break}case"DEFINE":{const dn=new Or(mt);ko(u,dn,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in dn?RL(u,dn,o):Ed(u,dn,t)}break;case"DISCONTINUITY-SEQUENCE":x=parseInt(mt);break;case"KEY":{const dn=lp(mt,t,u);if(dn.isSupported()){if("NONE"===dn.method){ae=void 0;break}ae||(ae={}),ae[dn.keyFormat]&&(ae=bs({},ae)),ae[dn.keyFormat]=dn}else Re.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${mt}"`);break}case"START":u.startTimeOffset=cp(mt);break;case"MAP":{const dn=new Or(mt);if(ko(u,dn,["BYTERANGE","URI"]),k.duration){const Oi=new p0(r,t);HT(Oi,dn,i,ae),m=Oi,k.initSegment=m,m.rawProgramDateTime&&!k.rawProgramDateTime&&(k.rawProgramDateTime=m.rawProgramDateTime)}else HT(k,dn,i,ae),m=k,ye=!0;break}case"SERVER-CONTROL":{const dn=new Or(mt);u.canBlockReload=dn.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=dn.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&dn.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=dn.optionalFloat("PART-HOLD-BACK",0),u.holdBack=dn.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const dn=new Or(mt);u.partTarget=dn.decimalFloatingPoint("PART-TARGET");break}case"PART":{let dn=u.partList;dn||(dn=u.partList=[]);const Oi=y>0?dn[dn.length-1]:void 0,Ss=y++,cr=new Or(mt);ko(u,cr,["BYTERANGE","URI"]);const Ht=new mT(cr,k,t,Ss,Oi);dn.push(Ht),k.duration+=Ht.duration;break}case"PRELOAD-HINT":{const dn=new Or(mt);ko(u,dn,["URI"]),u.preloadHint=dn;break}case"RENDITION-REPORT":{const dn=new Or(mt);ko(u,dn,["URI"]),u.renditionReports=u.renditionReports||[],u.renditionReports.push(dn);break}default:Re.warn(`line parsed but not handled: ${P}`)}}}I&&!I.relurl?(h.pop(),E-=I.duration,u.partList&&(u.fragmentHint=I)):u.partList&&(M0(k,I),k.cc=x,u.fragmentHint=k,ae&&k0(k,ae,u));const De=h.length,dt=h[0],it=h[De-1];if(E+=u.skippedSegments*u.targetduration,E>0&&De&&it){u.averagetargetduration=E/De;const Dt=it.sn;u.endSN="initSegment"!==Dt?Dt:0,u.live||(it.endList=!0),dt&&(u.startCC=dt.cc)}else u.endSN=0,u.startCC=0;return u.fragmentHint&&(E+=u.fragmentHint.duration),u.totalduration=E,u.endCC=x,ee>0&&function VT(n,e){let t=n[e];for(let i=e;i--;){const r=n[i];if(!r)return;r.programDateTime=t.programDateTime-1e3*r.duration,t=r}}(h,ee),u}}function lp(n,e,t){var i,r;const s=new Or(n);ko(t,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const o=null!=(i=s.METHOD)?i:"",u=s.URI,h=s.hexadecimalInteger("IV"),m=s.KEYFORMATVERSIONS,g=null!=(r=s.KEYFORMAT)?r:"identity";u&&s.IV&&!h&&Re.error(`Invalid IV: ${s.IV}`);const y=u?Za.resolve(u,e):"",E=(m||"1").split("/").map(Number).filter(Number.isFinite);return new rf(o,y,g,E,h)}function cp(n){const t=new Or(n).decimalFloatingPoint("TIME-OFFSET");return kn(t)?t:null}function Wr(n,e){["video","audio","text"].forEach(t=>{const i=n.filter(r=>function NT(n,e){const t=OL[e];return!!t&&!0===t[n.slice(0,4)]}(r,t));if(i.length){const r=i.filter(s=>0===s.lastIndexOf("avc1",0)||0===s.lastIndexOf("mp4a",0));e[`${t}Codec`]=r.length>0?r[0]:i[0],n=n.filter(s=>-1===i.indexOf(s))}}),e.unknownCodecs=n}function R1(n,e,t){const i=e[t];i&&(n[t]=i)}function M0(n,e){n.rawProgramDateTime?n.programDateTime=Date.parse(n.rawProgramDateTime):null!=e&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime),kn(n.programDateTime)||(n.programDateTime=null,n.rawProgramDateTime=null)}function HT(n,e,t,i){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",i&&(n.levelkeys=i),n.initSegment=null}function k0(n,e,t){n.levelkeys=e;const{encryptedFragments:i}=t;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(r=>e[r].isCommonEncryption)&&i.push(n)}var Gi={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},ei={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function R0(n){const{type:e}=n;switch(e){case Gi.AUDIO_TRACK:return ei.AUDIO;case Gi.SUBTITLE_TRACK:return ei.SUBTITLE;default:return ei.MAIN}}function O0(n,e){let t=n.url;return(void 0===t||0===t.indexOf("data:"))&&(t=e.url),t}class O1{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.LEVEL_LOADING,this.onLevelLoading,this),e.on(U.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(U.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.LEVEL_LOADING,this.onLevelLoading,this),e.off(U.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(U.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,o=new(t.pLoader||t.loader)(t);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Gi.MANIFEST,url:i,deliveryDirectives:null})}onLevelLoading(e,t){const{id:i,level:r,url:s,deliveryDirectives:o}=t;this.load({id:i,level:r,responseType:"text",type:Gi.LEVEL,url:s,deliveryDirectives:o})}onAudioTrackLoading(e,t){const{id:i,groupId:r,url:s,deliveryDirectives:o}=t;this.load({id:i,groupId:r,level:null,responseType:"text",type:Gi.AUDIO_TRACK,url:s,deliveryDirectives:o})}onSubtitleTrackLoading(e,t){const{id:i,groupId:r,url:s,deliveryDirectives:o}=t;this.load({id:i,groupId:r,level:null,responseType:"text",type:Gi.SUBTITLE_TRACK,url:s,deliveryDirectives:o})}load(e){var t;const i=this.hls.config;let s,r=this.getInternalLoader(e);if(r){const m=r.context;if(m&&m.url===e.url)return void Re.trace("[playlist-loader]: playlist request ongoing");Re.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}if(s=e.type===Gi.MANIFEST?i.manifestLoadPolicy.default:bs({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),null!=(t=e.deliveryDirectives)&&t.part){let m;if(e.type===Gi.LEVEL&&null!==e.level?m=this.hls.levels[e.level].details:e.type===Gi.AUDIO_TRACK&&null!==e.id?m=this.hls.audioTracks[e.id].details:e.type===Gi.SUBTITLE_TRACK&&null!==e.id&&(m=this.hls.subtitleTracks[e.id].details),m){const g=m.partTarget,y=m.targetduration;if(g&&y){const E=1e3*Math.max(3*g,.8*y);s=bs({},s,{maxTimeToFirstByteMs:Math.min(E,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(E,s.maxTimeToFirstByteMs)})}}}const o=s.errorRetry||s.timeoutRetry||{};r.load(e,{loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},{onSuccess:(m,g,y,E)=>{const x=this.getInternalLoader(y);this.resetInternalLoader(y.type);const I=m.data;0===I.indexOf("#EXTM3U")?(g.parsing.start=performance.now(),Za.isMediaPlaylist(I)?this.handleTrackOrLevelPlaylist(m,g,y,E||null,x):this.handleMasterPlaylist(m,g,y,E)):this.handleManifestParsingError(m,y,new Error("no EXTM3U delimiter"),E||null,g)},onError:(m,g,y,E)=>{this.handleNetworkError(g,y,!1,m,E)},onTimeout:(m,g,y)=>{this.handleNetworkError(g,y,!0,void 0,m)}})}handleMasterPlaylist(e,t,i,r){const s=this.hls,o=e.data,u=O0(e,i),h=Za.parseMasterPlaylist(o,u);if(h.playlistParsingError)return void this.handleManifestParsingError(e,i,h.playlistParsingError,r,t);const{contentSteering:m,levels:g,sessionData:y,sessionKeys:E,startTimeOffset:x,variableList:I}=h;this.variableList=I;const{AUDIO:k=[],SUBTITLES:P,"CLOSED-CAPTIONS":q}=Za.parseMasterPlaylistMedia(o,u,h);k.length&&!k.some(ee=>!ee.url)&&g[0].audioCodec&&!g[0].attrs.AUDIO&&(Re.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),k.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Or({}),bitrate:0,url:""})),s.trigger(U.MANIFEST_LOADED,{levels:g,audioTracks:k,subtitles:P,captions:q,contentSteering:m,url:u,stats:t,networkDetails:r,sessionData:y,sessionKeys:E,startTimeOffset:x,variableList:I})}handleTrackOrLevelPlaylist(e,t,i,r,s){const o=this.hls,{id:u,level:h,type:m}=i,g=O0(e,i),y=kn(u)?u:0,E=kn(h)?h:y,x=R0(i),I=Za.parseLevelPlaylist(e.data,g,E,x,y,this.variableList);if(m===Gi.MANIFEST){const k={attrs:new Or({}),bitrate:0,details:I,name:"",url:g};o.trigger(U.MANIFEST_LOADED,{levels:[k],audioTracks:[],url:g,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=I,this.handlePlaylistLoaded(I,e,t,i,r,s)}handleManifestParsingError(e,t,i,r,s){this.hls.trigger(U.ERROR,{type:Jn.NETWORK_ERROR,details:ht.MANIFEST_PARSING_ERROR,fatal:t.type===Gi.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:r,stats:s})}handleNetworkError(e,t,i=!1,r,s){let o=`A network ${i?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===Gi.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===Gi.AUDIO_TRACK||e.type===Gi.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const u=new Error(o);Re.warn(`[playlist-loader]: ${o}`);let h=ht.UNKNOWN,m=!1;const g=this.getInternalLoader(e);switch(e.type){case Gi.MANIFEST:h=i?ht.MANIFEST_LOAD_TIMEOUT:ht.MANIFEST_LOAD_ERROR,m=!0;break;case Gi.LEVEL:h=i?ht.LEVEL_LOAD_TIMEOUT:ht.LEVEL_LOAD_ERROR,m=!1;break;case Gi.AUDIO_TRACK:h=i?ht.AUDIO_TRACK_LOAD_TIMEOUT:ht.AUDIO_TRACK_LOAD_ERROR,m=!1;break;case Gi.SUBTITLE_TRACK:h=i?ht.SUBTITLE_TRACK_LOAD_TIMEOUT:ht.SUBTITLE_LOAD_ERROR,m=!1}g&&this.resetInternalLoader(e.type);const y={type:Jn.NETWORK_ERROR,details:h,fatal:m,url:e.url,loader:g,context:e,error:u,networkDetails:t,stats:s};r&&(y.response=Vs({url:t?.url||e.url,data:void 0},r)),this.hls.trigger(U.ERROR,y)}handlePlaylistLoaded(e,t,i,r,s,o){const u=this.hls,{type:h,level:m,id:g,groupId:y,deliveryDirectives:E}=r,x=O0(t,r),I=R0(r),k="number"==typeof r.level&&I===ei.MAIN?m:void 0;if(!e.fragments.length){const q=new Error("No Segments found in Playlist");return void u.trigger(U.ERROR,{type:Jn.NETWORK_ERROR,details:ht.LEVEL_EMPTY_ERROR,fatal:!1,url:x,error:q,reason:q.message,response:t,context:r,level:k,parent:I,networkDetails:s,stats:i})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const P=e.playlistParsingError;if(P)u.trigger(U.ERROR,{type:Jn.NETWORK_ERROR,details:ht.LEVEL_PARSING_ERROR,fatal:!1,url:x,error:P,reason:P.message,response:t,context:r,level:k,parent:I,networkDetails:s,stats:i});else switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),h){case Gi.MANIFEST:case Gi.LEVEL:u.trigger(U.LEVEL_LOADED,{details:e,level:k||0,id:g||0,stats:i,networkDetails:s,deliveryDirectives:E});break;case Gi.AUDIO_TRACK:u.trigger(U.AUDIO_TRACK_LOADED,{details:e,id:g||0,groupId:y||"",stats:i,networkDetails:s,deliveryDirectives:E});break;case Gi.SUBTITLE_TRACK:u.trigger(U.SUBTITLE_TRACK_LOADED,{details:e,id:g||0,groupId:y||"",stats:i,networkDetails:s,deliveryDirectives:E})}}}function zT(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function lf(n,e){const t=n.mode;if("disabled"===t&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){Re.debug(`[texttrack-utils]: ${i}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,n.addCue(r)}catch(r){Re.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}"disabled"===t&&(n.mode=t)}function cf(n){const e=n.mode;if("disabled"===e&&(n.mode="hidden"),n.cues)for(let t=n.cues.length;t--;)n.removeCue(n.cues[t]);"disabled"===e&&(n.mode=e)}function P0(n,e,t,i){const r=n.mode;if("disabled"===r&&(n.mode="hidden"),n.cues&&n.cues.length>0){const s=function u_(n,e,t){const i=[],r=function P1(n,e){if(e<n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let i=0,r=t;for(;i<=r;){const s=Math.floor((r+i)/2);if(e<n[s].startTime)r=s-1;else{if(!(e>n[s].startTime&&i<t))return s;i=s+1}}return n[i].startTime-e<e-n[r].startTime?i:r}(n,e);if(r>-1)for(let s=r,o=n.length;s<o;s++){const u=n[s];if(u.startTime>=e&&u.endTime<=t)i.push(u);else if(u.startTime>t)return i}return i}(n.cues,e,t);for(let o=0;o<s.length;o++)(!i||i(s[o]))&&n.removeCue(s[o])}"disabled"===r&&(n.mode=r)}var va_emsg="https://aomedia.org/emsg/ID3";function d_(){if(!(typeof self>"u"))return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const h_=(()=>{const n=d_();try{new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function xd(n,e){return n.getTime()/1e3-e}function up(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class L1{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(U.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(U.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(cf(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if("metadata"===i.kind&&"id3"===i.label)return zT(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:r}}}=this;if(!i&&!r)return;const{samples:s}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=d_();for(let u=0;u<s.length;u++){const h=s[u].type;if(h===va_emsg&&!i||!r)continue;const m=ET(s[u].data);if(m){const g=s[u].pts;let y=g+s[u].duration;y>h_&&(y=h_),y-g<=0&&(y=g+.25);for(let x=0;x<m.length;x++){const I=m[x];if(!b0(I)){this.updateId3CueEnds(g,h);const k=new o(g,y,"");k.value=I,h&&(k.type=h),this.id3Track.addCue(k)}}}}}updateId3CueEnds(e,t){var i;const r=null==(i=this.id3Track)?void 0:i.cues;if(r)for(let s=r.length;s--;){const o=r[s];o.type===t&&o.startTime<e&&o.endTime===h_&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:r}){const{id3Track:s,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:u,enableID3MetadataCues:h}}=o;if(s&&(u||h)){let m;m="audio"===r?g=>"org.id3"===g.type&&h:"video"===r?g=>g.type===va_emsg&&u:g=>"org.id3"===g.type&&h||g.type===va_emsg&&u,P0(s,t,i,m)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:i,id3Track:r}=this,{dateRanges:s}=t,o=Object.keys(s);if(r){const g=Object.keys(i).filter(y=>!o.includes(y));for(let y=g.length;y--;){const E=g[y];Object.keys(i[E].cues).forEach(x=>{r.removeCue(i[E].cues[x])}),delete i[E]}}const u=t.fragments[t.fragments.length-1];if(0===o.length||!kn(u?.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const h=u.programDateTime/1e3-u.start,m=d_();for(let g=0;g<o.length;g++){const y=o[g],E=s[y],x=i[y],I=x?.cues||{};let k=x?.durationKnown||!1;const P=xd(E.startDate,h);let q=h_;const ae=E.endDate;if(ae)q=xd(ae,h),k=!0;else if(E.endOnNext&&!k){const ye=o.reduce((De,dt)=>{const it=s[dt];return it.class===E.class&&it.id!==dt&&it.startDate>E.startDate&&De.push(it),De},[]).sort((De,dt)=>De.startDate.getTime()-dt.startDate.getTime())[0];ye&&(q=xd(ye.startDate,h),k=!0)}const ee=Object.keys(E.attr);for(let ye=0;ye<ee.length;ye++){const De=ee[ye];if("ID"===(n=De)||"CLASS"===n||"START-DATE"===n||"DURATION"===n||"END-DATE"===n||"END-ON-NEXT"===n)continue;let dt=I[De];if(dt)k&&!x.durationKnown&&(dt.endTime=q);else{let it=E.attr[De];dt=new m(P,q,""),y1(De)&&(it=up(it)),dt.value={key:De,data:it},dt.type="com.apple.quicktime.HLS",dt.id=y,this.id3Track.addCue(dt),I[De]=dt}}i[y]={cues:I,dateRange:E,durationKnown:k}}var n}}class F1{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(null===e)return null;const{holdBack:t,partHoldBack:i,targetduration:r}=e,{liveSyncDuration:s,liveSyncDurationCount:o,lowLatencyMode:u}=this.config,h=this.hls.userConfig;let m=u&&i||t;return(h.liveSyncDuration||h.liveSyncDurationCount||0===m)&&(m=void 0!==s?s:o*r),m+Math.min(1*this.stallCount,r)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,i=this.levelDetails;if(null===e||null===t||null===i)return null;const r=i.edge,u=r-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(r-i.totalduration,e-t-this.edgeStalled),u)}get drift(){const{levelDetails:e}=this;return null===e?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;return null===e?0:Math.max(e.age-3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration),0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(U.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(U.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(U.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(U.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(U.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(U.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var i;t.details===ht.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(i=this.levelDetails)&&i.live&&Re.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const i=this.computeLatency();if(null===i)return;this._latency=i;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:s}=this.config;if(!r||1===s)return;const o=this.targetLatency;if(null===o)return;const u=i-o,h=Math.min(this.maxLatency,o+t.targetduration);if(t.live&&u<h&&u>.05&&this.forwardBufferLength>1){const g=Math.min(2,Math.max(1,s)),y=Math.round(2/(1+Math.exp(-.75*u-this.edgeStalled))*20)/20;e.playbackRate=Math.min(g,Math.max(1,y))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}const L0=["NONE","TYPE-0","TYPE-1",null];var uf_No="",uf_Yes="YES",uf_v2="v2";class F0{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class dp{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter(t=>t).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(e){const t=e%this.url.length;this._urlId!==t&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=t)}get audioGroupId(){var e;return null==(e=this.audioGroupIds)?void 0:e[this.urlId]}get textGroupId(){var e;return null==(e=this.textGroupIds)?void 0:e[this.urlId]}addFallback(e){this.url.push(e.url),this._attrs.push(e.attrs)}}function f_(n,e){const t=e.startPTS;if(kn(t)){let r,i=0;e.sn>n.sn?(i=t-n.start,r=n):(i=n.start-t,r=e),r.duration!==i&&(r.duration=i)}else e.start=e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?n.start+(n.minEndPTS-n.start):n.start+n.duration:Math.max(n.start-e.duration,0)}function WT(n,e,t,i,r,s){i-t<=0&&(Re.warn("Fragment should have a positive duration",e),i=t+e.duration,s=r+e.duration);let u=t,h=i;const m=e.startPTS,g=e.endPTS;if(kn(m)){const P=Math.abs(m-t);e.deltaPTS=kn(e.deltaPTS)?Math.max(P,e.deltaPTS):P,u=Math.max(t,m),t=Math.min(t,m),r=Math.min(r,e.startDTS),h=Math.min(i,g),i=Math.max(i,g),s=Math.max(s,e.endDTS)}const y=t-e.start;0!==e.start&&(e.start=t),e.duration=i-e.start,e.startPTS=t,e.maxStartPTS=u,e.startDTS=r,e.endPTS=i,e.minEndPTS=h,e.endDTS=s;const E=e.sn;if(!n||E<n.startSN||E>n.endSN)return 0;let x;const I=E-n.startSN,k=n.fragments;for(k[I]=e,x=I;x>0;x--)f_(k[x],k[x-1]);for(x=I;x<k.length-1;x++)f_(k[x],k[x+1]);return n.fragmentHint&&f_(k[k.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,y}function B1(n,e){const t=e.startSN+e.skippedSegments-n.startSN,i=n.fragments;t<0||t>=i.length||m_(e,i[t].start)}function m_(n,e){if(e){const t=n.fragments;for(let i=n.skippedSegments;i<t.length;i++)t[i].start+=e;n.fragmentHint&&(n.fragmentHint.start+=e)}}function YT(n,e,t){var i;return null!=n&&n.details?N0(null==(i=n.details)?void 0:i.partList,e,t):null}function N0(n,e,t){if(n)for(let i=n.length;i--;){const r=n[i];if(r.index===t&&r.fragment.sn===e)return r}return null}function hu(n){switch(n.details){case ht.FRAG_LOAD_TIMEOUT:case ht.KEY_LOAD_TIMEOUT:case ht.LEVEL_LOAD_TIMEOUT:case ht.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function qT(n,e){const t=hu(e);return n.default[(t?"timeout":"error")+"Retry"]}function B0(n,e){const t="linear"===n.backoff?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function KT(n){return Vs(Vs({},n),{errorRetry:null,timeoutRetry:null})}function g_(n,e,t,i){return!!n&&e<n.maxNumRetry&&(function NL(n){return 0===n&&!1===navigator.onLine||!!n&&(n<400||n>499)}(i)||!!t)}const ZT={search:function(n,e){let t=0,i=n.length-1,r=null,s=null;for(;t<=i;){r=(t+i)/2|0,s=n[r];const o=e(s);if(o>0)t=r+1;else{if(!(o<0))return s;i=r-1}}return null}};function hp(n,e,t=0,i=0){let r=null;if(n?r=e[n.sn-e[0].sn+1]||null:0===t&&0===e[0].start&&(r=e[0]),r&&0===U0(t,i,r))return r;const s=ZT.search(e,U0.bind(null,t,i));return!s||s===n&&r?r:s}function U0(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-i<=n?1:t.start-i>n&&t.start?-1:0}function fp(n,e,t){const i=1e3*Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return(t.endProgramDateTime||0)-i>n}const QT=3e5;function JT(n,e,t){if(performance.now()-n.lastErrorPerfMs>QT)return!0;const i=n.details;if(e.details===ht.FRAG_GAP&&i&&e.frag){const s=hp(null,i.fragments,e.frag.start);if(s&&!s.gap)return!0}if(t&&n.errors.length<t.errors.length){const r=n.errors[n.errors.length-1];if(i&&r.frag&&e.frag&&Math.abs(r.frag.start-e.frag.start)>3*i.targetduration)return!0}return!1}class $0{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=Re.log.bind(Re,`${t}:`),this.warn=Re.warn.bind(Re,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t){const i=t?.renditionReports;if(i){let r=-1;for(let s=0;s<i.length;s++){const o=i[s];let u;try{u=new self.URL(o.URI,t.url).href}catch(h){Re.warn(`Could not construct new URL for Rendition Report: ${h}`),u=o.URI||""}if(u===e){r=s;break}u===e.substring(0,u.length)&&(r=s)}if(-1!==r){const s=i[r],o=parseInt(s["LAST-MSN"])||t?.lastPartSn;let u=parseInt(s["LAST-PART"])||t?.lastPartIndex;if(this.hls.config.lowLatencyMode){const h=Math.min(t.age-t.partTarget,t.targetduration);u>=0&&h>t.partTarget&&(u+=1)}return new F0(o,u>=0?u:void 0,uf_No)}}}loadPlaylist(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,i){const{details:r,stats:s}=t,o=self.performance.now(),u=s.loading.first?Math.max(0,o-s.loading.first):0;if(r.advancedDateTime=Date.now()-u,r.live||null!=i&&i.live){if(r.reloaded(i),i&&this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),i&&r.fragments.length>0&&function N1(n,e){let t=null;const i=n.fragments;for(let h=i.length-1;h>=0;h--){const m=i[h].initSegment;if(m){t=m;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let s,r=0;if(function FL(n,e,t){const i=e.skippedSegments,r=Math.max(n.startSN,e.startSN)-e.startSN,s=(n.fragmentHint?1:0)+(i?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,o=e.startSN-n.startSN,u=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,h=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let m=r;m<=s;m++){const g=h[o+m];let y=u[m];i&&!y&&m<i&&(y=e.fragments[m]=g),g&&y&&t(g,y)}}(n,e,(h,m)=>{h.relurl&&(r=h.cc-m.cc),kn(h.startPTS)&&kn(h.endPTS)&&(m.start=m.startPTS=h.startPTS,m.startDTS=h.startDTS,m.maxStartPTS=h.maxStartPTS,m.endPTS=h.endPTS,m.endDTS=h.endDTS,m.minEndPTS=h.minEndPTS,m.duration=h.endPTS-h.startPTS,m.duration&&(s=m),e.PTSKnown=e.alignedSliding=!0),m.elementaryStreams=h.elementaryStreams,m.loader=h.loader,m.stats=h.stats,m.urlId=h.urlId,h.initSegment&&(m.initSegment=h.initSegment,t=h.initSegment)}),t&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(m=>{var g;(!m.initSegment||m.initSegment.relurl===(null==(g=t)?void 0:g.relurl))&&(m.initSegment=t)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(h=>!h),e.deltaUpdateFailed){Re.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let h=e.skippedSegments;h--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=function PL(n,e,t){const i=bs({},n);return t&&t.forEach(r=>{delete i[r]}),Object.keys(e).forEach(r=>{const s=new m0(e[r].attr,i[r]);s.isValid?i[r]=s:Re.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[r].attr)}"`)}),i}(n.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const o=e.fragments;if(r){Re.warn("discontinuity sliding from playlist, take drift into account");for(let h=0;h<o.length;h++)o[h].cc+=r}e.skippedSegments&&(e.startCC=e.fragments[0].cc),function LL(n,e,t){if(n&&e){let i=0;for(let r=0,s=n.length;r<=s;r++){const o=n[r],u=e[r+i];o&&u&&o.index===u.index&&o.fragment.sn===u.fragment.sn?t(o,u):i--}}}(n.partList,e.partList,(h,m)=>{m.elementaryStreams=h.elementaryStreams,m.stats=h.stats}),s?WT(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):B1(n,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const u=e.advancedDateTime;if(e.advanced&&u){const h=e.edge;e.driftStart||(e.driftStartTime=u,e.driftStart=h),e.driftEndTime=u,e.driftEnd=h}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime}(i,r),!this.canLoad||!r.live)return;let h,m,g;if(r.canBlockReload&&r.endSN&&r.advanced){const P=this.hls.config.lowLatencyMode,q=r.lastPartSn,ae=r.endSN,ee=r.lastPartIndex,De=q===ae;-1!==ee?(m=De?ae+1:q,g=De?P?0:ee:ee+1):m=ae+1;const it=r.age;let Nt=Math.min(it+r.ageHeader-r.partTarget,1.5*r.targetduration);if(Nt>0){if(i&&Nt>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${Nt} with playlist age: ${r.age}`),Nt=0;else{const mt=Math.floor(Nt/r.targetduration);m+=mt,void 0!==g&&(g+=Math.round(Nt%r.targetduration/r.partTarget)),this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${it.toFixed(2)}s goal: ${Nt} skip sn ${mt} to part ${g}`)}r.tuneInGoal=Nt}if(h=this.getDeliveryDirectives(r,t.deliveryDirectives,m,g),P||!De)return void this.loadPlaylist(h)}else(r.canBlockReload||r.canSkipUntil)&&(h=this.getDeliveryDirectives(r,t.deliveryDirectives,m,g));const y=this.hls.mainForwardBufferInfo,I=function p_(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const i=n.fragments;if(i.length&&4*t>e){const s=1e3*i[i.length-1].duration;s<t&&(t=s)}}else t/=2;return Math.round(t)}(r,1e3*(r.edge-(y?y.end-y.len:0)));r.updated&&o>this.requestScheduled+I&&(this.requestScheduled=s.loading.start),void 0!==m&&r.canBlockReload?this.requestScheduled=s.loading.first+I-(1e3*r.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+I<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=I);let k=this.requestScheduled-o;k=Math.max(0,k),this.log(`reload live playlist ${e} in ${Math.round(k)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(h),k)}else this.clearTimer()}getDeliveryDirectives(e,t,i,r){let s=function GT(n,e){const{canSkipUntil:t,canSkipDateRanges:i,endSN:r}=n;return t&&(void 0!==e?e-r:0)<t?i?uf_v2:uf_Yes:uf_No}(e,i);return null!=t&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,r=t.part,s=uf_No),new F0(i,r,s)}checkRetry(e){const t=e.details,i=hu(e),r=e.errorAction,{action:s,retryCount:o=0,retryConfig:u}=r||{},h=!!r&&!!u&&(5===s||!r.resolved&&2===s);if(h){var m;if(this.requestScheduled=-1,o>=u.maxNumRetry)return!1;if(i&&null!=(m=e.context)&&m.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${u.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const g=B0(u,o);this.timer=self.setTimeout(()=>this.loadPlaylist(),g),this.warn(`Retrying playlist loading ${o+1}/${u.maxNumRetry} after "${t}" in ${g}ms`)}e.levelRetry=!0,r.resolved=!0}return h}}let mp;class H1 extends $0{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(U.LEVEL_LOADED,this.onLevelLoaded,this),e.on(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(U.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(U.FRAG_LOADED,this.onFragLoaded,this),e.on(U.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(U.LEVEL_LOADED,this.onLevelLoaded,this),e.off(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(U.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(U.FRAG_LOADED,this.onFragLoaded,this),e.off(U.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=[],r={};let s;t.levels.forEach(o=>{var u;const h=o.attrs;-1!==(null==(u=o.audioCodec)?void 0:u.indexOf("mp4a.40.34"))&&(mp||(mp=/chrome|firefox/i.test(navigator.userAgent)),mp&&(o.audioCodec=void 0));const{AUDIO:m,CODECS:g,"FRAME-RATE":y,"PATHWAY-ID":E,RESOLUTION:x,SUBTITLES:I}=h,P=`${E||"."}-${o.bitrate}-${x}-${y}-${g}`;s=r[P],s?s.addFallback(o):(s=new dp(o),r[P]=s,i.push(s)),pp(s,"audio",m),pp(s,"text",I)}),this.filterAndSortMediaOptions(i,t)}filterAndSortMediaOptions(e,t){let i=[],r=[],s=!1,o=!1,u=!1,h=e.filter(({audioCodec:x,videoCodec:I,width:k,height:P,unknownCodecs:q})=>(s||(s=!(!k||!P)),o||(o=!!I),u||(u=!!x),!(null!=q&&q.length)&&(!x||BT(x,"audio"))&&(!I||BT(I,"video"))));if((s||o)&&u&&(h=h.filter(({videoCodec:x,width:I,height:k})=>!!x||!(!I||!k))),0===h.length)return void Promise.resolve().then(()=>{if(this.hls){const x=new Error("no level with compatible codecs found in manifest");this.hls.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:x,reason:x.message})}});t.audioTracks&&(i=t.audioTracks.filter(x=>!x.audioCodec||BT(x.audioCodec,"audio")),V0(i)),t.subtitles&&(r=t.subtitles,V0(r));const m=h.slice(0);h.sort((x,I)=>x.attrs["HDCP-LEVEL"]!==I.attrs["HDCP-LEVEL"]?(x.attrs["HDCP-LEVEL"]||"")>(I.attrs["HDCP-LEVEL"]||"")?1:-1:x.bitrate!==I.bitrate?x.bitrate-I.bitrate:x.attrs["FRAME-RATE"]!==I.attrs["FRAME-RATE"]?x.attrs.decimalFloatingPoint("FRAME-RATE")-I.attrs.decimalFloatingPoint("FRAME-RATE"):x.attrs.SCORE!==I.attrs.SCORE?x.attrs.decimalFloatingPoint("SCORE")-I.attrs.decimalFloatingPoint("SCORE"):s&&x.height!==I.height?x.height-I.height:0);let g=m[0];if(this.steering&&(h=this.steering.filterParsedLevels(h),h.length!==m.length))for(let x=0;x<m.length;x++)if(m[x].pathwayId===h[0].pathwayId){g=m[x];break}this._levels=h;for(let x=0;x<h.length;x++)if(h[x]===g){this._firstLevel=x,this.log(`manifest loaded, ${h.length} level(s) found, first bitrate: ${g.bitrate}`);break}const E={levels:h,audioTracks:i,subtitleTracks:r,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:u,video:o,altAudio:!(u&&!o)&&i.some(x=>!!x.url)};this.hls.trigger(U.MANIFEST_PARSED,E),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const g=new Error("invalid level idx"),y=e<0;if(this.hls.trigger(U.ERROR,{type:Jn.OTHER_ERROR,details:ht.LEVEL_SWITCH_ERROR,level:e,fatal:y,error:g,reason:g.message}),y)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,r=this.currentLevel,s=r?r.attrs["PATHWAY-ID"]:void 0,o=t[e],u=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,i===e&&o.details&&r&&s===u)return;this.log(`Switching to level ${e}${u?" with Pathway "+u:""} from level ${i}${s?" with Pathway "+s:""}`);const h=bs({},o,{level:e,maxBitrate:o.maxBitrate,attrs:o.attrs,uri:o.uri,urlId:o.urlId});delete h._attrs,delete h._urlId,this.hls.trigger(U.LEVEL_SWITCHING,h);const m=o.details;if(!m||m.live){const g=this.switchParams(o.uri,r?.details);this.loadPlaylist(g)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){t.fatal||!t.context||t.context.type===Gi.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragLoaded(e,{frag:t}){if(void 0!==t&&t.type===ei.MAIN){const i=this._levels[t.level];void 0!==i&&(i.loadError=0)}}onLevelLoaded(e,t){var i;const{level:r,details:s}=t,o=this._levels[r];var u;if(!o)return this.warn(`Invalid level index ${r}`),void(null!=(u=t.deliveryDirectives)&&u.skip&&(s.deltaUpdateFailed=!0));r===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0),this.playlistLoaded(r,t,o.details)):null!=(i=t.deliveryDirectives)&&i.skip&&(s.deltaUpdateFailed=!0)}onAudioTrackSwitched(e,t){const i=this.currentLevel;if(!i)return;const r=this.hls.audioTracks[t.id].groupId;if(i.audioGroupIds&&i.audioGroupId!==r){let s=-1;for(let o=0;o<i.audioGroupIds.length;o++)if(i.audioGroupIds[o]===r){s=o;break}-1!==s&&s!==i.urlId&&(i.urlId=s,this.canLoad&&this.startLoad())}}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){const r=i.urlId;let s=i.uri;if(e)try{s=e.addDirectives(s)}catch(u){this.warn(`Could not construct new URL with HLS Delivery Directives: ${u}`)}const o=i.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${void 0!==e?.msn?" at sn "+e.msn+" part "+e.part:""} with${o?" Pathway "+o:""} URI ${r+1}/${i.url.length} ${s}`),this.clearTimer(),this.hls.trigger(U.LEVEL_LOADING,{url:s,level:t,id:r,deliveryDirectives:e||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e,t){const i=(s,o)=>o!==t,r=this._levels.filter((s,o)=>o!==e||(s.url.length>1&&void 0!==t?(s.url=s.url.filter(i),s.audioGroupIds&&(s.audioGroupIds=s.audioGroupIds.filter(i)),s.textGroupIds&&(s.textGroupIds=s.textGroupIds.filter(i)),s.urlId=0,!0):(this.steering&&this.steering.removeLevel(s),!1)));this.hls.trigger(U.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:t}){t.forEach((i,r)=>{const{details:s}=i;null!=s&&s.fragments&&s.fragments.forEach(o=>{o.level=r})}),this._levels=t}}function pp(n,e,t){t&&("audio"===e?(n.audioGroupIds||(n.audioGroupIds=[]),n.audioGroupIds[n.url.length-1]=t):"text"===e&&(n.textGroupIds||(n.textGroupIds=[]),n.textGroupIds[n.url.length-1]=t))}function V0(n){const e={};n.forEach(t=>{const i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++})}class z1{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(U.BUFFER_APPENDED,this.onBufferAppended,this),e.on(U.FRAG_BUFFERED,this.onFragBuffered,this),e.on(U.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(U.BUFFER_APPENDED,this.onBufferAppended,this),e.off(U.FRAG_BUFFERED,this.onFragBuffered,this),e.off(U.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let r=i.length;r--;){const s=i[r];if(!s)break;const o=s.end;if(s.start<=e&&null!==o&&e<=o)return s}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:i}=this,r=Object.keys(i);for(let s=r.length;s--;){const o=i[r[s]];if(o?.body.type===t&&o.buffered){const u=o.body;if(u.start<=e&&e<=u.end)return u}}return null}detectEvictedFragments(e,t,i,r){this.timeRanges&&(this.timeRanges[e]=t);const s=r?.fragment.sn||-1;Object.keys(this.fragments).forEach(o=>{const u=this.fragments[o];if(!u||s>=u.body.sn)return;if(!u.buffered&&!u.loaded)return void(u.body.type===i&&this.removeFragment(u.body));const h=u.range[e];h&&h.time.some(m=>{const g=!this.isTimeBuffered(m.startPTS,m.endPTS,t);return g&&this.removeFragment(u.body),g})})}detectPartialFragments(e){const t=this.timeRanges,{frag:i,part:r}=e;if(!t||"initSegment"===i.sn)return;const s=fu(i),o=this.fragments[s];if(!o||o.buffered&&i.gap)return;const u=!i.relurl;Object.keys(t).forEach(h=>{const m=i.elementaryStreams[h];m&&(o.range[h]=this.getBufferedTimes(i,r,u||!0===m.partial,t[h]))}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=i.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),__(o)||this.removeParts(i.sn-1,i.type)):this.removeFragment(o.body)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=i.filter(r=>r.fragment.sn>=e))}fragBuffered(e,t){const i=fu(e);let r=this.fragments[i];!r&&t&&(r=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,i,r){const s={time:[],partial:i},o=e.start,u=e.end,h=e.minEndPTS||u,m=e.maxStartPTS||o;for(let g=0;g<r.length;g++){const y=r.start(g)-this.bufferPadding,E=r.end(g)+this.bufferPadding;if(m>=y&&h<=E){s.time.push({startPTS:Math.max(o,r.start(g)),endPTS:Math.min(u,r.end(g))});break}if(o<E&&u>y)s.partial=!0,s.time.push({startPTS:Math.max(o,r.start(g)),endPTS:Math.min(u,r.end(g))});else if(u<=y)break}return s}getPartialFragment(e){let i,r,s,t=null,o=0;const{bufferPadding:u,fragments:h}=this;return Object.keys(h).forEach(m=>{const g=h[m];g&&__(g)&&(r=g.body.start-u,s=g.body.end+u,e>=r&&e<=s&&(i=Math.min(e-r,s-e),o<=i&&(t=g.body,o=i)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||__(t))}getState(e){const t=fu(e),i=this.fragments[t];return i?i.buffered?__(i)?"PARTIAL":"OK":"APPENDING":"NOT_LOADED"}isTimeBuffered(e,t,i){let r,s;for(let o=0;o<i.length;o++){if(r=i.start(o)-this.bufferPadding,s=i.end(o)+this.bufferPadding,e>=r&&t<=s)return!0;if(t<=r)return!1}return!1}onFragLoaded(e,t){const{frag:i,part:r}=t;if("initSegment"===i.sn||i.bitrateTest)return;const s=r?null:t,o=fu(i);this.fragments[o]={body:i,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:r,timeRanges:s}=t;if("initSegment"===i.sn)return;const o=i.type;if(r){let u=this.activePartLists[o];u||(this.activePartLists[o]=u=[]),u.push(r)}this.timeRanges=s,Object.keys(s).forEach(u=>{this.detectEvictedFragments(u,s[u],o,r)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=fu(e);return!!this.fragments[t]}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,i,r,s){r&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const u=this.fragments[o];if(!u)return;const h=u.body;h.type!==i||r&&!h.gap||h.start<t&&h.end>e&&(u.buffered||s)&&this.removeFragment(h)})}removeFragment(e){const t=fu(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const r=e.sn;this.activePartLists[e.type]=i.filter(s=>s.fragment.sn!==r)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function __(n){var e,t,i;return n.buffered&&(n.body.gap||(null==(e=n.range.video)?void 0:e.partial)||(null==(t=n.range.audio)?void 0:t.partial)||(null==(i=n.range.audiovideo)?void 0:i.partial))}function fu(n){return`${n.type}_${n.level}_${n.urlId}_${n.sn}`}const eC=Math.pow(2,17);class tC{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new mc({type:Jn.NETWORK_ERROR,details:ht.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(i?"part list":"url")),networkDetails:null}));this.abort();const r=this.config,s=r.fLoader,o=r.loader;return new Promise((u,h)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some(x=>"GAP"===x[0]))return void h(iC(e));e.gap=!1}const m=this.loader=e.loader=s?new s(r):new o(r),g=nC(e),y=KT(r.fragLoadPolicy.default),E={loadPolicy:y,timeout:y.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:eC};e.stats=m.stats,m.load(g,E,{onSuccess:(x,I,k,P)=>{this.resetLoader(e,m);let q=x.data;k.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(q.slice(0,16)),q=q.slice(16)),u({frag:e,part:null,payload:q,networkDetails:P})},onError:(x,I,k,P)=>{this.resetLoader(e,m),h(new mc({type:Jn.NETWORK_ERROR,details:ht.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Vs({url:i,data:void 0},x),error:new Error(`HTTP Error ${x.code} ${x.text}`),networkDetails:k,stats:P}))},onAbort:(x,I,k)=>{this.resetLoader(e,m),h(new mc({type:Jn.NETWORK_ERROR,details:ht.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:k,stats:x}))},onTimeout:(x,I,k)=>{this.resetLoader(e,m),h(new mc({type:Jn.NETWORK_ERROR,details:ht.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${E.timeout}ms`),networkDetails:k,stats:x}))},onProgress:(x,I,k,P)=>{t&&t({frag:e,part:null,payload:k,networkDetails:P})}})})}loadPart(e,t,i){this.abort();const r=this.config,s=r.fLoader,o=r.loader;return new Promise((u,h)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void h(iC(e,t));const m=this.loader=e.loader=s?new s(r):new o(r),g=nC(e,t),y=KT(r.fragLoadPolicy.default),E={loadPolicy:y,timeout:y.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:eC};t.stats=m.stats,m.load(g,E,{onSuccess:(x,I,k,P)=>{this.resetLoader(e,m),this.updateStatsFromPart(e,t);const q={frag:e,part:t,payload:x.data,networkDetails:P};i(q),u(q)},onError:(x,I,k,P)=>{this.resetLoader(e,m),h(new mc({type:Jn.NETWORK_ERROR,details:ht.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Vs({url:g.url,data:void 0},x),error:new Error(`HTTP Error ${x.code} ${x.text}`),networkDetails:k,stats:P}))},onAbort:(x,I,k)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,m),h(new mc({type:Jn.NETWORK_ERROR,details:ht.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:k,stats:x}))},onTimeout:(x,I,k)=>{this.resetLoader(e,m),h(new mc({type:Jn.NETWORK_ERROR,details:ht.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${E.timeout}ms`),networkDetails:k,stats:x}))}})})}updateStatsFromPart(e,t){const i=e.stats,r=t.stats,s=r.total;if(i.loaded+=r.loaded,s){const h=Math.round(e.duration/t.duration),m=Math.min(Math.round(i.loaded/s),h),y=(h-m)*Math.round(i.loaded/m);i.total=i.loaded+y}else i.total=Math.max(i.loaded,i.total);const o=i.loading,u=r.loading;o.start?o.first+=u.first-u.start:(o.start=u.start,o.first=u.first),o.end=u.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function nC(n,e=null){const t=e||n,i={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},r=t.byteRangeStartOffset,s=t.byteRangeEndOffset;if(kn(r)&&kn(s)){var o;let u=r,h=s;if("initSegment"===n.sn&&"AES-128"===(null==(o=n.decryptdata)?void 0:o.method)){const m=s-r;m%16&&(h=s+(16-m%16)),0!==r&&(i.resetIV=!0,u=r-16)}i.rangeStart=u,i.rangeEnd=h}return i}function iC(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),i={type:Jn.MEDIA_ERROR,details:ht.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(i.part=e),(e||n).stats.aborted=!0,new mc(i)}class mc extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class j1{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const t in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[t].loader;if(i){if(e&&e!==i.context.frag.type)return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=ht.KEY_LOAD_ERROR,i,r,s){return new mc({type:Jn.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:s,error:i,networkDetails:r})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:i,cc:r}=e;for(let s=0;s<t.length;s++){const o=t[s];if(r<=o.cc&&("initSegment"===i||"initSegment"===o.sn||i<o.sn)){this.emeController.selectKeySystemFormat(o).then(u=>{o.setKeyFormat(u)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var i,r;t&&e.setKeyFormat(t);const s=e.decryptdata;if(!s){const m=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,ht.KEY_LOAD_ERROR,m))}const o=s.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,ht.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let u=this.keyUriToKeyInfo[o];if(null!=(i=u)&&i.decryptdata.key)return s.key=u.decryptdata.key,Promise.resolve({frag:e,keyInfo:u});var h;if(null!=(r=u)&&r.keyLoadPromise)switch(null==(h=u.mediaKeySessionContext)?void 0:h.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return u.keyLoadPromise.then(m=>(s.key=m.keyInfo.decryptdata.key,{frag:e,keyInfo:u}))}switch(u=this.keyUriToKeyInfo[o]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===s.keyFormat?this.loadKeyHTTP(u,e):this.loadKeyEME(u,e);case"AES-128":return this.loadKeyHTTP(u,e);default:return Promise.reject(this.createKeyLoadError(e,ht.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const r=this.emeController.loadKey(i);if(r)return(e.keyLoadPromise=r.then(s=>(e.mediaKeySessionContext=s,i))).catch(s=>{throw e.keyLoadPromise=null,s})}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,s=new(0,i.loader)(i);return t.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((o,u)=>{const h={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},m=i.keyLoadPolicy.default;s.load(h,{loadPolicy:m,timeout:m.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},{onSuccess:(E,x,I,k)=>{const{frag:P,keyInfo:q,url:ae}=I;if(!P.decryptdata||q!==this.keyUriToKeyInfo[ae])return u(this.createKeyLoadError(P,ht.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),k));q.decryptdata.key=P.decryptdata.key=new Uint8Array(E.data),P.keyLoader=null,q.loader=null,o({frag:P,keyInfo:q})},onError:(E,x,I,k)=>{this.resetLoader(x),u(this.createKeyLoadError(t,ht.KEY_LOAD_ERROR,new Error(`HTTP Error ${E.code} loading key ${E.text}`),I,Vs({url:h.url,data:void 0},E)))},onTimeout:(E,x,I)=>{this.resetLoader(x),u(this.createKeyLoadError(t,ht.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),I))},onAbort:(E,x,I)=>{this.resetLoader(x),u(this.createKeyLoadError(t,ht.INTERNAL_ABORTED,new Error("key loading aborted"),I))}})})}resetLoader(e){const{frag:t,keyInfo:i,url:r}=e,s=i.loader;t.keyLoader===s&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[r],s&&s.destroy()}}class G1{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}const W1={length:0,start:()=>0,end:()=>0};class yr{static isBuffered(e,t){try{if(e){const i=yr.getBuffered(e);for(let r=0;r<i.length;r++)if(t>=i.start(r)&&t<=i.end(r))return!0}}catch{}return!1}static bufferInfo(e,t,i){try{if(e){const r=yr.getBuffered(e),s=[];let o;for(o=0;o<r.length;o++)s.push({start:r.start(o),end:r.end(o)});return this.bufferedInfo(s,t,i)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.sort(function(m,g){return m.start-g.start||g.end-m.end});let r=[];if(i)for(let m=0;m<e.length;m++){const g=r.length;if(g){const y=r[g-1].end;e[m].start-y<i?e[m].end>y&&(r[g-1].end=e[m].end):r.push(e[m])}else r.push(e[m])}else r=e;let o,s=0,u=t,h=t;for(let m=0;m<r.length;m++){const g=r[m].start,y=r[m].end;if(t+i>=g&&t<y)u=g,h=y,s=h-t;else if(t+i<g){o=g;break}}return{len:s,start:u||0,end:h||0,nextStart:o}}static getBuffered(e){try{return e.buffered}catch(t){return Re.log("failed to get media.buffered",t),W1}}}class H0{constructor(e,t,i,r=0,s=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=i,this.size=r,this.part=s,this.partial=o}}function z0(n,e){let t=null;for(let i=0,r=n.length;i<r;i++){const s=n[i];if(s&&s.cc===e){t=s;break}}return t}function j0(n,e){if(n){const t=n.start+e;n.start=n.startPTS=t,n.endPTS=t+n.duration}}function G0(n,e){const t=e.fragments;for(let i=0,r=t.length;i<r;i++)j0(t[i],n);e.fragmentHint&&j0(e.fragmentHint,n),e.alignedSliding=!0}function y_(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,i=e.fragments;if(!t.length||!i.length)return;const s=i[Math.round(i.length/2)-1],o=z0(t,s.cc)||t[Math.round(t.length/2)-1],u=s.programDateTime,h=o.programDateTime;null!==u&&null!==h&&G0((h-u)/1e3-(o.start-s.start),n)}class rC{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class Y0{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class Q1{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let r=0;r<4;r++)i[r]=t.getUint32(4*r);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,r=i[0],s=i[1],o=i[2],u=i[3],h=this.invSubMix,m=h[0],g=h[1],y=h[2],E=h[3],x=new Uint32Array(256);let I=0,k=0,P=0;for(P=0;P<256;P++)x[P]=P<128?P<<1:P<<1^283;for(P=0;P<256;P++){let q=k^k<<1^k<<2^k<<3^k<<4;q=q>>>8^255&q^99,e[I]=q,t[q]=I;const ae=x[I],ee=x[ae],ye=x[ee];let De=257*x[q]^16843008*q;r[I]=De<<24|De>>>8,s[I]=De<<16|De>>>16,o[I]=De<<8|De>>>24,u[I]=De,De=16843009*ye^65537*ee^257*ae^16843008*I,m[q]=De<<24|De>>>8,g[q]=De<<16|De>>>16,y[q]=De<<8|De>>>24,E[q]=De,I?(I=ae^x[x[x[ye^ae]]],k^=x[x[k]]):I=k=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,r=0;for(;r<t.length&&i;)i=t[r]===this.key[r],r++;if(i)return;this.key=t;const s=this.keySize=t.length;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size="+s);const o=this.ksRows=4*(s+6+1);let u,h;const m=this.keySchedule=new Uint32Array(o),g=this.invKeySchedule=new Uint32Array(o),y=this.sBox,E=this.rcon,x=this.invSubMix,I=x[0],k=x[1],P=x[2],q=x[3];let ae,ee;for(u=0;u<o;u++)u<s?ae=m[u]=t[u]:(ee=ae,u%s==0?(ee=ee<<8|ee>>>24,ee=y[ee>>>24]<<24|y[ee>>>16&255]<<16|y[ee>>>8&255]<<8|y[255&ee],ee^=E[u/s|0]<<24):s>6&&u%s==4&&(ee=y[ee>>>24]<<24|y[ee>>>16&255]<<16|y[ee>>>8&255]<<8|y[255&ee]),m[u]=ae=(m[u-s]^ee)>>>0);for(h=0;h<o;h++)u=o-h,ee=3&h?m[u]:m[u-4],g[h]=h<4||u<=4?ee:I[y[ee>>>24]]^k[y[ee>>>16&255]]^P[y[ee>>>8&255]]^q[y[255&ee]],g[h]=g[h]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,i){const r=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,u=this.invSubMix,h=u[0],m=u[1],g=u[2],y=u[3],E=this.uint8ArrayToUint32Array_(i);let x=E[0],I=E[1],k=E[2],P=E[3];const q=new Int32Array(e),ae=new Int32Array(q.length);let ee,ye,De,dt,it,Dt,Nt,mt,Hn,dn,Oi,Ss,cr,Ht;const ln=this.networkToHostOrderSwap;for(;t<q.length;){for(Hn=ln(q[t]),dn=ln(q[t+1]),Oi=ln(q[t+2]),Ss=ln(q[t+3]),it=Hn^s[0],Dt=Ss^s[1],Nt=Oi^s[2],mt=dn^s[3],cr=4,Ht=1;Ht<r;Ht++)ee=h[it>>>24]^m[Dt>>16&255]^g[Nt>>8&255]^y[255&mt]^s[cr],ye=h[Dt>>>24]^m[Nt>>16&255]^g[mt>>8&255]^y[255&it]^s[cr+1],De=h[Nt>>>24]^m[mt>>16&255]^g[it>>8&255]^y[255&Dt]^s[cr+2],dt=h[mt>>>24]^m[it>>16&255]^g[Dt>>8&255]^y[255&Nt]^s[cr+3],it=ee,Dt=ye,Nt=De,mt=dt,cr+=4;ee=o[it>>>24]<<24^o[Dt>>16&255]<<16^o[Nt>>8&255]<<8^o[255&mt]^s[cr],ye=o[Dt>>>24]<<24^o[Nt>>16&255]<<16^o[mt>>8&255]<<8^o[255&it]^s[cr+1],De=o[Nt>>>24]<<24^o[mt>>16&255]<<16^o[it>>8&255]<<8^o[255&Dt]^s[cr+2],dt=o[mt>>>24]<<24^o[it>>16&255]<<16^o[Dt>>8&255]<<8^o[255&Nt]^s[cr+3],ae[t]=ln(ee^x),ae[t+1]=ln(dt^I),ae[t+2]=ln(De^k),ae[t+3]=ln(ye^P),x=Hn,I=dn,k=Oi,P=Ss,t+=4}return ae.buffer}}class K0{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}null===this.subtle&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function X1(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?fc(n,0,e-t):n}(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i){return this.useSoftware?new Promise((r,s)=>{this.softwareDecrypt(new Uint8Array(e),t,i);const o=this.flush();o?r(o.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,i)}softwareDecrypt(e,t,i){const{currentIV:r,currentResult:s,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=wd(o,e),this.remainderData=null);const u=this.getValidChunk(e);if(!u.length)return null;r&&(i=r);let h=this.softwareDecrypter;h||(h=this.softwareDecrypter=new Q1),h.expandKey(t);const m=s;return this.currentResult=h.decrypt(u.buffer,0,i),this.currentIV=fc(u,-16).buffer,m||null}webCryptoDecrypt(e,t,i){const r=this.subtle;return(this.key!==t||!this.fastAesKey)&&(this.key=t,this.fastAesKey=new Y0(r,t)),this.fastAesKey.expandKey().then(s=>r?(this.logOnce("WebCrypto AES decrypt"),new rC(r,new Uint8Array(i)).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(Re.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,t,i)))}onWebCryptoError(e,t,i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i);const r=this.flush();if(r)return r.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%16;return i!==e.length&&(t=fc(e,0,i),this.remainderData=fc(e,i)),t}logOnce(e){this.logEnabled&&(Re.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}class v_ extends G1{constructor(e,t,i,r,s){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state="STOPPED",this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=s,this.logPrefix=r,this.log=Re.log.bind(Re,`${r}:`),this.warn=Re.warn.bind(Re,`${r}:`),this.hls=e,this.fragmentLoader=new tC(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new K0(e.config),e.on(U.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state="STOPPED"}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const i=t.partList;if(null!=i&&i.length){const s=i[i.length-1];return yr.isBuffered(this.media,s.start+s.duration/2)}return this.fragmentTracker.isEndListAppended(t.fragments[t.fragments.length-1].type)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levels[this.levelLastLoaded])?void 0:e.details}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);const r=this.config;this.levels&&r.autoStartLoad&&"STOPPED"===this.state&&this.startLoad(r.startPosition)}onMediaDetaching(){const e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:i,mediaBuffer:r,state:s}=this,o=i?i.currentTime:0,u=yr.bufferInfo(r||i,o,e.maxBufferHole);if(this.log(`media seeking to ${kn(o)?o.toFixed(3):o}, state: ${s}`),"ENDED"===this.state)this.resetLoadingState();else if(t){const h=e.maxFragLookUpTolerance,m=t.start-h,g=t.start+t.duration+h;if(!u.len||g<u.start||m>u.end){const y=o>g;(o<m||y)&&(y&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}i&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),!this.loadedmetadata&&!u.len&&(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state="STOPPED",this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){this._doFragLoad(e,t,i,s=>{if(this.fragContextChanged(e))return this.warn(`Fragment ${e.sn}${s.part?" p: "+s.part.index:""} of level ${e.level} was dropped during download.`),void this.fragmentTracker.removeFragment(e);e.stats.chunkCount++,this._handleFragmentLoadProgress(s)}).then(s=>{if(!s)return;const o=this.state;this.fragContextChanged(e)?("FRAG_LOADING"===o||!this.fragCurrent&&"PARSING"===o)&&(this.fragmentTracker.removeFragment(e),this.state="IDLE"):("payload"in s&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(U.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s))}).catch(s=>{"STOPPED"===this.state||"ERROR"===this.state||(this.warn(s),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this;if("APPENDING"===i.getState(e)){const o=this.getFwdBufferInfo(this.mediaBuffer,e.type),u=Math.max(e.duration,o?o.len:this.config.maxBufferLength);this.reduceMaxBufferLength(u)&&i.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),"PARTIAL"===i.getState(e)&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,i=null){e-t&&this.hls.trigger(U.BUFFER_FLUSHING,{startOffset:e,endOffset:t,type:i})}_loadInitSegment(e,t){this._doFragLoad(e,t).then(i=>{if(!i||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:r}=this,{payload:s}=i,o=e.decryptdata;if(s&&s.byteLength>0&&o&&o.key&&o.iv&&"AES-128"===o.method){const u=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),o.key.buffer,o.iv.buffer).catch(h=>{throw r.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.FRAG_DECRYPT_ERROR,fatal:!1,error:h,reason:h.message,frag:e}),h}).then(h=>{const m=self.performance.now();return r.trigger(U.FRAG_DECRYPTED,{frag:e,payload:h,stats:{tstart:u,tdecrypt:m}}),i.payload=h,i})}return i}).then(i=>{const{fragCurrent:r,hls:s,levels:o}=this;if(!o)throw new Error("init load aborted, missing levels");const u=e.stats;this.state="IDLE",t.fragmentError=0,e.data=new Uint8Array(i.payload),u.parsing.start=u.buffering.start=self.performance.now(),u.parsing.end=u.buffering.end=self.performance.now(),i.frag===r&&s.trigger(U.FRAG_BUFFERED,{stats:u,frag:r,part:null,id:e.type}),this.tick()}).catch(i=>{"STOPPED"===this.state||"ERROR"===this.state||(this.warn(i),this.resetFragmentLoading(e))})}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId}fragBufferedComplete(e,t){var i,r,s,o;const u=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===ei.MAIN?"level":"track"} ${e.level} (frag:[${(null!=(i=e.startPTS)?i:NaN).toFixed(3)}-${(null!=(r=e.endPTS)?r:NaN).toFixed(3)}] > buffer:${u?function(n){let e="";const t=n.length;for(let i=0;i<t;i++)e+=`[${n.start(i).toFixed(3)}-${n.end(i).toFixed(3)}]`;return e}(yr.getBuffered(u)):"(detached)"})`),this.state="IDLE",u&&(!this.loadedmetadata&&e.type==ei.MAIN&&u.buffered.length&&(null==(s=this.fragCurrent)?void 0:s.sn)===(null==(o=this.fragPrevious)?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:r,partsLoaded:s}=e,o=!s||0===s.length||s.some(h=>!h),u=new H0(i.level,i.sn,i.stats.chunkCount+1,0,r?r.index:-1,!o);t.flush(u)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,r){var s;const o=t?.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let u=null;if(!e.encrypted||null!=(s=e.decryptdata)&&s.key?!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments):(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${e.level}`),this.state="KEY_LOADING",this.fragCurrent=e,u=this.keyLoader.load(e).then(g=>{if(!this.fragContextChanged(g.frag))return this.hls.trigger(U.KEY_LOADED,g),"KEY_LOADING"===this.state&&(this.state="IDLE"),g}),this.hls.trigger(U.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(u=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),i=Math.max(e.start,i||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){const g=o.partList;if(g&&r){i>e.end&&o.fragmentHint&&(e=o.fragmentHint);const y=this.getNextPart(g,e,i);if(y>-1){const E=g[y];let x;return this.log(`Loading part sn: ${e.sn} p: ${E.index} cc: ${e.cc} of playlist [${o.startSN}-${o.endSN}] parts [0-${y}-${g.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=E.start+E.duration,this.state="FRAG_LOADING",x=u?u.then(I=>!I||this.fragContextChanged(I.frag)?null:this.doFragPartsLoad(e,E,t,r)).catch(I=>this.handleFragLoadError(I)):this.doFragPartsLoad(e,E,t,r).catch(I=>this.handleFragLoadError(I)),this.hls.trigger(U.FRAG_LOADING,{frag:e,part:E,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):x}if(!e.url||this.loadedEndOfParts(g,i))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${o?"of ["+o.startSN+"-"+o.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),kn(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state="FRAG_LOADING";const h=this.config.progressive;let m;return m=h&&u?u.then(g=>!g||this.fragContextChanged(g?.frag)?null:this.fragmentLoader.load(e,r)).catch(g=>this.handleFragLoadError(g)):Promise.all([this.fragmentLoader.load(e,h?r:void 0),u]).then(([g])=>(!h&&g&&r&&r(g),g)).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(U.FRAG_LOADING,{frag:e,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):m}doFragPartsLoad(e,t,i,r){return new Promise((s,o)=>{var u;const h=[],m=null==(u=i.details)?void 0:u.partList,g=y=>{this.fragmentLoader.loadPart(e,y,r).then(E=>{h[y.index]=E;const x=E.part;this.hls.trigger(U.FRAG_LOADED,E);const I=YT(i,e.sn,y.index+1)||N0(m,e.sn,y.index+1);if(!I)return s({frag:e,part:x,partsLoaded:h});g(I)}).catch(o)};g(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===ht.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(U.ERROR,t)}else this.hls.trigger(U.ERROR,{type:Jn.OTHER_ERROR,details:ht.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||"PARSING"!==this.state)return void(!this.fragCurrent&&"STOPPED"!==this.state&&"ERROR"!==this.state&&(this.state="IDLE"));const{frag:i,part:r,level:s}=t,o=self.performance.now();i.stats.parsing.end=o,r&&(r.stats.parsing.end=o),this.updateLevelTiming(i,r,s,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:r,sn:s,part:o}=e;if(null==t||!t[r])return this.warn(`Levels object was unset while buffering fragment ${s} of level ${r}. The current chunk will not be buffered.`),null;const u=t[r],h=o>-1?YT(u,s,o):null,m=h?h.fragment:function U1(n,e,t){if(null==n||!n.details)return null;const i=n.details;let r=i.fragments[e-i.startSN];return r||(r=i.fragmentHint,r&&r.sn===e)?r:e<i.startSN&&t&&t.sn===e?t:null}(u,s,i);return m?(i&&i!==m&&(m.stats=i.stats),{frag:m,part:h,level:u}):null}bufferFragmentData(e,t,i,r,s){var o;if(!e||"PARSING"!==this.state)return;const{data1:u,data2:h}=e;let m=u;if(u&&h&&(m=wd(u,h)),null!=(o=m)&&o.length&&(this.hls.trigger(U.BUFFER_APPENDING,{type:e.type,frag:t,part:i,chunkMeta:r,parent:t.type,data:m}),e.dropped&&e.independent&&!i)){if(s)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!yr.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const i=t.currentTime,r=yr.bufferInfo(t,i,0),o=Math.min(2*this.config.maxFragLookUpTolerance,.25*e.duration),u=Math.max(Math.min(e.start-o,r.end-o),i+o);e.start-u>o&&this.flushMainBuffer(u,e.start)}getFwdBufferInfo(e,t){const i=this.getLoadPosition();return kn(i)?this.getFwdBufferInfoAtPos(e,i,t):null}getFwdBufferInfoAtPos(e,t,i){const{config:{maxBufferHole:r}}=this,s=yr.bufferInfo(e,t,r);if(0===s.len&&void 0!==s.nextStart){const o=this.fragmentTracker.getBufferedFrag(t,i);if(o&&s.nextStart<o.end)return yr.bufferInfo(e,t,Math.max(s.nextStart,r))}return s}getMaxBufferLength(e){const{config:t}=this;let i;return i=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e){const t=this.config;return t.maxMaxBufferLength>=(e||t.maxBufferLength)&&(t.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${t.maxMaxBufferLength}s`),!0)}getAppendedFrag(e,t=ei.MAIN){const i=this.fragmentTracker.getAppendedFrag(e,ei.MAIN);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){const i=t.fragments,r=i.length;if(!r)return null;const{config:s}=this,o=i[0].start;let u;if(t.live){const h=s.initialLiveManifestSize;if(r<h)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${h})`),null;!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition&&(u=this.getInitialLiveFragment(t,i),this.startPosition=u?this.hls.liveSyncPosition||u.start:e)}else e<=o&&(u=i[0]);return u||(u=this.getFragmentAtPosition(e,s.lowLatencyMode?t.partEnd:t.fragmentEnd,t)),this.mapToInitFragWhenRequired(u)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return("OK"===i||"PARTIAL"===i&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,r,s){const o=e.gap,u=this.getNextFragment(this.nextLoadPosition,t);if(null===u)return u;if(e=u,o&&e&&!e.gap&&i.nextStart){const h=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,r);if(null!==h&&i.len+h.len>=s)return this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,i){let r=-1,s=!1,o=!0;for(let u=0,h=e.length;u<h;u++){const m=e[u];if(o=o&&!m.independent,r>-1&&i<m.start)break;const g=m.loaded;g?r=-1:(s||m.independent||o)&&m.fragment===t&&(r=u),s=g}return r}loadedEndOfParts(e,t){const i=e[e.length-1];return i&&t>i.start&&i.loaded}getInitialLiveFragment(e,t){const i=this.fragPrevious;let r=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),r=function XT(n,e,t){if(null===e||!Array.isArray(n)||!n.length||!kn(e))return null;if(e<(n[0].programDateTime||0))return null;if(e>=(n[n.length-1].endProgramDateTime||0))return null;t=t||0;for(let s=0;s<n.length;++s){const o=n[s];if(fp(e,t,o))return o}return null}(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const s=i.sn+1;if(s>=e.startSN&&s<=e.endSN){const o=t[s-e.startSN];i.cc===o.cc&&(r=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=function $1(n,e){return ZT.search(n,t=>t.cc<e?1:t.cc>e?-1:0)}(t,i.cc),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const s=this.hls.liveSyncPosition;null!==s&&(r=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,i){const{config:r}=this;let{fragPrevious:s}=this,{fragments:o,endSN:u}=i;const{fragmentHint:h}=i,m=r.maxFragLookUpTolerance,g=i.partList,y=!!(r.lowLatencyMode&&null!=g&&g.length&&h);let E;if(y&&h&&!this.bitrateTest&&(o=o.concat(h),u=h.sn),E=e<t?hp(s,o,e,e>t-m?0:m):o[o.length-1],E){const x=E.sn-i.startSN,I=this.fragmentTracker.getState(E);if(("OK"===I||"PARTIAL"===I&&E.gap)&&(s=E),s&&E.sn===s.sn&&(!y||g[0].fragment.sn>E.sn)&&s&&E.level===s.level){const P=o[x+1];E=E.sn<u&&"OK"!==this.fragmentTracker.getState(P)?P:null}}return E}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const r=this.hls.liveSyncPosition,s=i.currentTime,u=e.edge,h=s>=e.fragments[0].start-t.maxFragLookUpTolerance&&s<=u;null!==r&&i.duration>r&&(s<r||!h)&&(!h&&i.readyState<4||s<u-(void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration))&&(this.loadedmetadata||(this.nextLoadPosition=r),i.readyState&&(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${u}, reset currentTime to : ${r.toFixed(3)}`),i.currentTime=r))}alignPlaylists(e,t){const{levels:i,levelLastLoaded:r,fragPrevious:s}=this,o=null!==r?i[r]:null,u=e.fragments.length;if(!u)return this.warn("No fragments in live playlist"),0;const h=e.fragments[0].start,m=!t,g=e.alignedSliding&&kn(h);if(m||!g&&!h){!function K1(n,e,t){e&&(function Z1(n,e,t){if(function Y1(n,e,t){return!(!e.details||!(t.endCC>t.startCC||n&&n.cc<t.startCC))}(n,t,e)){const i=function q1(n,e,t=0){const i=n.fragments,r=e.fragments;if(!r.length||!i.length)return void Re.log("No fragments to align");const s=z0(i,r[0].cc);if(s&&(!s||s.startPTS))return s;Re.log("No frag in previous level to align on")}(t.details,e);i&&kn(i.start)&&(Re.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),G0(i.start,e))}}(n,t,e),!t.alignedSliding&&e.details&&function W0(n,e){if(!e.fragments.length||!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=e.fragments[0].programDateTime,i=n.fragments[0].programDateTime,r=(i-t)/1e3+e.fragments[0].start;r&&kn(r)&&(Re.log(`Adjusting PTS using programDateTime delta ${i-t}ms, sliding:${r.toFixed(3)} ${n.url} `),G0(r,n))}(t,e.details),!t.alignedSliding&&e.details&&!t.skippedSegments&&B1(e.details,t))}(s,o,e);const y=e.fragments[0].start;return this.log(`Live playlist sliding: ${y.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${s?s.sn:"na"} fragments: ${u}`),y}return h}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let i=this.startPosition;if(i<t&&(i=-1),-1===i||-1===this.lastCurrentTime){const r=null!==this.startTimeOffset,s=r?this.startTimeOffset:e.startTimeOffset;null!==s&&kn(s)?(i=t+s,s<0&&(i+=e.totalduration),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Start time offset ${s} found in ${r?"multivariant":"media"} playlist, adjust startPosition to ${i}`),this.startPosition=i):e.live?i=this.hls.liveSyncPosition||t:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&"FRAG_LOADING_WAITING_RETRY"!==this.state)&&(this.state="IDLE")}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const y=this.getCurrentContext(t.chunkMeta);y&&(t.frag=y.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;var r;if(this.fragContextChanged(i))return void this.warn(`Frag load error must match current frag to retry ${i.url} > ${null==(r=this.fragCurrent)?void 0:r.url}`);const s=t.details===ht.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(i,!0);const o=t.errorAction,{action:u,retryCount:h=0,retryConfig:m}=o||{};if(o&&5===u&&m){var g;this.resetStartWhenNotLoaded(null!=(g=this.levelLastLoaded)?g:i.level);const y=B0(m,h);this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${h+1}/${m.maxNumRetry} in ${y}ms`),o.resolved=!0,this.retryDate=self.performance.now()+y,this.state="FRAG_LOADING_WAITING_RETRY"}else m&&o?(this.resetFragmentErrors(e),h<m.maxNumRetry?s||(o.resolved=!0):Re.warn(`${t.details} reached or exceeded max retry (${h})`)):this.state=2===o?.action?"WAITING_LEVEL":"ERROR";this.tickImmediate()}reduceLengthAndFlushBuffer(e){if("PARSING"===this.state||"PARSED"===this.state){const t=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,t),r=i&&i.len>.5;r&&this.reduceMaxBufferLength(i.len);const s=!r;return s&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${t} buffer`),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===ei.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),"STOPPED"!==this.state&&(this.state="IDLE")}afterBufferFlushed(e,t,i){if(!e)return;const r=yr.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,i),"ENDED"===this.state&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state="IDLE"}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=this.levels?this.levels[e].details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){var t;this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(null!=(t=this.levelLastLoaded)?t:e.level),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,r){var s;const o=i.details;if(o){if(Object.keys(e.elementaryStreams).reduce((h,m)=>{const g=e.elementaryStreams[m];if(g){const y=g.endPTS-g.startPTS;if(y<=0)return this.warn(`Could not parse fragment ${e.sn} ${m} duration reliably (${y})`),h||!1;const E=r?0:WT(o,e,g.startPTS,g.endPTS,g.startDTS,g.endDTS);return this.hls.trigger(U.LEVEL_PTS_UPDATED,{details:o,level:i,drift:E,type:m,frag:e,start:g.startPTS,end:g.endPTS}),!0}return h},!1))i.fragmentError=0;else if(null===(null==(s=this.transmuxer)?void 0:s.error)){const h=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(0===i.fragmentError&&(i.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(h.message),this.hls.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.FRAG_PARSING_ERROR,fatal:!1,error:h,frag:e,reason:`Found no media in msn ${e.sn} of level "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state="PARSED",this.hls.trigger(U.FRAG_PARSED,{frag:e,part:t})}else this.warn("level.details undefined")}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){var t,i,r;"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(null!=(t=null!=(i=this.levelLastLoaded)?i:null==(r=this.fragCurrent)?void 0:r.level)?t:0),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function oC(){return self.SourceBuffer||self.WebKitSourceBuffer}function Cl(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Q0{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=wd(this.cachedData,e),this.cachedData=null);let s,i=sp(e,0),r=i?i.length:0;const o=this._audioTrack,u=this._id3Track,h=i?(n=>{const e=ET(n);for(let t=0;t<e.length;t++){const i=e[t];if(b0(i))return E0(i)}})(i):void 0,m=e.length;for((null===this.basePTS||0===this.frameIndex&&kn(h))&&(this.basePTS=J0(h,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&u.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:"org.id3",duration:Number.POSITIVE_INFINITY});r<m;){if(this.canParse(e,r)){const g=this.appendFrame(o,e,r);g?(this.frameIndex++,this.lastPTS=g.sample.pts,r+=g.length,s=r):r=m}else E1(e,r)?(i=sp(e,r),u.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:"org.id3",duration:Number.POSITIVE_INFINITY}),r+=i.length,s=r):r++;if(r===m&&s!==m){const g=fc(e,s);this.cachedData=this.cachedData?wd(this.cachedData,g):g}}return{audioTrack:o,videoTrack:Cl(),id3Track:u,textTrack:Cl()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Cl(),id3Track:this._id3Track,textTrack:Cl()}}destroy(){}}const J0=(n,e,t)=>kn(n)?90*n:9e4*e+(t?9e4*t.baseTime/t.timescale:0);function eb(n,e){return 255===n[e]&&240==(246&n[e+1])}function tb(n,e){return 1&n[e+1]?7:9}function b_(n,e){return(3&n[e+3])<<11|n[e+4]<<3|(224&n[e+5])>>>5}function w_(n,e){return e+1<n.length&&eb(n,e)}function nM(n,e){if(w_(n,e)){const t=tb(n,e);if(e+t>=n.length)return!1;const i=b_(n,e);if(i<=t)return!1;const r=e+i;return r===n.length||w_(n,r)}return!1}function nb(n,e,t,i,r){if(!n.samplerate){const s=function lC(n,e,t,i){let r,s,o,u;const h=navigator.userAgent.toLowerCase(),m=i,g=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=1+((192&e[t+2])>>>6);const y=(60&e[t+2])>>>2;if(!(y>g.length-1))return o=(1&e[t+2])<<2,o|=(192&e[t+3])>>>6,Re.log(`manifest codec:${i}, ADTS type:${r}, samplingIndex:${y}`),/firefox/i.test(h)?y>=6?(r=5,u=new Array(4),s=y-3):(r=2,u=new Array(2),s=y):-1!==h.indexOf("android")?(r=2,u=new Array(2),s=y):(r=5,u=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&y>=6?s=y-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(y>=6&&1===o||/vivaldi/i.test(h))||!i&&1===o)&&(r=2,u=new Array(2)),s=y)),u[0]=r<<3,u[0]|=(14&y)>>1,u[1]|=(1&y)<<7,u[1]|=o<<3,5===r&&(u[1]|=(14&s)>>1,u[2]=(1&s)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:g[y],channelCount:o,codec:"mp4a.40."+r,manifestCodec:m};n.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${y}`})}(e,t,i,r);if(!s)return;n.config=s.config,n.samplerate=s.samplerate,n.channelCount=s.channelCount,n.codec=s.codec,n.manifestCodec=s.manifestCodec,Re.log(`parsed codec:${n.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function iM(n){return 9216e4/n}function uC(n,e,t,i,r){const o=i+r*iM(n.samplerate),u=function cC(n,e){const t=tb(n,e);if(e+t<=n.length){const i=b_(n,e)-t;if(i>0)return{headerLength:t,frameLength:i}}}(e,t);let h;if(u){const{frameLength:y,headerLength:E}=u,x=E+y,I=Math.max(0,t+x-e.length);I?(h=new Uint8Array(x-E),h.set(e.subarray(t+E,e.length),0)):h=e.subarray(t+E,t+x);const k={unit:h,pts:o};return I||n.samples.push(k),{sample:k,length:x,missing:I}}const m=e.length-t;return h=new Uint8Array(m),h.set(e.subarray(t,e.length),0),{sample:{unit:h,pts:o},length:m,missing:-1}}const UL=/\/emsg[-/]ID3/i;let E_=null;const dC=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],oM=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],aM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],lM=[0,1,1,4];function hC(n,e,t,i,r){if(t+24>e.length)return;const s=fC(e,t);if(s&&t+s.frameLength<=e.length){const u=i+r*(9e4*s.samplesPerFrame/s.sampleRate),h={unit:e.subarray(t,t+s.frameLength),pts:u,dts:u};return n.config=[],n.channelCount=s.channelCount,n.samplerate=s.sampleRate,n.samples.push(h),{sample:h,length:s.frameLength,missing:0}}}function fC(n,e){const t=n[e+1]>>3&3,i=n[e+1]>>1&3,r=n[e+2]>>4&15,s=n[e+2]>>2&3;if(1!==t&&0!==r&&15!==r&&3!==s){const u=n[e+3]>>6,m=1e3*dC[14*(3===t?3-i:3===i?3:4)+r-1],y=oM[3*(3===t?0:2===t?1:2)+s],E=3===u?1:2,x=aM[t][i],I=lM[i],k=8*x*I,P=Math.floor(x*m/y+(n[e+2]>>1&1))*I;if(null===E_){const ee=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);E_=ee?parseInt(ee[1]):0}return!!E_&&E_<=87&&2===i&&m>=224e3&&0===u&&(n[e+3]=128|n[e+3]),{sampleRate:y,channelCount:E,frameLength:P,samplesPerFrame:k}}}function ib(n,e){return 255===n[e]&&224==(224&n[e+1])&&0!=(6&n[e+1])}function mC(n,e){return e+1<n.length&&ib(n,e)}function uM(n,e){if(e+1<n.length&&ib(n,e)){const i=fC(n,e);let r=4;null!=i&&i.frameLength&&(r=i.frameLength);const s=e+r;return s===n.length||mC(n,s)}return!1}class df{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,r=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");r.set(e.subarray(i,i+s)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*s,this.bytesAvailable-=s}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&Re.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let r,t=8,i=8;for(let s=0;s<e;s++)0!==i&&(r=this.readEG(),i=(t+r+256)%256),t=0===i?t:i}readSPS(){let s,o,u,e=0,t=0,i=0,r=0;const h=this.readUByte.bind(this),m=this.readBits.bind(this),g=this.readUEG.bind(this),y=this.readBoolean.bind(this),E=this.skipBits.bind(this),x=this.skipEG.bind(this),I=this.skipUEG.bind(this),k=this.skipScalingList.bind(this);h();const P=h();if(m(5),E(3),h(),I(),100===P||110===P||122===P||244===P||44===P||83===P||86===P||118===P||128===P){const dt=g();if(3===dt&&E(1),I(),I(),E(1),y())for(o=3!==dt?8:12,u=0;u<o;u++)y()&&k(u<6?16:64)}I();const q=g();if(0===q)g();else if(1===q)for(E(1),x(),x(),s=g(),u=0;u<s;u++)x();I(),E(1);const ae=g(),ee=g(),ye=m(1);0===ye&&E(1),E(1),y()&&(e=g(),t=g(),i=g(),r=g());let De=[1,1];if(y()&&y())switch(h()){case 1:De=[1,1];break;case 2:De=[12,11];break;case 3:De=[10,11];break;case 4:De=[16,11];break;case 5:De=[40,33];break;case 6:De=[24,11];break;case 7:De=[20,11];break;case 8:De=[32,11];break;case 9:De=[80,33];break;case 10:De=[18,11];break;case 11:De=[15,11];break;case 12:De=[64,33];break;case 13:De=[160,99];break;case 14:De=[4,3];break;case 15:De=[3,2];break;case 16:De=[2,1];break;case 255:De=[h()<<8|h(),h()<<8|h()]}return{width:Math.ceil(16*(ae+1)-2*e-2*t),height:(2-ye)*(ee+1)*16-(ye?2:4)*(i+r),pixelRatio:De}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class pC{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new K0(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,i){const r=e[t].unit;if(r.length<=16)return;const s=r.subarray(16,r.length-r.length%16),o=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(o).then(u=>{const h=new Uint8Array(u);r.set(h,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)})}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,i),this.decrypter.isSync())))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)i.set(e.subarray(s,s+16),r);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)e.set(i.subarray(r,r+16),s);return e}decryptAvcSample(e,t,i,r,s){const o=I0(s.data),u=this.getAvcEncryptedData(o);this.decryptBuffer(u.buffer).then(h=>{s.data=this.getAvcDecryptedUnit(o,h),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,r)})}decryptAvcSamples(e,t,i,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length)return void r();const s=e[t].units;for(;!(i>=s.length);i++){const o=s[i];if(!(o.data.length<=48||1!==o.type&&5!==o.type||(this.decryptAvcSample(e,t,i,r,o),this.decrypter.isSync())))return}}}}const zs=188;class pc{constructor(e,t,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=i}static probe(e){const t=pc.syncOffset(e);return t>0&&Re.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),-1!==t}static syncOffset(e){const t=e.length;let i=Math.min(940,e.length-zs)+1,r=0;for(;r<i;){let s=!1,o=-1,u=0;for(let h=r;h<t;h+=zs){if(71!==e[h]){if(u)return-1;break}if(u++,-1===o&&(o=h,0!==o&&(i=Math.min(o+18612,e.length-zs)+1)),s||(s=0===x_(e,h)),s&&u>1&&(0===o&&u>2||h+zs>i))return o}r++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:x0[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,i,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=pc.createTrack("video"),this._audioTrack=pc.createTrack("audio",r),this._id3Track=pc.createTrack("id3"),this._txtTrack=pc.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i,this._duration=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_avcTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(e,t,i=!1,r=!1){let s;i||(this.sampleAes=null);const o=this._avcTrack,u=this._audioTrack,h=this._id3Track,m=this._txtTrack;let g=o.pid,y=o.pesData,E=u.pid,x=h.pid,I=u.pesData,k=h.pesData,P=null,q=this.pmtParsed,ae=this._pmtId,ee=e.length;if(this.remainderData&&(ee=(e=wd(this.remainderData,e)).length,this.remainderData=null),ee<zs&&!r)return this.remainderData=e,{audioTrack:u,videoTrack:o,id3Track:h,textTrack:m};const ye=Math.max(0,pc.syncOffset(e));ee-=(ee-ye)%zs,ee<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,ee,e.buffer.byteLength-ee));let De=0;for(let it=ye;it<ee;it+=zs)if(71===e[it]){const Dt=!!(64&e[it+1]),Nt=x_(e,it);let Hn;if((48&e[it+3])>>4>1){if(Hn=it+5+e[it+4],Hn===it+zs)continue}else Hn=it+4;switch(Nt){case g:Dt&&(y&&(s=yp(y))&&this.parseAVCPES(o,m,s,!1),y={data:[],size:0}),y&&(y.data.push(e.subarray(Hn,it+zs)),y.size+=it+zs-Hn);break;case E:if(Dt){if(I&&(s=yp(I)))switch(u.segmentCodec){case"aac":this.parseAACPES(u,s);break;case"mp3":this.parseMPEGPES(u,s)}I={data:[],size:0}}I&&(I.data.push(e.subarray(Hn,it+zs)),I.size+=it+zs-Hn);break;case x:Dt&&(k&&(s=yp(k))&&this.parseID3PES(h,s),k={data:[],size:0}),k&&(k.data.push(e.subarray(Hn,it+zs)),k.size+=it+zs-Hn);break;case 0:Dt&&(Hn+=e[Hn]+1),ae=this._pmtId=gC(e,Hn);break;case ae:{Dt&&(Hn+=e[Hn]+1);const dn=dM(e,Hn,this.typeSupported,i);g=dn.avc,g>0&&(o.pid=g),E=dn.audio,E>0&&(u.pid=E,u.segmentCodec=dn.segmentCodec),x=dn.id3,x>0&&(h.pid=x),null!==P&&!q&&(Re.warn(`MPEG-TS PMT found at ${it} after unknown PID '${P}'. Backtracking to sync byte @${ye} to parse all TS packets.`),P=null,it=ye-188),q=this.pmtParsed=!0;break}case 17:case 8191:break;default:P=Nt}}else De++;if(De>0){const it=new Error(`Found ${De} TS packet/s that do not start with 0x47`);this.observer.emit(U.ERROR,U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.FRAG_PARSING_ERROR,fatal:!1,error:it,reason:it.message})}o.pesData=y,u.pesData=I,h.pesData=k;const dt={audioTrack:u,videoTrack:o,id3Track:h,textTrack:m};return r&&this.extractRemainingSamples(dt),dt}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:r,textTrack:s}=e,o=i.pesData,u=t.pesData,h=r.pesData;let m;if(o&&(m=yp(o))?(this.parseAVCPES(i,s,m,!0),i.pesData=null):i.pesData=o,u&&(m=yp(u))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,m);break;case"mp3":this.parseMPEGPES(t,m)}t.pesData=null}else null!=u&&u.size&&Re.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=u;h&&(m=yp(h))?(this.parseID3PES(r,m),r.pesData=null):r.pesData=h}demuxSampleAes(e,t,i){const r=this.demux(e,i,!0,!this.config.progressive),s=this.sampleAes=new pC(this.observer,this.config,t);return this.decrypt(r,s)}decrypt(e,t){return new Promise(i=>{const{audioTrack:r,videoTrack:s}=e;r.samples&&"aac"===r.segmentCodec?t.decryptAacSamples(r.samples,0,()=>{s.samples?t.decryptAvcSamples(s.samples,0,0,()=>{i(e)}):i(e)}):s.samples&&t.decryptAvcSamples(s.samples,0,0,()=>{i(e)})})}destroy(){this._duration=0}parseAVCPES(e,t,i,r){const s=this.parseAVCNALu(e,i.data);let u,o=this.avcSample,h=!1;i.data=null,o&&s.length&&!e.audFound&&(hf(o,e),o=this.avcSample=_p(!1,i.pts,i.dts,"")),s.forEach(m=>{var g;switch(m.type){case 1:{let E=!1;u=!0;const x=m.data;if(h&&x.length>4){const I=new df(x).readSliceType();(2===I||4===I||7===I||9===I)&&(E=!0)}var y;E&&null!=(y=o)&&y.frame&&!o.key&&(hf(o,e),o=this.avcSample=null),o||(o=this.avcSample=_p(!0,i.pts,i.dts,"")),o.frame=!0,o.key=E;break}case 5:u=!0,null!=(g=o)&&g.frame&&!o.key&&(hf(o,e),o=this.avcSample=null),o||(o=this.avcSample=_p(!0,i.pts,i.dts,"")),o.key=!0,o.frame=!0;break;case 6:u=!0,C0(m.data,1,i.pts,t.samples);break;case 7:if(u=!0,h=!0,!e.sps){const E=m.data,I=new df(E).readSPS();e.width=I.width,e.height=I.height,e.pixelRatio=I.pixelRatio,e.sps=[E],e.duration=this._duration;const k=E.subarray(1,4);let P="avc1.";for(let q=0;q<3;q++){let ae=k[q].toString(16);ae.length<2&&(ae="0"+ae),P+=ae}e.codec=P}break;case 8:u=!0,e.pps||(e.pps=[m.data]);break;case 9:u=!1,e.audFound=!0,o&&hf(o,e),o=this.avcSample=_p(!1,i.pts,i.dts,"");break;case 12:u=!0;break;default:u=!1,o&&(o.debug+="unknown NAL "+m.type+" ")}o&&u&&o.units.push(m)}),r&&o&&(hf(o,e),this.avcSample=null)}getLastNalUnit(e){var t;let r,i=this.avcSample;if((!i||0===i.units.length)&&(i=e[e.length-1]),null!=(t=i)&&t.units){const s=i.units;r=s[s.length-1]}return r}parseAVCNALu(e,t){const i=t.byteLength;let r=e.naluState||0;const s=r,o=[];let h,m,g,u=0,y=-1,E=0;for(-1===r&&(y=0,E=31&t[0],r=0,u=1);u<i;)if(h=t[u++],r)if(1!==r)if(h)if(1===h){if(y>=0){const x={data:t.subarray(y,u-r-1),type:E};o.push(x)}else{const x=this.getLastNalUnit(e.samples);if(x&&(s&&u<=4-s&&x.state&&(x.data=x.data.subarray(0,x.data.byteLength-s)),m=u-r-1,m>0)){const I=new Uint8Array(x.data.byteLength+m);I.set(x.data,0),I.set(t.subarray(0,m),x.data.byteLength),x.data=I,x.state=0}}u<i?(g=31&t[u],y=u,E=g,r=0):r=-1}else r=0;else r=3;else r=h?0:2;else r=h?0:1;if(y>=0&&r>=0){const x={data:t.subarray(y,i),type:E,state:r};o.push(x)}if(0===o.length){const x=this.getLastNalUnit(e.samples);if(x){const I=new Uint8Array(x.data.byteLength+t.byteLength);I.set(x.data,0),I.set(t,x.data.byteLength),x.data=I}}return e.naluState=r,o}parseAACPES(e,t){let i=0;const r=this.aacOverFlow;let o,u,h,s=t.data;if(r){this.aacOverFlow=null;const y=r.missing,E=r.sample.unit.byteLength;if(-1===y){const x=new Uint8Array(E+s.byteLength);x.set(r.sample.unit,0),x.set(s,E),s=x}else{const x=E-y;r.sample.unit.set(s.subarray(0,y),x),e.samples.push(r.sample),i=r.missing}}for(o=i,u=s.length;o<u-1&&!w_(s,o);o++);if(o!==i){let y;const E=o<u-1;y=E?`AAC PES did not start with ADTS header,offset:${o}`:"No ADTS header found in AAC PES";const x=new Error(y);if(Re.warn(`parsing error: ${y}`),this.observer.emit(U.ERROR,U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.FRAG_PARSING_ERROR,fatal:!1,levelRetry:E,error:x,reason:y}),!E)return}if(nb(e,this.observer,s,o,this.audioCodec),void 0!==t.pts)h=t.pts;else{if(!r)return void Re.warn("[tsdemuxer]: AAC PES unknown PTS");{const y=iM(e.samplerate);h=r.sample.pts+y}}let g,m=0;for(;o<u;){if(g=uC(e,s,o,h,m),o+=g.length,g.missing){this.aacOverFlow=g;break}for(m++;o<u-1&&!w_(s,o);o++);}}parseMPEGPES(e,t){const i=t.data,r=i.length;let s=0,o=0;const u=t.pts;if(void 0!==u)for(;o<r;)if(mC(i,o)){const h=hC(e,i,o,u,s);if(!h)break;o+=h.length,s++}else o++;else Re.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseID3PES(e,t){if(void 0===t.pts)return void Re.warn("[tsdemuxer]: ID3 PES unknown PTS");const i=bs({},t,{type:this._avcTrack?va_emsg:"org.id3",duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function _p(n,e,t,i){return{key:n,frame:!1,pts:e,dts:t,units:[],debug:i,length:0}}function x_(n,e){return((31&n[e+1])<<8)+n[e+2]}function gC(n,e){return(31&n[e+10])<<8|n[e+11]}function dM(n,e,t,i){const r={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},o=e+3+((15&n[e+1])<<8|n[e+2])-4;for(e+=12+((15&n[e+10])<<8|n[e+11]);e<o;){const h=x_(n,e);switch(n[e]){case 207:if(!i){Re.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===r.audio&&(r.audio=h);break;case 21:-1===r.id3&&(r.id3=h);break;case 219:if(!i){Re.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===r.avc&&(r.avc=h);break;case 3:case 4:!0!==t.mpeg&&!0!==t.mp3?Re.log("MPEG audio found, not supported in this browser"):-1===r.audio&&(r.audio=h,r.segmentCodec="mp3");break;case 36:Re.warn("Unsupported HEVC stream type found")}e+=5+((15&n[e+3])<<8|n[e+4])}return r}function yp(n){let t,i,r,s,o,e=0;const u=n.data;if(!n||0===n.size)return null;for(;u[0].length<19&&u.length>1;){const m=new Uint8Array(u[0].length+u[1].length);m.set(u[0]),m.set(u[1],u[0].length),u[0]=m,u.splice(1,1)}if(t=u[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(i=(t[4]<<8)+t[5],i&&i>n.size-6)return null;const m=t[7];192&m&&(s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&m?(o=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,s-o>54e5&&(Re.warn(`${Math.round((s-o)/9e4)}s delta between PTS and DTS, align them`),s=o)):o=s),r=t[8];let g=r+9;if(n.size<=g)return null;n.size-=g;const y=new Uint8Array(n.size);for(let E=0,x=u.length;E<x;E++){t=u[E];let I=t.byteLength;if(g){if(g>I){g-=I;continue}t=t.subarray(g),I-=g,g=0}y.set(t,e),e+=I}return i&&(i-=r+3),{data:y,pts:s,dts:o,len:i}}return null}function hf(n,e){if(n.units.length&&n.frame){if(void 0===n.pts){const t=e.samples,i=t.length;if(!i)return void e.dropped++;{const r=t[i-1];n.pts=r.pts,n.dts=r.dts}}e.samples.push(n)}n.debug.length&&Re.log(n.pts+"/"+n.dts+":"+n.debug)}class yC{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const mu=Math.pow(2,32)-1;let ff=(()=>{class n{static init(){let t;for(t in n.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},n.types)n.types.hasOwnProperty(t)&&(n.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);const i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);n.HDLR_TYPES={video:i,audio:r};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);n.STTS=n.STSC=n.STCO=o,n.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),n.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),n.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),n.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const u=new Uint8Array([105,115,111,109]),h=new Uint8Array([97,118,99,49]),m=new Uint8Array([0,0,0,1]);n.FTYP=n.box(n.types.ftyp,u,m,u,h),n.DINF=n.box(n.types.dinf,n.box(n.types.dref,s))}static box(t,...i){let r=8,s=i.length;const o=s;for(;s--;)r+=i[s].byteLength;const u=new Uint8Array(r);for(u[0]=r>>24&255,u[1]=r>>16&255,u[2]=r>>8&255,u[3]=255&r,u.set(t,4),s=0,r=8;s<o;s++)u.set(i[s],r),r+=i[s].byteLength;return u}static hdlr(t){return n.box(n.types.hdlr,n.HDLR_TYPES[t])}static mdat(t){return n.box(n.types.mdat,t)}static mdhd(t,i){i*=t;const r=Math.floor(i/(mu+1)),s=Math.floor(i%(mu+1));return n.box(n.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,s>>24,s>>16&255,s>>8&255,255&s,85,196,0,0]))}static mdia(t){return n.box(n.types.mdia,n.mdhd(t.timescale,t.duration),n.hdlr(t.type),n.minf(t))}static mfhd(t){return n.box(n.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}static minf(t){return n.box(n.types.minf,"audio"===t.type?n.box(n.types.smhd,n.SMHD):n.box(n.types.vmhd,n.VMHD),n.DINF,n.stbl(t))}static moof(t,i,r){return n.box(n.types.moof,n.mfhd(t),n.traf(r,i))}static moov(t){let i=t.length;const r=[];for(;i--;)r[i]=n.trak(t[i]);return n.box.apply(null,[n.types.moov,n.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(n.mvex(t)))}static mvex(t){let i=t.length;const r=[];for(;i--;)r[i]=n.trex(t[i]);return n.box.apply(null,[n.types.mvex,...r])}static mvhd(t,i){i*=t;const r=Math.floor(i/(mu+1)),s=Math.floor(i%(mu+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,s>>24,s>>16&255,s>>8&255,255&s,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n.box(n.types.mvhd,o)}static sdtp(t){const i=t.samples||[],r=new Uint8Array(4+i.length);let s,o;for(s=0;s<i.length;s++)o=i[s].flags,r[s+4]=o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy;return n.box(n.types.sdtp,r)}static stbl(t){return n.box(n.types.stbl,n.stsd(t),n.box(n.types.stts,n.STTS),n.box(n.types.stsc,n.STSC),n.box(n.types.stsz,n.STSZ),n.box(n.types.stco,n.STCO))}static avc1(t){let s,o,u,i=[],r=[];for(s=0;s<t.sps.length;s++)o=t.sps[s],u=o.byteLength,i.push(u>>>8&255),i.push(255&u),i=i.concat(Array.prototype.slice.call(o));for(s=0;s<t.pps.length;s++)o=t.pps[s],u=o.byteLength,r.push(u>>>8&255),r.push(255&u),r=r.concat(Array.prototype.slice.call(o));const h=n.box(n.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|t.sps.length].concat(i).concat([t.pps.length]).concat(r))),m=t.width,g=t.height,y=t.pixelRatio[0],E=t.pixelRatio[1];return n.box(n.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,m>>8&255,255&m,g>>8&255,255&g,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h,n.box(n.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),n.box(n.types.pasp,new Uint8Array([y>>24,y>>16&255,y>>8&255,255&y,E>>24,E>>16&255,E>>8&255,255&E])))}static esds(t){const i=t.config.length;return new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(t.config).concat([6,1,2]))}static mp4a(t){const i=t.samplerate;return n.box(n.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),n.box(n.types.esds,n.esds(t)))}static mp3(t){const i=t.samplerate;return n.box(n.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]))}static stsd(t){return n.box(n.types.stsd,n.STSD,"audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?n.mp3(t):n.mp4a(t):n.avc1(t))}static tkhd(t){const i=t.id,r=t.duration*t.timescale,s=t.width,o=t.height,u=Math.floor(r/(mu+1)),h=Math.floor(r%(mu+1));return n.box(n.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,u>>24,u>>16&255,u>>8&255,255&u,h>>24,h>>16&255,h>>8&255,255&h,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,255&s,0,0,o>>8&255,255&o,0,0]))}static traf(t,i){const r=n.sdtp(t),s=t.id,o=Math.floor(i/(mu+1)),u=Math.floor(i%(mu+1));return n.box(n.types.traf,n.box(n.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s])),n.box(n.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,u>>24,u>>16&255,u>>8&255,255&u])),n.trun(t,r.length+16+20+8+16+8+8),r)}static trak(t){return t.duration=t.duration||4294967295,n.box(n.types.trak,n.tkhd(t),n.mdia(t))}static trex(t){const i=t.id;return n.box(n.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(t,i){const r=t.samples||[],s=r.length,o=12+16*s,u=new Uint8Array(o);let h,m,g,y,E,x;for(u.set(["video"===t.type?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,255&s,(i+=8+o)>>>24&255,i>>>16&255,i>>>8&255,255&i],0),h=0;h<s;h++)m=r[h],g=m.duration,y=m.size,E=m.flags,x=m.cts,u.set([g>>>24&255,g>>>16&255,g>>>8&255,255&g,y>>>24&255,y>>>16&255,y>>>8&255,255&y,E.isLeading<<2|E.dependsOn,E.isDependedOn<<6|E.hasRedundancy<<4|E.paddingValue<<1|E.isNonSync,61440&E.degradPrio,15&E.degradPrio,x>>>24&255,x>>>16&255,x>>>8&255,255&x],12+16*h);return n.box(n.types.trun,u)}static initSegment(t){n.types||n.init();const i=n.moov(t),r=new Uint8Array(n.FTYP.byteLength+i.byteLength);return r.set(n.FTYP),r.set(i,n.FTYP.byteLength),r}}return n.types=void 0,n.HDLR_TYPES=void 0,n.STTS=void 0,n.STSC=void 0,n.STCO=void 0,n.STSZ=void 0,n.VMHD=void 0,n.SMHD=void 0,n.STSD=void 0,n.FTYP=void 0,n.DINF=void 0,n})();const mf=9e4;function rb(n,e,t=1,i=!1){const r=n*e*t;return i?Math.round(r):r}function Ro(n,e=!1){return rb(n,1e3,1/mf,e)}let Il,C_=null,ob=null;class gf{constructor(e,t,i,r=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,null===C_){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);C_=o?parseInt(o[1]):0}if(null===ob){const s=navigator.userAgent.match(/Safari\/(\d+)/i);ob=s?parseInt(s[1]):0}}destroy(){}resetTimeStamp(e){Re.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){Re.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){Re.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(e){let t=!1;const i=e.reduce((r,s)=>{const o=s.pts-r;return o<-4294967296?(t=!0,vo(r,s.pts)):o>0?r:s.pts},e[0].pts);return t&&Re.debug("PTS rollover detected"),i}remux(e,t,i,r,s,o,u,h){let m,g,y,E,x,I,k=s,P=s;const ae=t.pid>-1,ee=t.samples.length,ye=e.samples.length>0,De=u&&ee>0||ee>1;if((!(e.pid>-1)||ye)&&(!ae||De)||this.ISGenerated||u){this.ISGenerated||(y=this.generateIS(e,t,s,o));const it=this.isVideoContiguous;let Nt,Dt=-1;if(De&&(Dt=function mM(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}(t.samples),!it&&this.config.forceKeyFrameOnDiscontinuity))if(I=!0,Dt>0){Re.warn(`[mp4-remuxer]: Dropped ${Dt} out of ${ee} video samples due to a missing keyframe`);const mt=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(Dt),t.dropped+=Dt,P+=(t.samples[0].pts-mt)/t.inputTimeScale,Nt=P}else-1===Dt&&(Re.warn(`[mp4-remuxer]: No keyframe found out of ${ee} video samples`),I=!1);if(this.ISGenerated){if(ye&&De){const mt=this.getVideoStartPts(t.samples),dn=(vo(e.samples[0].pts,mt)-mt)/t.inputTimeScale;k+=Math.max(0,dn),P+=Math.max(0,-dn)}if(ye){if(e.samplerate||(Re.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),y=this.generateIS(e,t,s,o)),g=this.remuxAudio(e,k,this.isAudioContiguous,o,ae||De||h===ei.AUDIO?P:void 0),De){const mt=g?g.endPTS-g.startPTS:0;t.inputTimeScale||(Re.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),y=this.generateIS(e,t,s,o)),m=this.remuxVideo(t,P,it,mt)}}else De&&(m=this.remuxVideo(t,P,it,0));m&&(m.firstKeyFrame=Dt,m.independent=-1!==Dt,m.firstKeyFramePTS=Nt)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(x=vC(i,s,this._initPTS,this._initDTS)),r.samples.length&&(E=ab(r,s,this._initPTS))),{audio:g,video:m,initSegment:y,independent:I,text:E,id3:x}}generateIS(e,t,i,r){const s=e.samples,o=t.samples,u=this.typeSupported,h={},m=this._initPTS;let E,x,I,g=!m||r,y="audio/mp4";if(g&&(E=x=1/0),e.config&&s.length&&("mp3"===(e.timescale=e.samplerate,e.segmentCodec)&&(u.mpeg?(y="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3")),h.audio={id:"audio",container:y,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&u.mpeg?new Uint8Array(0):ff.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(I=e.inputTimeScale,m&&I===m.timescale?g=!1:E=x=s[0].pts-Math.round(I*i))),t.sps&&t.pps&&o.length&&(t.timescale=t.inputTimeScale,h.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:ff.initSegment([t]),metadata:{width:t.width,height:t.height}},g))if(I=t.inputTimeScale,m&&I===m.timescale)g=!1;else{const k=this.getVideoStartPts(o),P=Math.round(I*i);x=Math.min(x,vo(o[0].dts,k)-P),E=Math.min(E,k-P)}if(Object.keys(h).length)return this.ISGenerated=!0,g?(this._initPTS={baseTime:E,timescale:I},this._initDTS={baseTime:x,timescale:I}):E=I=void 0,{tracks:h,initPTS:E,timescale:I}}remuxVideo(e,t,i,r){const s=e.inputTimeScale,o=e.samples,u=[],h=o.length,m=this._initPTS;let x,I,g=this.nextAvcDts,y=8,E=this.videoSampleDuration,k=Number.POSITIVE_INFINITY,P=Number.NEGATIVE_INFINITY,q=!1;i&&null!==g||(g=t*s-(o[0].pts-vo(o[0].dts,o[0].pts)));const ae=m.baseTime*s/m.timescale;for(let xt=0;xt<h;xt++){const zt=o[xt];zt.pts=vo(zt.pts-ae,g),zt.dts=vo(zt.dts-ae,g),zt.dts<o[xt>0?xt-1:xt].dts&&(q=!0)}q&&o.sort(function(xt,zt){return xt.dts-zt.dts||xt.pts-zt.pts}),x=o[0].dts,I=o[o.length-1].dts;const ee=I-x,ye=ee?Math.round(ee/(h-1)):E||e.inputTimeScale/30;if(i){const xt=x-g,zt=xt>ye,fi=xt<-1;if((zt||fi)&&(Re.warn(zt?`AVC: ${Ro(xt,!0)} ms (${xt}dts) hole between fragments detected, filling it`:`AVC: ${Ro(-xt,!0)} ms (${xt}dts) overlapping between fragments detected`),!fi||g>=o[0].pts)){x=g;const Ni=o[0].pts-xt;o[0].dts=x,o[0].pts=Ni,Re.log(`Video: First PTS/DTS adjusted: ${Ro(Ni,!0)}/${Ro(x,!0)}, delta: ${Ro(xt,!0)} ms`)}}x=Math.max(0,x);let De=0,dt=0;for(let xt=0;xt<h;xt++){const zt=o[xt],fi=zt.units,Ni=fi.length;let gi=0;for(let dr=0;dr<Ni;dr++)gi+=fi[dr].data.length;dt+=gi,De+=Ni,zt.length=gi,zt.dts=Math.max(zt.dts,x),k=Math.min(zt.pts,k),P=Math.max(zt.pts,P)}I=o[h-1].dts;const it=dt+4*De+8;let Dt;try{Dt=new Uint8Array(it)}catch(xt){return void this.observer.emit(U.ERROR,U.ERROR,{type:Jn.MUX_ERROR,details:ht.REMUX_ALLOC_ERROR,fatal:!1,error:xt,bytes:it,reason:`fail allocating video mdat ${it}`})}const Nt=new DataView(Dt.buffer);Nt.setUint32(0,it),Dt.set(ff.types.mdat,4);let mt=!1,Hn=Number.POSITIVE_INFINITY,dn=Number.POSITIVE_INFINITY,Oi=Number.NEGATIVE_INFINITY,Ss=Number.NEGATIVE_INFINITY;for(let xt=0;xt<h;xt++){const zt=o[xt],fi=zt.units;let gi,Ni=0;for(let Bi=0,Ia=fi.length;Bi<Ia;Bi++){const Sa=fi[Bi],Zr=Sa.data,xc=Sa.data.byteLength;Nt.setUint32(y,xc),y+=4,Dt.set(Zr,y),y+=xc,Ni+=4+xc}if(xt<h-1)E=o[xt+1].dts-zt.dts,gi=o[xt+1].pts-zt.pts;else{const Bi=this.config,Ia=xt>0?zt.dts-o[xt-1].dts:ye;if(gi=xt>0?zt.pts-o[xt-1].pts:ye,Bi.stretchShortVideoTrack&&null!==this.nextAudioPts){const Sa=Math.floor(Bi.maxBufferHole*s),Zr=(r?k+r*s:this.nextAudioPts)-zt.pts;Zr>Sa?(E=Zr-Ia,E<0?E=Ia:mt=!0,Re.log(`[mp4-remuxer]: It is approximately ${Zr/90} ms to the next segment; using duration ${E/90} ms for the last video frame.`)):E=Ia}else E=Ia}const dr=Math.round(zt.pts-zt.dts);Hn=Math.min(Hn,E),Oi=Math.max(Oi,E),dn=Math.min(dn,gi),Ss=Math.max(Ss,gi),u.push(new lb(zt.key,E,Ni,dr))}if(u.length)if(C_){if(C_<70){const xt=u[0].flags;xt.dependsOn=2,xt.isNonSync=0}}else if(ob&&Ss-dn<Oi-Hn&&ye/Oi<.025&&0===u[0].cts){Re.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let xt=x;for(let zt=0,fi=u.length;zt<fi;zt++){const Ni=xt+u[zt].duration;u[zt].duration=zt<fi-1?Ni+u[zt+1].cts-(xt+u[zt].cts):zt?u[zt-1].duration:ye,u[zt].cts=0,xt=Ni}}E=mt||!E?ye:E,this.nextAvcDts=g=I+E,this.videoSampleDuration=E,this.isVideoContiguous=!0;const ln={data1:ff.moof(e.sequenceNumber++,x,bs({},e,{samples:u})),data2:Dt,startPTS:k/s,endPTS:(P+E)/s,startDTS:x/s,endDTS:g/s,type:"video",hasAudio:!1,hasVideo:!0,nb:u.length,dropped:e.dropped};return e.samples=[],e.dropped=0,ln}remuxAudio(e,t,i,r,s){const o=e.inputTimeScale,h=o/(e.samplerate?e.samplerate:o),m="aac"===e.segmentCodec?1024:1152,g=m*h,y=this._initPTS,E="mp3"===e.segmentCodec&&this.typeSupported.mpeg,x=[],I=void 0!==s;let k=e.samples,P=E?0:8,q=this.nextAudioPts||-1;const ae=t*o,ee=y.baseTime*o/y.timescale;if(this.isAudioContiguous=i=i||k.length&&q>0&&(r&&Math.abs(ae-q)<9e3||Math.abs(vo(k[0].pts-ee,ae)-q)<20*g),k.forEach(function(Ht){Ht.pts=vo(Ht.pts-ee,ae)}),!i||q<0){if(k=k.filter(Ht=>Ht.pts>=0),!k.length)return;q=0===s?0:r&&!I?Math.max(0,ae):k[0].pts}if("aac"===e.segmentCodec){const Ht=this.config.maxAudioFramesDrift;for(let ln=0,xt=q;ln<k.length;ln++){const zt=k[ln],fi=zt.pts,Ni=fi-xt,gi=Math.abs(1e3*Ni/o);if(Ni<=-Ht*g&&I)0===ln&&(Re.warn(`Audio frame @ ${(fi/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*Ni/o)} ms.`),this.nextAudioPts=q=xt=fi);else if(Ni>=Ht*g&&gi<1e4&&I){let dr=Math.round(Ni/g);xt=fi-dr*g,xt<0&&(dr--,xt+=g),0===ln&&(this.nextAudioPts=q=xt),Re.warn(`[mp4-remuxer]: Injecting ${dr} audio frame @ ${(xt/o).toFixed(3)}s due to ${Math.round(1e3*Ni/o)} ms gap.`);for(let Bi=0;Bi<dr;Bi++){const Ia=Math.max(xt,0);let Sa=yC.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);Sa||(Re.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Sa=zt.unit.subarray()),k.splice(ln,0,{unit:Sa,pts:Ia}),xt+=g,ln++}}zt.pts=xt,xt+=g}}let dt,ye=null,De=null,it=0,Dt=k.length;for(;Dt--;)it+=k[Dt].unit.byteLength;for(let Ht=0,ln=k.length;Ht<ln;Ht++){const xt=k[Ht],zt=xt.unit;let fi=xt.pts;if(null!==De)x[Ht-1].duration=Math.round((fi-De)/h);else{if(i&&"aac"===e.segmentCodec&&(fi=q),ye=fi,!(it>0))return;it+=P;try{dt=new Uint8Array(it)}catch(gi){return void this.observer.emit(U.ERROR,U.ERROR,{type:Jn.MUX_ERROR,details:ht.REMUX_ALLOC_ERROR,fatal:!1,error:gi,bytes:it,reason:`fail allocating audio mdat ${it}`})}E||(new DataView(dt.buffer).setUint32(0,it),dt.set(ff.types.mdat,4))}dt.set(zt,P);const Ni=zt.byteLength;P+=Ni,x.push(new lb(!0,m,Ni,0)),De=fi}const Nt=x.length;if(!Nt)return;this.nextAudioPts=q=De+h*x[x.length-1].duration;const Hn=E?new Uint8Array(0):ff.moof(e.sequenceNumber++,ye/h,bs({},e,{samples:x}));e.samples=[];const dn=ye/o,Oi=q/o,cr={data1:Hn,data2:dt,startPTS:dn,endPTS:Oi,startDTS:dn,endDTS:Oi,type:"audio",hasAudio:!0,hasVideo:!1,nb:Nt};return this.isAudioContiguous=!0,cr}remuxEmptyAudio(e,t,i,r){const s=e.inputTimeScale,h=this.nextAudioPts,m=this._initDTS,g=9e4*m.baseTime/m.timescale,y=(null!==h?h:r.startDTS*s)+g,x=s/(e.samplerate?e.samplerate:s)*1024,I=Math.ceil((r.endDTS*s+g-y)/x),k=yC.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(Re.warn("[mp4-remuxer]: remux empty Audio"),!k)return void Re.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const P=[];for(let q=0;q<I;q++){const ae=y+q*x;P.push({unit:k,pts:ae,dts:ae})}return e.samples=P,this.remuxAudio(e,t,i,!1)}}function vo(n,e){let t;if(null===e)return n;for(t=e<n?-8589934592:8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function vC(n,e,t,i){const r=n.samples.length;if(!r)return;const s=n.inputTimeScale;for(let u=0;u<r;u++){const h=n.samples[u];h.pts=vo(h.pts-t.baseTime*s/t.timescale,e*s)/s,h.dts=vo(h.dts-i.baseTime*s/i.timescale,e*s)/s}const o=n.samples;return n.samples=[],{samples:o}}function ab(n,e,t){const i=n.samples.length;if(!i)return;const r=n.inputTimeScale;for(let o=0;o<i;o++){const u=n.samples[o];u.pts=vo(u.pts-t.baseTime*r/t.timescale,e*r)/r}n.samples.sort((o,u)=>o.pts-u.pts);const s=n.samples;return n.samples=[],{samples:s}}class lb{constructor(e,t,i,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=i,this.cts=r,this.flags=new cb(e)}}class cb{constructor(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}}function I_(n,e){const t=n?.codec;return t&&t.length>4?t:"hvc1"===t||"hev1"===t?"hvc1.1.6.L120.90":"av01"===t?"av01.0.04M.08":"avc1"===t||e===zi.VIDEO?"avc1.42e01e":"mp4a.40.5"}try{Il=self.performance.now.bind(self.performance)}catch{Re.debug("Unable to use Performance API on this environment"),Il=typeof self<"u"&&self.Date.now}const vp=[{demux:class sM{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,r){const s=this.videoTrack=Cl("video",1),o=this.audioTrack=Cl("audio",1),u=this.txtTrack=Cl("text",1);if(this.id3Track=Cl("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const h=AT(e);if(h.video){const{id:m,timescale:g,codec:y}=h.video;s.id=m,s.timescale=u.timescale=g,s.codec=y}if(h.audio){const{id:m,timescale:g,codec:y}=h.audio;o.id=m,o.timescale=g,o.codec=y}u.id=x0.text,s.sampleDuration=0,s.duration=o.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return ji(e=e.length>16384?e.subarray(0,16384):e,["moof"]).length>0}demux(e,t){this.timeOffset=t;let i=e;const r=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=wd(this.remainderData,e));const u=function A1(n){const e={valid:null,remainder:null},t=ji(n,["moof"]);if(!t)return e;if(t.length<2)return e.remainder=n,e;const i=t[t.length-1];return e.valid=fc(n,0,i.byteOffset-8),e.remainder=fc(n,i.byteOffset-8),e}(i);this.remainderData=u.remainder,r.samples=u.valid||new Uint8Array}else r.samples=i;const o=this.extractID3Track(r,t);return s.samples=kT(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return i.samples=kT(e,t),{videoTrack:t,audioTrack:Cl(),id3Track:r,textTrack:Cl()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const r=ji(e.samples,["emsg"]);r&&r.forEach(s=>{const o=function OT(n){const e=n[0];let t="",i="",r=0,s=0,o=0,u=0,h=0,m=0;if(0===e){for(;"\0"!==Hs(n.subarray(m,m+1));)t+=Hs(n.subarray(m,m+1)),m+=1;for(t+=Hs(n.subarray(m,m+1)),m+=1;"\0"!==Hs(n.subarray(m,m+1));)i+=Hs(n.subarray(m,m+1)),m+=1;i+=Hs(n.subarray(m,m+1)),m+=1,r=li(n,12),s=li(n,16),u=li(n,20),h=li(n,24),m=28}else if(1===e){m+=4,r=li(n,m),m+=4;const y=li(n,m);m+=4;const E=li(n,m);for(m+=4,o=2**32*y+E,Number.isSafeInteger(o)||(o=Number.MAX_SAFE_INTEGER,Re.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),u=li(n,m),m+=4,h=li(n,m),m+=4;"\0"!==Hs(n.subarray(m,m+1));)t+=Hs(n.subarray(m,m+1)),m+=1;for(t+=Hs(n.subarray(m,m+1)),m+=1;"\0"!==Hs(n.subarray(m,m+1));)i+=Hs(n.subarray(m,m+1)),m+=1;i+=Hs(n.subarray(m,m+1)),m+=1}return{schemeIdUri:t,value:i,timeScale:r,presentationTime:o,presentationTimeDelta:s,eventDuration:u,id:h,payload:n.subarray(m,n.byteLength)}}(s);if(UL.test(o.schemeIdUri)){const u=kn(o.presentationTime)?o.presentationTime/o.timeScale:t+o.presentationTimeDelta/o.timeScale;let h=4294967295===o.eventDuration?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;h<=.001&&(h=Number.POSITIVE_INFINITY);const m=o.payload;i.samples.push({data:m,len:m.byteLength,dts:u,pts:u,type:va_emsg,duration:h})}})}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class bC{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,i,r){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(function T1(n,e){if(!n||!e)return n;const t=e.keyId;return t&&e.isCommonEncryption&&ji(n,["moov","trak"]).forEach(r=>{const o=ji(r,["mdia","minf","stbl","stsd"])[0].subarray(8);let u=ji(o,["enca"]);const h=u.length>0;h||(u=ji(o,["encv"])),u.forEach(m=>{ji(m.subarray(h?28:78),["sinf"]).forEach(E=>{const x=MT(E);if(x){const I=x.subarray(8,24);I.some(k=>0!==k)||(Re.log(`[eme] Patching keyId in 'enc${h?"a":"v"}>sinf>>tenc' box: ${Ka_hexDump(I)} -> ${Ka_hexDump(t)}`),x.set(t,8))}})})}),n}(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:i}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const r=this.initData=AT(e);t||(t=I_(r.audio,zi.AUDIO)),i||(i=I_(r.video,zi.VIDEO));const s={};r.audio&&r.video?s.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:e,id:"main"}:r.audio?s.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?s.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:Re.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,t,i,r,s,o){var u,h;let{initPTS:m,lastEndTime:g}=this;const y={audio:void 0,video:void 0,text:r,id3:i,initSegment:void 0};kn(g)||(g=this.lastEndTime=s||0);const E=t.samples;if(null==E||!E.length)return y;const x={initPTS:void 0,timescale:1};let I=this.initData;if(null!=(u=I)&&u.length||(this.generateInitSegment(E),I=this.initData),null==(h=I)||!h.length)return Re.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),y;this.emitInitSegment&&(x.tracks=this.initTracks,this.emitInitSegment=!1);const k=function I1(n,e){let t=0,i=0,r=0;const s=ji(n,["moof","traf"]);for(let o=0;o<s.length;o++){const u=s[o],h=ji(u,["tfhd"])[0],g=e[li(h,4)];if(!g)continue;const y=g.default,E=li(h,0)|y?.flags;let x=y?.duration;8&E&&(x=li(h,2&E?12:8));const I=g.timescale||9e4,k=ji(u,["trun"]);for(let P=0;P<k.length;P++)t=S1(k[P]),!t&&x&&(t=x*li(k[P],4)),g.type===zi.VIDEO?i+=t/I:g.type===zi.AUDIO&&(r+=t/I)}if(0===i&&0===r){let o=0;const u=ji(n,["sidx"]);for(let h=0;h<u.length;h++){const m=x1(u[h]);null!=m&&m.references&&(o+=m.references.reduce((g,y)=>g+y.info.duration||0,0))}return o}return i||r}(E,I),P=function C1(n,e){return ji(e,["moof","traf"]).reduce((t,i)=>{const r=ji(i,["tfdt"])[0],s=r[0],o=ji(i,["tfhd"]).reduce((u,h)=>{const m=li(h,4),g=n[m];if(g){let y=li(r,4);if(1===s){if(y===op)return Re.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),u;y*=op+1,y+=li(r,8)}const x=y/(g.timescale||9e4);if(isFinite(x)&&(null===u||x<u))return x}return u},null);return null!==o&&isFinite(o)&&(null===t||o<t)?o:t},null)}(I,E),q=null===P?s:P;(function ub(n,e,t,i){if(null===n)return!0;const r=Math.max(i,1);return Math.abs(e-n.baseTime/n.timescale-t)>r}(m,q,s,k)||x.timescale!==m.timescale&&o)&&(x.initPTS=q-s,m&&1===m.timescale&&Re.warn("Adjusting initPTS by "+(x.initPTS-m.baseTime)),this.initPTS=m={baseTime:x.initPTS,timescale:1});const ae=e?q-m.baseTime/m.timescale:g,ee=ae+k;(function D1(n,e,t){ji(e,["moof","traf"]).forEach(i=>{ji(i,["tfhd"]).forEach(r=>{const s=li(r,4),o=n[s];if(!o)return;const u=o.timescale||9e4;ji(i,["tfdt"]).forEach(h=>{const m=h[0];let g=li(h,4);if(0===m)g-=t*u,g=Math.max(g,0),T0(h,4,g);else{g*=Math.pow(2,32),g+=li(h,8),g-=t*u,g=Math.max(g,0);const y=Math.floor(g/(op+1)),E=Math.floor(g%(op+1));T0(h,4,y),T0(h,8,E)}})})})})(I,E,m.baseTime/m.timescale),k>0?this.lastEndTime=ee:(Re.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const ye=!!I.audio,De=!!I.video;let dt="";ye&&(dt+="audio"),De&&(dt+="video");const it={data1:E,startPTS:ae,startDTS:ae,endPTS:ee,endDTS:ee,type:dt,hasAudio:ye,hasVideo:De,nb:1,dropped:0};return y.audio="audio"===it.type?it:void 0,y.video="audio"!==it.type?it:void 0,y.initSegment=x,y.id3=vC(i,s,m,m),r.samples.length&&(y.text=ab(r,s,m)),y}}},{demux:pc,remux:gf},{demux:class rM extends Q0{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,r){super.resetInitSegment(e,t,i,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let i=(sp(e,0)||[]).length;for(let r=e.length;i<r;i++)if(nM(e,i))return Re.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function tM(n,e){return function eM(n,e){return e+5<n.length}(n,e)&&eb(n,e)&&b_(n,e)<=n.length-e}(e,t)}appendFrame(e,t,i){nb(e,this.observer,t,i,e.manifestCodec);const r=uC(e,t,i,this.basePTS,this.frameIndex);if(r&&0===r.missing)return r}},remux:gf},{demux:class _C extends Q0{resetInitSegment(e,t,i,r){super.resetInitSegment(e,t,i,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let i=(sp(e,0)||[]).length;for(let r=e.length;i<r;i++)if(uM(e,i))return Re.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function cM(n,e){return ib(n,e)&&4<=n.length-e}(e,t)}appendFrame(e,t,i){if(null!==this.basePTS)return hC(e,t,i,this.basePTS,this.frameIndex)}},remux:gf}];class S_{constructor(e,t,i,r,s){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.vendor=r,this.id=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,r){const s=i.transmuxing;s.executeStart=Il();let o=new Uint8Array(e);const{currentTransmuxState:u,transmuxConfig:h}=this;r&&(this.currentTransmuxState=r);const{contiguous:m,discontinuity:g,trackSwitch:y,accurateTimeOffset:E,timeOffset:x,initSegmentChange:I}=r||u,{audioCodec:k,videoCodec:P,defaultInitPts:q,duration:ae,initSegmentData:ee}=h,ye=function pM(n,e){let t=null;return n.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(t=e),t}(o,t);if(ye&&"AES-128"===ye.method){const Dt=this.getDecrypter();if(!Dt.isSync())return this.decryptionPromise=Dt.webCryptoDecrypt(o,ye.key.buffer,ye.iv.buffer).then(Nt=>{const mt=this.push(Nt,null,i);return this.decryptionPromise=null,mt}),this.decryptionPromise;{let Nt=Dt.softwareDecrypt(o,ye.key.buffer,ye.iv.buffer);if(i.part>-1&&(Nt=Dt.flush()),!Nt)return s.executeEnd=Il(),db(i);o=new Uint8Array(Nt)}}const De=this.needsProbing(g,y);if(De){const Dt=this.configureTransmuxer(o);if(Dt)return Re.warn(`[transmuxer] ${Dt.message}`),this.observer.emit(U.ERROR,U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.FRAG_PARSING_ERROR,fatal:!1,error:Dt,reason:Dt.message}),s.executeEnd=Il(),db(i)}(g||y||I||De)&&this.resetInitSegment(ee,k,P,ae,t),(g||I||De)&&this.resetInitialTimestamp(q),m||this.resetContiguity();const dt=this.transmux(o,ye,x,E,i),it=this.currentTransmuxState;return it.contiguous=!0,it.discontinuity=!1,it.trackSwitch=!1,s.executeEnd=Il(),dt}flush(e){const t=e.transmuxing;t.executeStart=Il();const{decrypter:i,currentTransmuxState:r,decryptionPromise:s}=this;if(s)return s.then(()=>this.flush(e));const o=[],{timeOffset:u}=r;if(i){const y=i.flush();y&&o.push(this.push(y,null,e))}const{demuxer:h,remuxer:m}=this;if(!h||!m)return t.executeEnd=Il(),[db(e)];const g=h.flush(u);return D_(g)?g.then(y=>(this.flushRemux(o,y,e),o)):(this.flushRemux(o,g,e),o)}flushRemux(e,t,i){const{audioTrack:r,videoTrack:s,id3Track:o,textTrack:u}=t,{accurateTimeOffset:h,timeOffset:m}=this.currentTransmuxState;Re.log(`[transmuxer.ts]: Flushed fragment ${i.sn}${i.part>-1?" p: "+i.part:""} of level ${i.level}`);const g=this.remuxer.remux(r,s,o,u,m,h,!0,this.id);e.push({remuxResult:g,chunkMeta:i}),i.transmuxing.executeEnd=Il()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;!t||!i||(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,r,s){const{demuxer:o,remuxer:u}=this;!o||!u||(o.resetInitSegment(e,t,i,r),u.resetInitSegment(e,t,i,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,r,s){let o;return o=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,i,r,s):this.transmuxUnencrypted(e,i,r,s),o}transmuxUnencrypted(e,t,i,r){const{audioTrack:s,videoTrack:o,id3Track:u,textTrack:h}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,o,u,h,t,i,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,i,r,s){return this.demuxer.demuxSampleAes(e,t,i).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,i,r,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:r,vendor:s}=this;let o;for(let y=0,E=vp.length;y<E;y++)if(vp[y].demux.probe(e)){o=vp[y];break}if(!o)return new Error("Failed to find demuxer by probing fragment data");const u=this.demuxer,h=this.remuxer,m=o.remux,g=o.demux;(!h||!(h instanceof m))&&(this.remuxer=new m(i,t,r,s)),(!u||!(u instanceof g))&&(this.demuxer=new g(i,t,r),this.probe=g.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new K0(this.config)),e}}const db=n=>({remuxResult:{},chunkMeta:n});function D_(n){return"then"in n&&n.then instanceof Function}class gM{constructor(e,t,i,r,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=r,this.defaultInitPts=s||null}}class wC{constructor(e,t,i,r,s,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=r,this.timeOffset=s,this.initSegmentChange=o}}var A_={exports:{}};!function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}function r(h,m,g){this.fn=h,this.context=m,this.once=g||!1}function s(h,m,g,y,E){if("function"!=typeof g)throw new TypeError("The listener must be a function");var x=new r(g,y||h,E),I=t?t+m:m;return h._events[I]?h._events[I].fn?h._events[I]=[h._events[I],x]:h._events[I].push(x):(h._events[I]=x,h._eventsCount++),h}function o(h,m){0==--h._eventsCount?h._events=new i:delete h._events[m]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(t=!1)),u.prototype.eventNames=function(){var g,y,m=[];if(0===this._eventsCount)return m;for(y in g=this._events)e.call(g,y)&&m.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},u.prototype.listeners=function(m){var y=this._events[t?t+m:m];if(!y)return[];if(y.fn)return[y.fn];for(var E=0,x=y.length,I=new Array(x);E<x;E++)I[E]=y[E].fn;return I},u.prototype.listenerCount=function(m){var y=this._events[t?t+m:m];return y?y.fn?1:y.length:0},u.prototype.emit=function(m,g,y,E,x,I){var k=t?t+m:m;if(!this._events[k])return!1;var ae,ee,P=this._events[k],q=arguments.length;if(P.fn){switch(P.once&&this.removeListener(m,P.fn,void 0,!0),q){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,g),!0;case 3:return P.fn.call(P.context,g,y),!0;case 4:return P.fn.call(P.context,g,y,E),!0;case 5:return P.fn.call(P.context,g,y,E,x),!0;case 6:return P.fn.call(P.context,g,y,E,x,I),!0}for(ee=1,ae=new Array(q-1);ee<q;ee++)ae[ee-1]=arguments[ee];P.fn.apply(P.context,ae)}else{var De,ye=P.length;for(ee=0;ee<ye;ee++)switch(P[ee].once&&this.removeListener(m,P[ee].fn,void 0,!0),q){case 1:P[ee].fn.call(P[ee].context);break;case 2:P[ee].fn.call(P[ee].context,g);break;case 3:P[ee].fn.call(P[ee].context,g,y);break;case 4:P[ee].fn.call(P[ee].context,g,y,E);break;default:if(!ae)for(De=1,ae=new Array(q-1);De<q;De++)ae[De-1]=arguments[De];P[ee].fn.apply(P[ee].context,ae)}}return!0},u.prototype.on=function(m,g,y){return s(this,m,g,y,!1)},u.prototype.once=function(m,g,y){return s(this,m,g,y,!0)},u.prototype.removeListener=function(m,g,y,E){var x=t?t+m:m;if(!this._events[x])return this;if(!g)return o(this,x),this;var I=this._events[x];if(I.fn)I.fn===g&&(!E||I.once)&&(!y||I.context===y)&&o(this,x);else{for(var k=0,P=[],q=I.length;k<q;k++)(I[k].fn!==g||E&&!I[k].once||y&&I[k].context!==y)&&P.push(I[k]);P.length?this._events[x]=1===P.length?P[0]:P:o(this,x)}return this},u.prototype.removeAllListeners=function(m){var g;return m?this._events[g=t?t+m:m]&&o(this,g):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,n.exports=u}(A_);var M_=aT(A_.exports);const k_=sf()||{isTypeSupported:()=>!1};class hb{constructor(e,t,i,r){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const s=e.config;this.hls=e,this.id=t,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=i,this.onFlush=r;const o=(m,g)=>{(g=g||{}).frag=this.frag,g.id=this.id,m===U.ERROR&&(this.error=g.error),this.hls.trigger(m,g)};this.observer=new M_,this.observer.on(U.FRAG_DECRYPTED,o),this.observer.on(U.ERROR,o);const u={mp4:k_.isTypeSupported("video/mp4"),mpeg:k_.isTypeSupported("audio/mpeg"),mp3:k_.isTypeSupported('audio/mp4; codecs="mp3"')},h=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(s.workerPath||function Z0(){return"function"==typeof __HLS_WORKER_BUNDLE__}()))try{s.workerPath?(Re.log(`loading Web Worker ${s.workerPath} for "${t}"`),this.workerContext=function X0(n){const e=new self.URL(n,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}(s.workerPath)):(Re.log(`injecting Web Worker for "${t}"`),this.workerContext=function J1(){const n=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(n);return{worker:new self.Worker(e),objectURL:e}}()),this.onwmsg=y=>this.onWorkerMessage(y);const{worker:g}=this.workerContext;g.addEventListener("message",this.onwmsg),g.onerror=y=>{const E=new Error(`${y.message}  (${y.filename}:${y.lineno})`);s.enableWorker=!1,Re.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(U.ERROR,{type:Jn.OTHER_ERROR,details:ht.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:E})},g.postMessage({cmd:"init",typeSupported:u,vendor:h,id:t,config:JSON.stringify(s)})}catch(g){Re.warn(`Error setting up "${t}" Web Worker, fallback to inline`,g),this.resetWorker(),this.error=null,this.transmuxer=new S_(this.observer,u,s,h,t)}else this.transmuxer=new S_(this.observer,u,s,h,t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,i,r,s,o,u,h,m,g){var y,E;m.transmuxing.start=self.performance.now();const{transmuxer:x}=this,I=o?o.start:s.start,k=s.decryptdata,P=this.frag,q=!(P&&s.cc===P.cc),ae=!(P&&m.level===P.level),ee=P?m.sn-P.sn:-1,ye=this.part?m.part-this.part.index:-1,dt=!ae&&(1===ee||0===ee&&(1===ye||0===ee&&m.id>1&&m.id===P?.stats.chunkCount&&ye<=0)),it=self.performance.now();(ae||ee||0===s.stats.parsing.start)&&(s.stats.parsing.start=it),o&&(ye||!dt)&&(o.stats.parsing.start=it);const Dt=!(P&&(null==(y=s.initSegment)?void 0:y.url)===(null==(E=P.initSegment)?void 0:E.url)),Nt=new wC(q,dt,h,ae,I,Dt);if(!dt||q||Dt){Re.log(`[transmuxer-interface, ${s.type}]: Starting new transmux session for sn: ${m.sn} p: ${m.part} level: ${m.level} id: ${m.id}\n        discontinuity: ${q}\n        trackSwitch: ${ae}\n        contiguous: ${dt}\n        accurateTimeOffset: ${h}\n        timeOffset: ${I}\n        initSegmentChange: ${Dt}`);const mt=new gM(i,r,t,u,g);this.configureTransmuxer(mt)}if(this.frag=s,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:k,chunkMeta:m,state:Nt},e instanceof ArrayBuffer?[e]:[]);else if(x){const mt=x.push(e,k,m,Nt);D_(mt)?(x.async=!0,mt.then(Hn=>{this.handleTransmuxComplete(Hn)}).catch(Hn=>{this.transmuxerError(Hn,m,"transmuxer-interface push error")})):(x.async=!1,this.handleTransmuxComplete(mt))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let i=t.flush(e);D_(i)||t.async?(D_(i)||(i=Promise.resolve(i)),i.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")})):this.handleFlushResult(i,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(t)}onWorkerMessage(e){const t=e.data,i=this.hls;switch(t.event){case"init":{var r;const s=null==(r=this.workerContext)?void 0:r.objectURL;s&&self.URL.revokeObjectURL(s);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":Re[t.data.logType]&&Re[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}class TC{constructor(e,t,i,r){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=i,this.hls=r}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:i,media:r,stalled:s}=this;if(null===r)return;const{currentTime:o,seeking:u}=r,h=this.seeking&&!u,m=!this.seeking&&u;if(this.seeking=u,o!==e){if(this.moved=!0,null!==s){if(this.stallReported){const q=self.performance.now()-s;Re.warn(`playback not stuck anymore @${o}, after ${Math.round(q)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(m||h)return void(this.stalled=null);if(r.paused&&!u||r.ended||0===r.playbackRate||!yr.getBuffered(r).length)return;const g=yr.bufferInfo(r,o,0),E=g.nextStart||0;if(!(g.len>0||E))return;if(u){const q=g.len>2,ae=!E||t&&t.start<=o||E-o>2&&!this.fragmentTracker.getPartialFragment(o);if(q||ae)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var x;const q=Math.max(E,g.start||0)-o,ae=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,ye=(null==ae||null==(x=ae.details)?void 0:x.live)?2*ae.details.targetduration:2,De=this.fragmentTracker.getPartialFragment(o);if(q>0&&(q<=ye||De))return void this._trySkipBufferHole(De)}const I=self.performance.now();if(null===s)return void(this.stalled=I);const k=I-s;if(!u&&k>=250&&(this._reportStall(g),!this.media))return;const P=yr.bufferInfo(r,o,i.maxBufferHole);this._tryFixBufferStall(P,k)}_tryFixBufferStall(e,t){const{config:i,fragmentTracker:r,media:s}=this;if(null===s)return;const o=s.currentTime,u=r.getPartialFragment(o);u&&(this._trySkipBufferHole(u)||!this.media)||(e.len>i.maxBufferHole||e.nextStart&&e.nextStart-o<i.maxBufferHole)&&t>1e3*i.highBufferWatchdogPeriod&&(Re.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:i,stallReported:r}=this;if(!r&&i){this.stallReported=!0;const s=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${JSON.stringify(e)})`);Re.warn(s.message),t.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:i,media:r}=this;if(null===r)return 0;const s=r.currentTime,o=yr.bufferInfo(r,s,0),u=s<o.start?o.start:o.nextStart;if(u){const g=u-s;if(g>0&&(o.len<=t.maxBufferHole||o.len>0&&o.len<1&&r.readyState<3)){if(g>t.maxBufferHole){const{fragmentTracker:E}=this;let x=!1;if(0===s){const I=E.getAppendedFrag(0,ei.MAIN);I&&u<I.end&&(x=!0)}if(!x){const I=e||E.getAppendedFrag(s,ei.MAIN);if(I){let k=!1,P=I.end;for(;P<u;){const q=E.getPartialFragment(P);if(!q){k=!0;break}P+=q.duration}if(k)return 0}}}const y=Math.max(u+.05,s+.1);if(Re.warn(`skipping hole, adjusting currentTime from ${s} to ${y}`),this.moved=!0,this.stalled=null,r.currentTime=y,e&&!e.gap){const E=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${y}`);i.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:E,reason:E.message,frag:e})}return y}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:i,nudgeRetry:r}=this;if(null===i)return;const s=i.currentTime;if(this.nudgeRetry++,r<e.nudgeMaxRetry){const o=s+(r+1)*e.nudgeOffset,u=new Error(`Nudging 'currentTime' from ${s} to ${o}`);Re.warn(u.message),i.currentTime=o,t.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.BUFFER_NUDGE_ON_STALL,error:u,fatal:!1})}else{const o=new Error(`Playhead still not moving while enough data buffered @${s} after ${e.nudgeMaxRetry} nudges`);Re.error(o.message),t.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.BUFFER_STALLED_ERROR,error:o,fatal:!0})}}}class bo extends v_{constructor(e,t,i){super(e,t,i,"[stream-controller]",ei.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.LEVEL_LOADING,this.onLevelLoading,this),e.on(U.LEVEL_LOADED,this.onLevelLoaded,this),e.on(U.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(U.ERROR,this.onError,this),e.on(U.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(U.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(U.BUFFER_CREATED,this.onBufferCreated,this),e.on(U.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(U.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.LEVEL_LOADED,this.onLevelLoaded,this),e.off(U.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(U.ERROR,this.onError,this),e.off(U.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(U.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(U.BUFFER_CREATED,this.onBufferCreated,this),e.off(U.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(U.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(U.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:i}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let r=i.startLevel;-1===r&&(i.config.testBandwidth&&this.levels.length>1?(r=0,this.bitrateTest=!0):r=i.nextAutoLevel),this.level=i.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state="IDLE",this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state="STOPPED"}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case"WAITING_LEVEL":{var e;const{levels:i,level:r}=this,s=null==i||null==(e=i[r])?void 0:e.details;if(s&&(!s.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(s))break;this.state="IDLE";break}if(this.hls.nextLoadLevel!==this.level){this.state="IDLE";break}break}case"FRAG_LOADING_WAITING_RETRY":{var t;const i=self.performance.now(),r=this.retryDate;(!r||i>=r||null!=(t=this.media)&&t.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state="IDLE")}}"IDLE"===this.state&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:r}=this,{config:s,nextLoadLevel:o}=e;if(null===t||!r&&(this.startFragRequested||!s.startFragPrefetch)||this.altAudio&&this.audioOnly||null==i||!i[o])return;const u=i[o],h=this.getMainFwdBufferInfo();if(null===h)return;const m=this.getLevelDetails();if(m&&this._streamEnded(h,m)){const P={};return this.altAudio&&(P.type="video"),this.hls.trigger(U.BUFFER_EOS,P),void(this.state="ENDED")}e.loadLevel!==o&&-1===e.manualLevel&&this.log(`Adapting to level ${o} from level ${this.level}`),this.level=e.nextLoadLevel=o;const g=u.details;if(!g||"WAITING_LEVEL"===this.state||g.live&&this.levelLastLoaded!==o)return this.level=o,void(this.state="WAITING_LEVEL");const y=h.len,E=this.getMaxBufferLength(u.maxBitrate);if(y>=E)return;this.backtrackFragment&&this.backtrackFragment.start>h.end&&(this.backtrackFragment=null);const x=this.backtrackFragment?this.backtrackFragment.start:h.end;let I=this.getNextFragment(x,g);if(this.couldBacktrack&&!this.fragPrevious&&I&&"initSegment"!==I.sn&&"OK"!==this.fragmentTracker.getState(I)){var k;const q=(null!=(k=this.backtrackFragment)?k:I).sn-g.startSN,ae=g.fragments[q-1];ae&&I.cc===ae.cc&&(I=ae,this.fragmentTracker.removeFragment(ae))}else this.backtrackFragment&&h.len&&(this.backtrackFragment=null);if(I&&this.isLoopLoading(I,x)){if(!I.gap){const q=this.audioOnly&&!this.altAudio?zi.AUDIO:zi.VIDEO,ae=(q===zi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;ae&&this.afterBufferFlushed(ae,q,ei.MAIN)}I=this.getNextFragmentLoopLoading(I,g,h,ei.MAIN,E)}I&&(I.initSegment&&!I.initSegment.data&&!this.bitrateTest&&(I=I.initSegment),this.loadFragment(I,u,x))}loadFragment(e,t,i){const r=this.fragmentTracker.getState(e);this.fragCurrent=e,"NOT_LOADED"===r||"PARTIAL"===r?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,i)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ei.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let i;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const s=this.getLevelDetails();if(null!=s&&s.live){const u=this.getMainFwdBufferInfo();if(!u||u.len<2*s.targetduration)return}if(!t.paused&&e){const m=this.fragLastKbps;i=m&&this.fragCurrent?this.fragCurrent.duration*e[this.hls.nextLoadLevel].maxBitrate/(1e3*m)+1:0}else i=0;const o=this.getBufferedFrag(t.currentTime+i);if(o){const u=this.followingBufferedFrag(o);if(u){this.abortCurrentFrag();const m=u.duration,g=Math.max(o.end,(u.maxStartPTS?u.maxStartPTS:u.start)+Math.min(Math.max(m-this.config.maxFragLookUpTolerance,.5*m),.75*m));this.flushMainBuffer(g,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case"KEY_LOADING":case"FRAG_LOADING":case"FRAG_LOADING_WAITING_RETRY":case"PARSING":case"PARSED":this.state="IDLE"}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new TC(this.config,i,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;kn(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const i=this.getMainFwdBufferInfo();null!==i&&0!==i.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${i?i.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(U.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(e,t){let s,i=!1,r=!1;t.levels.forEach(o=>{s=o.audioCodec,s&&(-1!==s.indexOf("mp4a.40.2")&&(i=!0),-1!==s.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=i&&r&&!function aC(){var n;const e=oC();return"function"==typeof(null==e||null==(n=e.prototype)?void 0:n.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||"IDLE"!==this.state)return;const r=i[t.level];(!r.details||r.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(r.details))&&(this.state="WAITING_LEVEL")}onLevelLoaded(e,t){var i;const{levels:r}=this,s=t.level,o=t.details,u=o.totalduration;if(!r)return void this.warn(`Levels were reset while loading level ${s}`);this.log(`Level ${s} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${u}`);const h=r[s],m=this.fragCurrent;m&&("FRAG_LOADING"===this.state||"FRAG_LOADING_WAITING_RETRY"===this.state)&&(m.level!==t.level||m.urlId!==h.urlId)&&m.loader&&this.abortCurrentFrag();let g=0;if(o.live||null!=(i=h.details)&&i.live){if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;g=this.alignPlaylists(o,h.details)}if(h.details=o,this.levelLastLoaded=s,this.hls.trigger(U.LEVEL_UPDATED,{details:o,level:s}),"WAITING_LEVEL"===this.state){if(this.waitForCdnTuneIn(o))return;this.state="IDLE"}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,g),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:i,part:r,payload:s}=e,{levels:o}=this;if(!o)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const u=o[i.level],h=u.details;if(!h)return this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),void this.fragmentTracker.removeFragment(i);const m=u.videoCodec,g=h.PTSKnown||!h.live,y=null==(t=i.initSegment)?void 0:t.data,E=this._getAudioCodec(u),x=this.transmuxer=this.transmuxer||new hb(this.hls,ei.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),I=r?r.index:-1,P=new H0(i.level,i.sn,i.stats.chunkCount,s.byteLength,I,-1!==I);x.push(s,y,E,m,i,r,h.totalduration,g,P,this.initPTS[i.cc])}onAudioTrackSwitching(e,t){const i=this.altAudio;if(!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const s=this.hls;i&&(s.trigger(U.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),s.trigger(U.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const r=!!this.hls.audioTracks[t.id].url;if(r){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=r,this.tick()}onBufferCreated(e,t){const i=t.tracks;let r,s,o=!1;for(const u in i){const h=i[u];if("main"===h.id){if(s=u,r=h,"video"===u){const m=i[u];m&&(this.videoBuffer=m.buffer)}}else o=!0}o&&r?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:r}=t;if(i&&i.type!==ei.MAIN)return;if(this.fragContextChanged(i))return this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),void("PARSED"===this.state&&(this.state="IDLE"));const s=r?r.stats:i.stats;this.fragLastKbps=Math.round(8*s.total/(s.buffering.end-s.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,r)}onError(e,t){var i;if(t.fatal)this.state="ERROR";else switch(t.details){case ht.FRAG_GAP:case ht.FRAG_PARSING_ERROR:case ht.FRAG_DECRYPT_ERROR:case ht.FRAG_LOAD_ERROR:case ht.FRAG_LOAD_TIMEOUT:case ht.KEY_LOAD_ERROR:case ht.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ei.MAIN,t);break;case ht.LEVEL_LOAD_ERROR:case ht.LEVEL_LOAD_TIMEOUT:case ht.LEVEL_PARSING_ERROR:!t.levelRetry&&"WAITING_LEVEL"===this.state&&(null==(i=t.context)?void 0:i.type)===Gi.LEVEL&&(this.state="IDLE");break;case ht.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case ht.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){const{media:e,gapController:t}=this;e&&t&&e.readyState&&(!this.loadedmetadata&&yr.getBuffered(e).length||t.poll(this.lastCurrentTime,"IDLE"!==this.state?this.fragCurrent:null),this.lastCurrentTime=e.currentTime)}onFragLoadEmergencyAborted(){this.state="IDLE",this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){(t!==zi.AUDIO||this.audioOnly&&!this.altAudio)&&this.afterBufferFlushed((t===zi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,t,ei.MAIN)}onLevelsUpdated(e,t){this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking)return void this.log(`could not seek to ${i}, already seeking at ${t}`);const r=yr.getBuffered(e),o=(r.length?r.start(0):0)-i;o>0&&(o<this.config.maxBufferHole||o<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${o} to match buffer start`),i+=o,this.startPosition=i),this.log(`seek to target start position ${i} from current time ${t}`),e.currentTime=i}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(i=>{const{hls:r}=this;if(!i||this.fragContextChanged(e))return;t.fragmentError=0,this.state="IDLE",this.startFragRequested=!1,this.bitrateTest=!1;const s=e.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),r.trigger(U.FRAG_LOADED,i),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const i="main",{hls:r}=this,{remuxResult:s,chunkMeta:o}=e,u=this.getCurrentContext(o);if(!u)return void this.resetWhenMissingContext(o);const{frag:h,part:m,level:g}=u,{video:y,text:E,id3:x,initSegment:I}=s,{details:k}=g,P=this.altAudio?void 0:s.audio;if(this.fragContextChanged(h))this.fragmentTracker.removeFragment(h);else{if(this.state="PARSING",I){if(null!=I&&I.tracks){const ee=h.initSegment||h;this._bufferInitSegment(g,I.tracks,ee,o),r.trigger(U.FRAG_PARSING_INIT_SEGMENT,{frag:ee,id:i,tracks:I.tracks})}const q=I.initPTS,ae=I.timescale;kn(q)&&(this.initPTS[h.cc]={baseTime:q,timescale:ae},r.trigger(U.INIT_PTS_FOUND,{frag:h,id:i,initPTS:q,timescale:ae}))}if(y&&k&&"initSegment"!==h.sn){const q=k.fragments[h.sn-1-k.startSN],ae=h.sn===k.startSN,ee=!q||h.cc>q.cc;if(!1!==s.independent){const{startPTS:ye,endPTS:De,startDTS:dt,endDTS:it}=y;if(m)m.elementaryStreams[y.type]={startPTS:ye,endPTS:De,startDTS:dt,endDTS:it};else if(y.firstKeyFrame&&y.independent&&1===o.id&&!ee&&(this.couldBacktrack=!0),y.dropped&&y.independent){const Dt=this.getMainFwdBufferInfo(),Nt=(Dt?Dt.end:this.getLoadPosition())+this.config.maxBufferHole;if(!ae&&Nt<(y.firstKeyFramePTS?y.firstKeyFramePTS:ye)-this.config.maxBufferHole&&!ee)return void this.backtrack(h);ee&&(h.gap=!0),h.setElementaryStreamInfo(y.type,h.start,De,h.start,it,!0)}h.setElementaryStreamInfo(y.type,ye,De,dt,it),this.backtrackFragment&&(this.backtrackFragment=h),this.bufferFragmentData(y,h,m,o,ae||ee)}else{if(!ae&&!ee)return void this.backtrack(h);h.gap=!0}}if(P){const{startPTS:q,endPTS:ae,startDTS:ee,endDTS:ye}=P;m&&(m.elementaryStreams[zi.AUDIO]={startPTS:q,endPTS:ae,startDTS:ee,endDTS:ye}),h.setElementaryStreamInfo(zi.AUDIO,q,ae,ee,ye),this.bufferFragmentData(P,h,m,o)}k&&null!=x&&null!=(t=x.samples)&&t.length&&r.trigger(U.FRAG_PARSING_METADATA,{id:i,frag:h,details:k,samples:x.samples}),k&&E&&r.trigger(U.FRAG_PARSING_USERDATA,{id:i,frag:h,details:k,samples:E.samples})}}_bufferInitSegment(e,t,i,r){if("PARSING"!==this.state)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:s,video:o,audiovideo:u}=t;if(s){let h=e.audioCodec;const m=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(h&&(h=-1!==h.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==s.metadata.channelCount&&-1===m.indexOf("firefox")&&(h="mp4a.40.5")),-1!==m.indexOf("android")&&"audio/mpeg"!==s.container&&(h="mp4a.40.2",this.log(`Android: force audio codec to ${h}`)),e.audioCodec&&e.audioCodec!==h&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${h}"`),s.levelCodec=h,s.id="main",this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${h||""}/${e.audioCodec||""}/${s.codec}]`)}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${o.codec}]`)),u&&this.log(`Init audiovideo buffer, container:${u.container}, codecs[level/parsed]=[${e.attrs.CODECS||""}/${u.codec}]`),this.hls.trigger(U.BUFFER_CODECS,t),Object.keys(t).forEach(h=>{const g=t[h].initSegment;null!=g&&g.byteLength&&this.hls.trigger(U.BUFFER_APPENDING,{type:h,data:g,frag:i,part:null,chunkMeta:r,parent:i.type})}),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,ei.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state="IDLE"}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const i=e.currentTime;if(yr.isBuffered(e,i)?t=this.getAppendedFrag(i):yr.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const r=this.fragPlaying,s=t.level;(!r||t.sn!==r.sn||r.level!==s||t.urlId!==r.urlId)&&(this.fragPlaying=t,this.hls.trigger(U.FRAG_CHANGED,{frag:t}),(!r||r.level!==s)&&this.hls.trigger(U.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,i=this.currentFrag;if(i&&kn(t)&&kn(i.programDateTime))return new Date(i.programDateTime+1e3*(t-i.start))}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Xa{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class vM{constructor(e,t,i,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Xa(e),this.fast_=new Xa(t),this.defaultTTFB_=r,this.ttfb_=new Xa(e)}update(e,t){const{slow_:i,fast_:r,ttfb_:s}=this;i.halfLife!==e&&(this.slow_=new Xa(e,i.getEstimate(),i.getTotalWeight())),r.halfLife!==t&&(this.fast_=new Xa(t,r.getEstimate(),r.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new Xa(e,s.getEstimate(),s.getTotalWeight()))}sample(e,t){const r=(e=Math.max(e,this.minDelayMs_))/1e3,s=8*t/r;this.fast_.sample(r,s),this.slow_.sample(r,s)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class wM{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;return e.length?(i=1===e.length?e[0]:function $L(n,e){const t=new Uint8Array(e);let i=0;for(let r=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}(e,t),this.reset(),i):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function IC(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!pb(n[t].attrs,e[t].attrs))return!1;return!0}function pb(n,e){const t=n["STABLE-RENDITION-ID"];return t?t===e["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(i=>n[i]!==e[i])}class EM{constructor(e){this.buffered=void 0;const t=(i,r,s)=>{if((r>>>=0)>s-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${s})`);return e[r][i]};this.buffered={get length(){return e.length},end:i=>t("end",i,e.length),start:i=>t("start",i,e.length)}}}function gb(n){const e=[];for(let t=0;t<n.length;t++){const i=n[t];("subtitles"===i.kind||"captions"===i.kind)&&i.label&&e.push(n[t])}return e}class _b{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t){const i=this.queues[t];i.push(e),1===i.length&&this.buffers[t]&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const i=new Promise(s=>{t=s});return this.append({execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}},e),i}executeNext(e){const{buffers:t,queues:i}=this,r=t[e],s=i[e];if(s.length){const o=s[0];try{o.execute()}catch(u){Re.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),o.onError(u),null!=r&&r.updating||(s.shift(),this.executeNext(e))}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const yb=sf(),vb=/([ha]vc.)(?:\.[^.,]+)+/,P_={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},TM=function(e){let t=e;return P_.hasOwnProperty(e)&&(t=P_[e]),String.fromCharCode(t)},gc=100,AC={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},_f={17:2,18:4,21:6,22:8,23:10,19:13,20:15},CM={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},MC={25:2,26:4,29:6,30:8,31:10,27:13,28:15},bb=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class VL{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i="function"==typeof t?t():t;Re.log(`${this.time} [${e}] ${i}`)}}}const Td=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class IM{constructor(e,t,i,r,s){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=i||!1,this.background=r||"black",this.flash=s||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const r=t[i];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class SM{constructor(e,t,i,r,s,o){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new IM(t,i,r,s,o)}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class DM{constructor(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let t=0;t<gc;t++)this.chars.push(new SM);this.logger=e,this.pos=0,this.currPenState=new IM}equals(e){let t=!0;for(let i=0;i<gc;i++)if(!this.chars[i].equals(e.chars[i])){t=!1;break}return t}copy(e){for(let t=0;t<gc;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<gc;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>gc&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=gc)}moveCursor(e){const t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=TM(e);this.pos>=gc?this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<gc;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<gc;i++){const r=this.chars[i].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class wb{constructor(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let t=0;t<15;t++)this.rows.push(new DM(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let e=0;e<15;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let i=0;i<15;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<15;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let u=0;u<15;u++)this.rows[u].clear();const s=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const u=o.rows[s].cueStartTime,h=this.logger.time;if(u&&null!==h&&u<h)for(let m=0;m<this.nrRollUpRows;m++)this.rows[t-this.nrRollUpRows+m+1].copy(o.rows[s+m])}}this.currRow=t;const i=this.rows[this.currRow];if(null!==e.indent){const o=Math.max(e.indent-1,0);i.setCursor(e.indent),e.color=i.chars[o].penState.foreground}this.setPen({foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1})}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const t=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",r=-1;for(let s=0;s<15;s++){const o=this.rows[s].getTextString();o&&(r=s+1,t.push(e?"Row "+r+": '"+o+"'":o.trim()))}return t.length>0&&(i=e?"["+t.join(" | ")+"]":t.join("\n")),i}getTextAndFormat(){return this.rows}}class Eb{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new wb(i),this.nonDisplayedMemory=new wb(i),this.lastOutputScreen=new wb(i),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class xb{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const r=new VL;this.channels=[null,new Eb(e,t,r),new Eb(e+1,i,r)],this.cmdHistory={a:null,b:null},this.logger=r}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){let i,r,s,o=!1;this.logger.time=e;for(let u=0;u<t.length;u+=2)if(r=127&t[u],s=127&t[u+1],0!==r||0!==s){if(this.logger.log(3,"["+Td([t[u],t[u+1]])+"] -> ("+Td([r,s])+")"),i=this.parseCmd(r,s),i||(i=this.parseMidrow(r,s)),i||(i=this.parsePAC(r,s)),i||(i=this.parseBackgroundAttributes(r,s)),!i&&(o=this.parseChars(r,s),o)){const h=this.currentChannel;h&&h>0?this.channels[h].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!i&&!o&&this.logger.log(2,"Couldn't parse cleaned data "+Td([r,s])+" orig: "+Td([t[u],t[u+1]]))}}parseCmd(e,t){const{cmdHistory:i}=this;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(Tb(e,t,i))return yf(null,null,i),this.logger.log(3,"Repeated command ("+Td([e,t])+") is dropped"),!0;const o=20===e||21===e||23===e?1:2,u=this.channels[o];return 20===e||21===e||28===e||29===e?32===t?u.ccRCL():33===t?u.ccBS():34===t?u.ccAOF():35===t?u.ccAON():36===t?u.ccDER():37===t?u.ccRU(2):38===t?u.ccRU(3):39===t?u.ccRU(4):40===t?u.ccFON():41===t?u.ccRDC():42===t?u.ccTR():43===t?u.ccRTD():44===t?u.ccEDM():45===t?u.ccCR():46===t?u.ccENM():47===t&&u.ccEOC():u.ccTO(t-32),yf(e,t,i),this.currentChannel=o,!0}parseMidrow(e,t){let i=0;if((17===e||25===e)&&t>=32&&t<=47){if(i=17===e?1:2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[i];return!!r&&(r.ccMIDROW(t),this.logger.log(3,"MIDROW ("+Td([e,t])+")"),!0)}return!1}parsePAC(e,t){let i;const r=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(Tb(e,t,r))return yf(null,null,r),!0;const u=e<=23?1:2;i=t>=64&&t<=95?1===u?AC[e]:CM[e]:1===u?_f[e]:MC[e];const h=this.channels[u];return!!h&&(h.setPAC(this.interpretPAC(i,t)),yf(e,t,r),this.currentChannel=u,!0)}interpretPAC(e,t){let i;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return i=t>95?t-96:t-64,r.underline=1==(1&i),i<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((i-16)/2),r}parseChars(e,t){let i,r=null,s=null;if(e>=25?(i=2,s=e-8):(i=1,s=e),s>=17&&s<=19){let o;o=17===s?t+80:18===s?t+112:t+144,this.logger.log(2,"Special char '"+TM(o)+"' in channel "+i),r=[o]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);if(r){const o=Td(r);this.logger.log(3,"Char codes =  "+o.join(",")),yf(e,t,this.cmdHistory)}return r}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;let s;const o={};return 16===e||24===e?(s=Math.floor((t-32)/2),o.background=bb[s],t%2==1&&(o.background=o.background+"_semi")):45===t?o.background="transparent":(o.foreground="black",47===t&&(o.underline=!0)),this.channels[e<=23?1:2].setBkgData(o),yf(e,t,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function yf(n,e,t){t.a=n,t.b=e}function Tb(n,e,t){return t.a===n&&t.b===e}class L_{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Ib=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(u,h){if("string"!=typeof h||!Array.isArray(u))return!1;const m=h.toLowerCase();return!!~u.indexOf(m)&&m}function r(u){return t(e,u)}function s(u,...h){let m=1;for(;m<arguments.length;m++){const g=arguments[m];for(const y in g)u[y]=g[y]}return u}function o(u,h,m){const g=this,y={enumerable:!0};g.hasBeenReset=!1;let E="",x=!1,I=u,k=h,P=m,q=null,ae="",ee=!0,ye="auto",De="start",dt=50,it="middle",Dt=50,Nt="middle";Object.defineProperty(g,"id",s({},y,{get:function(){return E},set:function(mt){E=""+mt}})),Object.defineProperty(g,"pauseOnExit",s({},y,{get:function(){return x},set:function(mt){x=!!mt}})),Object.defineProperty(g,"startTime",s({},y,{get:function(){return I},set:function(mt){if("number"!=typeof mt)throw new TypeError("Start time must be set to a number.");I=mt,this.hasBeenReset=!0}})),Object.defineProperty(g,"endTime",s({},y,{get:function(){return k},set:function(mt){if("number"!=typeof mt)throw new TypeError("End time must be set to a number.");k=mt,this.hasBeenReset=!0}})),Object.defineProperty(g,"text",s({},y,{get:function(){return P},set:function(mt){P=""+mt,this.hasBeenReset=!0}})),Object.defineProperty(g,"region",s({},y,{get:function(){return q},set:function(mt){q=mt,this.hasBeenReset=!0}})),Object.defineProperty(g,"vertical",s({},y,{get:function(){return ae},set:function(mt){const Hn=function i(u){return t(n,u)}(mt);if(!1===Hn)throw new SyntaxError("An invalid or illegal string was specified.");ae=Hn,this.hasBeenReset=!0}})),Object.defineProperty(g,"snapToLines",s({},y,{get:function(){return ee},set:function(mt){ee=!!mt,this.hasBeenReset=!0}})),Object.defineProperty(g,"line",s({},y,{get:function(){return ye},set:function(mt){if("number"!=typeof mt&&"auto"!==mt)throw new SyntaxError("An invalid number or illegal string was specified.");ye=mt,this.hasBeenReset=!0}})),Object.defineProperty(g,"lineAlign",s({},y,{get:function(){return De},set:function(mt){const Hn=r(mt);if(!Hn)throw new SyntaxError("An invalid or illegal string was specified.");De=Hn,this.hasBeenReset=!0}})),Object.defineProperty(g,"position",s({},y,{get:function(){return dt},set:function(mt){if(mt<0||mt>100)throw new Error("Position must be between 0 and 100.");dt=mt,this.hasBeenReset=!0}})),Object.defineProperty(g,"positionAlign",s({},y,{get:function(){return it},set:function(mt){const Hn=r(mt);if(!Hn)throw new SyntaxError("An invalid or illegal string was specified.");it=Hn,this.hasBeenReset=!0}})),Object.defineProperty(g,"size",s({},y,{get:function(){return Dt},set:function(mt){if(mt<0||mt>100)throw new Error("Size must be between 0 and 100.");Dt=mt,this.hasBeenReset=!0}})),Object.defineProperty(g,"align",s({},y,{get:function(){return Nt},set:function(mt){const Hn=r(mt);if(!Hn)throw new SyntaxError("An invalid or illegal string was specified.");Nt=Hn,this.hasBeenReset=!0}})),g.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class kC{decode(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function RC(n){function e(i,r,s,o){return 3600*(0|i)+60*(0|r)+(0|s)+parseFloat(o||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class OC{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&""!==t&&(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let r=0;r<i.length;++r)if(t===i[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function Sb(n,e,t,i){const r=i?n.split(i):[n];for(const s in r){if("string"!=typeof r[s])continue;const o=r[s].split(t);2===o.length&&e(o[0],o[1])}}const F_=new Ib(0,0,""),wp="middle"===F_.align?"middle":"center";function AM(n,e,t){const i=n;function r(){const u=RC(n);if(null===u)throw new Error("Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),u}function o(){n=n.replace(/^\s+/,"")}if(o(),e.startTime=r(),o(),"--\x3e"!==n.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);n=n.slice(3),o(),e.endTime=r(),o(),function s(u,h){const m=new OC;Sb(u,function(E,x){let I;switch(E){case"region":for(let k=t.length-1;k>=0;k--)if(t[k].id===x){m.set(E,t[k].region);break}break;case"vertical":m.alt(E,x,["rl","lr"]);break;case"line":I=x.split(","),m.integer(E,I[0]),m.percent(E,I[0])&&m.set("snapToLines",!1),m.alt(E,I[0],["auto"]),2===I.length&&m.alt("lineAlign",I[1],["start",wp,"end"]);break;case"position":I=x.split(","),m.percent(E,I[0]),2===I.length&&m.alt("positionAlign",I[1],["start",wp,"end","line-left","line-right","auto"]);break;case"size":m.percent(E,x);break;case"align":m.alt(E,x,["start",wp,"end","left","right"])}},/:/,/\s/),h.region=m.get("region",null),h.vertical=m.get("vertical","");let g=m.get("line","auto");"auto"===g&&-1===F_.line&&(g=-1),h.line=g,h.lineAlign=m.get("lineAlign","start"),h.snapToLines=m.get("snapToLines",!0),h.size=m.get("size",100),h.align=m.get("align",wp);let y=m.get("position","auto");"auto"===y&&50===F_.position&&(y="start"===h.align||"left"===h.align?0:"end"===h.align||"right"===h.align?100:50),h.position=y}(n,e)}function PC(n){return n.replace(/<br(?: \/)?>/gi,"\n")}class HL{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new kC,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function i(){let s=t.buffer,o=0;for(s=PC(s);o<s.length&&"\r"!==s[o]&&"\n"!==s[o];)++o;const u=s.slice(0,o);return"\r"===s[o]&&++o,"\n"===s[o]&&++o,t.buffer=s.slice(o),u}function r(s){Sb(s,function(o,u){},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let s="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;s=i();const u=s.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==u||!u[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let o=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:s=i(),t.state){case"HEADER":/:/.test(s)?r(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new Ib(0,0,""),t.state="CUE",-1===s.indexOf("--\x3e")){t.cue.id=s;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{AM(s,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const u=-1!==s.indexOf("--\x3e");if(!s||u&&(o=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=s}continue;case"BADCUE":s||(t.state="ID")}}}catch{"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const LC=/\r\n|\n\r|\n|\r/g,FC=function(e,t,i=0){return e.slice(i,i+t.length)===t},zL=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(kn(t)&&kn(i)&&kn(r)&&kn(s)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=6e4*r,t+=36e5*s,t},NC=function(e){let t=5381,i=e.length;for(;i;)t=33*t^e.charCodeAt(--i);return(t>>>0).toString()};function BC(n,e,t){return NC(n.toString())+NC(e.toString())+NC(t)}const jL=function(e,t,i){let r=e[t],s=e[r.prevCC];if(!s||!s.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!=(o=s)&&o.new;){var o;e.ccOffset+=r.start-s.start,r.new=!1,r=s,s=e[r.prevCC]}e.presentationOffset=i};const UC="stpp.ttml.im1t",MM=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Ep=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,WL={left:"start",center:"center",right:"end",start:"start",end:"end"};function Db(n,e,t,i){const r=ji(new Uint8Array(n),["mdat"]);if(0===r.length)return void i(new Error("Could not parse IMSC1 mdat"));const s=r.map(u=>qa(u)),o=function sb(n,e,t=1,i=!1){return rb(n,e,1/t,i)}(e.baseTime,1,e.timescale);try{s.forEach(u=>t(function N_(n,e){const r=(new DOMParser).parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(s).reduce((y,E)=>(y[E]=r.getAttribute(`ttp:${E}`)||s[E],y),{}),u="preserve"!==r.getAttribute("xml:space"),h=Ab(B_(r,"styling","style")),m=Ab(B_(r,"layout","region")),g=B_(r,"body","[begin]");return[].map.call(g,y=>{const E=kM(y,u);if(!E||!y.hasAttribute("begin"))return null;const x=VC(y.getAttribute("begin"),o),I=VC(y.getAttribute("dur"),o);let k=VC(y.getAttribute("end"),o);if(null===x)throw $C(y);if(null===k){if(null===I)throw $C(y);k=x+I}const P=new Ib(x-e,k-e,E);P.id=BC(P.startTime,P.endTime,P.text);const ee=function Mb(n,e,t){const i="http://www.w3.org/ns/ttml#styling";let r=null;const o=null!=n&&n.hasAttribute("style")?n.getAttribute("style"):null;return o&&t.hasOwnProperty(o)&&(r=t[o]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((u,h)=>{const m=U_(e,i,h)||U_(n,i,h)||U_(r,i,h);return m&&(u[h]=m),u},{})}(m[y.getAttribute("region")],h[y.getAttribute("style")],h),{textAlign:ye}=ee;if(ye){const De=WL[ye];De&&(P.lineAlign=De),P.align=ye}return bs(P,ee),P}).filter(y=>null!==y)}(u,o)))}catch(u){i(u)}}function B_(n,e,t){const i=n.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(t)):[]}function Ab(n){return n.reduce((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function kM(n,e){return[].slice.call(n.childNodes).reduce((t,i,r)=>{var s;return"br"===i.nodeName&&r?t+"\n":null!=(s=i.childNodes)&&s.length?kM(i,e):e?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}function U_(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function $C(n){return new Error(`Could not parse ttml timestamp ${n}`)}function VC(n,e){if(!n)return null;let t=RC(n);return null===t&&(MM.test(n)?t=function RM(n,e){const t=MM.exec(n);return 3600*(0|t[1])+60*(0|t[2])+(0|t[3])+((0|t[4])+(0|t[5])/e.subFrameRate)/e.frameRate}(n,e):Ep.test(n)&&(t=function OM(n,e){const t=Ep.exec(n),i=Number(t[1]);switch(t[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}(n,e))),t}function $_(n,e){return!!n&&n.label===e.name&&!(n.textTrack1||n.textTrack2)}function LM(n,e,t,i){return Math.min(e,i)-Math.max(n,t)}class HC{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(U.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.BUFFER_CODECS,this.onBufferCodecs,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(U.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.BUFFER_CODECS,this.onBufferCodecs,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const e=this.hls.levels;if(e.length){const t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter((r,s)=>this.isLevelAllowed(r)&&s<=e);return this.clientRect=null,HC.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,!t.width&&!t.height&&(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,t,i){if(null==e||!e.length)return-1;const r=(o,u)=>!u||o.width!==u.width||o.height!==u.height;let s=e.length-1;for(let o=0;o<e.length;o+=1){const u=e[o];if((u.width>=t||u.height>=i)&&r(u,e[o+1])){s=o;break}}return s}}const V_="[eme]";let NM=(()=>{class n{constructor(t){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=n.CDMCleanupPromise?[n.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=Re.debug.bind(Re,V_),this.log=Re.log.bind(Re,V_),this.warn=Re.warn.bind(Re,V_),this.error=Re.error.bind(Re,V_),this.hls=t,this.config=t.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(U.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(U.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(U.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(U.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(U.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(U.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(t){const{drmSystems:i,widevineLicenseUrl:r}=this.config,s=i[t];if(s)return s.licenseUrl;if(t===Pr.WIDEVINE&&r)return r;throw new Error(`no license server URL configured for key-system "${t}"`)}getServerCertificateUrl(t){const{drmSystems:i}=this.config,r=i[t];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${t}"]`)}attemptKeySystemAccess(t){const i=this.hls.levels,r=(u,h,m)=>!!u&&m.indexOf(u)===h,s=i.map(u=>u.audioCodec).filter(r),o=i.map(u=>u.videoCodec).filter(r);return s.length+o.length===0&&o.push("avc1.42e01e"),new Promise((u,h)=>{const m=g=>{const y=g.shift();this.getMediaKeysPromise(y,s,o).then(E=>u({keySystem:y,mediaKeys:E})).catch(E=>{g.length?m(g):h(E instanceof wa?E:new wa({type:Jn.KEY_SYSTEM_ERROR,details:ht.KEY_SYSTEM_NO_ACCESS,error:E,fatal:!0},E.message))})};m(t)})}requestMediaKeySystemAccess(t,i){const{requestMediaKeySystemAccessFunc:r}=this.config;if("function"!=typeof r){let s=`Configured requestMediaKeySystemAccess is not a function ${r}`;return null===vT&&"http:"===self.location.protocol&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return r(t,i)}getMediaKeysPromise(t,i,r){const s=function b1(n,e,t,i){let r;switch(n){case Pr.FAIRPLAY:r=["cenc","sinf"];break;case Pr.WIDEVINE:case Pr.PLAYREADY:r=["cenc"];break;case Pr.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return function w1(n,e,t,i){return[{initDataTypes:n,persistentState:i.persistentState||"not-allowed",distinctiveIdentifier:i.distinctiveIdentifier||"not-allowed",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs="${s}"`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:t.map(s=>({contentType:`video/mp4; codecs="${s}"`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}(r,e,t,i)}(t,i,r,this.config.drmSystemOptions),o=this.keySystemAccessPromises[t];let u=o?.keySystemAccess;if(!u){this.log(`Requesting encrypted media "${t}" key-system access with config: ${JSON.stringify(s)}`),u=this.requestMediaKeySystemAccess(t,s);const h=this.keySystemAccessPromises[t]={keySystemAccess:u};return u.catch(m=>{this.log(`Failed to obtain access to key-system "${t}": ${m}`)}),u.then(m=>{this.log(`Access for key-system "${m.keySystem}" obtained`);const g=this.fetchServerCertificate(t);return this.log(`Create media-keys for "${t}"`),h.mediaKeys=m.createMediaKeys().then(y=>(this.log(`Media-keys created for "${t}"`),g.then(E=>E?this.setMediaKeysServerCertificate(y,t,E):y))),h.mediaKeys.catch(y=>{this.error(`Failed to create media-keys for "${t}"}: ${y}`)}),h.mediaKeys})}return u.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:t,keySystem:i,mediaKeys:r}){this.log(`Creating key-system session "${i}" keyId: ${Ka_hexDump(t.keyId||[])}`);const s=r.createSession(),o={decryptdata:t,keySystem:i,mediaKeys:r,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(o),o}renewKeySession(t){const i=t.decryptdata;if(i.pssh){const r=this.createMediaKeySessionContext(t),s=this.getKeyIdString(i);this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(r,"cenc",i.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)}getKeyIdString(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(null===t.keyId)throw new Error("keyId is null");return Ka_hexDump(t.keyId)}updateKeySession(t,i){var r;const s=t.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${Ka_hexDump((null==(r=t.decryptdata)?void 0:r.keyId)||[])}\n      } (data length: ${i&&i.byteLength})`),s.update(i)}selectKeySystemFormat(t){const i=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${t.sn} ${t.type}: ${t.level}) key formats ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)),this.keyFormatPromise}getKeyFormatPromise(t){return new Promise((i,r)=>{const s=v0(this.config),o=t.map(_a).filter(u=>!!u&&-1!==s.indexOf(u));return this.getKeySystemSelectionPromise(o).then(({keySystem:u})=>{const h=y0(u);h?i(h):r(new Error(`Unable to find format for key-system "${u}"`))}).catch(r)})}loadKey(t){const i=t.keyInfo.decryptdata,r=this.getKeyIdString(i),s=`(keyId: ${r} format: "${i.keyFormat}" method: ${i.method} uri: ${i.uri})`;this.log(`Starting session for key ${s}`);let o=this.keyIdToKeySessionPromise[r];return o||(o=this.keyIdToKeySessionPromise[r]=this.getKeySystemForKeyPromise(i).then(({keySystem:u,mediaKeys:h})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${t.frag.sn} ${t.frag.type}: ${t.frag.level} using key ${s}`),this.attemptSetMediaKeys(u,h).then(()=>{this.throwIfDestroyed();const m=this.createMediaKeySessionContext({keySystem:u,mediaKeys:h,decryptdata:i});return this.generateRequestWithPreferredKeySession(m,"cenc",i.pssh,"playlist-key")}))),o.catch(u=>this.handleError(u))),o}throwIfDestroyed(t="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(t){this.hls&&(this.error(t.message),this.hls.trigger(U.ERROR,t instanceof wa?t.data:{type:Jn.KEY_SYSTEM_ERROR,details:ht.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))}getKeySystemForKeyPromise(t){const i=this.getKeyIdString(t),r=this.keyIdToKeySessionPromise[i];if(!r){const s=_a(t.keyFormat),o=s?[s]:v0(this.config);return this.attemptKeySystemAccess(o)}return r}getKeySystemSelectionPromise(t){if(t.length||(t=v0(this.config)),0===t.length)throw new wa({type:Jn.KEY_SYSTEM_ERROR,details:ht.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(t)}_onMediaEncrypted(t){const{initDataType:i,initData:r}=t;if(this.debug(`"${t.type}" event: init data type: "${i}"`),null===r)return;let s,o;if("sinf"===i&&this.config.drmSystems[Pr.FAIRPLAY]){const y=Hs(new Uint8Array(r));try{const E=gT(JSON.parse(y).sinf),x=MT(new Uint8Array(E));if(!x)return;s=x.subarray(8,24),o=Pr.FAIRPLAY}catch{return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{const y=function FT(n){if(!(n instanceof ArrayBuffer)||n.byteLength<32)return null;const e={version:0,systemId:"",kids:null,data:null},t=new DataView(n),i=t.getUint32(0);if(n.byteLength!==i&&i>44||1886614376!==t.getUint32(4)||(e.version=t.getUint32(8)>>>24,e.version>1))return null;e.systemId=Ka_hexDump(new Uint8Array(n,12,16));const s=t.getUint32(28);if(0===e.version){if(i-32<s)return null;e.data=new Uint8Array(n,32,s)}else if(1===e.version){e.kids=[];for(let o=0;o<s;o++)e.kids.push(new Uint8Array(n,32+16*o,16))}return e}(r);if(null===y)return;0===y.version&&y.systemId===ya_WIDEVINE&&y.data&&(s=y.data.subarray(8,24)),o=function yT(n){if(n===ya_WIDEVINE)return Pr.WIDEVINE}(y.systemId)}if(!o||!s)return;const u=Ka_hexDump(s),{keyIdToKeySessionPromise:h,mediaKeySessions:m}=this;let g=h[u];for(let y=0;y<m.length;y++){const E=m[y],x=E.decryptdata;if(x.pssh||!x.keyId)continue;const I=Ka_hexDump(x.keyId);if(u===I||-1!==x.uri.replace(/-/g,"").indexOf(u)){g=h[I],delete h[I],x.pssh=new Uint8Array(r),x.keyId=s,g=h[u]=g.then(()=>this.generateRequestWithPreferredKeySession(E,i,r,"encrypted-event-key-match"));break}}g||(g=h[u]=this.getKeySystemSelectionPromise([o]).then(({keySystem:y,mediaKeys:E})=>{var x;this.throwIfDestroyed();const I=new rf("ISO-23001-7",u,null!=(x=y0(y))?x:"");return I.pssh=new Uint8Array(r),I.keyId=s,this.attemptSetMediaKeys(y,E).then(()=>{this.throwIfDestroyed();const k=this.createMediaKeySessionContext({decryptdata:I,keySystem:y,mediaKeys:E});return this.generateRequestWithPreferredKeySession(k,i,r,"encrypted-event-no-match")})})),g.catch(y=>this.handleError(y))}_onWaitingForKey(t){this.log(`"${t.type}" event`)}attemptSetMediaKeys(t,i){const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${t}"`);const s=Promise.all(r).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(i)});return this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${t}"`),r.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(o=>-1===r.indexOf(o))})}generateRequestWithPreferredKeySession(t,i,r,s){var o,u;const h=null==(o=this.config.drmSystems)||null==(u=o[t.keySystem])?void 0:u.generateRequest;if(h)try{const x=h.call(this.hls,i,r,t);if(!x)throw new Error("Invalid response from configured generateRequest filter");i=x.initDataType,r=t.decryptdata.pssh=x.initData?new Uint8Array(x.initData):null}catch(x){var m;if(this.warn(x.message),null!=(m=this.hls)&&m.config.debug)throw x}if(null===r)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(t);const g=this.getKeyIdString(t.decryptdata);this.log(`Generating key-session request for "${s}": ${g} (init data type: ${i} length: ${r?r.byteLength:null})`);const y=new M_;t.mediaKeysSession.onmessage=x=>{const I=t.mediaKeysSession;if(!I)return void y.emit("error",new Error("invalid state"));const{messageType:k,message:P}=x;this.log(`"${k}" message event for session "${I.sessionId}" message size: ${P.byteLength}`),"license-request"===k||"license-renewal"===k?this.renewLicense(t,P).catch(q=>{this.handleError(q),y.emit("error",q)}):"license-release"===k?t.keySystem===Pr.FAIRPLAY&&(this.updateKeySession(t,_T("acknowledged")),this.removeSession(t)):this.warn(`unhandled media key message type "${k}"`)},t.mediaKeysSession.onkeystatuseschange=x=>{if(!t.mediaKeysSession)return void y.emit("error",new Error("invalid state"));this.onKeyStatusChange(t);const k=t.keyStatus;y.emit("keyStatus",k),"expired"===k&&(this.warn(`${t.keySystem} expired for key ${g}`),this.renewKeySession(t))};const E=new Promise((x,I)=>{y.on("error",I),y.on("keyStatus",k=>{k.startsWith("usable")?x():"output-restricted"===k?I(new wa({type:Jn.KEY_SYSTEM_ERROR,details:ht.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===k?I(new wa({type:Jn.KEY_SYSTEM_ERROR,details:ht.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${k}"`)):"expired"===k?I(new Error("key expired while generating request")):this.warn(`unhandled key status change "${k}"`)})});return t.mediaKeysSession.generateRequest(i,r).then(()=>{var x;this.log(`Request generated for key-session "${null==(x=t.mediaKeysSession)?void 0:x.sessionId}" keyId: ${g}`)}).catch(x=>{throw new wa({type:Jn.KEY_SYSTEM_ERROR,details:ht.KEY_SYSTEM_NO_SESSION,error:x,fatal:!1},`Error generating key-session request: ${x}`)}).then(()=>E).catch(x=>{throw y.removeAllListeners(),this.removeSession(t),x}).then(()=>(y.removeAllListeners(),t))}onKeyStatusChange(t){t.mediaKeysSession.keyStatuses.forEach((i,r)=>{this.log(`key status change "${i}" for keyStatuses keyId: ${Ka_hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${Ka_hexDump(new Uint8Array(t.decryptdata.keyId||[]))} uri: ${t.decryptdata.uri}`),t.keyStatus=i})}fetchServerCertificate(t){const i=this.config,s=new(0,i.loader)(i),o=this.getServerCertificateUrl(t);return o?(this.log(`Fetching serverCertificate for "${t}"`),new Promise((u,h)=>{const m={responseType:"arraybuffer",url:o},g=i.certLoadPolicy.default;s.load(m,{loadPolicy:g,timeout:g.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},{onSuccess:(x,I,k,P)=>{u(x.data)},onError:(x,I,k,P)=>{h(new wa({type:Jn.KEY_SYSTEM_ERROR,details:ht.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:k,response:Vs({url:m.url,data:void 0},x)},`"${t}" certificate request failed (${o}). Status: ${x.code} (${x.text})`))},onTimeout:(x,I,k)=>{h(new wa({type:Jn.KEY_SYSTEM_ERROR,details:ht.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:k,response:{url:m.url,data:void 0}},`"${t}" certificate request timed out (${o})`))},onAbort:(x,I,k)=>{h(new Error("aborted"))}})})):Promise.resolve()}setMediaKeysServerCertificate(t,i,r){return new Promise((s,o)=>{t.setServerCertificate(r).then(u=>{this.log(`setServerCertificate ${u?"success":"not supported by CDM"} (${r?.byteLength}) on "${i}"`),s(t)}).catch(u=>{o(new wa({type:Jn.KEY_SYSTEM_ERROR,details:ht.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:u,fatal:!0},u.message))})})}renewLicense(t,i){return this.requestLicense(t,new Uint8Array(i)).then(r=>this.updateKeySession(t,new Uint8Array(r)).catch(s=>{throw new wa({type:Jn.KEY_SYSTEM_ERROR,details:ht.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:s,fatal:!0},s.message)}))}setupLicenseXHR(t,i,r,s){const o=this.config.licenseXhrSetup;return o?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return o.call(this.hls,t,i,r,s)}).catch(u=>{if(!r.decryptdata)throw u;return t.open("POST",i,!0),o.call(this.hls,t,i,r,s)}).then(u=>(t.readyState||t.open("POST",i,!0),{xhr:t,licenseChallenge:u||s})):(t.open("POST",i,!0),Promise.resolve({xhr:t,licenseChallenge:s}))}requestLicense(t,i){const r=this.config.keyLoadPolicy.default;return new Promise((s,o)=>{const u=this.getLicenseServerUrl(t.keySystem);this.log(`Sending license request to URL: ${u}`);const h=new XMLHttpRequest;h.responseType="arraybuffer",h.onreadystatechange=()=>{if(!this.hls||!t.mediaKeysSession)return o(new Error("invalid state"));if(4===h.readyState)if(200===h.status){this._requestLicenseFailureCount=0;let m=h.response;this.log(`License received ${m instanceof ArrayBuffer?m.byteLength:m}`);const g=this.config.licenseResponseCallback;if(g)try{m=g.call(this.hls,h,u,t)}catch(y){this.error(y)}s(m)}else{const m=r.errorRetry,g=m?m.maxNumRetry:0;this._requestLicenseFailureCount++,this._requestLicenseFailureCount>g||h.status>=400&&h.status<500?o(new wa({type:Jn.KEY_SYSTEM_ERROR,details:ht.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:h,response:{url:u,data:void 0,code:h.status,text:h.statusText}},`License Request XHR failed (${u}). Status: ${h.status} (${h.statusText})`)):(this.warn(`Retrying license request, ${g-this._requestLicenseFailureCount+1} attempts left`),this.requestLicense(t,i).then(s,o))}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=h,this.setupLicenseXHR(h,u,t,i).then(({xhr:m,licenseChallenge:g})=>{m.send(g)})})}onMediaAttached(t,i){if(!this.config.emeEnabled)return;const r=i.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const t=this.media,i=this.mediaKeySessions;t&&(t.removeEventListener("encrypted",this.onMediaEncrypted),t.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},rf.clearKeyUriToKeyIdMap();const r=i.length;n.CDMCleanupPromise=Promise.all(i.map(s=>this.removeSession(s)).concat(t?.setMediaKeys(null).catch(s=>{this.log(`Could not clear media keys: ${s}. media.src: ${t?.src}`)}))).then(()=>{r&&(this.log("finished closing key sessions and clearing media keys"),i.length=0)}).catch(s=>{this.log(`Could not close sessions and clear media keys: ${s}. media.src: ${t?.src}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(t,{sessionKeys:i}){if(i&&this.config.emeEnabled&&!this.keyFormatPromise){const r=i.reduce((s,o)=>(-1===s.indexOf(o.keyFormat)&&s.push(o.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(t){const{mediaKeysSession:i,licenseXhr:r}=t;if(i){this.log(`Remove licenses and keys and close session ${i.sessionId}`),i.onmessage=null,i.onkeystatuseschange=null,r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(t);return s>-1&&this.mediaKeySessions.splice(s,1),i.remove().catch(o=>{this.log(`Could not remove session: ${o}`)}).then(()=>i.close()).catch(o=>{this.log(`Could not close session: ${o}`)})}}}return n.CDMCleanupPromise=void 0,n})();class wa extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}class _c{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=r=>{try{this.apply(r,{ot:"m",su:!this.initialized})}catch(s){Re.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=r=>{try{const s=r.frag,o=this.hls.levels[s.level],u=this.getObjectType(s),h={d:1e3*s.duration,ot:u};("v"===u||"a"===u||"av"==u)&&(h.br=o.bitrate/1e3,h.tb=this.getTopBandwidth(u)/1e3,h.bl=this.getBufferLength(u)),this.apply(r,h)}catch(s){Re.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;null!=i&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||_c.uuid(),this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.registerListeners())}registerListeners(){const e=this.hls;e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHED,this.onMediaDetached,this),e.on(U.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHED,this.onMediaDetached,this),e.off(U.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,r;this.audioBuffer=null==(i=t.tracks.audio)?void 0:i.buffer,this.videoBuffer=null==(r=t.tracks.video)?void 0:r.buffer}createData(){var e;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){if(bs(t,this.createData()),this.starved&&("i"===t.ot||"v"===t.ot||"av"===t.ot)&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders){const r=_c.toHeaders(t);if(!Object.keys(r).length)return;e.headers||(e.headers={}),bs(e.headers,r)}else{const r=_c.toQuery(t);if(!r)return;e.url=_c.appendQueryToUri(e.url,r)}}getObjectType(e){const{type:t}=e;return"subtitle"===t?"tt":"initSegment"===e.sn?"i":"audio"===t?"a":"main"===t?this.hls.audioTracks.length?"v":"av":void 0}getTopBandwidth(e){let i,t=0;const r=this.hls;if("a"===e)i=r.audioTracks;else{const s=r.maxAutoLevel;i=r.levels.slice(0,s>-1?s+1:r.levels.length)}for(const s of i)s.bitrate>t&&(t=s.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.hls.media,i="a"===e?this.audioBuffer:this.videoBuffer;return i&&t?1e3*yr.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len:NaN}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,u){t(s),this.loader.load(s,o,u)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,u){t(s),this.loader.load(s,o,u)}}}static uuid(){const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}static serialize(e){const t=[],i=m=>!Number.isNaN(m)&&null!=m&&""!==m&&!1!==m,r=m=>Math.round(m),s=m=>100*r(m/100),u={br:r,d:r,bl:s,dl:s,mtp:s,nor:m=>encodeURIComponent(m),rtp:s,tb:r},h=Object.keys(e||{}).sort();for(const m of h){let g=e[m];if(!i(g)||"v"===m&&1===g||"pr"==m&&1===g)continue;const y=u[m];y&&(g=y(g));const E=typeof g;let x;x="ot"===m||"sf"===m||"st"===m?`${m}=${g}`:"boolean"===E?m:"number"===E?`${m}=${g}`:`${m}=${JSON.stringify(g)}`,t.push(x)}return t.join(",")}static toHeaders(e){const t=Object.keys(e),i={},r=["Object","Request","Session","Status"],s=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const u of t)s[null!=o[u]?o[u]:1][u]=e[u];for(let u=0;u<s.length;u++){const h=_c.serialize(s[u]);h&&(i[`CMCD-${r[u]}`]=h)}return i}static toQuery(e){return`CMCD=${encodeURIComponent(_c.serialize(e))}`}static appendQueryToUri(e,t){if(!t)return e;const i=e.includes("?")?"&":"?";return`${e}${i}${t}`}}function jC(n,e,t,i){n&&Object.keys(e).forEach(r=>{const s=n.filter(o=>o.groupId===r).map(o=>{const u=bs({},o);return u.details=void 0,u.attrs=new Or(u.attrs),u.url=u.attrs.URI=H_(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),u.groupId=u.attrs["GROUP-ID"]=e[r],u.attrs["PATHWAY-ID"]=i,u});n.push(...s)})}function H_(n,e,t,i){const{HOST:r,PARAMS:s,[t]:o}=i;let u;e&&(u=o?.[e],u&&(n=u));const h=new self.URL(n);return r&&!u&&(h.host=r),s&&Object.keys(s).sort().forEach(m=>{m&&h.searchParams.set(m,s[m])}),h.href}const BM=/^age:\s*[\d.]+\s*$/im;class UM{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new rp,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e)return;const i=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!this.stats.aborted)return s(i,t.url)}).catch(o=>(i.open("GET",t.url,!0),s(i,t.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(i,t,e)}).catch(o=>{this.callbacks.onError({code:i.status,text:o.message},t,i,r)}):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const r=this.context.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:o}=i.loadPolicy;if(r)for(const u in r)e.setRequestHeader(u,r[u]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=s&&kn(s)?s:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const r=t.readyState,s=this.config;if(!i.aborted&&r>=2&&(0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),4===r)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const o=t.status,u="text"!==t.responseType;if(o>=200&&o<300&&(u&&t.response||null!==t.responseText)){i.loading.end=Math.max(self.performance.now(),i.loading.first);const h=u?t.response:t.responseText;if(i.loaded=i.total="arraybuffer"===t.responseType?h.byteLength:h.length,i.bwEstimate=8e3*i.total/(i.loading.end-i.loading.first),!this.callbacks)return;const g=this.callbacks.onProgress;if(g&&g(i,e,h,t),!this.callbacks)return;this.callbacks.onSuccess({url:t.responseURL,data:h,code:o},i,e,t)}else{const h=s.loadPolicy.errorRetry;g_(h,i.retry,!1,o)?this.retry(h):(Re.error(`${o} while loading ${e.url}`),this.callbacks.onError({code:o,text:t.statusText},e,t,i))}}}loadtimeout(){var e;const t=null==(e=this.config)?void 0:e.loadPolicy.timeoutRetry;if(g_(t,this.stats.retry,!0))this.retry(t);else{Re.warn(`timeout while loading ${this.context.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=B0(e,i.retry),i.retry++,Re.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&BM.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const $M=/(\d+)-(\d+)\/(\d+)/;class z_{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||GC,this.controller=new self.AbortController,this.stats=new rp}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const e=this.response;null!=e&&e.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const s=function VM(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(bs({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}(e,this.controller.signal),o=i.onProgress,u="arraybuffer"===e.responseType,h=u?"byteLength":"length",{maxTimeToFirstByteMs:m,maxLoadTimeMs:g}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=m&&kn(m)?m:g,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),i.onTimeout(r,e,this.response)},t.timeout),self.fetch(this.request).then(y=>{this.response=this.loader=y;const E=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=g,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),i.onTimeout(r,e,this.response)},g-(E-r.loading.start)),!y.ok){const{status:x,statusText:I}=y;throw new WC(I||"fetch, bad network response",x,y)}return r.loading.first=E,r.total=function kb(n){const e=n.get("Content-Range");if(e){const i=function HM(n){const e=$M.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}(e);if(kn(i))return i}const t=n.get("Content-Length");if(t)return parseInt(t)}(y.headers)||r.total,o&&kn(t.highWaterMark)?this.loadProgressively(y,r,e,t.highWaterMark,o):u?y.arrayBuffer():"json"===e.responseType?y.json():y.text()}).then(y=>{const{response:E}=this;self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const x=y[h];x&&(r.loaded=r.total=x);const I={url:E.url,data:y,code:E.status};o&&!kn(t.highWaterMark)&&o(r,e,y,E),i.onSuccess(I,r,e,E)}).catch(y=>{self.clearTimeout(this.requestTimeout),r.aborted||i.onError({code:y&&y.code||0,text:y?y.message:null},e,y?y.details:null,r)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,r=0,s){const o=new wM,u=e.body.getReader(),h=()=>u.read().then(m=>{if(m.done)return o.dataLength&&s(t,i,o.flush(),e),Promise.resolve(new ArrayBuffer(0));const g=m.value,y=g.length;return t.loaded+=y,y<r||o.dataLength?(o.push(g),o.dataLength>=r&&s(t,i,o.flush(),e)):s(t,i,g,e),h()}).catch(()=>Promise.reject());return h()}}function GC(n,e){return new self.Request(n.url,e)}class WC extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const zM=/\s/,YC={newCue(n,e,t,i){const r=[];let s,o,u,h,m;const g=self.VTTCue||self.TextTrackCue;for(let E=0;E<i.rows.length;E++)if(s=i.rows[E],u=!0,h=0,m="",!s.isEmpty()){var y;for(let k=0;k<s.chars.length;k++)zM.test(s.chars[k].uchar)&&u?h++:(m+=s.chars[k].uchar,u=!1);s.cueStartTime=e,e===t&&(t+=1e-4),h>=16?h--:h++;const x=PC(m.trim()),I=BC(e,t,x);null!=n&&null!=(y=n.cues)&&y.getCueById(I)||(o=new g(e,t,x),o.id=I,o.line=E+1,o.align="left",o.position=10+Math.min(80,10*Math.floor(8*h/32)),r.push(o))}return n&&r.length&&(r.sort((E,x)=>"auto"===E.line||"auto"===x.line?0:E.line>8&&x.line>8?x.line-E.line:E.line-x.line),r.forEach(E=>lf(n,E))),r}},jM=Vs(Vs({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:UM,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class bM{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;const t=e.config;this.bwEstimator=new vM(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(U.FRAG_LOADING,this.onFragLoading,this),e.on(U.FRAG_LOADED,this.onFragLoaded,this),e.on(U.FRAG_BUFFERED,this.onFragBuffered,this),e.on(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(U.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:e}=this;e.off(U.FRAG_LOADING,this.onFragLoading,this),e.off(U.FRAG_LOADED,this.onFragLoaded,this),e.off(U.FRAG_BUFFERED,this.onFragBuffered,this),e.off(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(U.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(e,t){var i;const r=t.frag;this.ignoreFragment(r)||(this.fragCurrent=r,this.partCurrent=null!=(i=t.part)?i:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(e,t){this.clearTimer()}getTimeToLoadFrag(e,t,i,r){return e+i/t+(r?this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const i=this.hls.config,{total:r,bwEstimate:s}=t.stats;kn(r)&&kn(s)&&(this.lastLevelLoadSec=8*r/s),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:e,partCurrent:t,hls:i}=this,{autoLevelEnabled:r,media:s}=i;if(!e||!s)return;const o=performance.now(),u=t?t.stats:e.stats,h=t?t.duration:e.duration,m=o-u.loading.start;if(u.aborted||u.loaded&&u.loaded===u.total||0===e.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!r||s.paused||!s.playbackRate||!s.readyState)return;const g=i.mainForwardBufferInfo;if(null===g)return;const y=this.bwEstimator.getEstimateTTFB(),E=Math.abs(s.playbackRate);if(m<=Math.max(y,h/(2*E)*1e3))return;const x=g.len/E;if(x>=2*h/E)return;const I=u.loading.first?u.loading.first-u.loading.start:-1,k=u.loaded&&I>-1,P=this.bwEstimator.getEstimate(),{levels:q,minAutoLevel:ae}=i,ye=u.total||Math.max(u.loaded,Math.round(h*q[e.level].maxBitrate/8));let De=m-I;De<1&&k&&(De=Math.min(m,8*u.loaded/P));const dt=k?1e3*u.loaded/De:0,it=dt?(ye-u.loaded)/dt:8*ye/P+y/1e3;if(it<=x)return;const Dt=dt?8*dt:P;let mt,Nt=Number.POSITIVE_INFINITY;for(mt=e.level-1;mt>ae&&(Nt=this.getTimeToLoadFrag(y/1e3,Dt,h*q[mt].maxBitrate,!q[mt].details),!(Nt<x));mt--);Nt>=it||Nt>10*h||(i.nextLoadLevel=mt,k?this.bwEstimator.sample(m-Math.min(y,I),u.loaded):this.bwEstimator.sampleTTFB(m),this.clearTimer(),Re.warn(`[abr] Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} is loading too slowly;\n      Time to underbuffer: ${x.toFixed(3)} s\n      Estimated load time for current fragment: ${it.toFixed(3)} s\n      Estimated load time for down switch fragment: ${Nt.toFixed(3)} s\n      TTFB estimate: ${I}\n      Current BW estimate: ${kn(P)?(P/1024).toFixed(3):"Unknown"} Kb/s\n      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s\n      Aborting and switching to level ${mt}`),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),i.trigger(U.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:u}))}onFragLoaded(e,{frag:t,part:i}){const r=i?i.stats:t.stats;if(t.type===ei.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const o=this.hls.levels[t.level],u=(o.loaded?o.loaded.bytes:0)+r.loaded,h=(o.loaded?o.loaded.duration:0)+(i?i.duration:t.duration);o.loaded={bytes:u,duration:h},o.realBitrate=Math.round(8*u/h)}t.bitrateTest&&(this.onFragBuffered(U.FRAG_BUFFERED,{stats:r,frag:t,part:i,id:t.type}),t.bitrateTest=!1)}}onFragBuffered(e,t){const{frag:i,part:r}=t,s=null!=r&&r.stats.loaded?r.stats:i.stats;if(s.aborted||this.ignoreFragment(i))return;const o=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,s.loaded),s.bwEstimate=this.bwEstimator.getEstimate(),this.bitrateTestDelay=i.bitrateTest?o/1e3:0}ignoreFragment(e){return e.type!==ei.MAIN||"initSegment"===e.sn}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const e=this._nextAutoLevel;if(-1!==e&&!this.bwEstimator.canEstimate())return e;let i=this.getNextABRAutoLevel();if(-1!==e){const r=this.hls.levels;if(r.length>Math.max(e,i)&&r[e].loadError<=r[i].loadError)return e}return-1!==e&&(i=Math.min(e,i)),i}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this,{maxAutoLevel:r,config:s,minAutoLevel:o,media:u}=i,h=t?t.duration:e?e.duration:0,m=u&&0!==u.playbackRate?Math.abs(u.playbackRate):1,g=this.bwEstimator?this.bwEstimator.getEstimate():s.abrEwmaDefaultEstimate,y=i.mainForwardBufferInfo,E=(y?y.len:0)/m;let x=this.findBestLevel(g,o,r,E,s.abrBandWidthFactor,s.abrBandWidthUpFactor);if(x>=0)return x;Re.trace(`[abr] ${E?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let I=h?Math.min(h,s.maxStarvationDelay):s.maxStarvationDelay,k=s.abrBandWidthFactor,P=s.abrBandWidthUpFactor;if(!E){const q=this.bitrateTestDelay;q&&(I=(h?Math.min(h,s.maxLoadingDelay):s.maxLoadingDelay)-q,Re.trace(`[abr] bitrate test took ${Math.round(1e3*q)}ms, set first fragment max fetchDuration to ${Math.round(1e3*I)} ms`),k=P=1)}return x=this.findBestLevel(g,o,r,E+I,k,P),Math.max(x,0)}findBestLevel(e,t,i,r,s,o){var u;const{fragCurrent:h,partCurrent:m,lastLoadedFragLevel:g}=this,{levels:y}=this.hls,E=y[g],x=!(null==E||null==(u=E.details)||!u.live),I=E?.codecSet,k=m?m.duration:h?h.duration:0,P=this.bwEstimator.getEstimateTTFB()/1e3;let q=t,ae=-1;for(let ee=i;ee>=t;ee--){const ye=y[ee];if(!ye||I&&ye.codecSet!==I){ye&&(q=Math.min(ee,q),ae=Math.max(ee,ae));continue}-1!==ae&&Re.trace(`[abr] Skipped level(s) ${q}-${ae} with CODECS:"${y[ae].attrs.CODECS}"; not compatible with "${E.attrs.CODECS}"`);const De=ye.details,dt=(m?De?.partTarget:De?.averagetargetduration)||k;let it;it=ee<=g?s*e:o*e;const Dt=y[ee].maxBitrate,Nt=this.getTimeToLoadFrag(P,it,Dt*dt,void 0===De);if(Re.trace(`[abr] level:${ee} adjustedbw-bitrate:${Math.round(it-Dt)} avgDuration:${dt.toFixed(1)} maxFetchDuration:${r.toFixed(1)} fetchDuration:${Nt.toFixed(1)}`),it>Dt&&(0===Nt||!kn(Nt)||x&&!this.bitrateTestDelay||Nt<r))return ee}return-1}set nextAutoLevel(e){this._nextAutoLevel=e}},bufferController:class O_{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:t,mediaSource:i}=this;Re.log("[buffer-controller]: Media source opened"),t&&(t.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(U.MEDIA_ATTACHED,{media:t})),i&&i.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{Re.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{Re.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:t,_objectUrl:i}=this;t&&t.src!==i&&Re.error(`Media element src was set while attaching MediaSource (${i} > ${t.src})`)},this.hls=e,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:e}=this;e.on(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.BUFFER_RESET,this.onBufferReset,this),e.on(U.BUFFER_APPENDING,this.onBufferAppending,this),e.on(U.BUFFER_CODECS,this.onBufferCodecs,this),e.on(U.BUFFER_EOS,this.onBufferEos,this),e.on(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(U.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(U.FRAG_PARSED,this.onFragParsed,this),e.on(U.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.BUFFER_RESET,this.onBufferReset,this),e.off(U.BUFFER_APPENDING,this.onBufferAppending,this),e.off(U.BUFFER_CODECS,this.onBufferCodecs,this),e.off(U.BUFFER_EOS,this.onBufferEos,this),e.off(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(U.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(U.FRAG_PARSED,this.onFragParsed,this),e.off(U.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new _b(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,Re.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const i=this.media=t.media;if(i&&yb){const r=this.mediaSource=new yb;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),i.src=self.URL.createObjectURL(r),this._objectUrl=i.src,i.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:i}=this;if(t){if(Re.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(r){Re.warn(`[buffer-controller]: onMediaDetaching: ${r.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),e.src===i?(e.removeAttribute("src"),e.load()):Re.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(U.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{const t=this.sourceBuffer[e];try{t&&(this.removeBufferListeners(e),this.mediaSource&&this.mediaSource.removeSourceBuffer(t),this.sourceBuffer[e]=void 0)}catch(i){Re.warn(`[buffer-controller]: Failed to reset the ${e} buffer`,i)}}),this._initSourceBuffer()}onBufferCodecs(e,t){const i=this.getSourceBufferTypes().length;Object.keys(t).forEach(r=>{if(i){const s=this.tracks[r];if(s&&"function"==typeof s.buffer.changeType){const{id:o,codec:u,levelCodec:h,container:m,metadata:g}=t[r],y=(s.levelCodec||s.codec).replace(vb,"$1"),E=(h||u).replace(vb,"$1");y!==E&&(this.appendChangeType(r,`${m};codecs=${h||u}`),Re.log(`[buffer-controller]: switching codec ${y} to ${E}`),this.tracks[r]={buffer:s.buffer,codec:u,container:m,levelCodec:h,metadata:g,id:o})}}else this.pendingTracks[r]=t[r]}),!i&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())}appendChangeType(e,t){const{operationQueue:i}=this,r={execute:()=>{const s=this.sourceBuffer[e];s&&(Re.log(`[buffer-controller]: changing ${e} sourceBuffer type to ${t}`),s.changeType(t)),i.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{Re.warn(`[buffer-controller]: Failed to change ${e} SourceBuffer type`,s)}};i.append(r,e)}onBufferAppending(e,t){const{hls:i,operationQueue:r,tracks:s}=this,{data:o,type:u,frag:h,part:m,chunkMeta:g}=t,y=g.buffering[u],E=self.performance.now();y.start=E;const x=h.stats.buffering,I=m?m.stats.buffering:null;0===x.start&&(x.start=E),I&&0===I.start&&(I.start=E);let P=!1;"audio"===u&&"audio/mpeg"===s.audio?.container&&(P=!this.lastMpegAudioChunk||1===g.id||this.lastMpegAudioChunk.sn!==g.sn,this.lastMpegAudioChunk=g);const q=h.start;r.append({execute:()=>{if(y.executeStart=self.performance.now(),P){const ee=this.sourceBuffer[u];if(ee){const ye=q-ee.timestampOffset;Math.abs(ye)>=.1&&(Re.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${q} (delta: ${ye}) sn: ${h.sn})`),ee.timestampOffset=q)}}this.appendExecutor(o,u)},onStart:()=>{},onComplete:()=>{const ee=self.performance.now();y.executeEnd=y.end=ee,0===x.first&&(x.first=ee),I&&0===I.first&&(I.first=ee);const{sourceBuffer:ye}=this,De={};for(const dt in ye)De[dt]=yr.getBuffered(ye[dt]);this.appendError=0,this.hls.trigger(U.BUFFER_APPENDED,{type:u,frag:h,part:m,chunkMeta:g,parent:h.type,timeRanges:De})},onError:ee=>{Re.error(`[buffer-controller]: Error encountered while trying to append to the ${u} SourceBuffer`,ee);const ye={type:Jn.MEDIA_ERROR,parent:h.type,details:ht.BUFFER_APPEND_ERROR,frag:h,part:m,chunkMeta:g,error:ee,err:ee,fatal:!1};ee.code===DOMException.QUOTA_EXCEEDED_ERR?ye.details=ht.BUFFER_FULL_ERROR:(this.appendError++,ye.details=ht.BUFFER_APPEND_ERROR,this.appendError>i.config.appendErrorMaxRetry&&(Re.error(`[buffer-controller]: Failed ${i.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),ye.fatal=!0)),i.trigger(U.ERROR,ye)}},u)}onBufferFlushing(e,t){const{operationQueue:i}=this,r=s=>({execute:this.removeExecutor.bind(this,s,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(U.BUFFER_FLUSHED,{type:s})},onError:o=>{Re.warn(`[buffer-controller]: Failed to remove from ${s} SourceBuffer`,o)}});t.type?i.append(r(t.type),t.type):this.getSourceBufferTypes().forEach(s=>{i.append(r(s),s)})}onFragParsed(e,t){const{frag:i,part:r}=t,s=[],o=r?r.elementaryStreams:i.elementaryStreams;o[zi.AUDIOVIDEO]?s.push("audiovideo"):(o[zi.AUDIO]&&s.push("audio"),o[zi.VIDEO]&&s.push("video")),0===s.length&&Re.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(()=>{const h=self.performance.now();i.stats.buffering.end=h,r&&(r.stats.buffering.end=h),this.hls.trigger(U.FRAG_BUFFERED,{frag:i,part:r,stats:r?r.stats:i.stats,id:i.type})},s)}onFragChanged(e,t){this.flushBackBuffer()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((r,s)=>{const o=this.sourceBuffer[s];return o&&(!t.type||t.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,Re.log(`[buffer-controller]: ${s} sourceBuffer now EOS`))),r&&!(o&&!o.ended)},!0)&&(Re.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(s=>{const o=this.sourceBuffer[s];o&&(o.ending=!1)});const{mediaSource:r}=this;r&&"open"===r.readyState?(Re.log("[buffer-controller]: Calling mediaSource.endOfStream()"),r.endOfStream()):r&&Re.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${r.readyState}`)}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:e,details:t,media:i,sourceBuffer:r}=this;if(!i||null===t)return;const s=this.getSourceBufferTypes();if(!s.length)return;const o=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if(!kn(o)||o<0)return;const u=i.currentTime,h=t.levelTargetDuration,m=Math.max(o,h),g=Math.floor(u/h)*h-m;s.forEach(y=>{const E=r[y];if(E){const x=yr.getBuffered(E);if(x.length>0&&g>x.start(0)){if(e.trigger(U.BACK_BUFFER_REACHED,{bufferEnd:g}),t.live)e.trigger(U.LIVE_BACK_BUFFER_REACHED,{bufferEnd:g});else if(E.ended&&x.end(x.length-1)-u<2*h)return void Re.info(`[buffer-controller]: Cannot flush ${y} back buffer while SourceBuffer is in ended state`);e.trigger(U.BUFFER_FLUSHING,{startOffset:0,endOffset:g,type:y})}}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:e,hls:t,media:i,mediaSource:r}=this,s=e.fragments[0].start+e.totalduration,o=i.duration,u=kn(r.duration)?r.duration:0;e.live&&t.config.liveDurationInfinity?(Re.log("[buffer-controller]: Media Source duration is set to Infinity"),r.duration=1/0,this.updateSeekableRange(e)):(s>u&&s>o||!kn(o))&&(Re.log(`[buffer-controller]: Updating Media Source duration to ${s.toFixed(3)}`),r.duration=s)}updateSeekableRange(e){const t=this.mediaSource,i=e.fragments;if(i.length&&e.live&&null!=t&&t.setLiveSeekableRange){const s=Math.max(0,i[0].start),o=Math.max(s,s+e.totalduration);t.setLiveSeekableRange(s,o)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:i}=this,r=Object.keys(i).length;if(r&&!e||2===r){this.createSourceBuffers(i),this.pendingTracks={};const s=this.getSourceBufferTypes();if(s.length)this.hls.trigger(U.BUFFER_CREATED,{tracks:this.tracks}),s.forEach(o=>{t.executeNext(o)});else{const o=new Error("could not create source buffer for media codec(s)");this.hls.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:o,reason:o.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:i}=this;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(const r in e)if(!t[r]){const s=e[r];if(!s)throw Error(`source buffer exists for track ${r}, however track does not`);const o=s.levelCodec||s.codec,u=`${s.container};codecs=${o}`;Re.log(`[buffer-controller]: creating sourceBuffer(${u})`);try{const h=t[r]=i.addSourceBuffer(u),m=r;this.addBufferListener(m,"updatestart",this._onSBUpdateStart),this.addBufferListener(m,"updateend",this._onSBUpdateEnd),this.addBufferListener(m,"error",this._onSBUpdateError),this.tracks[r]={buffer:h,codec:o,container:s.container,levelCodec:s.levelCodec,metadata:s.metadata,id:s.id}}catch(h){Re.error(`[buffer-controller]: error while trying to add sourceBuffer: ${h.message}`),this.hls.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:h,mimeType:u})}}}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){const{operationQueue:t}=this;t.current(e).onComplete(),t.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){const i=new Error(`${e} SourceBuffer error`);Re.error(`[buffer-controller]: ${i}`,t),this.hls.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.BUFFER_APPENDING_ERROR,error:i,fatal:!1});const r=this.operationQueue.current(e);r&&r.onError(t)}removeExecutor(e,t,i){const{media:r,mediaSource:s,operationQueue:o,sourceBuffer:u}=this,h=u[e];if(!r||!s||!h)return Re.warn(`[buffer-controller]: Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void o.shiftAndExecuteNext(e);const m=kn(r.duration)?r.duration:1/0,g=kn(s.duration)?s.duration:1/0,y=Math.max(0,t),E=Math.min(i,m,g);E>y&&!h.ending?(h.ended=!1,Re.log(`[buffer-controller]: Removing [${y},${E}] from the ${e} SourceBuffer`),h.remove(y,E)):o.shiftAndExecuteNext(e)}appendExecutor(e,t){const{operationQueue:i,sourceBuffer:r}=this,s=r[t];if(!s)return Re.warn(`[buffer-controller]: Attempting to append to the ${t} SourceBuffer, but it does not exist`),void i.shiftAndExecuteNext(t);s.ended=!1,s.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length)return Re.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:i}=this,r=t.map(s=>i.appendBlocker(s));Promise.all(r).then(()=>{e(),t.forEach(s=>{const o=this.sourceBuffer[s];null!=o&&o.updating||i.shiftAndExecuteNext(s)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,i){const r=this.sourceBuffer[e];if(!r)return;const s=i.bind(this,e);this.listeners[e].push({event:t,listener:s}),r.addEventListener(t,s)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach(i=>{t.removeEventListener(i.event,i.listener)})}},capLevelController:HC,errorController:class V1{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=Re.log.bind(Re,"[info]:"),this.warn=Re.warn.bind(Re,"[warning]:"),this.error=Re.error.bind(Re,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(U.ERROR,this.onError,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(U.ERROR,this.onError,this),e.off(U.ERROR,this.onErrorOut,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){this.playlistError=0}stopLoad(){}getVariantLevelIndex(e){return e?.type===ei.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var i,r;if(t.fatal)return;const s=this.hls,o=t.context;switch(t.details){case ht.FRAG_LOAD_ERROR:case ht.FRAG_LOAD_TIMEOUT:case ht.KEY_LOAD_ERROR:case ht.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case ht.FRAG_PARSING_ERROR:if(null!=(i=t.frag)&&i.gap)return void(t.errorAction={action:0,flags:0});case ht.FRAG_GAP:case ht.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=2);case ht.LEVEL_EMPTY_ERROR:case ht.LEVEL_PARSING_ERROR:{var u,h;const m=t.parent===ei.MAIN?t.level:s.loadLevel;t.details===ht.LEVEL_EMPTY_ERROR&&null!=(u=t.context)&&null!=(h=u.levelDetails)&&h.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,m):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,m))}return;case ht.LEVEL_LOAD_ERROR:case ht.LEVEL_LOAD_TIMEOUT:return void("number"==typeof o?.level&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level)));case ht.AUDIO_TRACK_LOAD_ERROR:case ht.AUDIO_TRACK_LOAD_TIMEOUT:case ht.SUBTITLE_LOAD_ERROR:case ht.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const m=s.levels[s.loadLevel];if(m&&(o.type===Gi.AUDIO_TRACK&&o.groupId===m.audioGroupId||o.type===Gi.SUBTITLE_TRACK&&o.groupId===m.textGroupId))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=2,void(t.errorAction.flags=1)}return;case ht.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const g=s.levels[s.loadLevel]?.attrs["HDCP-LEVEL"];g&&(t.errorAction={action:2,flags:2,hdcpLevel:g})}return;case ht.BUFFER_ADD_CODEC_ERROR:case ht.REMUX_ALLOC_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(r=t.level)?r:s.loadLevel));case ht.INTERNAL_EXCEPTION:case ht.BUFFER_APPENDING_ERROR:case ht.BUFFER_APPEND_ERROR:case ht.BUFFER_FULL_ERROR:case ht.LEVEL_SWITCH_ERROR:case ht.BUFFER_STALLED_ERROR:case ht.BUFFER_SEEK_OVER_HOLE:case ht.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:0,flags:0})}if(t.type===Jn.KEY_SYSTEM_ERROR){const m=this.getVariantLevelIndex(t.frag);return t.levelRetry=!1,void(t.errorAction=this.getLevelSwitchAction(t,m))}}getPlaylistRetryOrSwitchAction(e,t){var i;const s=qT(this.hls.config.playlistLoadPolicy,e),o=this.playlistError++,u=null==(i=e.response)?void 0:i.code;if(g_(s,o,hu(e),u))return{action:5,flags:0,retryConfig:s,retryCount:o};const m=this.getLevelSwitchAction(e,t);return s&&(m.retryConfig=s,m.retryCount=o),m}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),r=t.levels[i],{fragLoadPolicy:s,keyLoadPolicy:o}=t.config,u=qT(e.details.startsWith("key")?o:s,e),h=t.levels.reduce((y,E)=>y+E.fragmentError,0);if(r){var m;e.details!==ht.FRAG_GAP&&r.fragmentError++;const y=null==(m=e.response)?void 0:m.code;if(g_(u,h,hu(e),y))return{action:5,flags:0,retryConfig:u,retryCount:h}}const g=this.getLevelSwitchAction(e,i);return u&&(g.retryConfig=u,g.retryCount=h),g}getLevelSwitchAction(e,t){const i=this.hls;null==t&&(t=i.loadLevel);const r=this.hls.levels[t];if(r&&(r.loadError++,i.autoLevelEnabled)){var s,o;let u=-1;const{levels:h,loadLevel:m,minAutoLevel:g,maxAutoLevel:y}=i,E=null==(s=e.frag)?void 0:s.type,{type:x,groupId:I}=null!=(o=e.context)?o:{};for(let k=h.length;k--;){const P=(k+m)%h.length;if(P!==m&&P>=g&&P<=y&&0===h[P].loadError){const q=h[P];if(e.details===ht.FRAG_GAP&&e.frag){const ae=h[P].details;if(ae){const ee=hp(e.frag,ae.fragments,e.frag.start);if(null!=ee&&ee.gap)continue}}else{if(x===Gi.AUDIO_TRACK&&I===q.audioGroupId||x===Gi.SUBTITLE_TRACK&&I===q.textGroupId)continue;if(E===ei.AUDIO&&r.audioGroupId===q.audioGroupId||E===ei.SUBTITLE&&r.textGroupId===q.textGroupId)continue}u=P;break}}if(u>-1&&i.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:2,flags:0,nextAutoLevel:u}}return{action:2,flags:1}}onErrorOut(e,t){var i;switch(null==(i=t.errorAction)?void 0:i.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==ht.FRAG_GAP&&(t.fatal=!0)}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:r,hdcpLevel:s,nextAutoLevel:o}=i;switch(r){case 0:this.switchLevel(e,o);break;case 1:i.resolved||(i.resolved=this.redundantFailover(e));break;case 2:s&&(t.maxHdcpLevel=L0[L0.indexOf(s)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}i.resolved||this.switchLevel(e,o)}switchLevel(e,t){void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(e){const{hls:t,penalizedRenditions:i}=this,r=e.parent===ei.MAIN?e.level:t.loadLevel,s=t.levels[r],o=s.url.length,u=e.frag?e.frag.urlId:s.urlId;s.urlId===u&&(!e.frag||s.details)&&this.penalizeRendition(s,e);for(let h=1;h<o;h++){const m=(u+h)%o,g=i[m];if(!g||JT(g,e,i[u]))return this.warn(`Switching to Redundant Stream ${m+1}/${o}: "${s.url[m]}" after ${e.details}`),this.playlistError=0,t.levels.forEach(y=>{y.urlId=m}),t.nextLoadLevel=r,!0}return!1}penalizeRendition(e,t){const{penalizedRenditions:i}=this,r=i[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};r.lastErrorPerfMs=performance.now(),r.errors.push(t),r.details=e.details,i[e.urlId]=r}},fpsController:class YL{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(U.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(U.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const r=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=r,r&&"function"==typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,i){const r=performance.now();if(t){if(this.lastTime){const o=i-this.lastDroppedFrames,u=t-this.lastDecodedFrames,h=1e3*o/(r-this.lastTime),m=this.hls;if(m.trigger(U.FPS_DROP,{currentDropped:o,currentDecoded:u,totalDroppedFrames:i}),h>0&&o>m.config.fpsDroppedMonitoringThreshold*u){let g=m.currentLevel;Re.warn("drop FPS ratio greater than max allowed value for currentLevel: "+g),g>0&&(-1===m.autoLevelCapping||m.autoLevelCapping>=g)&&(g-=1,m.trigger(U.FPS_DROP_LEVEL_CAPPING,{level:g,droppedLevel:m.currentLevel}),m.autoLevelCapping=g,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:vT,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},function KC(){return{cueHandler:YC,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:class DC extends v_{constructor(e,t,i){super(e,t,i,"[subtitle-stream-controller]",ei.SUBTITLE),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.LEVEL_LOADED,this.onLevelLoaded,this),e.on(U.ERROR,this.onError,this),e.on(U.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(U.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(U.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(U.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(U.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.LEVEL_LOADED,this.onLevelLoaded,this),e.off(U.ERROR,this.onError,this),e.off(U.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(U.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(U.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(U.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(U.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(U.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state="IDLE",this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:r}=t;if(this.fragPrevious=i,this.state="IDLE",!r)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let o;const u=i.start;for(let m=0;m<s.length;m++)if(u>=s[m].start&&u<=s[m].end){o=s[m];break}const h=i.start+i.duration;o?o.end=h:(o={start:u,end:h},s.push(o)),this.fragmentTracker.fragBuffered(i)}onBufferFlushing(e,t){const{startOffset:i,endOffset:r}=t;if(0===i&&r!==Number.POSITIVE_INFINITY){const s=r-1;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(o=>{for(let u=0;u<o.length;)if(o[u].end<=s)o.shift();else{if(!(o[u].start<s))break;o[u].start=s,u++}}),this.fragmentTracker.removeFragmentsInRange(i,s,ei.SUBTITLE)}}onFragBuffered(e,t){var i;this.loadedmetadata||t.frag.type!==ei.MAIN||null!=(i=this.media)&&i.buffered.length&&(this.loadedmetadata=!0)}onError(e,t){t.frag?.type===ei.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),"STOPPED"!==this.state&&(this.state="IDLE"))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){IC(this.levels,t)?this.levels=t.map(i=>new dp(i)):(this.tracksBuffered=[],this.levels=t.map(i=>{const r=new dp(i);return this.tracksBuffered[r.id]=[],r}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,ei.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){if(this.currentTrackId=t.id,!this.levels.length||-1===this.currentTrackId)return void this.clearInterval();const i=this.levels[this.currentTrackId];this.mediaBuffer=null!=i&&i.details?this.mediaBufferTimeRanges:null,i&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var i;const{details:r,id:s}=t,{currentTrackId:o,levels:u}=this;if(!u.length)return;const h=u[o];if(s>=u.length||s!==o||!h)return;this.mediaBuffer=this.mediaBufferTimeRanges;let m=0;if(r.live||null!=(i=h.details)&&i.live){const g=this.mainDetails;if(r.deltaUpdateFailed||!g)return;const y=g.fragments[0];h.details?(m=this.alignPlaylists(r,h.details),0===m&&y&&(m=y.start,m_(r,m))):r.hasProgramDateTime&&g.hasProgramDateTime?(y_(r,g),m=r.fragments[0].start):y&&(m=y.start,m_(r,m))}h.details=r,this.levelLastLoaded=s,!this.startFragRequested&&(this.mainDetails||!r.live)&&this.setStartPosition(h.details,m),this.tick(),r.live&&!this.fragCurrent&&this.media&&"IDLE"===this.state&&(hp(null,r.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),h.details=void 0))}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,r=t.decryptdata,s=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&r&&r.key&&r.iv&&"AES-128"===r.method){const o=performance.now();this.decrypter.decrypt(new Uint8Array(i),r.key.buffer,r.iv.buffer).catch(u=>{throw s.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:t}),u}).then(u=>{const h=performance.now();s.trigger(U.FRAG_DECRYPTED,{frag:t,payload:u,stats:{tstart:o,tdecrypt:h}})}).catch(u=>{this.warn(`${u.name}: ${u.message}`),this.state="IDLE"})}}doTick(){if(this.media){if("IDLE"===this.state){const{currentTrackId:e,levels:t}=this,i=t[e];if(!t.length||!i||!i.details)return;const{config:r}=this,s=this.getLoadPosition(),o=yr.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,r.maxBufferHole),{end:u,len:h}=o,m=this.getFwdBufferInfo(this.media,ei.MAIN),g=i.details;if(h>this.getMaxBufferLength(m?.len)+g.levelTargetDuration)return;const E=g.fragments,x=E.length,I=g.edge;let k=null;const P=this.fragPrevious;if(u<I){const q=r.maxFragLookUpTolerance,ae=u>I-q?0:q;k=hp(P,E,Math.max(E[0].start,u),ae),!k&&P&&P.start<E[0].start&&(k=E[0])}else k=E[x-1];if(!k)return;if(k=this.mapToInitFragWhenRequired(k),"initSegment"!==k.sn){const ae=E[k.sn-g.startSN-1];ae&&ae.cc===k.cc&&"NOT_LOADED"===this.fragmentTracker.getState(ae)&&(k=ae)}"NOT_LOADED"===this.fragmentTracker.getState(k)&&this.loadFragment(k,i,u)}}else this.state="IDLE"}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,i){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,i))}get mediaBufferTimeRanges(){return new EM(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class xM extends $0{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:e}=this;e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.LEVEL_LOADING,this.onLevelLoading,this),e.on(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(U.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(U.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.LEVEL_LOADING,this.onLevelLoading,this),e.off(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(U.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(U.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)}onMediaDetaching(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),gb(this.media.textTracks).forEach(t=>{cf(t)}),this.subtitleTrack=-1,this.media=null)}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,details:r}=t,{trackId:s}=this,o=this.tracksInGroup[s];if(!o)return void this.warn(`Invalid subtitle track id ${i}`);const u=o.details;o.details=t.details,this.log(`subtitle track ${i} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,u)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(null==t||!t.textGroupIds)return;const i=t.textGroupIds[t.urlId],r=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==i){const s=this.tracks.filter(h=>!i||h.groupId===i);this.tracksInGroup=s;const o=this.findTrackId(r?.name)||this.findTrackId();this.groupId=i||null;const u={subtitleTracks:s};this.log(`Updating subtitle tracks, ${s.length} track(s) found in "${i}" group-id`),this.hls.trigger(U.SUBTITLE_TRACKS_UPDATED,u),-1!==o&&this.setSubtitleTrack(o,r)}else this.shouldReloadPlaylist(r)&&this.setSubtitleTrack(this.trackId,r)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const r=t[i];if((!this.selectDefaultTrack||r.default)&&(!e||e===r.name))return r.id}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Gi.SUBTITLE_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.checkRetry(t)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e,this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0)}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const i=t.id,r=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`Loading subtitle playlist for id ${i}`),this.hls.trigger(U.SUBTITLE_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:e||null})}}toggleTrackModes(e){const{media:t,trackId:i}=this;if(!t)return;const r=gb(t.textTracks),s=r.filter(u=>u.groupId===this.groupId);if(-1===e)[].slice.call(r).forEach(u=>{u.mode="disabled"});else{const u=s[i];u&&(u.mode="disabled")}const o=s[e];o&&(o.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(e,t){var i;const r=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(-1===e||null!=(i=r[e])&&i.details)||e<-1||e>=r.length)return;this.clearTimer();const s=r[e];if(this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:"")),this.trackId=e,s){const{id:o,groupId:u="",name:h,type:m,url:g}=s;this.hls.trigger(U.SUBTITLE_TRACK_SWITCH,{id:o,groupId:u,name:h,type:m,url:g});const y=this.switchParams(s.url,t?.details);this.loadPlaylist(y)}else this.hls.trigger(U.SUBTITLE_TRACK_SWITCH,{id:e})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=-1;const t=gb(this.media.textTracks);for(let i=0;i<t.length;i++)if("hidden"===t[i].mode)e=i;else if("showing"===t[i].mode){e=i;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},timelineController:class PM{constructor(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const t=new L_(this,"textTrack1"),i=new L_(this,"textTrack2"),r=new L_(this,"textTrack3"),s=new L_(this,"textTrack4");this.cea608Parser1=new xb(1,t,i),this.cea608Parser2=new xb(3,r,s)}e.on(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(U.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(U.FRAG_LOADING,this.onFragLoading,this),e.on(U.FRAG_LOADED,this.onFragLoaded,this),e.on(U.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(U.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(U.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(U.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(U.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(U.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(U.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(U.FRAG_LOADING,this.onFragLoading,this),e.off(U.FRAG_LOADED,this.onFragLoaded,this),e.off(U.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(U.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(U.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(U.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(U.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(e,t,i,r,s){let o=!1;for(let u=s.length;u--;){const h=s[u],m=LM(h[0],h[1],t,i);if(m>=0&&(h[0]=Math.min(h[0],t),h[1]=Math.max(h[1],i),o=!0,m/(i-t)>.5))return}if(o||s.push([t,i]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[e],t,i,r);else{const u=this.Cues.newCue(null,t,i,r);this.hls.trigger(U.CUES_PARSED,{type:"captions",cues:u,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:r,timescale:s}){const{unparsedVttFrags:o}=this;"main"===i&&(this.initPTS[t.cc]={baseTime:r,timescale:s}),o.length&&(this.unparsedVttFrags=[],o.forEach(u=>{this.onFragLoaded(U.FRAG_LOADED,u)}))}getExistingTrack(e){const{media:t}=this;if(t)for(let i=0;i<t.textTracks.length;i++){const r=t.textTracks[i];if(r[e])return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:r}=this,{label:s,languageCode:o}=t[e],u=this.getExistingTrack(e);if(u)i[e]=u,cf(i[e]),zT(i[e],r);else{const h=this.createTextTrack("captions",s,o);h&&(h[e]=!0,i[e]=h)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(U.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,i){const r=this.media;if(r)return r.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>{cf(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let i=0;i<t.length;i++)cf(t[i])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],r=i.some(s=>s.textCodec===UC);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(IC(this.tracks,i))return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const o=this.media?this.media.textTracks:null;this.tracks.forEach((u,h)=>{let m;if(o&&h<o.length){let g=null;for(let y=0;y<o.length;y++)if($_(o[y],u)){g=o[y];break}g&&(m=g)}if(m)cf(m);else{const g=this._captionsOrSubtitlesFromCharacteristics(u);m=this.createTextTrack(g,u.name,u.lang),m&&(m.mode="disabled")}m&&(m.groupId=u.groupId,this.textTracks.push(m))})}else if(this.tracks.length){const o=this.tracks.map(u=>({label:u.name,kind:u.type.toLowerCase(),default:u.default,subtitleTrack:u}));this.hls.trigger(U.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}_captionsOrSubtitlesFromCharacteristics(e){if(e.attrs.CHARACTERISTICS){const t=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),i=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(t&&i)return"captions"}return"subtitles"}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(i=>{const r=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!r)return;const o=this.captionsProperties[`textTrack${r[1]}`];o&&(o.label=i.name,i.lang&&(o.languageCode=i.lang),o.media=i)})}closedCaptionsForLevel(e){return this.hls.levels[e.level]?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){const{cea608Parser1:i,cea608Parser2:r,lastSn:s,lastPartIndex:o}=this;if(this.enabled&&i&&r&&t.frag.type===ei.MAIN){var u,h;const m=t.frag.sn,g=null!=(u=null==t||null==(h=t.part)?void 0:h.index)?u:-1;m===s+1||m===s&&g===o+1||(i.reset(),r.reset()),this.lastSn=m,this.lastPartIndex=g}}onFragLoaded(e,t){const{frag:i,payload:r}=t;if(i.type===ei.SUBTITLE)if(r.byteLength){const s=i.decryptdata;if(null==s||!s.encrypted||"stats"in t){const u=this.tracks[i.level],h=this.vttCCs;h[i.cc]||(h[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),u&&u.textCodec===UC?this._parseIMSC1(i,r):this._parseVTTs(t)}}else this.hls.trigger(U.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;Db(t,this.initPTS[e.cc],r=>{this._appendCues(r,e.level),i.trigger(U.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},r=>{Re.log(`Failed to parse IMSC1: ${r}`),i.trigger(U.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})})}_parseVTTs(e){var t;const{frag:i,payload:r}=e,{initPTS:s,unparsedVttFrags:o}=this,u=s.length-1;if(!s[i.cc]&&-1===u)return void o.push(e);const h=this.hls;!function GL(n,e,t,i,r,s,o){const u=new HL,h=qa(new Uint8Array(n)).trim().replace(LC,"\n").split("\n"),m=[],g=e?function hM(n,e=1){return rb(n,mf,1/e)}(e.baseTime,e.timescale):0;let I,y="00:00.000",E=0,x=0,k=!0;u.oncue=function(P){const q=t[i];let ae=t.ccOffset;const ee=(E-g)/9e4;if(null!=q&&q.new&&(void 0!==x?ae=t.ccOffset=q.start:jL(t,i,ee)),ee){if(!e)return void(I=new Error("Missing initPTS for VTT MPEGTS"));ae=ee-t.presentationOffset}const ye=P.endTime-P.startTime,De=vo(9e4*(P.startTime+ae-x),9e4*r)/9e4;P.startTime=Math.max(De,0),P.endTime=Math.max(De+ye,0);const dt=P.text.trim();P.text=decodeURIComponent(encodeURIComponent(dt)),P.id||(P.id=BC(P.startTime,P.endTime,dt)),P.endTime>0&&m.push(P)},u.onparsingerror=function(P){I=P},u.onflush=function(){I?o(I):s(m)},h.forEach(P=>{if(k){if(FC(P,"X-TIMESTAMP-MAP=")){k=!1,P.slice(16).split(",").forEach(q=>{FC(q,"LOCAL:")?y=q.slice(6):FC(q,"MPEGTS:")&&(E=parseInt(q.slice(7)))});try{x=zL(y)/1e3}catch(q){I=q}return}""===P&&(k=!1)}u.parse(P+"\n")}),u.flush()}(null!=(t=i.initSegment)&&t.data?wd(i.initSegment.data,new Uint8Array(r)):r,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,g=>{this._appendCues(g,i.level),h.trigger(U.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},g=>{const y="Missing initPTS for VTT MPEGTS"===g.message;y?o.push(e):this._fallbackToIMSC1(i,r),Re.log(`Failed to parse VTT cue: ${g}`),!(y&&u>i.cc)&&h.trigger(U.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:g})})}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||Db(t,this.initPTS[e.cc],()=>{i.textCodec=UC,this._parseIMSC1(e,t)},()=>{i.textCodec="wvtt"})}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[t];if(!r||"disabled"===r.mode)return;e.forEach(s=>lf(r,s))}else{const r=this.tracks[t];if(!r)return;i.trigger(U.CUES_PARSED,{type:"subtitles",cues:e,track:r.default?"default":"subtitles"+t})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===ei.SUBTITLE&&this.onFragLoaded(U.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){const{cea608Parser1:i,cea608Parser2:r}=this;if(!this.enabled||!i||!r)return;const{frag:s,samples:o}=t;if(s.type!==ei.MAIN||"NONE"!==this.closedCaptionsForLevel(s))for(let u=0;u<o.length;u++){const h=o[u].bytes;if(h){const m=this.extractCea608Data(h);i.addData(o[u].pts,m[0]),r.addData(o[u].pts,m[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:r,type:s}){const{media:o}=this;if(o&&!(o.currentTime<i)){if(!s||"video"===s){const{captionsTracks:u}=this;Object.keys(u).forEach(h=>P0(u[h],t,i))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==r){const{textTracks:u}=this;Object.keys(u).forEach(h=>P0(u[h],t,r))}}}extractCea608Data(e){const t=[[],[]],i=31&e[0];let r=2;for(let s=0;s<i;s++){const o=e[r++],u=127&e[r++],h=127&e[r++];if((0!==u||0!==h)&&0!=(4&o)){const g=3&o;(0===g||1===g)&&(t[g].push(u),t[g].push(h))}}return t}},audioStreamController:class mb extends v_{constructor(e,t,i){super(e,t,i,"[audio-stream-controller]",ei.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.LEVEL_LOADED,this.onLevelLoaded,this),e.on(U.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(U.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(U.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(U.ERROR,this.onError,this),e.on(U.BUFFER_RESET,this.onBufferReset,this),e.on(U.BUFFER_CREATED,this.onBufferCreated,this),e.on(U.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(U.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(U.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(U.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(U.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.LEVEL_LOADED,this.onLevelLoaded,this),e.off(U.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(U.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(U.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(U.ERROR,this.onError,this),e.off(U.BUFFER_RESET,this.onBufferReset,this),e.off(U.BUFFER_CREATED,this.onBufferCreated,this),e.off(U.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(U.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(U.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:i,initPTS:r,timescale:s}){if("main"===i){const o=t.cc;this.initPTS[t.cc]={baseTime:r,timescale:s},this.log(`InitPTS for cc: ${o} found from main: ${r}`),this.videoTrackCC=o,"WAITING_INIT_PTS"===this.state&&this.tick()}}startLoad(e){if(!this.levels)return this.startPosition=e,void(this.state="STOPPED");const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state="IDLE"):(this.loadedmetadata=!1,this.state="WAITING_TRACK"),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case"IDLE":this.doTickIdle();break;case"WAITING_TRACK":{var e;const{levels:i,trackId:r}=this,s=null==i||null==(e=i[r])?void 0:e.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state="WAITING_INIT_PTS"}break}case"FRAG_LOADING_WAITING_RETRY":{var t;const i=performance.now(),r=this.retryDate;(!r||i>=r||null!=(t=this.media)&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state="IDLE");break}case"WAITING_INIT_PTS":{const i=this.waitingData;if(i){const{frag:r,part:s,cache:o,complete:u}=i;if(void 0!==this.initPTS[r.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state="FRAG_LOADING";const m={frag:r,part:s,payload:o.flush(),networkDetails:null};this._handleFragmentLoadProgress(m),u&&super._handleFragmentLoadComplete(m)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${r.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const h=this.getLoadPosition(),m=yr.bufferInfo(this.mediaBuffer,h,this.config.maxBufferHole);U0(m.end,this.config.maxFragLookUpTolerance,r)<0&&(this.log(`Waiting fragment cc (${r.cc}) @ ${r.start} cancelled because another fragment at ${m.end} is needed`),this.clearWaitingFragment())}}else this.state="IDLE"}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state="IDLE")}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:i,trackId:r}=this;if(null==t||!t[r]||!i&&(this.startFragRequested||!e.config.startFragPrefetch))return;const o=t[r],u=o.details;if(!u||u.live&&this.levelLastLoaded!==r||this.waitForCdnTuneIn(u))return void(this.state="WAITING_TRACK");const h=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&h&&(this.bufferFlushed=!1,this.afterBufferFlushed(h,zi.AUDIO,ei.AUDIO));const m=this.getFwdBufferInfo(h,ei.AUDIO);if(null===m)return;const{bufferedTrack:g,switchingTrack:y}=this;if(!y&&this._streamEnded(m,u))return e.trigger(U.BUFFER_EOS,{type:"audio"}),void(this.state="ENDED");const E=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,ei.MAIN),x=m.len,I=this.getMaxBufferLength(E?.len);if(x>=I&&!y)return;const P=u.fragments[0].start;let q=m.end;if(y&&i){const De=this.getLoadPosition();g&&y.attrs!==g.attrs&&(q=De),u.PTSKnown&&De<P&&(m.end>P||m.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=P+.05)}let ae=this.getNextFragment(q,u),ee=!1;if(ae&&this.isLoopLoading(ae,q)&&(ee=!!ae.gap,ae=this.getNextFragmentLoopLoading(ae,u,m,ei.MAIN,I)),!ae)return void(this.bufferFlushed=!0);const ye=E&&ae.start>E.end+u.targetduration;if(ye||(null==E||!E.len)&&m.len){const De=this.getAppendedFrag(ae.start,ei.MAIN);if(null===De||(ee||(ee=!!De.gap||!!ye&&0===E.len),ye&&!ee||ee&&m.nextStart&&m.nextStart<De.end))return}this.loadFragment(ae,o,q)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(i=>new dp(i))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),i?this.setInterval(100):this.resetTransmuxer(),i?(this.switchingTrack=t,this.state="IDLE"):(this.switchingTrack=null,this.bufferedTrack=t,this.state="STOPPED"),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(U.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var i;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:r}=this,{details:s,id:o}=t;if(!r)return void this.warn(`Audio tracks were reset while loading level ${o}`);this.log(`Track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const u=r[o];let h=0;if(s.live||null!=(i=u.details)&&i.live){this.checkLiveUpdate(s);const m=this.mainDetails;if(s.deltaUpdateFailed||!m)return;!u.details&&s.hasProgramDateTime&&m.hasProgramDateTime?(y_(s,m),h=s.fragments[0].start):h=this.alignPlaylists(s,u.details)}u.details=s,this.levelLastLoaded=o,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(u.details,h),"WAITING_TRACK"===this.state&&!this.waitForCdnTuneIn(s)&&(this.state="IDLE"),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:i,part:r,payload:s}=e,{config:o,trackId:u,levels:h}=this;if(!h)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const m=h[u];if(!m)return void this.warn("Audio track is undefined on fragment load progress");const g=m.details;if(!g)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(i.start);const y=o.defaultAudioCodec||m.audioCodec||"mp4a.40.2";let E=this.transmuxer;E||(E=this.transmuxer=new hb(this.hls,ei.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const x=this.initPTS[i.cc],I=null==(t=i.initSegment)?void 0:t.data;if(void 0!==x){const P=r?r.index:-1,ae=new H0(i.level,i.sn,i.stats.chunkCount,s.byteLength,P,-1!==P);E.push(s,I,y,"",i,r,g.totalduration,!1,ae,x)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${g.startSN} ,${g.endSN}],track ${u}`);const{cache:k}=this.waitingData=this.waitingData||{frag:i,part:r,cache:new wM,complete:!1};k.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state="WAITING_INIT_PTS"}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:i,part:r}=t;if(i.type===ei.AUDIO)if(this.fragContextChanged(i))this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==i.sn){this.fragPrevious=i;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(U.AUDIO_TRACK_SWITCHED,Vs({},s)))}this.fragBufferedComplete(i,r)}else if(!this.loadedmetadata&&i.type===ei.MAIN){const s=this.videoBuffer||this.media;s&&yr.getBuffered(s).length&&(this.loadedmetadata=!0)}}onError(e,t){var i;if(t.fatal)this.state="ERROR";else switch(t.details){case ht.FRAG_GAP:case ht.FRAG_PARSING_ERROR:case ht.FRAG_DECRYPT_ERROR:case ht.FRAG_LOAD_ERROR:case ht.FRAG_LOAD_TIMEOUT:case ht.KEY_LOAD_ERROR:case ht.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ei.AUDIO,t);break;case ht.AUDIO_TRACK_LOAD_ERROR:case ht.AUDIO_TRACK_LOAD_TIMEOUT:case ht.LEVEL_PARSING_ERROR:!t.levelRetry&&"WAITING_TRACK"===this.state&&(null==(i=t.context)?void 0:i.type)===Gi.AUDIO_TRACK&&(this.state="IDLE");break;case ht.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case ht.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushed(e,{type:t}){t===zi.AUDIO&&(this.bufferFlushed=!0,"ENDED"===this.state&&(this.state="IDLE"))}_handleTransmuxComplete(e){var t;const i="audio",{hls:r}=this,{remuxResult:s,chunkMeta:o}=e,u=this.getCurrentContext(o);if(!u)return void this.resetWhenMissingContext(o);const{frag:h,part:m,level:g}=u,{details:y}=g,{audio:E,text:x,id3:I,initSegment:k}=s;if(!this.fragContextChanged(h)&&y){if(this.state="PARSING",this.switchingTrack&&E&&this.completeAudioSwitch(this.switchingTrack),null!=k&&k.tracks){const P=h.initSegment||h;this._bufferInitSegment(k.tracks,P,o),r.trigger(U.FRAG_PARSING_INIT_SEGMENT,{frag:P,id:i,tracks:k.tracks})}if(E){const{startPTS:P,endPTS:q,startDTS:ae,endDTS:ee}=E;m&&(m.elementaryStreams[zi.AUDIO]={startPTS:P,endPTS:q,startDTS:ae,endDTS:ee}),h.setElementaryStreamInfo(zi.AUDIO,P,q,ae,ee),this.bufferFragmentData(E,h,m,o)}if(null!=I&&null!=(t=I.samples)&&t.length){const P=bs({id:i,frag:h,details:y},I);r.trigger(U.FRAG_PARSING_METADATA,P)}if(x){const P=bs({id:i,frag:h,details:y},x);r.trigger(U.FRAG_PARSING_USERDATA,P)}}else this.fragmentTracker.removeFragment(h)}_bufferInitSegment(e,t,i){if("PARSING"!==this.state)return;e.video&&delete e.video;const r=e.audio;if(!r)return;r.levelCodec=r.codec,r.id="audio",this.log(`Init audio buffer, container:${r.container}, codecs[parsed]=[${r.codec}]`),this.hls.trigger(U.BUFFER_CODECS,e);const s=r.initSegment;null!=s&&s.byteLength&&this.hls.trigger(U.BUFFER_APPENDING,{type:"audio",frag:t,part:null,chunkMeta:i,parent:t.type,data:s}),this.tick()}loadFragment(e,t,i){const r=this.fragmentTracker.getState(e);var s;this.fragCurrent=e,this.switchingTrack||"NOT_LOADED"===r||"PARTIAL"===r?"initSegment"===e.sn?this._loadInitSegment(e,t):null!=(s=t.details)&&s.live&&!this.initPTS[e.cc]?(this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state="WAITING_INIT_PTS"):(this.startFragRequested=!0,super.loadFragment(e,t,i)):this.clearTrackerIfNeeded(e)}completeAudioSwitch(e){const{hls:t,media:i,bufferedTrack:r}=this,s=r?.attrs,o=e.attrs;i&&s&&(s.CHANNELS!==o.CHANNELS||s.NAME!==o.NAME||s.LANGUAGE!==o.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(U.AUDIO_TRACK_SWITCHED,Vs({},e))}},audioTrackController:class bp extends $0{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.LEVEL_LOADING,this.onLevelLoading,this),e.on(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(U.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(U.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.LEVEL_LOADING,this.onLevelLoading,this),e.off(U.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(U.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(U.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:r,details:s}=t,o=this.tracksInGroup[i];if(!o||o.groupId!==r)return void this.warn(`Track with id:${i} and group:${r} not found in active group ${o.groupId}`);const u=o.details;o.details=t.details,this.log(`audio-track ${i} "${o.name}" lang:${o.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,u)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(null==t||!t.audioGroupIds)return;const i=t.audioGroupIds[t.urlId];if(this.groupId!==i){this.groupId=i||null;const r=this.tracks.filter(o=>!i||o.groupId===i);this.selectDefaultTrack&&!r.some(o=>o.default)&&(this.selectDefaultTrack=!1),this.tracksInGroup=r;const s={audioTracks:r};this.log(`Updating audio tracks, ${r.length} track(s) found in group:${i}`),this.hls.trigger(U.AUDIO_TRACKS_UPDATED,s),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(e,t){t.fatal||!t.context||t.context.type===Gi.AUDIO_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(t))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn("Invalid id passed to audio-track controller");this.clearTimer();const i=this.currentTrack,r=t[e],{groupId:s,name:o}=r;if(this.log(`Switching to audio-track ${e} "${o}" lang:${r.lang} group:${s}`),this.trackId=e,this.currentTrack=r,this.selectDefaultTrack=!1,this.hls.trigger(U.AUDIO_TRACK_SWITCHING,Vs({},r)),r.details&&!r.details.live)return;const u=this.switchParams(r.url,i?.details);this.loadPlaylist(u)}selectInitialTrack(){const e=this.tracksInGroup,t=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(-1!==t)this.setAudioTrack(t);else{const i=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${e.length}`);this.warn(i.message),this.hls.trigger(U.ERROR,{type:Jn.MEDIA_ERROR,details:ht.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:i})}}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const r=t[i];if((!this.selectDefaultTrack||r.default)&&(!e||void 0!==e.attrs["STABLE-RENDITION-ID"]&&e.attrs["STABLE-RENDITION-ID"]===r.attrs["STABLE-RENDITION-ID"]||e.name===r.name&&e.lang===r.lang))return r.id}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const i=t.id,r=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`loading audio-track playlist ${i} "${t.name}" lang:${t.lang} group:${r}`),this.clearTimer(),this.hls.trigger(U.AUDIO_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:e||null})}}},emeController:NM,cmcdController:_c,contentSteeringController:class Qa{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=Re.log.bind(Re,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(U.MANIFEST_LOADING,this.onManifestLoading,this),e.on(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(U.MANIFEST_PARSED,this.onManifestParsed,this),e.on(U.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(U.MANIFEST_LOADING,this.onManifestLoading,this),e.off(U.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(U.MANIFEST_PARSED,this.onManifestParsed,this),e.off(U.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const e=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,e)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;null!==i&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if(2===i?.action&&1===i.flags){let r=this.pathwayPriority;const s=this.pathwayId;this.penalizedPathways[s]||(this.penalizedPathways[s]=performance.now()),!r&&this.levels&&(r=this.levels.reduce((o,u)=>(-1===o.indexOf(u.pathwayId)&&o.push(u.pathwayId),o),[])),r&&r.length>1&&(this.updatePathwayPriority(r),i.resolved=this.pathwayId!==s)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length?(this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t):e}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){let t;this.pathwayPriority=e;const i=this.penalizedPathways,r=performance.now();Object.keys(i).forEach(s=>{r-i[s]>3e5&&delete i[s]});for(let s=0;s<e.length;s++){const o=e[s];if(i[o])continue;if(o===this.pathwayId)return;const u=this.hls.nextLoadLevel,h=this.hls.levels[u];if(t=this.getLevelsForPathway(o),t.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,this.hls.trigger(U.LEVELS_UPDATED,{levels:t});const m=this.hls.levels[u];h&&m&&this.levels&&(m.attrs["STABLE-VARIANT-ID"]!==h.attrs["STABLE-VARIANT-ID"]&&m.bitrate!==h.bitrate&&this.log(`Unstable Pathways change from bitrate ${h.bitrate} to ${m.bitrate}`),this.hls.nextLoadLevel=u);break}}}clonePathways(e){const t=this.levels;if(!t)return;const i={},r={};e.forEach(s=>{const{ID:o,"BASE-ID":u,"URI-REPLACEMENT":h}=s;if(t.some(g=>g.pathwayId===o))return;const m=this.getLevelsForPathway(u).map(g=>{const y=bs({},g);y.details=void 0,y.url=H_(g.uri,g.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",h);const E=new Or(g.attrs);E["PATHWAY-ID"]=o;const x=E.AUDIO&&`${E.AUDIO}_clone_${o}`,I=E.SUBTITLES&&`${E.SUBTITLES}_clone_${o}`;x&&(i[E.AUDIO]=x,E.AUDIO=x),I&&(r[E.SUBTITLES]=I,E.SUBTITLES=I),y.attrs=E;const k=new dp(y);return pp(k,"audio",x),pp(k,"text",I),k});t.push(...m),jC(this.audioTracks,i,h,o),jC(this.subtitleTracks,r,h,o)})}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;let r;this.loader&&this.loader.destroy(),this.loader=new i(t);try{r=new self.URL(e)}catch{return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==r.protocol){const g=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+g)}const s={responseType:"json",url:r.href},o=t.steeringManifestLoadPolicy.default,u=o.errorRetry||o.timeoutRetry||{},h={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:u.maxNumRetry||0,retryDelay:u.retryDelayMs||0,maxRetryDelay:u.maxRetryDelayMs||0},m={onSuccess:(g,y,E,x)=>{this.log(`Loaded steering manifest: "${r}"`);const I=g.data;if(1!==I.VERSION)return void this.log(`Steering VERSION ${I.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=I.TTL;const{"RELOAD-URI":k,"PATHWAY-CLONES":P,"PATHWAY-PRIORITY":q}=I;if(k)try{this.uri=new self.URL(k,r).href}catch{return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${k}`)}this.scheduleRefresh(this.uri||E.url),P&&this.clonePathways(P),q&&this.updatePathwayPriority(q)},onError:(g,y,E,x)=>{if(this.log(`Error loading steering manifest: ${g.code} ${g.text} (${y.url})`),this.stopLoad(),410===g.code)return this.enabled=!1,void this.log(`Steering manifest ${y.url} no longer available`);let I=1e3*this.timeToLoad;if(429!==g.code)this.scheduleRefresh(this.uri||y.url,I);else{const k=this.loader;if("function"==typeof k?.getResponseHeader){const P=k.getResponseHeader("Retry-After");P&&(I=1e3*parseFloat(P))}this.log(`Steering manifest ${y.url} rate limited`)}},onTimeout:(g,y,E)=>{this.log(`Timeout loading steering manifest (${y.url})`),this.scheduleRefresh(this.uri||y.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(s,h,m)}scheduleRefresh(e,t=1e3*this.timeToLoad){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout(()=>{this.loadSteeringManifest(e)},t)}}});function xp(n){return n&&"object"==typeof n?Array.isArray(n)?n.map(xp):Object.keys(n).reduce((e,t)=>(e[t]=xp(n[t]),e),{}):n}let Sl=(()=>{class n{static get version(){return"1.4.12"}static isSupported(){return function BL(){const n=sf();if(!n)return!1;const e=oC();return!(!n||"function"!=typeof n.isTypeSupported||!n.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||e&&(!e.prototype||"function"!=typeof e.prototype.appendBuffer||"function"!=typeof e.prototype.remove))}()}static get Events(){return U}static get ErrorTypes(){return Jn}static get ErrorDetails(){return ht}static get DefaultConfig(){return n.defaultConfig?n.defaultConfig:jM}static set DefaultConfig(t){n.defaultConfig=t}constructor(t={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new M_,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,function _1(n,e){if(self.console&&!0===n||"object"==typeof n){!function cT(n,...e){e.forEach(function(t){ip[t]=n[t]?n[t].bind(n):function g1(n){const e=self.console[n];return e?e.bind(self.console,`[${n}] >`):nf}(t)})}(n,"debug","log","info","warn","error");try{ip.log(`Debug logs enabled for "${e}" in hls.js version 1.4.12`)}catch{ip=lT}}else ip=lT}(t.debug||!1,"Hls instance");const i=this.config=function GM(n,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=xp(n),r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(s=>{const o=`${"level"===s?"playlist":s}LoadPolicy`,u=void 0===e[o],h=[];r.forEach(m=>{const g=`${s}Loading${m}`,y=e[g];if(void 0!==y&&u){h.push(g);const E=t[o].default;switch(e[o]={default:E},m){case"TimeOut":E.maxLoadTimeMs=y,E.maxTimeToFirstByteMs=y;break;case"MaxRetry":E.errorRetry.maxNumRetry=y,E.timeoutRetry.maxNumRetry=y;break;case"RetryDelay":E.errorRetry.retryDelayMs=y,E.timeoutRetry.retryDelayMs=y;break;case"MaxRetryTimeout":E.errorRetry.maxRetryDelayMs=y,E.timeoutRetry.maxRetryDelayMs=y}}}),h.length&&Re.warn(`hls.js config: "${h.join('", "')}" setting(s) are deprecated, use "${o}": ${JSON.stringify(e[o])}`)}),Vs(Vs({},t),e)}(n.DefaultConfig,t);this.userConfig=t,this._autoLevelCapping=-1,i.progressive&&function yc(n){const e=n.loader;e!==z_&&e!==UM?(Re.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):function Ea(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}()&&(n.loader=z_,n.progressive=!0,n.enableSoftwareAES=!0,Re.log("[config]: Progressive streaming enabled, using FetchLoader"))}(i);const{abrController:r,bufferController:s,capLevelController:o,errorController:u,fpsController:h}=i,m=new u(this),g=this.abrController=new r(this),y=this.bufferController=new s(this),E=this.capLevelController=new o(this),x=new h(this),I=new O1(this),k=new L1(this),P=i.contentSteeringController,q=P?new P(this):null,ae=this.levelController=new H1(this,q),ee=new z1(this),ye=new j1(this.config),De=this.streamController=new bo(this,ee,ye);E.setStreamController(De),x.setStreamController(De);const dt=[I,ae,De];q&&dt.splice(1,0,q),this.networkControllers=dt;const it=[g,y,E,x,k,ee];this.audioTrackController=this.createController(i.audioTrackController,dt);const Dt=i.audioStreamController;Dt&&dt.push(new Dt(this,ee,ye)),this.subtitleTrackController=this.createController(i.subtitleTrackController,dt);const Nt=i.subtitleStreamController;Nt&&dt.push(new Nt(this,ee,ye)),this.createController(i.timelineController,it),ye.emeController=this.emeController=this.createController(i.emeController,it),this.cmcdController=this.createController(i.cmcdController,it),this.latencyController=this.createController(F1,it),this.coreComponents=it,dt.push(m);const mt=m.onErrorOut;"function"==typeof mt&&this.on(U.ERROR,mt,m)}createController(t,i){if(t){const r=new t(this);return i&&i.push(r),r}return null}on(t,i,r=this){this._emitter.on(t,i,r)}once(t,i,r=this){this._emitter.once(t,i,r)}removeAllListeners(t){this._emitter.removeAllListeners(t)}off(t,i,r=this,s){this._emitter.off(t,i,r,s)}listeners(t){return this._emitter.listeners(t)}emit(t,i,r){return this._emitter.emit(t,i,r)}trigger(t,i){if(this.config.debug)return this.emit(t,t,i);try{return this.emit(t,t,i)}catch(r){Re.error("An internal error happened while handling event "+t+'. Error message: "'+r.message+'". Here is a stacktrace:',r),this.trigger(U.ERROR,{type:Jn.OTHER_ERROR,details:ht.INTERNAL_EXCEPTION,fatal:!1,event:t,error:r})}return!1}listenerCount(t){return this._emitter.listenerCount(t)}destroy(){Re.log("destroy"),this.trigger(U.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(i=>i.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(i=>i.destroy()),this.coreComponents.length=0;const t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null}attachMedia(t){Re.log("attachMedia"),this._media=t,this.trigger(U.MEDIA_ATTACHING,{media:t})}detachMedia(){Re.log("detachMedia"),this.trigger(U.MEDIA_DETACHING,void 0),this._media=null}loadSource(t){this.stopLoad();const i=this.media,r=this.url,s=this.url=r_.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});Re.log(`loadSource:${s}`),i&&r&&(r!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(i)),this.trigger(U.MANIFEST_LOADING,{url:t})}startLoad(t=-1){Re.log(`startLoad(${t})`),this.networkControllers.forEach(i=>{i.startLoad(t)})}stopLoad(){Re.log("stopLoad"),this.networkControllers.forEach(t=>{t.stopLoad()})}swapAudioCodec(){Re.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){Re.log("recoverMediaError");const t=this._media;this.detachMedia(),t&&this.attachMedia(t)}removeLevel(t,i=0){this.levelController.removeLevel(t,i)}get levels(){return this.levelController.levels||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(t){Re.log(`set currentLevel:${t}`),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(t){Re.log(`set nextLevel:${t}`),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(t){Re.log(`set loadLevel:${t}`),this.levelController.manualLevel=t}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(t){this.levelController.nextLoadLevel=t}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(t){Re.log(`set firstLevel:${t}`),this.levelController.firstLevel=t}get startLevel(){return this.levelController.startLevel}set startLevel(t){Re.log(`set startLevel:${t}`),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(t){const i=!!t;i!==this.config.capLevelToPlayerSize&&(i?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=i)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimateTTFB():NaN}set autoLevelCapping(t){this._autoLevelCapping!==t&&(Re.log(`set autoLevelCapping:${t}`),this._autoLevelCapping=t)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(t){L0.indexOf(t)>-1&&(this._maxHdcpLevel=t)}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:t,config:{minAutoBitrate:i}}=this;if(!t)return 0;const r=t.length;for(let s=0;s<r;s++)if(t[s].maxBitrate>=i)return s;return 0}get maxAutoLevel(){const{levels:t,autoLevelCapping:i,maxHdcpLevel:r}=this;let s;if(s=-1===i&&t&&t.length?t.length-1:i,r)for(let o=s;o--;){const u=t[o].attrs["HDCP-LEVEL"];if(u&&u<=r)return o}return s}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const t=this.audioTrackController;return t?t.audioTracks:[]}get audioTrack(){const t=this.audioTrackController;return t?t.audioTrack:-1}set audioTrack(t){const i=this.audioTrackController;i&&(i.audioTrack=t)}get subtitleTracks(){const t=this.subtitleTrackController;return t?t.subtitleTracks:[]}get subtitleTrack(){const t=this.subtitleTrackController;return t?t.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(t){const i=this.subtitleTrackController;i&&(i.subtitleTrack=t)}get subtitleDisplay(){const t=this.subtitleTrackController;return!!t&&t.subtitleDisplay}set subtitleDisplay(t){const i=this.subtitleTrackController;i&&(i.subtitleDisplay=t)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(t){this.config.lowLatencyMode=t}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}return n.defaultConfig=void 0,n})();var an,ZC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zo={},Rb=Rb||{},di=ZC||self;function j_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Tp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ob="closure_uid_"+(1e9*Math.random()>>>0),XC=0;function ZL(n,e,t){return n.call.apply(n.bind,arguments)}function QC(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function eo(n,e,t){return(eo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ZL:QC).apply(null,arguments)}function Cp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function js(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),u=2;u<arguments.length;u++)o[u-2]=arguments[u];return e.prototype[r].apply(i,o)}}function Dl(){this.s=this.s,this.o=this.o}Dl.prototype.s=!1,Dl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function WM(n){Object.prototype.hasOwnProperty.call(n,Ob)&&n[Ob]||(n[Ob]=++XC)}(this)},Dl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function G_(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function Lb(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(j_(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function Gs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Gs.prototype.h=function(){this.defaultPrevented=!0};var W_=function(){if(!di.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{di.addEventListener("test",()=>{},e),di.removeEventListener("test",()=>{},e)}catch{}return n}();function pu(n){return/^[\s\xa0]*$/.test(n)}function Ip(){var n=di.navigator;return n&&(n=n.userAgent)?n:""}function Al(n){return-1!=Ip().indexOf(n)}function Fb(n){return Fb[" "](n),n}Fb[" "]=function(){};var tI,n,QL=Al("Opera"),Sp=Al("Trident")||Al("MSIE"),Nb=Al("Edge"),Bb=Nb||Sp,eI=Al("Gecko")&&!(-1!=Ip().toLowerCase().indexOf("webkit")&&!Al("Edge"))&&!(Al("Trident")||Al("MSIE"))&&!Al("Edge"),YM=-1!=Ip().toLowerCase().indexOf("webkit")&&!Al("Edge");function qM(){var n=di.document;return n?n.documentMode:void 0}e:{var nI="",iI=(n=Ip(),eI?/rv:([^\);]+)(\)|;)/.exec(n):Nb?/Edge\/([\d\.]+)/.exec(n):Sp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):YM?/WebKit\/(\S+)/.exec(n):QL?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(iI&&(nI=iI?iI[1]:""),Sp){var rI=qM();if(null!=rI&&rI>parseFloat(nI)){tI=String(rI);break e}}tI=nI}var KM=di.document&&Sp&&(qM()||parseInt(tI,10))||void 0;function Ap(n,e){if(Gs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(eI){e:{try{Fb(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:sI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ap.$.h.call(this)}}js(Ap,Gs);var sI={2:"touch",3:"pen",4:"mouse"};Ap.prototype.h=function(){Ap.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ja="closure_listenable_"+(1e6*Math.random()|0),oI=0;function $b(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++oI,this.fa=this.ia=!1}function vf(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Vb(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function Y_(n){const e={};for(const t in n)e[t]=n[t];return e}const Mp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ZM(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<Mp.length;s++)t=Mp[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function zb(n){this.src=n,this.g={},this.h=0}function aI(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=Pb(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(vf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function lI(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}zb.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=lI(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new $b(e,this.src,s,!!i,r)).ia=t,n.push(e)),e};var q_="closure_lm_"+(1e6*Math.random()|0),jb={};function cI(n,e,t,i,r){if(i&&i.once)return Gb(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)cI(n,e[s],t,i,r);return null}return t=hI(t),n&&n[Ja]?n.O(e,t,Tp(i)?!!i.capture:!!i,r):uI(n,e,t,!1,i,r)}function uI(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=Tp(r)?!!r.capture:!!r,u=Z_(n);if(u||(n[q_]=u=new zb(n)),(t=u.add(e,t,i,o,s)).proxy)return t;if(i=function XM(){const e=QM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)W_||(r=o),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(dI(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function Gb(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Gb(n,e[s],t,i,r);return null}return t=hI(t),n&&n[Ja]?n.P(e,t,Tp(i)?!!i.capture:!!i,r):uI(n,e,t,!0,i,r)}function Wb(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Wb(n,e[s],t,i,r);else i=Tp(i)?!!i.capture:!!i,t=hI(t),n&&n[Ja]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=lI(s=n.g[e],t,i,r))&&(vf(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Z_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=lI(e,t,i,r)),(t=-1<n?e[n]:null)&&K_(t))}function K_(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Ja])aI(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(dI(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Z_(e))?(aI(t,n),0==t.h&&(t.src=null,e[q_]=null)):vf(n)}}}function dI(n){return n in jb?jb[n]:jb[n]="on"+n}function QM(n,e){if(n.fa)n=!0;else{e=new Ap(e,this);var t=n.listener,i=n.la||n.src;n.ia&&K_(n),n=t.call(i,e)}return n}function Z_(n){return(n=n[q_])instanceof zb?n:null}var kp="__closure_events_fn_"+(1e9*Math.random()>>>0);function hI(n){return"function"==typeof n?n:(n[kp]||(n[kp]=function(e){return n.handleEvent(e)}),n[kp])}function ws(){Dl.call(this),this.i=new zb(this),this.S=this,this.J=null}function Es(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new Gs(e,n);else if(e instanceof Gs)e.target=e.target||n;else{var r=e;ZM(e=new Gs(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=X_(o,i,!0,e)&&r}if(r=X_(o=e.g=n,i,!0,e)&&r,r=X_(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=X_(o=e.g=t[s],i,!1,e)&&r}function X_(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var u=o.listener,h=o.la||o.src;o.ia&&aI(n.i,o),r=!1!==u.call(h,i)&&r}}return r&&!i.defaultPrevented}js(ws,Dl),ws.prototype[Ja]=!0,ws.prototype.removeEventListener=function(n,e,t,i){Wb(this,n,e,t,i)},ws.prototype.N=function(){if(ws.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)vf(t[i]);delete n.g[e],n.h--}}this.J=null},ws.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},ws.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var Yb=di.JSON.stringify;function eF(){var n=qb;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var fI=new class JL{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ek,n=>n.reset());class ek{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function tF(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function nF(n){di.setTimeout(()=>{throw n},0)}let Q_,J_=!1,qb=new class JM{constructor(){this.h=this.g=null}add(e,t){const i=fI.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},tk=()=>{const n=di.Promise.resolve(void 0);Q_=()=>{n.then(iF)}};var iF=()=>{for(var n;n=eF();){try{n.h.call(n.g)}catch(t){nF(t)}var e=fI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}J_=!1};function Kb(n,e){ws.call(this),this.h=n||1,this.g=e||di,this.j=eo(this.qb,this),this.l=Date.now()}function mI(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Zb(n,e,t){if("function"==typeof n)t&&(n=eo(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=eo(n.handleEvent,n)}return 2147483647<Number(e)?-1:di.setTimeout(n,e||0)}function pI(n){n.g=Zb(()=>{n.g=null,n.i&&(n.i=!1,pI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}js(Kb,ws),(an=Kb.prototype).ga=!1,an.T=null,an.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Es(this,"tick"),this.ga&&(mI(this),this.start()))}},an.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},an.N=function(){Kb.$.N.call(this),mI(this),delete this.g};class l extends Dl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pI(this)}N(){super.N(),this.g&&(di.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function c(n){Dl.call(this),this.h=n,this.g={}}js(c,Dl);var d=[];function f(n,e,t,i){Array.isArray(t)||(t&&(d[0]=t.toString()),t=d);for(var r=0;r<t.length;r++){var s=cI(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function p(n){Vb(n.g,function(e,t){this.g.hasOwnProperty(t)&&K_(e)},n),n.g={}}function _(){this.g=!0}function S(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function H(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Yb(t)}catch{return e}}(n,t)+(i?" "+i:"")})}c.prototype.N=function(){c.$.N.call(this),p(this)},c.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_.prototype.Ea=function(){this.g=!1},_.prototype.info=function(){};var J={},Ie=null;function je(){return Ie=Ie||new ws}function ft(n){Gs.call(this,J.Ta,n)}function Ft(n){const e=je();Es(e,new ft(e))}function nn(n,e){Gs.call(this,J.STAT_EVENT,n),this.stat=e}function Jt(n){const e=je();Es(e,new nn(e,n))}function Kn(n,e){Gs.call(this,J.Ua,n),this.size=e}function St(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return di.setTimeout(function(){n()},e)}J.Ta="serverreachability",js(ft,Gs),J.STAT_EVENT="statevent",js(nn,Gs),J.Ua="timingevent",js(Kn,Gs);var ii={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},vr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Fr(){}function rF(){}Fr.prototype.h=null;var sk,Xb={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ik(){Gs.call(this,"d")}function rk(){Gs.call(this,"c")}function gI(){}function Qb(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new c(this),this.P=TH,this.V=new Kb(n=Bb?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new sF}function sF(){this.i=null,this.g="",this.h=!1}js(ik,Gs),js(rk,Gs),js(gI,Fr),gI.prototype.g=function(){return new XMLHttpRequest},gI.prototype.i=function(){return{}},sk=new gI;var TH=45e3,ok={},_I={};function ak(n,e,t){n.L=1,n.v=wI(Cd(e)),n.s=t,n.S=!0,oF(n,null)}function oF(n,e){n.G=Date.now(),Jb(n),n.A=Cd(n.v);var t=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),gF(t.i,"t",i),n.C=0,t=n.l.J,n.h=new sF,n.g=$F(n.l,t?e:null,!n.s),0<n.O&&(n.M=new l(eo(n.Pa,n,n.g),n.O)),f(n.U,n.g,"readystatechange",n.nb),e=n.I?Y_(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ft(),function w(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",u=s.split("&"),h=0;h<u.length;h++){var m=u[h].split("=");if(1<m.length){var g=m[0];m=m[1];var y=g.split("_");o=2<=y.length&&"type"==y[1]?o+(g+"=")+m+"&":o+(g+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function aF(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function lF(n,e,t){let r,i=!0;for(;!n.J&&n.C<t.length;){if(r=CH(n,t),r==_I){4==e&&(n.o=4,Jt(14),i=!1),S(n.j,n.m,null,"[Incomplete Response]");break}if(r==ok){n.o=4,Jt(15),S(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}S(n.j,n.m,r,null),lk(n,r)}aF(n)&&r!=_I&&r!=ok&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Jt(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),pk(e),e.M=!0,Jt(11))):(S(n.j,n.m,t,"[Invalid Chunked Response]"),Rp(n),ew(n))}function CH(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?_I:(t=Number(e.substring(t,i)),isNaN(t)?ok:(i+=1)+t>e.length?_I:(e=e.slice(i,i+t),n.C=i+t,e))}function Jb(n){n.Y=Date.now()+n.P,cF(n,n.P)}function cF(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=St(eo(n.lb,n),e)}function yI(n){n.B&&(di.clearTimeout(n.B),n.B=null)}function ew(n){0==n.l.H||n.J||FF(n.l,n)}function Rp(n){yI(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,mI(n.V),p(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function lk(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||ck(t.i,n)))if(!n.K&&ck(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;SI(t),CI(t)}mk(t),Jt(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=St(eo(t.ib,t),6e3));if(1>=vF(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Pp(t,11)}else if((n.K||t.g==n)&&SI(t),!pu(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let m=r[e];if(t.V=m[0],m=m[1],2==t.H)if("c"==m[0]){t.K=m[1],t.pa=m[2];const g=m[3];null!=g&&(t.ra=g,t.l.info("VER="+t.ra));const y=m[4];null!=y&&(t.Ga=y,t.l.info("SVER="+t.Ga));const E=m[5];null!=E&&"number"==typeof E&&0<E&&(t.L=i=1.5*E,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const x=n.g;if(x){const I=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(I){var s=i.i;s.g||-1==I.indexOf("spdy")&&-1==I.indexOf("quic")&&-1==I.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(uk(s,s.h),s.h=null))}if(i.F){const k=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;k&&(i.Da=k,Nr(i.I,i.F,k))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((i=t).wa=UF(i,i.J?i.pa:null,i.Y),o.K){bF(i.i,o);var u=o,h=i.L;h&&u.setTimeout(h),u.B&&(yI(u),Jb(u)),i.g=o}else PF(i);0<t.j.length&&II(t)}else"stop"!=m[0]&&"close"!=m[0]||Pp(t,7);else 3==t.H&&("stop"==m[0]||"close"==m[0]?"stop"==m[0]?Pp(t,7):fk(t):"noop"!=m[0]&&t.h&&t.h.Aa(m),t.A=0)}Ft()}catch{}}function uF(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(j_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function SH(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(j_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function IH(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(j_(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(an=Qb.prototype).setTimeout=function(n){this.P=n},an.nb=function(n){n=n.target;const e=this.M;e&&3==gu(n)?e.l():this.Pa(n)},an.Pa=function(n){try{if(n==this.g)e:{const g=gu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>g)&&(3!=g||Bb||this.g&&(this.h.h||this.g.ja()||DF(this.g)))){this.J||4!=g||7==e||Ft(),yI(this);var t=this.g.da();this.ca=t;t:if(aF(this)){var i=DF(this.g);n="";var r=i.length,s=4==gu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Rp(this),ew(this);var o="";break t}this.h.i=new di.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function C(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,g,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,h=this.g;if((u=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pu(u)){var m=u;break t}}m=null}if(!(t=m)){this.i=!1,this.o=3,Jt(12),Rp(this),ew(this);break e}S(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lk(this,t)}this.S?(lF(this,g,o),Bb&&this.i&&3==g&&(f(this.U,this.V,"tick",this.mb),this.V.start())):(S(this.j,this.m,o,null),lk(this,o)),4==g&&Rp(this),this.i&&!this.J&&(4==g?FF(this.l,this):(this.i=!1,Jb(this)))}else(function GH(n){const e={};n=(n.g&&2<=gu(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(pu(n[i]))continue;var t=tF(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}!function Hb(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.o=3,Jt(12)):(this.o=0,Jt(13)),Rp(this),ew(this)}}}catch{}},an.mb=function(){if(this.g){var n=gu(this.g),e=this.g.ja();this.C<e.length&&(yI(this),lF(this,n,e),this.i&&4!=n&&Jb(this))}},an.cancel=function(){this.J=!0,Rp(this)},an.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function R(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ft(),Jt(17)),Rp(this),this.o=2,ew(this)):cF(this,this.Y-n)};var dF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Op(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Op){this.h=n.h,vI(this,n.j),this.s=n.s,this.g=n.g,bI(this,n.m),this.l=n.l;var e=n.i,t=new iw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),hF(this,t),this.o=n.o}else n&&(e=String(n).match(dF))?(this.h=!1,vI(this,e[1]||"",!0),this.s=tw(e[2]||""),this.g=tw(e[3]||"",!0),bI(this,e[4]),this.l=tw(e[5]||"",!0),hF(this,e[6]||"",!0),this.o=tw(e[7]||"")):(this.h=!1,this.i=new iw(null,this.h))}function Cd(n){return new Op(n)}function vI(n,e,t){n.j=t?tw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function bI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function hF(n,e,t){e instanceof iw?(n.i=e,function PH(n,e){e&&!n.j&&(bf(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(mF(this,i),gF(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=nw(e,RH)),n.i=new iw(e,n.h))}function Nr(n,e,t){n.i.set(e,t)}function wI(n){return Nr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function tw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function nw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,AH),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function AH(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Op.prototype.toString=function(){var n=[],e=this.j;e&&n.push(nw(e,fF,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(nw(e,fF,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(nw(t,"/"==t.charAt(0)?kH:MH,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",nw(t,OH)),n.join("")};var fF=/[#\/\?@]/g,MH=/[#\?:]/g,kH=/[#\?]/g,RH=/[#\?@]/g,OH=/#/g;function iw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bf(n){n.g||(n.g=new Map,n.h=0,n.i&&function DH(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function mF(n,e){bf(n),e=ey(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function pF(n,e){return bf(n),e=ey(n,e),n.g.has(e)}function gF(n,e,t){mF(n,e),0<t.length&&(n.i=null,n.g.set(ey(n,e),G_(t)),n.h+=t.length)}function ey(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function _F(n){this.l=n||FH,n=di.PerformanceNavigationTiming?0<(n=di.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(di.g&&di.g.Ka&&di.g.Ka()&&di.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(an=iw.prototype).add=function(n,e){bf(this),this.i=null,n=ey(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},an.forEach=function(n,e){bf(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},an.ta=function(){bf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},an.Z=function(n){bf(this);let e=[];if("string"==typeof n)pF(this,n)&&(e=e.concat(this.g.get(ey(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},an.set=function(n,e){return bf(this),this.i=null,pF(this,n=ey(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},an.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},an.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};var FH=10;function yF(n){return!!n.h||!!n.g&&n.g.size>=n.j}function vF(n){return n.h?1:n.g?n.g.size:0}function ck(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function uk(n,e){n.g?n.g.add(e):n.h=e}function bF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function wF(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return G_(n.i)}_F.prototype.cancel=function(){if(this.i=wF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var NH=class{stringify(n){return di.JSON.stringify(n,void 0)}parse(n){return di.JSON.parse(n,void 0)}};function BH(){this.g=new NH}function UH(n,e,t){const i=t||"";try{uF(n,function(r,s){let o=r;Tp(r)&&(o=Yb(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function EI(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function rw(n){this.l=n.fc||null,this.j=n.ob||!1}function xI(n,e){ws.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=dk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}js(rw,Fr),rw.prototype.g=function(){return new xI(this.l,this.j)},rw.prototype.i=function(n){return function(){return n}}({}),js(xI,ws);var dk=0;function EF(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function sw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ow(n)}function ow(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(an=xI.prototype).open=function(n,e){if(this.readyState!=dk)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ow(this)},an.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||di).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},an.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sw(this)),this.readyState=dk},an.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ow(this)),this.g&&(this.readyState=3,ow(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof di.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;EF(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},an.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sw(this):ow(this),3==this.readyState&&EF(this)}},an.Za=function(n){this.g&&(this.response=this.responseText=n,sw(this))},an.Ya=function(n){this.g&&(this.response=n,sw(this))},an.ka=function(){this.g&&sw(this)},an.setRequestHeader=function(n,e){this.v.append(n,e)},an.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},an.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var VH=di.JSON.parse;function ms(n){ws.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=xF,this.L=this.M=!1}js(ms,ws);var xF="",HH=/^https?$/i,zH=["POST","PUT"];function TF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,CF(n),TI(n)}function CF(n){n.F||(n.F=!0,Es(n,"complete"),Es(n,"error"))}function IF(n){if(n.h&&typeof Rb<"u"&&(!n.C[1]||4!=gu(n)||2!=n.da()))if(n.v&&4==gu(n))Zb(n.La,0,n);else if(Es(n,"readystatechange"),4==gu(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===o){var r=String(n.I).match(dF)[1]||null;!r&&di.self&&di.self.location&&(r=di.self.location.protocol.slice(0,-1)),i=!HH.test(r?r.toLowerCase():"")}t=i}if(t)Es(n,"complete"),Es(n,"success");else{n.m=6;try{var s=2<gu(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",CF(n)}}finally{TI(n)}}}function TI(n,e){if(n.g){SF(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Es(n,"ready");try{t.onreadystatechange=i}catch{}}}function SF(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(di.clearTimeout(n.A),n.A=null)}function gu(n){return n.g?n.g.readyState:0}function DF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case xF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function AF(n){let e="";return Vb(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function hk(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=AF(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Nr(n,e,t))}function aw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function MF(n){this.Ga=0,this.j=[],this.l=new _,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=aw("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=aw("baseRetryDelayMs",5e3,n),this.hb=aw("retryDelaySeedMs",1e4,n),this.eb=aw("forwardChannelMaxRetries",2,n),this.xa=aw("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new _F(n&&n.concurrentRequestLimit),this.Ja=new BH,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function fk(n){if(kF(n),3==n.H){var e=n.W++,t=Cd(n.I);if(Nr(t,"SID",n.K),Nr(t,"RID",e),Nr(t,"TYPE","terminate"),lw(n,t),(e=new Qb(n,n.l,e)).L=2,e.v=wI(Cd(t)),t=!1,di.navigator&&di.navigator.sendBeacon)try{t=di.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&di.Image&&((new Image).src=e.v,t=!0),t||(e.g=$F(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Jb(e)}BF(n)}function CI(n){n.g&&(pk(n),n.g.cancel(),n.g=null)}function kF(n){CI(n),n.u&&(di.clearTimeout(n.u),n.u=null),SI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&di.clearTimeout(n.m),n.m=null)}function II(n){if(!yF(n.i)&&!n.m){n.m=!0;var e=n.Na;Q_||tk(),J_||(Q_(),J_=!0),qb.add(e,n),n.C=0}}function RF(n,e){var t;t=e?e.m:n.W++;const i=Cd(n.I);Nr(i,"SID",n.K),Nr(i,"RID",t),Nr(i,"AID",n.V),lw(n,i),n.o&&n.s&&hk(i,n.o,n.s),t=new Qb(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=OF(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),uk(n.i,t),ak(t,i,e)}function lw(n,e){n.na&&Vb(n.na,function(t,i){Nr(e,i,t)}),n.h&&uF({},function(t,i){Nr(e,i,t)})}function OF(n,e,t){t=Math.min(n.j.length,t);var i=n.h?eo(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let u=!0;for(let h=0;h<t;h++){let m=r[h].g;const g=r[h].map;if(m-=s,0>m)s=Math.max(0,r[h].g-100),u=!1;else try{UH(g,o,"req"+m+"_")}catch{i&&i(g)}}if(u){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function PF(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Q_||tk(),J_||(Q_(),J_=!0),qb.add(e,n),n.A=0}}function mk(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=St(eo(n.Ma,n),NF(n,n.A)),n.A++,0))}function pk(n){null!=n.B&&(di.clearTimeout(n.B),n.B=null)}function LF(n){n.g=new Qb(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Cd(n.wa);Nr(e,"RID","rpc"),Nr(e,"SID",n.K),Nr(e,"AID",n.V),Nr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Nr(e,"TO",n.qa),Nr(e,"TYPE","xmlhttp"),lw(n,e),n.o&&n.s&&hk(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=wI(Cd(e)),t.s=null,t.S=!0,oF(t,n)}function SI(n){null!=n.v&&(di.clearTimeout(n.v),n.v=null)}function FF(n,e){var t=null;if(n.g==e){SI(n),pk(n),n.g=null;var i=2}else{if(!ck(n.i,e))return;t=e.F,bF(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.G;var r=n.C;Es(i=je(),new Kn(i,t)),II(n)}else PF(n);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==i&&function WH(n,e){return!(vF(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=St(eo(n.Na,n,e),NF(n,n.C)),n.C++,0)))}(n,e)||2==i&&mk(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:Pp(n,5);break;case 4:Pp(n,10);break;case 3:Pp(n,6);break;default:Pp(n,2)}}function NF(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Pp(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=eo(n.pb,n);t||(t=new Op("//www.google.com/images/cleardot.gif"),di.location&&"http"==di.location.protocol||vI(t,"https"),wI(t)),function $H(n,e){const t=new _;if(di.Image){const i=new Image;i.onload=Cp(EI,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Cp(EI,t,i,"TestLoadImage: error",!1,e),i.onabort=Cp(EI,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Cp(EI,t,i,"TestLoadImage: timeout",!1,e),di.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Jt(2);n.H=0,n.h&&n.h.za(e),BF(n),kF(n)}function BF(n){if(n.H=0,n.ma=[],n.h){const e=wF(n.i);(0!=e.length||0!=n.j.length)&&(Lb(n.ma,e),Lb(n.ma,n.j),n.i.i.length=0,G_(n.j),n.j.length=0),n.h.ya()}}function UF(n,e,t){var i=t instanceof Op?Cd(t):new Op(t);if(""!=i.g)e&&(i.g=e+"."+i.g),bI(i,i.m);else{var r=di.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Op(null);i&&vI(s,i),e&&(s.g=e),r&&bI(s,r),t&&(s.l=t),i=s}return e=n.Da,(t=n.F)&&e&&Nr(i,t,e),Nr(i,"VER",n.ra),lw(n,i),i}function $F(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ms(t&&n.Ha&&!n.va?new rw({ob:!0}):n.va)).Oa(n.J),e}function VF(){}function DI(){if(Sp&&!(10<=Number(KM)))throw Error("Environmental error: no available transport.")}function el(n,e){ws.call(this),this.g=new MF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!pu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pu(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ty(this)}function HF(n){ik.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function zF(){rk.call(this),this.status=1}function ty(n){this.g=n}function vc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function gk(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;o=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(t^s&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^t&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^t)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(t|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(t|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~t))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(r^(t|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~t))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function ar(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==e||(t[r]=s,i=!1)}this.g=t}(an=ms.prototype).Oa=function(n){this.M=n},an.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sk.g(),this.C=function nk(n){return n.h||(n.h=n.i())}(this.u?this.u:sk),this.g.onreadystatechange=eo(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void TF(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=di.FormData&&n instanceof di.FormData,!(0<=Pb(zH,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{SF(this),0<this.B&&((this.L=function jH(n){return Sp&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=eo(this.ua,this)):this.A=Zb(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){TF(this,s)}},an.ua=function(){typeof Rb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Es(this,"timeout"),this.abort(8))},an.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Es(this,"complete"),Es(this,"abort"),TI(this))},an.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),TI(this,!0)),ms.$.N.call(this)},an.La=function(){this.s||(this.G||this.v||this.l?IF(this):this.kb())},an.kb=function(){IF(this)},an.isActive=function(){return!!this.g},an.da=function(){try{return 2<gu(this)?this.g.status:-1}catch{return-1}},an.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},an.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),VH(e)}},an.Ia=function(){return this.m},an.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(an=MF.prototype).ra=8,an.H=1,an.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new Qb(this,this.l,n);let s=this.s;if(this.U&&(s?(s=Y_(s),ZM(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=OF(this,r,e),Nr(t=Cd(this.I),"RID",n),Nr(t,"CVER",22),this.F&&Nr(t,"X-HTTP-Session-Id",this.F),lw(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(AF(s)))+"&"+e:this.o&&hk(t,this.o,s)),uk(this.i,r),this.bb&&Nr(t,"TYPE","init"),this.P?(Nr(t,"$req",e),Nr(t,"SID","null"),r.aa=!0,ak(r,t,null)):ak(r,t,e),this.H=2}}else 3==this.H&&(n?RF(this,n):0==this.j.length||yF(this.i)||RF(this))},an.Ma=function(){if(this.u=null,LF(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=St(eo(this.jb,this),n)}},an.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Jt(10),CI(this),LF(this))},an.ib=function(){null!=this.v&&(this.v=null,CI(this),mk(this),Jt(19))},an.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Jt(2)):(this.l.info("Failed to ping google.com"),Jt(1))},an.isActive=function(){return!!this.h&&this.h.isActive(this)},(an=VF.prototype).Ba=function(){},an.Aa=function(){},an.za=function(){},an.ya=function(){},an.isActive=function(){return!0},an.Va=function(){},DI.prototype.g=function(n,e){return new el(n,e)},js(el,ws),el.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Jt(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=UF(n,null,n.Y),II(n)},el.prototype.close=function(){fk(this.g)},el.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Yb(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&II(e)},el.prototype.N=function(){this.g.h=null,delete this.j,fk(this.g),delete this.g,el.$.N.call(this)},js(HF,ik),js(zF,rk),js(ty,VF),ty.prototype.Ba=function(){Es(this.g,"a")},ty.prototype.Aa=function(n){Es(this.g,new HF(n))},ty.prototype.za=function(n){Es(this.g,new zF)},ty.prototype.ya=function(){Es(this.g,"b")},js(vc,function YH(){this.blockSize=-1}),vc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},vc.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=t;)gk(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){gk(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){gk(this,i),r=0;break}}this.h=r,this.i+=e},vc.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var qH={};function _k(n){return-128<=n&&128>n?function XL(n,e){var t=qH;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new ar([0|e],0>e?-1:0)}):new ar([0|n],0>n?-1:0)}function _u(n){if(isNaN(n)||!isFinite(n))return ny;if(0>n)return wo(_u(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=yk;return new ar(e,0)}var yk=4294967296,ny=_k(0),vk=_k(1),GF=_k(16777216);function Id(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ml(n){return-1==n.h}function wo(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new ar(t,~n.h).add(vk)}function AI(n,e){return n.add(wo(e))}function MI(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function cw(n,e){this.g=n,this.h=e}function kI(n,e){if(Id(e))throw Error("division by zero");if(Id(n))return new cw(ny,ny);if(Ml(n))return e=kI(wo(n),e),new cw(wo(e.g),wo(e.h));if(Ml(e))return e=kI(n,wo(e)),new cw(wo(e.g),e.h);if(30<n.g.length){if(Ml(n)||Ml(e))throw Error("slowDivide_ only works with positive integers.");for(var t=vk,i=e;0>=i.X(n);)t=WF(t),i=WF(i);var r=iy(t,1),s=iy(i,1);for(i=iy(i,2),t=iy(t,2);!Id(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=iy(i,1),t=iy(t,1)}return e=AI(n,r.R(e)),new cw(r,e)}for(r=ny;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),o=(s=_u(t)).R(e);Ml(o)||0<o.X(n);)o=(s=_u(t-=i)).R(e);Id(s)&&(s=vk),r=r.add(s),n=AI(n,o)}return new cw(r,n)}function WF(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new ar(t,n.h)}function iy(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new ar(r,n.h)}(an=ar.prototype).ea=function(){if(Ml(this))return-wo(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:yk+i)*e,e*=yk}return n},an.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Id(this))return"0";if(Ml(this))return"-"+wo(this).toString(n);for(var e=_u(Math.pow(n,6)),t=this,i="";;){var r=kI(t,e).g,s=((0<(t=AI(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Id(t=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},an.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},an.X=function(n){return Ml(n=AI(this,n))?-1:Id(n)?0:1},an.abs=function(){return Ml(this)?wo(this):this},an.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,t[r]=(o&=65535)<<16|(s&=65535)}return new ar(t,-2147483648&t[t.length-1]?-1:0)},an.R=function(n){if(Id(this)||Id(n))return ny;if(Ml(this))return Ml(n)?wo(this).R(wo(n)):wo(wo(this).R(n));if(Ml(n))return wo(this.R(wo(n)));if(0>this.X(GF)&&0>n.X(GF))return _u(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),u=n.D(r)>>>16,h=65535&n.D(r);t[2*i+2*r]+=o*h,MI(t,2*i+2*r),t[2*i+2*r+1]+=s*h,MI(t,2*i+2*r+1),t[2*i+2*r+1]+=o*u,MI(t,2*i+2*r+1),t[2*i+2*r+2]+=s*u,MI(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new ar(t,0)},an.gb=function(n){return kI(this,n).h},an.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new ar(t,this.h&n.h)},an.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new ar(t,this.h|n.h)},an.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new ar(t,this.h^n.h)},DI.prototype.createWebChannel=DI.prototype.g,el.prototype.send=el.prototype.u,el.prototype.open=el.prototype.m,el.prototype.close=el.prototype.close,ii.NO_ERROR=0,ii.TIMEOUT=8,ii.HTTP_ERROR=6,vr.COMPLETE="complete",rF.EventType=Xb,Xb.OPEN="a",Xb.CLOSE="b",Xb.ERROR="c",Xb.MESSAGE="d",ws.prototype.listen=ws.prototype.O,ms.prototype.listenOnce=ms.prototype.P,ms.prototype.getLastError=ms.prototype.Sa,ms.prototype.getLastErrorCode=ms.prototype.Ia,ms.prototype.getStatus=ms.prototype.da,ms.prototype.getResponseJson=ms.prototype.Wa,ms.prototype.getResponseText=ms.prototype.ja,ms.prototype.send=ms.prototype.ha,ms.prototype.setWithCredentials=ms.prototype.Oa,vc.prototype.digest=vc.prototype.l,vc.prototype.reset=vc.prototype.reset,vc.prototype.update=vc.prototype.j,ar.prototype.add=ar.prototype.add,ar.prototype.multiply=ar.prototype.R,ar.prototype.modulo=ar.prototype.gb,ar.prototype.compare=ar.prototype.X,ar.prototype.toNumber=ar.prototype.ea,ar.prototype.toString=ar.prototype.toString,ar.prototype.getBits=ar.prototype.D,ar.fromNumber=_u,ar.fromString=function jF(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return wo(jF(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=_u(Math.pow(e,8)),i=ny,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=_u(Math.pow(e,s)),i=i.R(s).add(_u(o))):i=(i=i.R(t)).add(_u(o))}return i};var qF,KF,ZF,XF,QF,eN,tN,nN,iN,rN,sN,oN,aN,lN,cN,uN,dN,hN,fN,mN,pN,gN,_N,yN,vN,bN,wN,EN,xN,TN,CN,IN,SN,DN,AN,MN,kN,RN,ON,PN,LN,FN,NN,KH=Zo.createWebChannelTransport=function(){return new DI},ZH=Zo.getStatEventTarget=function(){return je()},bk=Zo.ErrorCode=ii,XH=Zo.EventType=vr,QH=Zo.Event=J,YF=Zo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},JH=Zo.FetchXmlHttpFactory=rw,RI=Zo.WebChannel=rF,ez=Zo.XhrIo=ms,tz=Zo.Md5=vc,ry=Zo.Integer=ar;const BN="@firebase/firestore";class to{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}to.UNAUTHENTICATED=new to(null),to.GOOGLE_CREDENTIALS=new to("google-credentials-uid"),to.FIRST_PARTY=new to("first-party-uid"),to.MOCK_USER=new to("mock-user");let sy="9.23.0";const wf=new Wa.Yd("@firebase/firestore");function wk(){return wf.logLevel}function Pt(n,...e){if(wf.logLevel<=Wa.in.DEBUG){const t=e.map(Ek);wf.debug(`Firestore (${sy}): ${n}`,...t)}}function xs(n,...e){if(wf.logLevel<=Wa.in.ERROR){const t=e.map(Ek);wf.error(`Firestore (${sy}): ${n}`,...t)}}function kl(n,...e){if(wf.logLevel<=Wa.in.WARN){const t=e.map(Ek);wf.warn(`Firestore (${sy}): ${n}`,...t)}}function Ek(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function En(n="Unexpected state"){const e=`FIRESTORE (${sy}) INTERNAL ASSERTION FAILED: `+n;throw xs(e),new Error(e)}function Nn(n,e){n||En()}function cn(n,e){return n}const tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wt extends ui.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ws{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class UN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(to.UNAUTHENTICATED))}shutdown(){}}class sz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class oz{constructor(e){this.t=e,this.currentUser=to.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let o=new Ws;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ws,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const m=o;e.enqueueRetryable((0,ot.Z)(function*(){yield m.promise,yield s(i.currentUser)}))},h=m=>{Pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.auth.addAuthTokenListener(this.o),u()};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ws)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Nn("string"==typeof i.accessToken),new UN(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Nn(null===e||"string"==typeof e),new to(e)}}class az{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=to.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class lz{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new az(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(to.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $N{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cz{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=s=>{null!=s.error&&Pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,Pt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):Pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Nn("string"==typeof t.token),this.T=t.token,new $N(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function uz(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class VN{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=uz(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function hi(n,e){return n<e?-1:n>e?1:0}function oy(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function HN(n){return n+"\0"}class Yr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new wt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new wt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new wt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yr.fromMillis(Date.now())}static fromDate(e){return Yr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Yr(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?hi(this.nanoseconds,e.nanoseconds):hi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Un{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Un(e)}static min(){return new Un(new Yr(0,0))}static max(){return new Un(new Yr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class uw{constructor(e,t,i){void 0===t?t=0:t>e.length&&En(),void 0===i?i=e.length-t:i>e.length-t&&En(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===uw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uw?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qi extends uw{construct(e,t,i){return new qi(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new wt(tt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new qi(t)}static emptyPath(){return new qi([])}}const dz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ps extends uw{construct(e,t,i){return new ps(e,t,i)}static isValidIdentifier(e){return dz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ps.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ps(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new wt(tt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const u=e[r];if("\\"===u){if(r+1===e.length)throw new wt(tt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if("\\"!==h&&"."!==h&&"`"!==h)throw new wt(tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else"`"===u?(o=!o,r++):"."!==u||o?(i+=u,r++):(s(),r++)}if(s(),o)throw new wt(tt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ps(t)}static emptyPath(){return new ps([])}}class rn{constructor(e){this.path=e}static fromPath(e){return new rn(qi.fromString(e))}static fromName(e){return new rn(qi.fromString(e).popFirst(5))}static empty(){return new rn(qi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rn(new qi(e.slice()))}}class OI{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function xk(n){return n.fields.find(e=>2===e.kind)}function Lp(n){return n.fields.filter(e=>2!==e.kind)}OI.UNKNOWN_ID=-1;class PI{constructor(e,t){this.fieldPath=e,this.kind=t}}class dw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dw(0,tl.min())}}function zN(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Un.fromTimestamp(1e9===i?new Yr(t+1,0):new Yr(t,i));return new tl(r,rn.empty(),e)}function jN(n){return new tl(n.readTime,n.key,-1)}class tl{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new tl(Un.min(),rn.empty(),-1)}static max(){return new tl(Un.max(),rn.empty(),-1)}}function Tk(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rn.comparator(n.documentKey,e.documentKey),0!==t?t:hi(n.largestBatchId,e.largestBatchId))}const GN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ef(n){return(qF=qF||(0,ot.Z)(function*(e){if(e.code!==tt.FAILED_PRECONDITION||e.message!==GN)throw e;Pt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&En(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ke((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ke?t:Ke.resolve(t)}catch(t){return Ke.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ke.reject(t)}static resolve(e){return new Ke((t,i)=>{t(e)})}static reject(e){return new Ke((t,i)=>{i(e)})}static waitFor(e){return new Ke((t,i)=>{let r=0,s=0,o=!1;e.forEach(u=>{++r,u.next(()=>{++s,o&&s===r&&t()},h=>i(h))}),o=!0,s===r&&t()})}static or(e){let t=Ke.resolve(!1);for(const i of e)t=t.next(r=>r?Ke.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new Ke((i,r)=>{const s=e.length,o=new Array(s);let u=0;for(let h=0;h<s;h++){const m=h;t(e[m]).next(g=>{o[m]=g,++u,u===s&&i(o)},g=>r(g))}})}static doWhile(e,t){return new Ke((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class LI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Ws,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new hw(e,t.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=Ck(i.target.error);this.v.reject(new hw(e,r))}}static open(e,t,i,r){try{return new LI(t,e.transaction(r,i))}catch(s){throw new hw(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Pt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pz(t)}}class bc{constructor(e,t,i){this.name=e,this.version=t,this.V=i,12.2===bc.S((0,ui.z$)())&&xs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pt("SimpleDb","Removing database:",e),Fp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ui.hl)())return!1;if(bc.C())return!0;const e=(0,ui.z$)(),t=bc.S(e),i=0<t&&t<10,r=bc.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(e){var t=this;return(0,ot.Z)(function*(){return t.db||(Pt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{r(new hw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const u=o.target.error;r("VersionError"===u.name?new wt(tt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===u.name?new wt(tt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u):new hw(e,u))},s.onupgradeneeded=o=>{Pt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.V.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Pt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=i=>t.F(i)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,ot.Z)(function*(){const o="readonly"===t;let u=0;for(;;){++u;try{s.db=yield s.$(e);const h=LI.open(s.db,e,o?"readonly":"readwrite",i),m=r(h).next(g=>(h.P(),g)).catch(g=>(h.abort(g),Ke.reject(g))).toPromise();return m.catch(()=>{}),yield h.R,m}catch(h){const m=h,g="FirebaseError"!==m.name&&u<3;if(Pt("SimpleDb","Transaction failed with error:",m.message,"Retrying:",g),s.close(),!g)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mz{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Fp(this.L.delete())}}class hw extends wt{constructor(e,t){super(tt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xf(n){return"IndexedDbTransactionError"===n.name}class pz{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Pt("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Pt("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Fp(i)}add(e){return Pt("SimpleDb","ADD",this.store.name,e,e),Fp(this.store.add(e))}get(e){return Fp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pt("SimpleDb","DELETE",this.store.name,e),Fp(this.store.delete(e))}count(){return Pt("SimpleDb","COUNT",this.store.name),Fp(this.store.count())}j(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(o,u)=>{s.push(u)}).next(()=>s)}{const r=this.store.getAll(i.range);return new Ke((s,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}}H(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new Ke((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}J(e,t){Pt("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,o,u)=>u.delete())}X(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.W(r,t)}Z(e){const t=this.cursor({});return new Ke((i,r)=>{t.onerror=s=>{const o=Ck(s.target.error);r(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(u=>{u?o.continue():i()}):i()}})}W(e,t){const i=[];return new Ke((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const u=o.target.result;if(!u)return void r();const h=new mz(u),m=t(u.primaryKey,u.value,h);if(m instanceof Ke){const g=m.catch(y=>(h.done(),Ke.reject(y)));i.push(g)}h.isDone?r():null===h.K?u.continue():u.continue(h.K)}}).next(()=>Ke.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fp(n){return new Ke((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=Ck(i.target.error);t(r)}})}let YN=!1;function Ck(n){const e=bc.S((0,ui.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new wt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YN||(YN=!0,setTimeout(()=>{throw i},0)),i}}return n}class gz{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Pt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ot.Z)(function*(){t.task=null;try{Pt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(i){xf(i)?Pt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Ef(i)}yield t.et(6e4)}))}}class _z{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ot.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.st(i,e))})()}st(e,t){const i=new Set;let r=t,s=!0;return Ke.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!i.has(o))return Pt("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,r).next(u=>{r-=u,i.add(o)});s=!1})).next(()=>t-r)}it(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(r,s)).next(u=>(Pt("IndexBackiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u))).next(()=>o.size)}))}rt(e,t){let i=e;return t.changes.forEach((r,s)=>{const o=jN(s);Tk(o,i)>0&&(i=o)}),new tl(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let nl=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function fw(n){return null==n}function mw(n){return 0===n&&1/n==-1/0}function qN(n){return"number"==typeof n&&Number.isInteger(n)&&!mw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Po(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KN(e)),e=yz(n.get(t),e);return KN(e)}function yz(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function KN(n){return n+"\x01\x01"}function yu(n){const e=n.length;if(Nn(e>=2),2===e)return Nn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qi.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&En(),n.charAt(o+1)){case"\x01":const u=n.substring(s,o);let h;0===r.length?h=u:(r+=u,h=r,r=""),i.push(h);break;case"\x10":r+=n.substring(s,o),r+="\0";break;case"\x11":r+=n.substring(s,o+1);break;default:En()}s=o+2}return new qi(i)}const ZN=["userId","batchId"];function FI(n,e){return[n,Po(e)]}function XN(n,e,t){return[n,Po(e),t]}const vz={},bz=["prefixPath","collectionGroup","readTime","documentId"],wz=["prefixPath","collectionGroup","documentId"],Ez=["collectionGroup","readTime","prefixPath","documentId"],xz=["canonicalId","targetId"],Tz=["targetId","path"],Cz=["path","targetId"],Iz=["collectionId","parent"],Sz=["indexId","uid"],Dz=["uid","sequenceNumber"],Az=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Mz=["indexId","uid","orderedDocumentKey"],kz=["userId","collectionPath","documentId"],Rz=["userId","collectionPath","largestBatchId"],Oz=["userId","collectionGroup","largestBatchId"],QN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Pz=[...QN,"documentOverlays"],JN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],e2=JN,Lz=[...e2,"indexConfiguration","indexState","indexEntries"];class Ik extends WN{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function no(n,e){const t=cn(n);return bc.M(t.ht,e)}function t2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function n2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Cr{constructor(e,t){this.comparator=e,this.root=t||Eo.EMPTY}insert(e,t){return new Cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Eo.BLACK,null,null))}remove(e){return new Cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Eo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new NI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new NI(this.root,e,this.comparator,!1)}getReverseIterator(){return new NI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new NI(this.root,e,this.comparator,!0)}}class NI{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Eo{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??Eo.RED,this.left=r??Eo.EMPTY,this.right=s??Eo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new Eo(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Eo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Eo.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Eo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Eo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw En();const e=this.left.check();if(e!==this.right.check())throw En();return e+(this.isRed()?0:1)}}Eo.EMPTY=null,Eo.RED=!0,Eo.BLACK=!1,Eo.EMPTY=new class{constructor(){this.size=0}get key(){throw En()}get value(){throw En()}get color(){throw En()}get left(){throw En()}get right(){throw En()}copy(n,e,t,i,r){return this}insert(n,e,t){return new Eo(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Br{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new r2(this.data.getIterator())}getIteratorFrom(e){return new r2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Br)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Br(this.comparator);return t.data=e,t}}class r2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ay(n){return n.hasNext()?n.getNext():void 0}class xa{constructor(e){this.fields=e,e.sort(ps.comparator)}static empty(){return new xa([])}unionWith(e){let t=new Br(ps.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new xa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oy(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class s2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ys{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new s2("Invalid base64 string: "+r):r}}(e);return new Ys(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new Ys(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ys.EMPTY_BYTE_STRING=new Ys("");const Nz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cf(n){if(Nn(!!n),"string"==typeof n){let e=0;const t=Nz.exec(n);if(Nn(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gs(n.seconds),nanos:gs(n.nanos)}}function gs(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Sd(n){return"string"==typeof n?Ys.fromBase64String(n):Ys.fromUint8Array(n)}function BI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function UI(n){const e=n.mapValue.fields.__previous_value__;return BI(e)?UI(e):e}function pw(n){const e=Cf(n.mapValue.fields.__local_write_time__.timestampValue);return new Yr(e.seconds,e.nanos)}class Bz{constructor(e,t,i,r,s,o,u,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=m}}class If{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new If("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof If&&e.projectId===this.projectId&&e.database===this.database}}const Sf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$I={nullValue:"NULL_VALUE"};function Df(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?BI(n)?4:c2(n)?9007199254740991:10:En()}function vu(n,e){if(n===e)return!0;const t=Df(n);if(t!==Df(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pw(n).isEqual(pw(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Cf(i.timestampValue),o=Cf(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,r){return Sd(i.bytesValue).isEqual(Sd(r.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return gs(i.geoPointValue.latitude)===gs(r.geoPointValue.latitude)&&gs(i.geoPointValue.longitude)===gs(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return gs(i.integerValue)===gs(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=gs(i.doubleValue),o=gs(r.doubleValue);return s===o?mw(s)===mw(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return oy(n.arrayValue.values||[],e.arrayValue.values||[],vu);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(t2(s)!==t2(o))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===o[u]||!vu(s[u],o[u])))return!1;return!0}(n,e);default:return En()}}function gw(n,e){return void 0!==(n.values||[]).find(t=>vu(t,e))}function Af(n,e){if(n===e)return 0;const t=Df(n),i=Df(e);if(t!==i)return hi(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return hi(n.booleanValue,e.booleanValue);case 2:return function(r,s){const o=gs(r.integerValue||r.doubleValue),u=gs(s.integerValue||s.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(n,e);case 3:return o2(n.timestampValue,e.timestampValue);case 4:return o2(pw(n),pw(e));case 5:return hi(n.stringValue,e.stringValue);case 6:return function(r,s){const o=Sd(r),u=Sd(s);return o.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),u=s.split("/");for(let h=0;h<o.length&&h<u.length;h++){const m=hi(o[h],u[h]);if(0!==m)return m}return hi(o.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const o=hi(gs(r.latitude),gs(s.latitude));return 0!==o?o:hi(gs(r.longitude),gs(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],u=s.values||[];for(let h=0;h<o.length&&h<u.length;++h){const m=Af(o[h],u[h]);if(m)return m}return hi(o.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===Sf.mapValue&&s===Sf.mapValue)return 0;if(r===Sf.mapValue)return 1;if(s===Sf.mapValue)return-1;const o=r.fields||{},u=Object.keys(o),h=s.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const y=hi(u[g],m[g]);if(0!==y)return y;const E=Af(o[u[g]],h[m[g]]);if(0!==E)return E}return hi(u.length,m.length)}(n.mapValue,e.mapValue);default:throw En()}}function o2(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return hi(n,e);const t=Cf(n),i=Cf(e),r=hi(t.seconds,i.seconds);return 0!==r?r:hi(t.nanos,i.nanos)}function ly(n){return Sk(n)}function Sk(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Cf(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Sd(n.bytesValue).toBase64():"referenceValue"in n?rn.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=Sk(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${Sk(i.fields[u])}`;return s+"}"}(n.mapValue):En();var e}function Np(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Dk(n){return!!n&&"integerValue"in n}function _w(n){return!!n&&"arrayValue"in n}function a2(n){return!!n&&"nullValue"in n}function l2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function HI(n){return!!n&&"mapValue"in n}function yw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Tf(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=yw(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function c2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Uz(n){return"nullValue"in n?$I:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Np(If.empty(),rn.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:En()}function $z(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Np(If.empty(),rn.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Sf:En()}function u2(n,e){const t=Af(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function d2(n,e){const t=Af(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class xo{constructor(e){this.value=e}static empty(){return new xo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!HI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yw(t)}setAll(e){let t=ps.emptyPath(),i={},r=[];e.forEach((o,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,i,r),i={},r=[],t=u.popLast()}o?i[u.lastSegment()]=yw(o):r.push(u.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());HI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];HI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Tf(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new xo(yw(this.value))}}function h2(n){const e=[];return Tf(n.fields,(t,i)=>{const r=new ps([t]);if(HI(i)){const s=h2(i.mapValue).fields;if(0===s.length)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new xa(e)}class Ur{constructor(e,t,i,r,s,o,u){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Ur(e,0,Un.min(),Un.min(),Un.min(),xo.empty(),0)}static newFoundDocument(e,t,i,r){return new Ur(e,1,t,Un.min(),i,r,0)}static newNoDocument(e,t){return new Ur(e,2,t,Un.min(),Un.min(),xo.empty(),0)}static newUnknownDocument(e,t){return new Ur(e,3,t,Un.min(),Un.min(),xo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Un.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Un.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mf{constructor(e,t){this.position=e,this.inclusive=t}}function f2(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(i=s.field.isKeyField()?rn.comparator(rn.fromName(o.referenceValue),t.key):Af(o,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function m2(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vu(n.position[t],e.position[t]))return!1;return!0}class cy{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class p2{}class Li extends p2{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new Hz(e,t,i):"array-contains"===t?new Gz(e,i):"in"===t?new w2(e,i):"not-in"===t?new Wz(e,i):"array-contains-any"===t?new Yz(e,i):new Li(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new zz(e,i):new jz(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Af(t,this.value)):null!==t&&Df(this.value)===Df(t)&&this.matchesComparison(Af(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return En()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class lr extends p2{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new lr(e,t)}matches(e){return uy(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function uy(n){return"and"===n.op}function Ak(n){return"or"===n.op}function Mk(n){return g2(n)&&uy(n)}function g2(n){for(const e of n.filters)if(e instanceof lr)return!1;return!0}function kk(n){if(n instanceof Li)return n.field.canonicalString()+n.op.toString()+ly(n.value);if(Mk(n))return n.filters.map(e=>kk(e)).join(",");{const e=n.filters.map(t=>kk(t)).join(",");return`${n.op}(${e})`}}function _2(n,e){return n instanceof Li?function(t,i){return i instanceof Li&&t.op===i.op&&t.field.isEqual(i.field)&&vu(t.value,i.value)}(n,e):n instanceof lr?function(t,i){return i instanceof lr&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,s,o)=>r&&_2(s,i.filters[o]),!0)}(n,e):void En()}function y2(n,e){const t=n.filters.concat(e);return lr.create(t,n.op)}function v2(n){return n instanceof Li?`${(e=n).field.canonicalString()} ${e.op} ${ly(e.value)}`:n instanceof lr?function(e){return e.op.toString()+" {"+e.getFilters().map(v2).join(" ,")+"}"}(n):"Filter";var e}class Hz extends Li{constructor(e,t,i){super(e,t,i),this.key=rn.fromName(i.referenceValue)}matches(e){const t=rn.comparator(e.key,this.key);return this.matchesComparison(t)}}class zz extends Li{constructor(e,t){super(e,"in",t),this.keys=b2(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jz extends Li{constructor(e,t){super(e,"not-in",t),this.keys=b2(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function b2(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>rn.fromName(i.referenceValue))}class Gz extends Li{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _w(t)&&gw(t.arrayValue,this.value)}}class w2 extends Li{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gw(this.value.arrayValue,t)}}class Wz extends Li{constructor(e,t){super(e,"not-in",t)}matches(e){if(gw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gw(this.value.arrayValue,t)}}class Yz extends Li{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_w(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>gw(this.value.arrayValue,i))}}class qz{constructor(e,t=null,i=[],r=[],s=null,o=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=u,this.dt=null}}function Rk(n,e=null,t=[],i=[],r=null,s=null,o=null){return new qz(n,e,t,i,r,s,o)}function Bp(n){const e=cn(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>kk(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),fw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ly(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ly(i)).join(",")),e.dt=t}return e.dt}function vw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Vz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!m2(n.startAt,e.startAt)&&m2(n.endAt,e.endAt)}function zI(n){return rn.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jI(n,e){return n.filters.filter(t=>t instanceof Li&&t.field.isEqual(e))}function E2(n,e,t){let i=$I,r=!0;for(const s of jI(n,e)){let o=$I,u=!0;switch(s.op){case"<":case"<=":o=Uz(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,u=!1;break;case"!=":case"not-in":o=$I}u2({value:i,inclusive:r},{value:o,inclusive:u})<0&&(i=o,r=u)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];u2({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}function x2(n,e,t){let i=Sf,r=!0;for(const s of jI(n,e)){let o=Sf,u=!0;switch(s.op){case">=":case">":o=$z(s.value),u=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,u=!1;break;case"!=":case"not-in":o=Sf}d2({value:i,inclusive:r},{value:o,inclusive:u})>0&&(i=o,r=u)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];d2({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}class Dd{constructor(e,t=null,i=[],r=[],s=null,o="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=h,this.wt=null,this._t=null}}function T2(n,e,t,i,r,s,o,u){return new Dd(n,e,t,i,r,s,o,u)}function dy(n){return new Dd(n)}function C2(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ok(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function GI(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Pk(n){return null!==n.collectionGroup}function Up(n){const e=cn(n);if(null===e.wt){e.wt=[];const t=GI(e),i=Ok(e);if(null!==t&&null===i)t.isKeyField()||e.wt.push(new cy(t)),e.wt.push(new cy(ps.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new cy(ps.keyField(),s))}}}return e.wt}function Xo(n){const e=cn(n);if(!e._t)if("F"===e.limitType)e._t=Rk(e.path,e.collectionGroup,Up(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Up(e))t.push(new cy(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new Mf(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Mf(e.startAt.position,e.startAt.inclusive):null;e._t=Rk(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e._t}function Lk(n,e){e.getFirstInequalityField(),GI(n);const t=n.filters.concat([e]);return new Dd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function WI(n,e,t){return new Dd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bw(n,e){return vw(Xo(n),Xo(e))&&n.limitType===e.limitType}function I2(n){return`${Bp(Xo(n))}|lt:${n.limitType}`}function Fk(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>v2(i)).join(", ")}]`),fw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(i)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ly(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ly(i)).join(",")),`Target(${t})`}(Xo(n))}; limitType=${n.limitType})`}function ww(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):rn.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of Up(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&function(t,i){return!(t.startAt&&!function(r,s,o){const u=f2(r,s,o);return r.inclusive?u<=0:u<0}(t.startAt,Up(t),i)||t.endAt&&!function(r,s,o){const u=f2(r,s,o);return r.inclusive?u>=0:u>0}(t.endAt,Up(t),i))}(n,e)}function S2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function D2(n){return(e,t)=>{let i=!1;for(const r of Up(n)){const s=Kz(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function Kz(n,e,t){const i=n.field.isKeyField()?rn.comparator(e.key,t.key):function(r,s,o){const u=s.data.field(r),h=o.data.field(r);return null!==u&&null!==h?Af(u,h):En()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return En()}}class Ad{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Tf(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return n2(this.inner)}size(){return this.innerSize}}const Zz=new Cr(rn.comparator);function Ta(){return Zz}const A2=new Cr(rn.comparator);function Ew(...n){let e=A2;for(const t of n)e=e.insert(t.key,t);return e}function M2(n){let e=A2;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function bu(){return xw()}function k2(){return xw()}function xw(){return new Ad(n=>n.toString(),(n,e)=>n.isEqual(e))}const Xz=new Cr(rn.comparator),Qz=new Br(rn.comparator);function vi(...n){let e=Qz;for(const t of n)e=e.add(t);return e}const Jz=new Br(hi);function Nk(){return Jz}function R2(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mw(e)?"-0":e}}function O2(n){return{integerValue:""+n}}function P2(n,e){return qN(e)?O2(e):R2(n,e)}class YI{constructor(){this._=void 0}}function ej(n,e,t){return n instanceof hy?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&BI(r)&&(r=UI(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof $p?F2(n,e):n instanceof Vp?N2(n,e):function(i,r){const s=L2(i,r),o=B2(s)+B2(i.gt);return Dk(s)&&Dk(i.gt)?O2(o):R2(i.serializer,o)}(n,e)}function tj(n,e,t){return n instanceof $p?F2(n,e):n instanceof Vp?N2(n,e):t}function L2(n,e){return n instanceof fy?Dk(t=e)||function(i){return!!i&&"doubleValue"in i}(t)?e:{integerValue:0}:null;var t}class hy extends YI{}class $p extends YI{constructor(e){super(),this.elements=e}}function F2(n,e){const t=U2(e);for(const i of n.elements)t.some(r=>vu(r,i))||t.push(i);return{arrayValue:{values:t}}}class Vp extends YI{constructor(e){super(),this.elements=e}}function N2(n,e){let t=U2(e);for(const i of n.elements)t=t.filter(r=>!vu(r,i));return{arrayValue:{values:t}}}class fy extends YI{constructor(e,t){super(),this.serializer=e,this.gt=t}}function B2(n){return gs(n.integerValue||n.doubleValue)}function U2(n){return _w(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Tw{constructor(e,t){this.field=e,this.transform=t}}class ij{constructor(e,t){this.version=e,this.transformResults=t}}class qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qr}static exists(e){return new qr(void 0,e)}static updateTime(e){return new qr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class KI{}function $2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new py(n.key,qr.none()):new my(n.key,n.data,qr.none());{const t=n.data,i=xo.empty();let r=new Br(ps.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new Md(n.key,i,new xa(r.toArray()),qr.none())}}function rj(n,e,t){n instanceof my?function(i,r,s){const o=i.value.clone(),u=z2(i.fieldTransforms,r,s.transformResults);o.setAll(u),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Md?function(i,r,s){if(!qI(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=z2(i.fieldTransforms,r,s.transformResults),u=r.data;u.setAll(H2(i)),u.setAll(o),r.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Cw(n,e,t,i){return n instanceof my?function(r,s,o,u){if(!qI(r.precondition,s))return o;const h=r.value.clone(),m=j2(r.fieldTransforms,u,s);return h.setAll(m),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(n,e,t,i):n instanceof Md?function(r,s,o,u){if(!qI(r.precondition,s))return o;const h=j2(r.fieldTransforms,u,s),m=s.data;return m.setAll(H2(r)),m.setAll(h),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),null===o?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(n,e,t,i):function(r,s,o){return qI(r.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(n,e,t)}function sj(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=L2(i.transform,r||null);null!=s&&(null===t&&(t=xo.empty()),t.set(i.field,s))}return t||null}function V2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(t,i){return void 0===t&&void 0===i||!(!t||!i)&&oy(t,i,(r,s)=>function nj(n,e){return n.field.isEqual(e.field)&&function(t,i){return t instanceof $p&&i instanceof $p||t instanceof Vp&&i instanceof Vp?oy(t.elements,i.elements,vu):t instanceof fy&&i instanceof fy?vu(t.gt,i.gt):t instanceof hy&&i instanceof hy}(n.transform,e.transform)}(r,s))}(n.fieldTransforms,e.fieldTransforms)&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class my extends KI{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Md extends KI{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function H2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function z2(n,e,t){const i=new Map;Nn(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,u=e.data.field(s.field);i.set(s.field,tj(o,u,t[r]))}return i}function j2(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,ej(s,o,e))}return i}class py extends KI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bk extends KI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Uk{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&rj(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Cw(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Cw(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=k2();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let u=this.applyToLocalView(o,s.mutatedFields);u=t.has(r.key)?null:u;const h=$2(o,u);null!==h&&i.set(r.key,h),o.isValidDocument()||o.convertToNoDocument(Un.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vi())}isEqual(e){return this.batchId===e.batchId&&oy(this.mutations,e.mutations,(t,i)=>V2(t,i))&&oy(this.baseMutations,e.baseMutations,(t,i)=>V2(t,i))}}class $k{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Nn(e.mutations.length===i.length);let r=Xz;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new $k(e,t,i,r)}}class Vk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class aj{constructor(e,t){this.count=e,this.unchangedNames=t}}var Os,Ki;function G2(n){switch(n){default:return En();case tt.CANCELLED:case tt.UNKNOWN:case tt.DEADLINE_EXCEEDED:case tt.RESOURCE_EXHAUSTED:case tt.INTERNAL:case tt.UNAVAILABLE:case tt.UNAUTHENTICATED:return!1;case tt.INVALID_ARGUMENT:case tt.NOT_FOUND:case tt.ALREADY_EXISTS:case tt.PERMISSION_DENIED:case tt.FAILED_PRECONDITION:case tt.ABORTED:case tt.OUT_OF_RANGE:case tt.UNIMPLEMENTED:case tt.DATA_LOSS:return!0}}function W2(n){if(void 0===n)return xs("GRPC error has no .code"),tt.UNKNOWN;switch(n){case Os.OK:return tt.OK;case Os.CANCELLED:return tt.CANCELLED;case Os.UNKNOWN:return tt.UNKNOWN;case Os.DEADLINE_EXCEEDED:return tt.DEADLINE_EXCEEDED;case Os.RESOURCE_EXHAUSTED:return tt.RESOURCE_EXHAUSTED;case Os.INTERNAL:return tt.INTERNAL;case Os.UNAVAILABLE:return tt.UNAVAILABLE;case Os.UNAUTHENTICATED:return tt.UNAUTHENTICATED;case Os.INVALID_ARGUMENT:return tt.INVALID_ARGUMENT;case Os.NOT_FOUND:return tt.NOT_FOUND;case Os.ALREADY_EXISTS:return tt.ALREADY_EXISTS;case Os.PERMISSION_DENIED:return tt.PERMISSION_DENIED;case Os.FAILED_PRECONDITION:return tt.FAILED_PRECONDITION;case Os.ABORTED:return tt.ABORTED;case Os.OUT_OF_RANGE:return tt.OUT_OF_RANGE;case Os.UNIMPLEMENTED:return tt.UNIMPLEMENTED;case Os.DATA_LOSS:return tt.DATA_LOSS;default:return En()}}(Ki=Os||(Os={}))[Ki.OK=0]="OK",Ki[Ki.CANCELLED=1]="CANCELLED",Ki[Ki.UNKNOWN=2]="UNKNOWN",Ki[Ki.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ki[Ki.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ki[Ki.NOT_FOUND=5]="NOT_FOUND",Ki[Ki.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ki[Ki.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ki[Ki.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ki[Ki.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ki[Ki.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ki[Ki.ABORTED=10]="ABORTED",Ki[Ki.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ki[Ki.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ki[Ki.INTERNAL=13]="INTERNAL",Ki[Ki.UNAVAILABLE=14]="UNAVAILABLE",Ki[Ki.DATA_LOSS=15]="DATA_LOSS";class Hk{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ZI}static getOrCreateInstance(){return null===ZI&&(ZI=new Hk),ZI}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let ZI=null;function Y2(){return new TextEncoder}const lj=new ry([4294967295,4294967295],0);function q2(n){const e=Y2().encode(n),t=new tz;return t.update(e),new Uint8Array(t.digest())}function K2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ry([t,i],0),new ry([r,s],0)]}class zk{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Iw(`Invalid padding: ${t}`);if(i<0)throw new Iw(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new Iw(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new Iw(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ry.fromNumber(this.It)}Et(e,t,i){let r=e.add(t.multiply(ry.fromNumber(i)));return 1===r.compare(lj)&&(r=new ry([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=q2(e),[i,r]=K2(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);if(!this.At(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new zk(s,r,t);return i.forEach(u=>o.insert(u)),o}insert(e){if(0===this.It)return;const t=q2(e),[i,r]=K2(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);this.Rt(o)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Iw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sw{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Dw.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Sw(Un.min(),r,new Cr(hi),Ta(),vi())}}class Dw{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Dw(i,t,vi(),vi(),vi())}}class XI{constructor(e,t,i,r){this.Pt=e,this.removedTargetIds=t,this.key=i,this.bt=r}}class Z2{constructor(e,t){this.targetId=e,this.Vt=t}}class X2{constructor(e,t,i=Ys.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class Q2{constructor(){this.St=0,this.Dt=eB(),this.Ct=Ys.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=vi(),t=vi(),i=vi();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:En()}}),new Dw(this.Ct,this.xt,e,t,i)}Ft(){this.Nt=!1,this.Dt=eB()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class cj{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ta(),this.zt=J2(),this.Wt=new Cr(hi)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const i=this.Zt(t);switch(e.state){case 0:this.te(t)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(t);break;case 3:this.te(t)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),i.$t(e.resumeToken));break;default:En()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((i,r)=>{this.te(r)&&t(r)})}ne(e){var t;const i=e.targetId,r=e.Vt.count,s=this.se(i);if(s){const o=s.target;if(zI(o))if(0===r){const u=new rn(o.path);this.Yt(i,u,Ur.newNoDocument(u,Un.min()))}else Nn(1===r);else{const u=this.ie(i);if(u!==r){const h=this.re(e,u);0!==h&&(this.ee(i),this.Wt=this.Wt.insert(i,2===h?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Hk.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(m,g,y){var E,x,I,k,P,q;const ae={localCacheCount:g,existenceFilterCount:y.count},ee=y.unchangedNames;return ee&&(ae.bloomFilter={applied:0===m,hashCount:null!==(E=ee?.hashCount)&&void 0!==E?E:0,bitmapLength:null!==(k=null===(I=null===(x=ee?.bits)||void 0===x?void 0:x.bitmap)||void 0===I?void 0:I.length)&&void 0!==k?k:0,padding:null!==(q=null===(P=ee?.bits)||void 0===P?void 0:P.padding)&&void 0!==q?q:0}),ae}(h,u,e.Vt))}}}}re(e,t){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=i;let h,m;try{h=Sd(s).toUint8Array()}catch(g){if(g instanceof s2)return kl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw g}try{m=new zk(h,o,u)}catch(g){return kl(g instanceof Iw?"BloomFilter error: ":"Applying bloom filter failed: ",g),1}return 0===m.It?1:r!==t-this.oe(e.targetId,m)?2:0}oe(e,t){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Gt.ue(),u=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.vt(u)||(this.Yt(e,s,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((s,o)=>{const u=this.se(o);if(u){if(s.current&&zI(u.target)){const h=new rn(u.target.path);null!==this.jt.get(h)||this.ae(o,h)||this.Yt(o,h,Ur.newNoDocument(h,e))}s.Mt&&(t.set(o,s.Ot()),s.Ft())}});let i=vi();this.zt.forEach((s,o)=>{let u=!0;o.forEachWhile(h=>{const m=this.se(h);return!m||"TargetPurposeLimboResolution"===m.purpose||(u=!1,!1)}),u&&(i=i.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const r=new Sw(e,t,this.Wt,this.jt,i);return this.jt=Ta(),this.zt=J2(),this.Wt=new Cr(hi),r}Jt(e,t){if(!this.te(e))return;const i=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,i),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),i&&(this.jt=this.jt.insert(t,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Q2,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Br(hi),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Pt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Q2),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function J2(){return new Cr(rn.comparator)}function eB(){return new Cr(rn.comparator)}const uj={asc:"ASCENDING",desc:"DESCENDING"},dj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hj={and:"AND",or:"OR"};class fj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jk(n,e){return n.useProto3Json||fw(e)?e:{value:e}}function gy(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mj(n,e){return gy(n,e.toTimestamp())}function Ts(n){return Nn(!!n),Un.fromTimestamp(function(e){const t=Cf(e);return new Yr(t.seconds,t.nanos)}(n))}function Gk(n,e){return(t=n,new qi(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function nB(n){const e=qi.fromString(n);return Nn(dB(e)),e}function Aw(n,e){return Gk(n.databaseId,e.path)}function wu(n,e){const t=nB(e);if(t.get(1)!==n.databaseId.projectId)throw new wt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new wt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rn(rB(t))}function Wk(n,e){return Gk(n.databaseId,e)}function iB(n){const e=nB(n);return 4===e.length?qi.emptyPath():rB(e)}function Mw(n){return new qi(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rB(n){return Nn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function sB(n,e,t){return{name:Aw(n,e),fields:t.value.mapValue.fields}}function oB(n,e,t){const i=wu(n,e.name),r=Ts(e.updateTime),s=e.createTime?Ts(e.createTime):Un.min(),o=new xo({mapValue:{fields:e.fields}}),u=Ur.newFoundDocument(i,r,s,o);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function kw(n,e){let t;if(e instanceof my)t={update:sB(n,e.key,e.value)};else if(e instanceof py)t={delete:Aw(n,e.key)};else if(e instanceof Md)t={update:sB(n,e.key,e.data),updateMask:Ej(e.fieldMask)};else{if(!(e instanceof Bk))return En();t={verify:Aw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof hy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof $p)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Vp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof fy)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw En()}(0,i))),e.precondition.isNone||(t.currentDocument=function(i,r){return void 0!==r.updateTime?{updateTime:mj(i,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:En()}(n,e.precondition)),t}function Yk(n,e){const t=e.currentDocument?function(r){return void 0!==r.updateTime?qr.updateTime(Ts(r.updateTime)):void 0!==r.exists?qr.exists(r.exists):qr.none()}(e.currentDocument):qr.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,o){let u=null;"setToServerValue"in o?(Nn("REQUEST_TIME"===o.setToServerValue),u=new hy):"appendMissingElements"in o?u=new $p(o.appendMissingElements.values||[]):"removeAllFromArray"in o?u=new Vp(o.removeAllFromArray.values||[]):"increment"in o?u=new fy(s,o.increment):En();const h=ps.fromServerFormat(o.fieldPath);return new Tw(h,u)}(n,r)):[];if(e.update){const r=wu(n,e.update.name),s=new xo({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){return new xa((u.fieldPaths||[]).map(m=>ps.fromServerFormat(m)))}(e.updateMask);return new Md(r,s,o,t,i)}return new my(r,s,t,i)}if(e.delete){const r=wu(n,e.delete);return new py(r,t)}if(e.verify){const r=wu(n,e.verify);return new Bk(r,t)}return En()}function aB(n,e){return{documents:[Wk(n,e.path)]}}function qk(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=Wk(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Wk(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(h){if(0!==h.length)return uB(lr.create(h,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(h){if(0!==h.length)return h.map(m=>{return{field:kf((g=m).field),direction:vj(g.dir)};var g})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=jk(n,e.limit);var u,h;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt={before:!(h=e.endAt).inclusive,values:h.position}),t}function lB(n){let e=iB(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Nn(1===i);const g=t.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(g){const y=cB(g);return y instanceof lr&&Mk(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(g=>{return new cy(_y((y=g).field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction));var y}));let u=null;t.limit&&(u=function(g){let y;return y="object"==typeof g?g.value:g,fw(y)?null:y}(t.limit));let h=null;var g;t.startAt&&(h=new Mf((g=t.startAt).values||[],!!g.before));let m=null;return t.endAt&&(m=function(g){return new Mf(g.values||[],!g.before)}(t.endAt)),T2(e,r,o,s,u,"F",h,m)}function cB(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=_y(e.unaryFilter.field);return Li.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=_y(e.unaryFilter.field);return Li.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=_y(e.unaryFilter.field);return Li.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=_y(e.unaryFilter.field);return Li.create(s,"!=",{nullValue:"NULL_VALUE"});default:return En()}}(n):void 0!==n.fieldFilter?Li.create(_y((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return En()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return lr.create(e.compositeFilter.filters.map(t=>cB(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return En()}}(e.compositeFilter.op))}(n):En();var e}function vj(n){return uj[n]}function bj(n){return dj[n]}function wj(n){return hj[n]}function kf(n){return{fieldPath:n.canonicalString()}}function _y(n){return ps.fromServerFormat(n.fieldPath)}function uB(n){return n instanceof Li?function(e){if("=="===e.op){if(l2(e.value))return{unaryFilter:{field:kf(e.field),op:"IS_NAN"}};if(a2(e.value))return{unaryFilter:{field:kf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(l2(e.value))return{unaryFilter:{field:kf(e.field),op:"IS_NOT_NAN"}};if(a2(e.value))return{unaryFilter:{field:kf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kf(e.field),op:bj(e.op),value:e.value}}}(n):n instanceof lr?function(e){const t=e.getFilters().map(i=>uB(i));return 1===t.length?t[0]:{compositeFilter:{op:wj(e.op),filters:t}}}(n):En()}function Ej(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class kd{constructor(e,t,i,r,s=Un.min(),o=Un.min(),u=Ys.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new kd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new kd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class hB{constructor(e){this.fe=e}}function fB(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:QI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(r,s){return{name:Aw(r,s.key),fields:s.data.value.mapValue.fields,updateTime:gy(r,s.version.toTimestamp()),createTime:gy(r,s.createTime.toTimestamp())}}(n.fe,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Hp(e.version)};else{if(!e.isUnknownDocument())return En();i.unknownDocument={path:t.path.toArray(),version:Hp(e.version)}}return i}function QI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zp(n){const e=new Yr(n.seconds,n.nanoseconds);return Un.fromTimestamp(e)}function jp(n,e){const t=(e.baseMutations||[]).map(s=>Yk(n.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const i=e.mutations.map(s=>Yk(n.fe,s)),r=Yr.fromMillis(e.localWriteTimeMs);return new Uk(e.batchId,r,t,i)}function Rw(n){const e=zp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?zp(n.lastLimboFreeSnapshotVersion):Un.min();let i;var r;return void 0!==n.query.documents?(Nn(1===(r=n.query).documents.length),i=Xo(dy(iB(r.documents[0])))):i=function(s){return Xo(lB(s))}(n.query),new kd(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ys.fromBase64String(n.resumeToken))}function mB(n,e){const t=Hp(e.snapshotVersion),i=Hp(e.lastLimboFreeSnapshotVersion);let r;r=zI(e.target)?aB(n.fe,e.target):qk(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bp(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Kk(n){const e=lB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?WI(e,e.limit,"L"):e}function Zk(n,e){return new Vk(e.largestBatchId,Yk(n.fe,e.overlayMutation))}function pB(n,e){const t=e.path.lastSegment();return[n,Po(e.path.popLast()),t]}function gB(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Hp(i.readTime),documentKey:Po(i.documentKey.path),largestBatchId:i.largestBatchId}}class Tj{getBundleMetadata(e,t){return _B(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:zp(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return _B(e).put({bundleId:(i=t).id,createTime:Hp(Ts(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return yB(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:Kk(r.bundledQuery),readTime:zp(r.readTime)};var r})}saveNamedQuery(e,t){return yB(e).put(function(i){return{name:i.name,readTime:Hp(Ts(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function _B(n){return no(n,"bundles")}function yB(n){return no(n,"namedQueries")}class JI{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new JI(e,t.uid||"")}getOverlay(e,t){return Ow(e).get(pB(this.userId,t)).next(i=>i?Zk(this.serializer,i):null)}getOverlays(e,t){const i=bu();return Ke.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,o)=>{const u=new Vk(t,o);r.push(this.we(e,u))}),Ke.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(o=>r.add(Po(o.getCollectionPath())));const s=[];return r.forEach(o=>{const u=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Ow(e).J("collectionPathOverlayIndex",u))}),Ke.waitFor(s)}getOverlaysForCollection(e,t,i){const r=bu(),s=Po(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ow(e).j("collectionPathOverlayIndex",o).next(u=>{for(const h of u){const m=Zk(this.serializer,h);r.set(m.getKey(),m)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=bu();let o;const u=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ow(e).X({index:"collectionGroupOverlayIndex",range:u},(h,m,g)=>{const y=Zk(this.serializer,m);s.size()<r||y.largestBatchId===o?(s.set(y.getKey(),y),o=y.largestBatchId):g.done()}).next(()=>s)}we(e,t){return Ow(e).put(function(i,r,s){const[o,u,h]=pB(r,s.mutation.key);return{userId:r,collectionPath:u,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:kw(i.fe,s.mutation)}}(this.serializer,this.userId,t))}}function Ow(n){return no(n,"documentOverlays")}class Gp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(gs(e.integerValue));else if("doubleValue"in e){const i=gs(e.doubleValue);isNaN(i)?this.ye(t,13):(this.ye(t,15),mw(i)?t.pe(0):t.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(t,20),"string"==typeof i?t.Ie(i):(t.Ie(`${i.seconds||""}`),t.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Sd(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?c2(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):En()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const i=e.fields||{};this.ye(t,55);for(const r of Object.keys(i))this.Te(r,t),this.me(i[r],t)}Pe(e,t){const i=e.values||[];this.ye(t,50);for(const r of i)this.me(r,t)}ve(e,t){this.ye(t,37),rn.fromName(e).path.forEach(i=>{this.ye(t,60),this.be(i,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Cj(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function vB(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=Cj(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Gp.Ve=new Gp;class Ij{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.De(i.value),i=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ne(i.value),i=t.next();this.ke()}Me(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=t.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=t.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(e){const t=this.Fe(e),i=vB(t);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),i=vB(t);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class Sj{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Dj{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Pw{constructor(){this.je=new Ij,this.ze=new Sj(this.je),this.We=new Dj(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Wp{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Wp(this.indexId,this.documentKey,this.arrayValue,i)}}function Rf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=bB(n.arrayValue,e.arrayValue),0!==t?t:(t=bB(n.directionalValue,e.directionalValue),0!==t?t:rn.comparator(n.documentKey,e.documentKey)))}function bB(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class Aj{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const i=t;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(e){Nn(e.collectionGroup===this.collectionId);const t=xk(e);if(void 0!==t&&!this.en(t))return!1;const i=Lp(e);let r=new Set,s=0,o=0;for(;s<i.length&&this.en(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const u=i[s];if(!this.nn(this.Ze,u)||!this.sn(this.Ye[o++],u))return!1}++s}for(;s<i.length;++s)if(o>=this.Ye.length||!this.sn(this.Ye[o++],i[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function wB(n){var e,t;if(Nn(n instanceof Li||n instanceof lr),n instanceof Li){if(n instanceof w2){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Li.create(n.field,"==",s)))||[];return lr.create(r,"or")}return n}const i=n.filters.map(r=>wB(r));return lr.create(i,n.op)}function Mj(n){if(0===n.getFilters().length)return[];const e=Jk(wB(n));return Nn(EB(e)),Xk(e)||Qk(e)?[e]:e.getFilters()}function Xk(n){return n instanceof Li}function Qk(n){return n instanceof lr&&Mk(n)}function EB(n){return Xk(n)||Qk(n)||function(e){if(e instanceof lr&&Ak(e)){for(const t of e.getFilters())if(!Xk(t)&&!Qk(t))return!1;return!0}return!1}(n)}function Jk(n){if(Nn(n instanceof Li||n instanceof lr),n instanceof Li)return n;if(1===n.filters.length)return Jk(n.filters[0]);const e=n.filters.map(i=>Jk(i));let t=lr.create(e,n.op);return t=eS(t),EB(t)?t:(Nn(t instanceof lr),Nn(uy(t)),Nn(t.filters.length>1),t.filters.reduce((i,r)=>eR(i,r)))}function eR(n,e){let t;return Nn(n instanceof Li||n instanceof lr),Nn(e instanceof Li||e instanceof lr),t=n instanceof Li?e instanceof Li?function(i,r){return lr.create([i,r],"and")}(n,e):xB(n,e):e instanceof Li?xB(e,n):function(i,r){if(Nn(i.filters.length>0&&r.filters.length>0),uy(i)&&uy(r))return y2(i,r.getFilters());const s=Ak(i)?i:r,o=Ak(i)?r:i,u=s.filters.map(h=>eR(h,o));return lr.create(u,"or")}(n,e),eS(t)}function xB(n,e){if(uy(e))return y2(e,n.getFilters());{const t=e.filters.map(i=>eR(n,i));return lr.create(t,"or")}}function eS(n){if(Nn(n instanceof Li||n instanceof lr),n instanceof Li)return n;const e=n.getFilters();if(1===e.length)return eS(e[0]);if(g2(n))return n;const t=e.map(r=>eS(r)),i=[];return t.forEach(r=>{r instanceof Li?i.push(r):r instanceof lr&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:lr.create(i,n.op)}class kj{constructor(){this.rn=new tR}addToCollectionParentIndex(e,t){return this.rn.add(t),Ke.resolve()}getCollectionParents(e,t){return Ke.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ke.resolve()}deleteFieldIndex(e,t){return Ke.resolve()}getDocumentsMatchingTarget(e,t){return Ke.resolve(null)}getIndexType(e,t){return Ke.resolve(0)}getFieldIndexes(e,t){return Ke.resolve([])}getNextCollectionGroupToUpdate(e){return Ke.resolve(null)}getMinOffset(e,t){return Ke.resolve(tl.min())}getMinOffsetFromCollectionGroup(e,t){return Ke.resolve(tl.min())}updateCollectionGroup(e,t,i){return Ke.resolve()}updateIndexEntries(e,t){return Ke.resolve()}}class tR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Br(qi.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Br(qi.comparator)).toArray()}}const tS=new Uint8Array(0);class Rj{constructor(e,t){this.user=e,this.databaseId=t,this.on=new tR,this.un=new Ad(i=>Bp(i),(i,r)=>vw(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:i,parent:Po(r)};return TB(e).put(s)}return Ke.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[HN(t),""],!1,!0);return TB(e).j(r).next(s=>{for(const o of s){if(o.collectionId!==t)break;i.push(yu(o.parent))}return i})}addFieldIndex(e,t){const i=nS(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete r.indexId;const s=i.add(r);if(t.indexState){const o=Fw(e);return s.next(u=>{o.put(gB(u,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=nS(e),r=Fw(e),s=Lw(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Lw(e);let r=!0;const s=new Map;return Ke.forEach(this.cn(t),o=>this.an(e,o).next(u=>{r&&(r=!!u),s.set(o,u)})).next(()=>{if(r){let o=vi();const u=[];return Ke.forEach(s,(h,m)=>{var g;Pt("IndexedDbIndexManager",`Using index ${g=h,`id=${g.indexId}|cg=${g.collectionGroup}|f=${g.fields.map(ee=>`${ee.fieldPath}:${ee.kind}`).join(",")}`} to execute ${Bp(t)}`);const y=function(ee,ye){const De=xk(ye);if(void 0===De)return null;for(const dt of jI(ee,De.fieldPath))switch(dt.op){case"array-contains-any":return dt.value.arrayValue.values||[];case"array-contains":return[dt.value]}return null}(m,h),E=function(ee,ye){const De=new Map;for(const dt of Lp(ye))for(const it of jI(ee,dt.fieldPath))switch(it.op){case"==":case"in":De.set(dt.fieldPath.canonicalString(),it.value);break;case"not-in":case"!=":return De.set(dt.fieldPath.canonicalString(),it.value),Array.from(De.values())}return null}(m,h),x=function(ee,ye){const De=[];let dt=!0;for(const it of Lp(ye)){const Dt=0===it.kind?E2(ee,it.fieldPath,ee.startAt):x2(ee,it.fieldPath,ee.startAt);De.push(Dt.value),dt&&(dt=Dt.inclusive)}return new Mf(De,dt)}(m,h),I=function(ee,ye){const De=[];let dt=!0;for(const it of Lp(ye)){const Dt=0===it.kind?x2(ee,it.fieldPath,ee.endAt):E2(ee,it.fieldPath,ee.endAt);De.push(Dt.value),dt&&(dt=Dt.inclusive)}return new Mf(De,dt)}(m,h),k=this.hn(h,m,x),P=this.hn(h,m,I),q=this.ln(h,m,E),ae=this.fn(h.indexId,y,k,x.inclusive,P,I.inclusive,q);return Ke.forEach(ae,ee=>i.H(ee,t.limit).next(ye=>{ye.forEach(De=>{const dt=rn.fromSegments(De.documentKey);o.has(dt)||(o=o.add(dt),u.push(dt))})}))}).next(()=>u)}return Ke.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Mj(lr.create(e.filters,"and")).map(i=>Rk(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,i,r,s,o,u){const h=(null!=t?t.length:1)*Math.max(i.length,s.length),m=h/(null!=t?t.length:1),g=[];for(let y=0;y<h;++y){const E=t?this.dn(t[y/m]):tS,x=this.wn(e,E,i[y%m],r),I=this._n(e,E,s[y%m],o),k=u.map(P=>this.wn(e,E,P,!0));g.push(...this.createRange(x,I,k))}return g}wn(e,t,i,r){const s=new Wp(e,rn.empty(),t,i);return r?s:s.Je()}_n(e,t,i,r){const s=new Wp(e,rn.empty(),t,i);return r?s.Je():s}an(e,t){const i=new Aj(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const u of s)i.tn(u)&&(!o||u.fields.length>o.fields.length)&&(o=u);return o})}getIndexType(e,t){let i=2;const r=this.cn(t);return Ke.forEach(r,s=>this.an(e,s).next(o=>{o?0!==i&&o.fields.length<function(u){let h=new Br(ps.comparator),m=!1;for(const g of u.filters)for(const y of g.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?m=!0:h=h.add(y.field));for(const g of u.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(m?1:0)}(s)&&(i=1):i=0})).next(()=>function(s){return null!==s.limit}(t)&&r.length>1&&2===i?1:i)}mn(e,t){const i=new Pw;for(const r of Lp(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const o=i.He(r.kind);Gp.Ve._e(s,o)}return i.Qe()}dn(e){const t=new Pw;return Gp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const i=new Pw;return Gp.Ve._e(Np(this.databaseId,t),i.He(function(r){const s=Lp(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.Qe()}ln(e,t,i){if(null===i)return[];let r=[];r.push(new Pw);let s=0;for(const o of Lp(e)){const u=i[s++];for(const h of r)if(this.yn(t,o.fieldPath)&&_w(u))r=this.pn(r,o,u);else{const m=h.He(o.kind);Gp.Ve._e(u,m)}}return this.In(r)}hn(e,t,i){return this.ln(e,t,i.position)}In(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Qe();return t}pn(e,t,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const u of r){const h=new Pw;h.seed(u.Qe()),Gp.Ve._e(o,h.He(t.kind)),s.push(h)}return s}yn(e,t){return!!e.filters.find(i=>i instanceof Li&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=nS(e),r=Fw(e);return(t?i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.j()).next(s=>{const o=[];return Ke.forEach(s,u=>r.get([u.indexId,this.uid]).next(h=>{o.push(function(m,g){const y=g?new dw(g.sequenceNumber,new tl(zp(g.readTime),new rn(yu(g.documentKey)),g.largestBatchId)):dw.empty(),E=m.fields.map(([x,I])=>new PI(ps.fromServerFormat(x),I));return new OI(m.indexId,m.collectionGroup,E,y)}(u,h))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:hi(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=nS(e),s=Fw(e);return this.Tn(e).next(o=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(u=>Ke.forEach(u,h=>s.put(gB(h.indexId,this.user,o,i)))))}updateIndexEntries(e,t){const i=new Map;return Ke.forEach(t,(r,s)=>{const o=i.get(r.collectionGroup);return(o?Ke.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(u=>(i.set(r.collectionGroup,u),Ke.forEach(u,h=>this.En(e,r,h).next(m=>{const g=this.An(s,h);return m.isEqual(g)?Ke.resolve():this.vn(e,s,h,m,g)}))))})}Rn(e,t,i,r){return Lw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,i,r){return Lw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,t.key),t.key.path.toArray()])}En(e,t,i){const r=Lw(e);let s=new Br(Rf);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,t)])},(o,u)=>{s=s.add(new Wp(i.indexId,t,u.arrayValue,u.directionalValue))}).next(()=>s)}An(e,t){let i=new Br(Rf);const r=this.mn(t,e);if(null==r)return i;const s=xk(t);if(null!=s){const o=e.data.field(s.fieldPath);if(_w(o))for(const u of o.arrayValue.values||[])i=i.add(new Wp(t.indexId,e.key,this.dn(u),r))}else i=i.add(new Wp(t.indexId,e.key,tS,r));return i}vn(e,t,i,r,s){Pt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,h,m,g,y){const E=u.getIterator(),x=h.getIterator();let I=ay(E),k=ay(x);for(;I||k;){let P=!1,q=!1;if(I&&k){const ae=m(I,k);ae<0?q=!0:ae>0&&(P=!0)}else null!=I?q=!0:P=!0;P?(g(k),k=ay(x)):q?(y(I),I=ay(E)):(I=ay(E),k=ay(x))}}(r,s,Rf,u=>{o.push(this.Rn(e,t,i,u))},u=>{o.push(this.Pn(e,t,i,u))}),Ke.waitFor(o)}Tn(e){let t=1;return Fw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,u)=>Rf(o,u)).filter((o,u,h)=>!u||0!==Rf(o,h[u-1]));const r=[];r.push(e);for(const o of i){const u=Rf(o,e),h=Rf(o,t);if(0===u)r[0]=e.Je();else if(u>0&&h<0)r.push(o),r.push(o.Je());else if(h>0)break}r.push(t);const s=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,tS,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,tS,[]]))}return s}bn(e,t){return Rf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(CB)}getMinOffset(e,t){return Ke.mapArray(this.cn(t),i=>this.an(e,i).next(r=>r||En())).next(CB)}}function TB(n){return no(n,"collectionParents")}function Lw(n){return no(n,"indexEntries")}function nS(n){return no(n,"indexConfiguration")}function Fw(n){return no(n,"indexState")}function CB(n){Nn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;Tk(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new tl(e.readTime,e.documentKey,t)}const IB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Lo{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Lo(e,Lo.DEFAULT_COLLECTION_PERCENTILE,Lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function SB(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let u=0;const h=i.X({range:o},(g,y,E)=>(u++,E.delete()));s.push(h.next(()=>{Nn(1===u)}));const m=[];for(const g of t.mutations){const y=XN(e,g.key.path,t.batchId);s.push(r.delete(y)),m.push(g.key)}return Ke.waitFor(s).next(()=>m)}function iS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw En();e=n.noDocument}return JSON.stringify(e).length}Lo.DEFAULT_COLLECTION_PERCENTILE=10,Lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lo.DEFAULT=new Lo(41943040,Lo.DEFAULT_COLLECTION_PERCENTILE,Lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lo.DISABLED=new Lo(-1,0,0);class rS{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(e,t,i,r){Nn(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new rS(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Of(e).X({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=yy(e),o=Of(e);return o.add({}).next(u=>{Nn("number"==typeof u);const h=new Uk(u,t,i,r),m=function(E,x,I){const k=I.baseMutations.map(q=>kw(E.fe,q)),P=I.mutations.map(q=>kw(E.fe,q));return{userId:x,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:k,mutations:P}}(this.serializer,this.userId,h),g=[];let y=new Br((E,x)=>hi(E.canonicalString(),x.canonicalString()));for(const E of r){const x=XN(this.userId,E.key.path,u);y=y.add(E.key.path.popLast()),g.push(o.put(m)),g.push(s.put(x,vz))}return y.forEach(E=>{g.push(this.indexManager.addToCollectionParentIndex(e,E))}),e.addOnCommittedListener(()=>{this.Vn[u]=h.keys()}),Ke.waitFor(g).next(()=>h)})}lookupMutationBatch(e,t){return Of(e).get(t).next(i=>i?(Nn(i.userId===this.userId),jp(this.serializer,i)):null)}Sn(e,t){return this.Vn[t]?Ke.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Vn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Of(e).X({index:"userMutationsIndex",range:r},(o,u,h)=>{u.userId===this.userId&&(Nn(u.batchId>=i),s=jp(this.serializer,u)),h.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Of(e).X({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Of(e).j("userMutationsIndex",t).next(i=>i.map(r=>jp(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=FI(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return yy(e).X({range:r},(o,u,h)=>{const[m,g,y]=o,E=yu(g);if(m===this.userId&&t.path.isEqual(E))return Of(e).get(y).next(x=>{if(!x)throw En();Nn(x.userId===this.userId),s.push(jp(this.serializer,x))});h.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Br(hi);const r=[];return t.forEach(s=>{const o=FI(this.userId,s.path),u=IDBKeyRange.lowerBound(o),h=yy(e).X({range:u},(m,g,y)=>{const[E,x,I]=m,k=yu(x);E===this.userId&&s.path.isEqual(k)?i=i.add(I):y.done()});r.push(h)}),Ke.waitFor(r).next(()=>this.Dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=FI(this.userId,i),o=IDBKeyRange.lowerBound(s);let u=new Br(hi);return yy(e).X({range:o},(h,m,g)=>{const[y,E,x]=h,I=yu(E);y===this.userId&&i.isPrefixOf(I)?I.length===r&&(u=u.add(x)):g.done()}).next(()=>this.Dn(e,u))}Dn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(Of(e).get(s).next(o=>{if(null===o)throw En();Nn(o.userId===this.userId),i.push(jp(this.serializer,o))}))}),Ke.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return SB(e.ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Ke.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ke.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return yy(e).X({range:i},(s,o,u)=>{if(s[0]===this.userId){const h=yu(s[1]);r.push(h)}else u.done()}).next(()=>{Nn(0===r.length)})})}containsKey(e,t){return DB(e,this.userId,t)}xn(e){return AB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function DB(n,e,t){const i=FI(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return yy(n).X({range:s,Y:!0},(u,h,m)=>{const[g,y,E]=u;g===e&&y===r&&(o=!0),m.done()}).next(()=>o)}function Of(n){return no(n,"mutations")}function yy(n){return no(n,"documentMutations")}function AB(n){return no(n,"mutationQueues")}class Yp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Yp(0)}static Mn(){return new Yp(-1)}}class Oj{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const i=new Yp(t.highestTargetId);return t.highestTargetId=i.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Un.fromTimestamp(new Yr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.$n(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(i=>(i.targetCount+=1,this.Bn(t,i),this.On(e,i))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vy(e).delete(t.targetId)).next(()=>this.$n(e)).next(i=>(Nn(i.targetCount>0),i.targetCount-=1,this.On(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return vy(e).X((o,u)=>{const h=Rw(u);h.sequenceNumber<=t&&null===i.get(h.targetId)&&(r++,s.push(this.removeTargetData(e,h)))}).next(()=>Ke.waitFor(s)).next(()=>r)}forEachTarget(e,t){return vy(e).X((i,r)=>{const s=Rw(r);t(s)})}$n(e){return MB(e).get("targetGlobalKey").next(t=>(Nn(null!==t),t))}On(e,t){return MB(e).put("targetGlobalKey",t)}Fn(e,t){return vy(e).put(mB(this.serializer,t))}Bn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Bp(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return vy(e).X({range:r,index:"queryTargetsIndex"},(o,u,h)=>{const m=Rw(u);vw(t,m.target)&&(s=m,h.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=Pf(e);return t.forEach(o=>{const u=Po(o.path);r.push(s.put({targetId:i,path:u})),r.push(this.referenceDelegate.addReference(e,i,o))}),Ke.waitFor(r)}removeMatchingKeys(e,t,i){const r=Pf(e);return Ke.forEach(t,s=>{const o=Po(s.path);return Ke.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=Pf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Pf(e);let s=vi();return r.X({range:i,Y:!0},(o,u,h)=>{const m=yu(o[1]),g=new rn(m);s=s.add(g)}).next(()=>s)}containsKey(e,t){const i=Po(t.path),r=IDBKeyRange.bound([i],[HN(i)],!1,!0);let s=0;return Pf(e).X({index:"documentTargetsIndex",Y:!0,range:r},([o,u],h,m)=>{0!==o&&(s++,m.done())}).next(()=>s>0)}le(e,t){return vy(e).get(t).next(i=>i?Rw(i):null)}}function vy(n){return no(n,"targets")}function MB(n){return no(n,"targetGlobal")}function Pf(n){return no(n,"targetDocuments")}function kB([n,e],[t,i]){const r=hi(n,t);return 0===r?hi(e,i):r}class Pj{constructor(e){this.Ln=e,this.buffer=new Br(kB),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();kB(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class RB{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Pt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ot.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){xf(i)?Pt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ef(i)}yield t.Qn(3e5)}))}}class Lj{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return Ke.resolve(nl.ct);const i=new Pj(t);return this.jn.forEachTarget(e,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(e,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pt("LruGarbageCollector","Garbage collection skipped; disabled"),Ke.resolve(IB)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IB):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let i,r,s,o,u,h,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,o=Date.now(),this.nthSequenceNumber(e,r))).next(y=>(i=y,u=Date.now(),this.removeTargets(e,i,t))).next(y=>(s=y,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(y=>(m=Date.now(),wk()<=Wa.in.DEBUG&&Pt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-g}ms\n\tDetermined least recently used ${r} in `+(u-o)+`ms\n\tRemoved ${s} targets in `+(h-u)+`ms\n\tRemoved ${y} documents in `+(m-h)+`ms\nTotal Duration: ${m-g}ms`),Ke.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:y})))}}class Fj{constructor(e,t){this.db=e,this.garbageCollector=function OB(n,e){return new Lj(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Jn(e){let t=0;return this.Wn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(i,r)=>t(r))}addReference(e,t,i){return sS(e,i)}removeReference(e,t,i){return sS(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return sS(e,t)}Xn(e,t){return function(i,r){let s=!1;return AB(i).Z(o=>DB(i,o,r).next(u=>(u&&(s=!0),Ke.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,(o,u)=>{if(u<=t){const h=this.Xn(e,o).next(m=>{if(!m)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,Un.min()),Pf(e).delete([0,Po(o.path)])))});r.push(h)}}).next(()=>Ke.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return sS(e,t)}Yn(e,t){const i=Pf(e);let r,s=nl.ct;return i.X({index:"documentTargetsIndex"},([o,u],{path:h,sequenceNumber:m})=>{0===o?(s!==nl.ct&&t(new rn(yu(r)),s),s=m,r=h):s=nl.ct}).next(()=>{s!==nl.ct&&t(new rn(yu(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sS(n,e){return Pf(n).put(function(t,i){return{targetId:0,path:Po(t.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}class PB{constructor(){this.changes=new Ad(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?Ke.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Nj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return qp(e).put(i)}removeEntry(e,t,i){return qp(e).delete(function(r,s){const o=r.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],QI(s),o[o.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Zn(e,i)))}getEntry(e,t){let i=Ur.newInvalidDocument(t);return qp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Nw(t))},(r,s)=>{i=this.ts(t,s)}).next(()=>i)}es(e,t){let i={size:0,document:Ur.newInvalidDocument(t)};return qp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Nw(t))},(r,s)=>{i={document:this.ts(t,s),size:iS(s)}}).next(()=>i)}getEntries(e,t){let i=Ta();return this.ns(e,t,(r,s)=>{const o=this.ts(r,s);i=i.insert(r,o)}).next(()=>i)}ss(e,t){let i=Ta(),r=new Cr(rn.comparator);return this.ns(e,t,(s,o)=>{const u=this.ts(s,o);i=i.insert(s,u),r=r.insert(s,iS(o))}).next(()=>({documents:i,rs:r}))}ns(e,t,i){if(t.isEmpty())return Ke.resolve();let r=new Br(BB);t.forEach(h=>r=r.add(h));const s=IDBKeyRange.bound(Nw(r.first()),Nw(r.last())),o=r.getIterator();let u=o.getNext();return qp(e).X({index:"documentKeyIndex",range:s},(h,m,g)=>{const y=rn.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;u&&BB(u,y)<0;)i(u,null),u=o.getNext();u&&u.isEqual(y)&&(i(u,m),u=o.hasNext()?o.getNext():null),u?g.G(Nw(u)):g.done()}).next(()=>{for(;u;)i(u,null),u=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),QI(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qp(e).j(IDBKeyRange.bound(o,u,!0)).next(h=>{let m=Ta();for(const g of h){const y=this.ts(rn.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);y.isFoundDocument()&&(ww(t,y)||r.has(y.key))&&(m=m.insert(y.key,y))}return m})}getAllFromCollectionGroup(e,t,i,r){let s=Ta();const o=NB(t,i),u=NB(t,tl.max());return qp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(h,m,g)=>{const y=this.ts(rn.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);s=s.insert(y.key,y),s.size===r&&g.done()}).next(()=>s)}newChangeBuffer(e){return new Bj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return FB(e).get("remoteDocumentGlobalKey").next(t=>(Nn(!!t),t))}Zn(e,t){return FB(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const i=function xj(n,e){let t;if(e.document)t=oB(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=rn.fromSegments(e.noDocument.path),r=zp(e.noDocument.readTime);t=Ur.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return En();{const i=rn.fromSegments(e.unknownDocument.path),r=zp(e.unknownDocument.version);t=Ur.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Yr(i[0],i[1]);return Un.fromTimestamp(r)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(Un.min()))return i}return Ur.newInvalidDocument(e)}}function LB(n){return new Nj(n)}class Bj extends PB{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ad(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new Br((s,o)=>hi(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const u=this.us.get(s);if(t.push(this.os.removeEntry(e,s,u.readTime)),o.isValidDocument()){const h=fB(this.os.serializer,o);r=r.add(s.path.popLast());const m=iS(h);i+=m-u.size,t.push(this.os.addEntry(e,s,h))}else if(i-=u.size,this.trackRemovals){const h=fB(this.os.serializer,o.convertToNoDocument(Un.min()));t.push(this.os.addEntry(e,s,h))}}),r.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,i)),Ke.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(i=>(this.us.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:i,rs:r})=>(r.forEach((s,o)=>{this.us.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function FB(n){return no(n,"remoteDocumentGlobal")}function qp(n){return no(n,"remoteDocumentsV14")}function Nw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function NB(n,e){const t=e.documentKey.path.toArray();return[n,QI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function BB(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=hi(t[s],i[s]),r)return r;return r=hi(t.length,i.length),r||(r=hi(t[t.length-2],i[i.length-2]),r||hi(t[t.length-1],i[i.length-1]))}class Uj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class UB{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&Cw(i.mutation,r,xa.empty(),Yr.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,vi()).next(()=>i))}getLocalViewOfDocuments(e,t,i=vi()){const r=bu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Ew();return s.forEach((u,h)=>{o=o.insert(u,h.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=bu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,vi()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,u)=>{t.set(o,u)})})}computeViews(e,t,i,r){let s=Ta();const o=xw(),u=xw();return t.forEach((h,m)=>{const g=i.get(m.key);r.has(m.key)&&(void 0===g||g.mutation instanceof Md)?s=s.insert(m.key,m):void 0!==g?(o.set(m.key,g.mutation.getFieldMask()),Cw(g.mutation,m,g.mutation.getFieldMask(),Yr.now())):o.set(m.key,xa.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((m,g)=>o.set(m,g)),t.forEach((m,g)=>{var y;return u.set(m,new Uj(g,null!==(y=o.get(m))&&void 0!==y?y:null))}),u))}recalculateAndSaveOverlays(e,t){const i=xw();let r=new Cr((o,u)=>o-u),s=vi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const u of o)u.keys().forEach(h=>{const m=t.get(h);if(null===m)return;let g=i.get(h)||xa.empty();g=u.applyToLocalView(m,g),i.set(h,g);const y=(r.get(u.batchId)||vi()).add(h);r=r.insert(u.batchId,y)})}).next(()=>{const o=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),m=h.key,g=h.value,y=k2();g.forEach(E=>{if(!s.has(E)){const x=$2(t.get(E),i.get(E));null!==x&&y.set(E,x),s=s.add(E)}}),o.push(this.documentOverlayCache.saveOverlays(e,m,y))}return Ke.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return function(r){return rn.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):Ke.resolve(bu());let u=-1,h=s;return o.next(m=>Ke.forEach(m,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),s.get(g)?Ke.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{h=h.insert(g,E)}))).next(()=>this.populateOverlays(e,m,s)).next(()=>this.computeViews(e,h,m,vi())).next(g=>({batchId:u,changes:M2(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rn(t)).next(i=>{let r=Ew();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=Ew();return this.indexManager.getCollectionParents(e,r).next(o=>Ke.forEach(o,u=>{const h=(m=t,g=u.child(r),new Dd(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,g;return this.getDocumentsMatchingCollectionQuery(e,h,i).next(m=>{m.forEach((g,y)=>{s=s.insert(g,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r))).next(s=>{r.forEach((u,h)=>{const m=h.getKey();null===s.get(m)&&(s=s.insert(m,Ur.newInvalidDocument(m)))});let o=Ew();return s.forEach((u,h)=>{const m=r.get(u);void 0!==m&&Cw(m.mutation,h,xa.empty(),Yr.now()),ww(t,h)&&(o=o.insert(u,h))}),o})}}class $j{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ke.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var i;return this.cs.set(t.id,{id:(i=t).id,version:i.version,createTime:Ts(i.createTime)}),Ke.resolve()}getNamedQuery(e,t){return Ke.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(i){return{name:i.name,query:Kk(i.bundledQuery),readTime:Ts(i.readTime)}}(t)),Ke.resolve()}}class Vj{constructor(){this.overlays=new Cr(rn.comparator),this.ls=new Map}getOverlay(e,t){return Ke.resolve(this.overlays.get(t))}getOverlays(e,t){const i=bu();return Ke.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.we(e,t,s)}),Ke.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),Ke.resolve()}getOverlaysForCollection(e,t,i){const r=bu(),s=t.length+1,o=new rn(t.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const h=u.getNext().value,m=h.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===s&&h.largestBatchId>i&&r.set(h.getKey(),h)}return Ke.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Cr((m,g)=>m-g);const o=this.overlays.getIterator();for(;o.hasNext();){const m=o.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let g=s.get(m.largestBatchId);null===g&&(g=bu(),s=s.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const u=bu(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((m,g)=>u.set(m,g)),!(u.size()>=r)););return Ke.resolve(u)}we(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Vk(t,i));let s=this.ls.get(t);void 0===s&&(s=vi(),this.ls.set(t,s)),this.ls.set(t,s.add(i.key))}}class nR{constructor(){this.fs=new Br(io.ds),this.ws=new Br(io._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const i=new io(e,t);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ys(new io(e,t))}ps(e,t){e.forEach(i=>this.removeReference(i,t))}Is(e){const t=new rn(new qi([])),i=new io(t,e),r=new io(t,e+1),s=[];return this.ws.forEachInRange([i,r],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new rn(new qi([])),i=new io(t,e),r=new io(t,e+1);let s=vi();return this.ws.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new io(e,0),i=this.fs.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class io{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return rn.comparator(e.key,t.key)||hi(e.As,t.As)}static _s(e,t){return hi(e.As,t.As)||rn.comparator(e.key,t.key)}}class Hj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Br(io.ds)}checkEmpty(e){return Ke.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.vs;this.vs++;const o=new Uk(s,t,i,r);this.mutationQueue.push(o);for(const u of r)this.Rs=this.Rs.add(new io(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Ke.resolve(o)}lookupMutationBatch(e,t){return Ke.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.bs(t+1),s=r<0?0:r;return Ke.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new io(t,0),r=new io(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],o=>{const u=this.Ps(o.As);s.push(u)}),Ke.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Br(hi);return t.forEach(r=>{const s=new io(r,0),o=new io(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],u=>{i=i.add(u.As)})}),Ke.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;rn.isDocumentKey(s)||(s=s.child(""));const o=new io(new rn(s),0);let u=new Br(hi);return this.Rs.forEachWhile(h=>{const m=h.key.path;return!!i.isPrefixOf(m)&&(m.length===r&&(u=u.add(h.As)),!0)},o),Ke.resolve(this.Vs(u))}Vs(e){const t=[];return e.forEach(i=>{const r=this.Ps(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Nn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return Ke.forEach(t.mutations,r=>{const s=new io(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,t){const i=new io(t,0),r=this.Rs.firstAfterOrEqual(i);return Ke.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return Ke.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zj{constructor(e){this.Ds=e,this.docs=new Cr(rn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Ke.resolve(i?i.document.mutableCopy():Ur.newInvalidDocument(t))}getEntries(e,t){let i=Ta();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ur.newInvalidDocument(r))}),Ke.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Ta();const o=t.path,u=new rn(o.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:g}}=h.getNext();if(!o.isPrefixOf(m.path))break;m.path.length>o.length+1||Tk(jN(g),i)<=0||(r.has(g.key)||ww(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return Ke.resolve(s)}getAllFromCollectionGroup(e,t,i,r){En()}Cs(e,t){return Ke.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new jj(this)}getSize(e){return Ke.resolve(this.size)}}class jj extends PB{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),Ke.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Gj{constructor(e){this.persistence=e,this.xs=new Ad(t=>Bp(t),vw),this.lastRemoteSnapshotVersion=Un.min(),this.highestTargetId=0,this.Ns=0,this.ks=new nR,this.targetCount=0,this.Ms=Yp.kn()}forEachTarget(e,t){return this.xs.forEach((i,r)=>t(r)),Ke.resolve()}getLastRemoteSnapshotVersion(e){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ke.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ns&&(this.Ns=t),Ke.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Yp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ke.resolve()}updateTargetData(e,t){return this.Fn(t),Ke.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.xs.forEach((o,u)=>{u.sequenceNumber<=t&&null===i.get(u.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Ke.waitFor(s).next(()=>r)}getTargetCount(e){return Ke.resolve(this.targetCount)}getTargetData(e,t){const i=this.xs.get(t)||null;return Ke.resolve(i)}addMatchingKeys(e,t,i){return this.ks.gs(t,i),Ke.resolve()}removeMatchingKeys(e,t,i){this.ks.ps(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Ke.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ke.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ks.Es(t);return Ke.resolve(i)}containsKey(e,t){return Ke.resolve(this.ks.containsKey(t))}}class iR{constructor(e,t){this.$s={},this.overlays={},this.Os=new nl(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Gj(this),this.indexManager=new kj,this.remoteDocumentCache=function(i){return new zj(i)}(i=>this.referenceDelegate.Ls(i)),this.serializer=new hB(t),this.qs=new $j(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.$s[e.toKey()];return i||(i=new Hj(t,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,i){Pt("MemoryPersistence","Starting transaction:",e);const r=new Wj(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(e,t){return Ke.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,t)))}}class Wj extends WN{constructor(e){super(),this.currentSequenceNumber=e}}class oS{constructor(e){this.persistence=e,this.Qs=new nR,this.js=null}static zs(e){return new oS(e)}get Ws(){if(this.js)return this.js;throw En()}addReference(e,t,i){return this.Qs.addReference(i,t),this.Ws.delete(i.toString()),Ke.resolve()}removeReference(e,t,i){return this.Qs.removeReference(i,t),this.Ws.add(i.toString()),Ke.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ke.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.Ws,i=>{const r=rn.fromPath(i);return this.Hs(e,r).next(s=>{s||t.removeEntry(r,Un.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(i=>{i?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Ke.or([()=>Ke.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Yj{constructor(e){this.serializer=e}O(e,t,i,r){const s=new LI("createOrUpgrade",t);i<1&&r>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZN,{unique:!0}),u.createObjectStore("documentMutations")}(e),$B(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=Ke.resolve();return i<3&&r>=3&&(0!==i&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),$B(e)),o=o.next(()=>function(u){const h=u.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Un.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",m)}(s))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(u,h){return h.store("mutations").j().next(m=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZN,{unique:!0});const g=h.store("mutations"),y=m.map(E=>g.put(E));return Ke.waitFor(y)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(o=o.next(()=>this.Ys(s))),i<6&&r>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),i<7&&r>=7&&(o=o.next(()=>this.Zs(s))),i<8&&r>=8&&(o=o.next(()=>this.ti(e,s))),i<9&&r>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(o=o.next(()=>this.ei(s))),i<11&&r>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{!function(u){const h=u.createObjectStore("documentOverlays",{keyPath:kz});h.createIndex("collectionPathOverlayIndex",Rz,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",Oz,{unique:!1})}(e)})),i<13&&r>=13&&(o=o.next(()=>function(u){const h=u.createObjectStore("remoteDocumentsV14",{keyPath:bz});h.createIndex("documentKeyIndex",wz),h.createIndex("collectionGroupIndex",Ez)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.si(e,s))),i<15&&r>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Sz}).createIndex("sequenceNumberIndex",Dz,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Az}).createIndex("documentKeyIndex",Mz,{unique:!1})}(e))),o}Xs(e){let t=0;return e.store("remoteDocuments").X((i,r)=>{t+=iS(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.j().next(r=>Ke.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",o).next(u=>Ke.forEach(u,h=>{Nn(h.userId===s.userId);const m=jp(this.serializer,h);return SB(e,s.userId,m).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((o,u)=>{const h=new qi(o),m=[0,Po(h)];s.push(t.get(m).next(g=>g?Ke.resolve():t.put({targetId:0,path:Po(h),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>Ke.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Iz});const i=t.store("collectionParents"),r=new tR,s=o=>{if(r.add(o)){const u=o.lastSegment(),h=o.popLast();return i.put({collectionId:u,parent:Po(h)})}};return t.store("remoteDocuments").X({Y:!0},(o,u)=>{const h=new qi(o);return s(h.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([o,u,h],m)=>{const g=yu(u);return s(g.popLast())}))}ei(e){const t=e.store("targets");return t.X((i,r)=>{const s=Rw(r),o=mB(this.serializer,s);return t.put(o)})}ni(e,t){const i=t.store("remoteDocuments"),r=[];return i.X((s,o)=>{const u=t.store("remoteDocumentsV14"),h=(m=o,m.document?new rn(qi.fromString(m.document.name).popFirst(5)):m.noDocument?rn.fromSegments(m.noDocument.path):m.unknownDocument?rn.fromSegments(m.unknownDocument.path):En()).path.toArray();var m;const g={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(u.put(g))}).next(()=>Ke.waitFor(r))}si(e,t){const i=t.store("mutations"),r=LB(this.serializer),s=new iR(oS.zs,this.serializer.fe);return i.j().next(o=>{const u=new Map;return o.forEach(h=>{var m;let g=null!==(m=u.get(h.userId))&&void 0!==m?m:vi();jp(this.serializer,h).keys().forEach(y=>g=g.add(y)),u.set(h.userId,g)}),Ke.forEach(u,(h,m)=>{const g=new to(m),y=JI.de(this.serializer,g),E=s.getIndexManager(g),x=rS.de(g,this.serializer,E,s.referenceDelegate);return new UB(r,x,y,E).recalculateAndSaveOverlaysForDocumentKeys(new Ik(t,nl.ct),h).next()})})}}function $B(n){n.createObjectStore("targetDocuments",{keyPath:Tz}).createIndex("documentTargetsIndex",Cz,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xz,{unique:!0}),n.createObjectStore("targetGlobal")}const rR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sR{constructor(e,t,i,r,s,o,u,h,m,g,y=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ii=s,this.window=o,this.document=u,this.ri=m,this.oi=g,this.ui=y,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=E=>Promise.resolve(),!sR.D())throw new wt(tt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fj(this,r),this.di=t+"main",this.serializer=new hB(h),this.wi=new bc(this.di,this.ui,new Yj(this.serializer)),this.Bs=new Oj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LB(this.serializer),this.qs=new Tj,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===g&&xs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new wt(tt.FAILED_PRECONDITION,rR);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new nl(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var i,t=this;return this.fi=function(r){return(i=i||(0,ot.Z)(function*(s){if(t.started)return e(s)})).apply(this,arguments)},e(this.isPrimary)}setDatabaseDeletedListener(e){var t;this.wi.B(function(i){return(t=t||(0,ot.Z)(function*(r){null===r.newVersion&&(yield e())})).apply(this,arguments)})}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ot.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(xf(e))return Pt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Bw(e).get("owner").next(t=>Ke.resolve(this.Ri(t)))}Pi(e){return lS(e).delete(this.clientId)}bi(){var e=this;return(0,ot.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=no(i,"clientMetadata");return r.j().next(s=>{const o=e.Si(s,18e5),u=s.filter(h=>-1===o.indexOf(h));return Ke.forEach(u,h=>r.delete(h.clientId)).next(()=>u)})}).catch(()=>[]);if(e._i)for(const i of t)e._i.removeItem(e.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Ke.resolve(!0):Bw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new wt(tt.FAILED_PRECONDITION,rR);return!1}}return!(!this.networkEnabled||!this.inForeground)||lS(e).j().next(i=>void 0===this.Si(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Pt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ot.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new Ik(t,nl.ct);return e.Ai(i).next(()=>e.Pi(i))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(i=>this.Vi(i.updateTimeMs,t)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>lS(e).j().next(t=>this.Si(t,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return rS.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Rj(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return JI.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,i){Pt("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(o=this.ui)?Lz:14===o?e2:13===o?JN:12===o?Pz:11===o?QN:void En();var o;let u;return this.wi.runTransaction(e,r,s,h=>(u=new Ik(h,this.Os?this.Os.next():nl.ct),"readwrite-primary"===t?this.Ti(u).next(m=>!!m||this.Ei(u)).next(m=>{if(!m)throw xs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new wt(tt.FAILED_PRECONDITION,GN);return i(u)}).next(m=>this.vi(u).next(()=>m)):this.Oi(u).next(()=>i(u)))).then(h=>(u.raiseOnCommittedEvent(),h))}Oi(e){return Bw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new wt(tt.FAILED_PRECONDITION,rR)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bw(e).put("owner",t)}static D(){return bc.D()}Ai(e){const t=Bw(e);return t.get("owner").next(i=>this.Ri(i)?(Pt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ke.resolve())}Vi(e,t){const i=Date.now();return!(e<i-t||e>i&&(xs(`Detected an update time that is in the future: ${e} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ui.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const i=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Pt("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return xs("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){xs("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bw(n){return no(n,"owner")}function lS(n){return no(n,"clientMetadata")}function oR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class aR{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Fi=i,this.Bi=r}static Li(e,t){let i=vi(),r=vi();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new aR(e,t.fromCache,i,r)}}class VB{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,i)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(C2(t))return Ke.resolve(null);let i=Xo(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=WI(t,null,"F"),i=Xo(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=vi(...s);return this.Ui.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const m=this.ji(t,u);return this.zi(t,m,o,h.readTime)?this.Ki(e,WI(t,null,"F")):this.Wi(e,m,t,h)}))})))}Gi(e,t,i,r){return C2(t)||r.isEqual(Un.min())?this.Qi(e,t):this.Ui.getDocuments(e,i).next(s=>{const o=this.ji(t,s);return this.zi(t,o,i,r)?this.Qi(e,t):(wk()<=Wa.in.DEBUG&&Pt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fk(t)),this.Wi(e,o,t,zN(r,-1)))})}ji(e,t){let i=new Br(D2(e));return t.forEach((r,s)=>{ww(e,s)&&(i=i.add(s))}),i}zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return wk()<=Wa.in.DEBUG&&Pt("QueryEngine","Using full collection scan to execute query:",Fk(t)),this.Ui.getDocumentsMatchingQuery(e,t,tl.min())}Wi(e,t,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class qj{constructor(e,t,i,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Cr(hi),this.Yi=new Ad(s=>Bp(s),vw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UB(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function HB(n,e,t,i){return new qj(n,e,t,i)}function zB(n,e){return(KF=KF||(0,ot.Z)(function*(t,i){const r=cn(t);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let o;return r.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,r.tr(i),r.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],m=[];let g=vi();for(const y of o){h.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return r.localDocuments.getDocuments(s,g).next(y=>({er:y,removedBatchIds:h,addedBatchIds:m}))})})})).apply(this,arguments)}function jB(n){const e=cn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function GB(n,e,t){let i=vi(),r=vi();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Ta();return t.forEach((u,h)=>{const m=s.get(u);h.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(Un.min())?(e.removeEntry(u,h.readTime),o=o.insert(u,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||0===h.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(h),o=o.insert(u,h)):Pt("LocalStore","Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",h.version)}),{nr:o,sr:r}})}function Xj(n,e){const t=cn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function by(n,e){const t=cn(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Bs.getTargetData(i,e).next(s=>s?(r=s,Ke.resolve(r)):t.Bs.allocateTargetId(i).next(o=>(r=new kd(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(i.targetId,i),t.Yi.set(e,i.targetId)),i})}function wy(n,e,t){return(ZF=ZF||(0,ot.Z)(function*(i,r,s){const o=cn(i),u=o.Ji.get(r),h=s?"readwrite":"readwrite-primary";try{s||(yield o.persistence.runTransaction("Release target",h,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!xf(m))throw m;Pt("LocalStore",`Failed to update sequence numbers for target ${r}: ${m}`)}o.Ji=o.Ji.remove(r),o.Yi.delete(u.target)})).apply(this,arguments)}function cS(n,e,t){const i=cn(n);let r=Un.min(),s=vi();return i.persistence.runTransaction("Execute query","readonly",o=>function(u,h,m){const g=cn(u),y=g.Yi.get(m);return void 0!==y?Ke.resolve(g.Ji.get(y)):g.Bs.getTargetData(h,m)}(i,o,Xo(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(o,u.targetId).next(h=>{s=h})}).next(()=>i.Hi.getDocumentsMatchingQuery(o,e,t?r:Un.min(),t?s:vi())).next(u=>(qB(i,S2(e),u),{documents:u,ir:s})))}function WB(n,e){const t=cn(n),i=cn(t.Bs),r=t.Ji.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.le(s,e).next(o=>o?o.target:null))}function YB(n,e){const t=cn(n),i=t.Xi.get(e)||Un.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Zi.getAllFromCollectionGroup(r,e,zN(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(qB(t,e,r),r))}function qB(n,e,t){let i=n.Xi.get(e)||Un.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(e,i)}function Jj(n,e){return(QF=QF||(0,ot.Z)(function*(t,i,r=vi()){const s=yield by(t,Xo(Kk(i.bundledQuery))),o=cn(t);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Ts(i.readTime);if(s.snapshotVersion.compareTo(h)>=0)return o.qs.saveNamedQuery(u,i);const m=s.withResumeToken(Ys.EMPTY_BYTE_STRING,h);return o.Ji=o.Ji.insert(m.targetId,m),o.Bs.updateTargetData(u,m).next(()=>o.Bs.removeMatchingKeysForTargetId(u,s.targetId)).next(()=>o.Bs.addMatchingKeys(u,r,s.targetId)).next(()=>o.qs.saveNamedQuery(u,i))})})).apply(this,arguments)}function KB(n,e){return`firestore_clients_${n}_${e}`}function ZB(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function lR(n,e){return`firestore_targets_${n}_${e}`}class uS{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static ar(e,t,i){const r=JSON.parse(i);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new wt(r.error.code,r.error.message))),o?new uS(e,t,r.state,s):(xs("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uw{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static ar(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new wt(i.error.code,i.error.message))),s?new Uw(e,i.state,r):(xs("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=Nk();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=qN(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new dS(e,s):(xs("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cR{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cR(t.clientId,t.onlineState):(xs("SharedClientState",`Failed to parse online state: ${e}`),null)}}class uR{constructor(){this.activeTargetIds=Nk()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dR{constructor(e,t,i,r,s){this.window=e,this.ii=t,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Cr(hi),this.started=!1,this.yr=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=KB(this.persistenceKey,this.wr),this.Ir=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new uR),this.Tr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vr=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Rr=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ot.Z)(function*(){const t=yield e.syncEngine.$i();for(const r of t){if(r===e.wr)continue;const s=e.getItem(KB(e.persistenceKey,r));if(s){const o=dS.ar(r,s);o&&(e.gr=e.gr.insert(o.clientId,o))}}e.Pr();const i=e.storage.getItem(e.vr);if(i){const r=e.br(i);r&&e.Vr(r)}for(const r of e.yr)e.mr(r);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,i){this.Dr(e,t,i),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(lR(this.persistenceKey,e));if(i){const r=Uw.ar(e,i);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lR(this.persistenceKey,e))}updateQueryState(e,t,i){this.kr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Cr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pt("SharedClientState","READ",e,t),t}setItem(e,t){Pt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Pt("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void xs("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ot.Z)(function*(){if(t.started){if(null!==i.key)if(t.Tr.test(i.key)){if(null==i.newValue){const r=t.Or(i.key);return t.Fr(r,null)}{const r=t.Br(i.key,i.newValue);if(r)return t.Fr(r.clientId,r)}}else if(t.Er.test(i.key)){if(null!==i.newValue){const r=t.Lr(i.key,i.newValue);if(r)return t.qr(r)}}else if(t.Ar.test(i.key)){if(null!==i.newValue){const r=t.Ur(i.key,i.newValue);if(r)return t.Kr(r)}}else if(i.key===t.vr){if(null!==i.newValue){const r=t.br(i.newValue);if(r)return t.Vr(r)}}else if(i.key===t.Ir){const r=function(s){let o=nl.ct;if(null!=s)try{const u=JSON.parse(s);Nn("number"==typeof u),o=u}catch(u){xs("SharedClientState","Failed to read sequence number from WebStorage",u)}return o}(i.newValue);r!==nl.ct&&t.sequenceNumberHandler(r)}else if(i.key===t.Rr){const r=t.Gr(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,i){const r=new uS(this.currentUser,e,t,i),s=ZB(this.persistenceKey,this.currentUser,e);this.setItem(s,r.hr())}Cr(e){const t=ZB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,i){const r=lR(this.persistenceKey,e),s=new Uw(e,t,i);this.setItem(r,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const i=this.Or(e);return dS.ar(i,t)}Lr(e,t){const i=this.Er.exec(e),r=Number(i[1]);return uS.ar(new to(void 0!==i[2]?i[2]:null),r,t)}Ur(e,t){const i=this.Ar.exec(e),r=Number(i[1]);return Uw.ar(r,t)}br(e){return cR.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ot.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Pt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const i=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),s=this.Sr(i),o=[],u=[];return s.forEach(h=>{r.has(h)||o.push(h)}),r.forEach(h=>{s.has(h)||u.push(h)}),this.syncEngine.Wr(o,u).then(()=>{this.gr=i})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Nk();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class XB{constructor(){this.Hr=new uR,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,i){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new uR,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eG{Yr(e){}shutdown(){}}class QB{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Pt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Pt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let hS=null;function hR(){return null===hS?hS=268435456+Math.round(2147483648*Math.random()):hS++,"0x"+hS.toString(16)}const tG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nG{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Fo="WebChannelConnection";class iG extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,i,r,s){const o=hR(),u=this.To(e,t);Pt("RestConnection",`Sending RPC '${e}' ${o}:`,u,i);const h={};return this.Eo(h,r,s),this.Ao(e,u,h,i).then(m=>(Pt("RestConnection",`Received RPC '${e}' ${o}: `,m),m),m=>{throw kl("RestConnection",`RPC '${e}' ${o} failed with error: `,m,"url: ",u,"request:",i),m})}vo(e,t,i,r,s,o){return this.Io(e,t,i,r,s)}Eo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+sy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}To(e,t){return`${this.mo}/v1/${t}:${tG[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,i,r){const s=hR();return new Promise((o,u)=>{const h=new ez;h.setWithCredentials(!0),h.listenOnce(XH.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case bk.NO_ERROR:const g=h.getResponseJson();Pt(Fo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),o(g);break;case bk.TIMEOUT:Pt(Fo,`RPC '${e}' ${s} timed out`),u(new wt(tt.DEADLINE_EXCEEDED,"Request time out"));break;case bk.HTTP_ERROR:const y=h.getStatus();if(Pt(Fo,`RPC '${e}' ${s} failed with status:`,y,"response text:",h.getResponseText()),y>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const x=E?.error;if(x&&x.status&&x.message){const I=function(k){const P=k.toLowerCase().replace(/_/g,"-");return Object.values(tt).indexOf(P)>=0?P:tt.UNKNOWN}(x.status);u(new wt(I,x.message))}else u(new wt(tt.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new wt(tt.UNAVAILABLE,"Connection failed."));break;default:En()}}finally{Pt(Fo,`RPC '${e}' ${s} completed.`)}});const m=JSON.stringify(r);Pt(Fo,`RPC '${e}' ${s} sending request:`,r),h.send(t,"POST",m,i,15)})}Ro(e,t,i){const r=hR(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=KH(),u=ZH(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;void 0!==m&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.xmlHttpFactory=new JH({})),this.Eo(h.initMessageHeaders,t,i),h.encodeInitMessageHeaders=!0;const g=s.join("");Pt(Fo,`Creating RPC '${e}' stream ${r}: ${g}`,h);const y=o.createWebChannel(g,h);let E=!1,x=!1;const I=new nG({ro:P=>{x?Pt(Fo,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(E||(Pt(Fo,`Opening RPC '${e}' stream ${r} transport.`),y.open(),E=!0),Pt(Fo,`RPC '${e}' stream ${r} sending:`,P),y.send(P))},oo:()=>y.close()}),k=(P,q,ae)=>{P.listen(q,ee=>{try{ae(ee)}catch(ye){setTimeout(()=>{throw ye},0)}})};return k(y,RI.EventType.OPEN,()=>{x||Pt(Fo,`RPC '${e}' stream ${r} transport opened.`)}),k(y,RI.EventType.CLOSE,()=>{x||(x=!0,Pt(Fo,`RPC '${e}' stream ${r} transport closed`),I.wo())}),k(y,RI.EventType.ERROR,P=>{x||(x=!0,kl(Fo,`RPC '${e}' stream ${r} transport errored:`,P),I.wo(new wt(tt.UNAVAILABLE,"The operation could not be completed")))}),k(y,RI.EventType.MESSAGE,P=>{var q;if(!x){const ae=P.data[0];Nn(!!ae);const ye=ae.error||(null===(q=ae[0])||void 0===q?void 0:q.error);if(ye){Pt(Fo,`RPC '${e}' stream ${r} received error:`,ye);const De=ye.status;let dt=function(Dt){const Nt=Os[Dt];if(void 0!==Nt)return W2(Nt)}(De),it=ye.message;void 0===dt&&(dt=tt.INTERNAL,it="Unknown error status: "+De+" with message "+ye.message),x=!0,I.wo(new wt(dt,it)),y.close()}else Pt(Fo,`RPC '${e}' stream ${r} received:`,ae),I._o(ae)}}),k(u,QH.STAT_EVENT,P=>{P.stat===YF.PROXY?Pt(Fo,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===YF.NOPROXY&&Pt(Fo,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{I.fo()},0),I}}function JB(){return typeof window<"u"?window:null}function fS(){return typeof document<"u"?document:null}function $w(n){return new fj(n,!0)}class fR{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-i);r>0&&Pt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class eU{constructor(e,t,i,r,s,o,u,h){this.ii=e,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new fR(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ot.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ot.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var i=this;return(0,ot.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==e?i.qo.reset():t&&t.code===tt.RESOURCE_EXHAUSTED?(xs(t.toString()),xs("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):t&&t.code===tt.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===t&&this.Zo(i,r)},i=>{e(()=>{const r=new wt(tt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,t){const i=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var e=this;this.state=5,this.qo.No((0,ot.Z)(function*(){e.state=0,e.start()}))}tu(e){return Pt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Pt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rG extends eU{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function gj(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(h=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===h?1:"REMOVE"===h?2:"CURRENT"===h?3:"RESET"===h?4:En(),r=e.targetChange.targetIds||[],s=function(h,m){return h.useProto3Json?(Nn(void 0===m||"string"==typeof m),Ys.fromBase64String(m||"")):(Nn(void 0===m||m instanceof Uint8Array),Ys.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const m=void 0===h.code?tt.UNKNOWN:W2(h.code);return new wt(m,h.message||"")}(o);t=new X2(i,r,s,u||null)}else if("documentChange"in e){const i=e.documentChange,r=wu(n,i.document.name),s=Ts(i.document.updateTime),o=i.document.createTime?Ts(i.document.createTime):Un.min(),u=new xo({mapValue:{fields:i.document.fields}}),h=Ur.newFoundDocument(r,s,o,u);t=new XI(i.targetIds||[],i.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const i=e.documentDelete,r=wu(n,i.document),s=i.readTime?Ts(i.readTime):Un.min(),o=Ur.newNoDocument(r,s);t=new XI([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,r=wu(n,i.document);t=new XI([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return En();{const i=e.filter,{count:r=0,unchangedNames:s}=i,o=new aj(r,s);t=new Z2(i.targetId,o)}}var h;return t}(this.serializer,e),i=function(r){if(!("targetChange"in r))return Un.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Un.min():s.readTime?Ts(s.readTime):Un.min()}(e);return this.listener.nu(t,i)}su(e){const t={};t.database=Mw(this.serializer),t.addTarget=function(r,s){let o;const u=s.target;if(o=zI(u)?{documents:aB(r,u)}:{query:qk(r,u)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=tB(r,s.resumeToken);const h=jk(r,s.expectedCount);null!==h&&(o.expectedCount=h)}else if(s.snapshotVersion.compareTo(Un.min())>0){o.readTime=gy(r,s.snapshotVersion.toTimestamp());const h=jk(r,s.expectedCount);null!==h&&(o.expectedCount=h)}return o}(this.serializer,e);const i=function yj(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return En()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Wo(t)}iu(e){const t={};t.database=Mw(this.serializer),t.removeTarget=e,this.Wo(t)}}class sG extends eU{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Nn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function _j(n,e){return n&&n.length>0?(Nn(void 0!==e),n.map(t=>function(i,r){let s=Ts(i.updateTime?i.updateTime:r);return s.isEqual(Un.min())&&(s=Ts(r)),new ij(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Ts(e.commitTime);return this.listener.cu(i,t)}return Nn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Mw(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>kw(this.serializer,i))};this.Wo(t)}}class oG extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new wt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new wt(tt.UNKNOWN,r.toString())})}vo(e,t,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,t,i,s,o,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new wt(tt.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class lG{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(xs(t),this.mu=!1):Pt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class cG{constructor(e,t,i,r,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(u=>{i.enqueueAndForget((0,ot.Z)(function*(){var h;Lf(o)&&(Pt("RemoteStore","Restarting streams for network reachability change."),yield function(m){return(h=h||(0,ot.Z)(function*(g){const y=cn(g);y.vu.add(4),yield Ey(y),y.bu.set("Unknown"),y.vu.delete(4),yield Vw(y)})).apply(this,arguments)}(o))}))}),this.bu=new lG(i,r)}}function Vw(n){return(eN=eN||(0,ot.Z)(function*(e){if(Lf(e))for(const t of e.Ru)yield t(!0)})).apply(this,arguments)}function Ey(n){return(tN=tN||(0,ot.Z)(function*(e){for(const t of e.Ru)yield t(!1)})).apply(this,arguments)}function mS(n,e){const t=cn(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),gR(t)?pR(t):Ty(t).Ko()&&mR(t,e))}function Hw(n,e){const t=cn(n),i=Ty(t);t.Au.delete(e),i.Ko()&&tU(t,e),0===t.Au.size&&(i.Ko()?i.jo():Lf(t)&&t.bu.set("Unknown"))}function mR(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Un.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ty(n).su(e)}function tU(n,e){n.Vu.qt(e),Ty(n).iu(e)}function pR(n){n.Vu=new cj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Ty(n).start(),n.bu.gu()}function gR(n){return Lf(n)&&!Ty(n).Uo()&&n.Au.size>0}function Lf(n){return 0===cn(n).vu.size}function nU(n){n.Vu=void 0}function uG(n){return(nN=nN||(0,ot.Z)(function*(e){e.Au.forEach((t,i)=>{mR(e,t)})})).apply(this,arguments)}function dG(n,e){return(iN=iN||(0,ot.Z)(function*(t,i){nU(t),gR(t)?(t.bu.Iu(i),pR(t)):t.bu.set("Unknown")})).apply(this,arguments)}function hG(n,e,t){return(rN=rN||(0,ot.Z)(function*(i,r,s){if(i.bu.set("Online"),r instanceof X2&&2===r.state&&r.cause)try{var o;yield function(u,h){return(o=o||(0,ot.Z)(function*(m,g){const y=g.cause;for(const E of g.targetIds)m.Au.has(E)&&(yield m.remoteSyncer.rejectListen(E,y),m.Au.delete(E),m.Vu.removeTarget(E))})).apply(this,arguments)}(i,r)}catch(u){Pt("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),u),yield pS(i,u)}else if(r instanceof XI?i.Vu.Ht(r):r instanceof Z2?i.Vu.ne(r):i.Vu.Xt(r),!s.isEqual(Un.min()))try{const u=yield jB(i.localStore);s.compareTo(u)>=0&&(yield function(h,m){const g=h.Vu.ce(m);return g.targetChanges.forEach((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const x=h.Au.get(E);x&&h.Au.set(E,x.withResumeToken(y.resumeToken,m))}}),g.targetMismatches.forEach((y,E)=>{const x=h.Au.get(y);if(!x)return;h.Au.set(y,x.withResumeToken(Ys.EMPTY_BYTE_STRING,x.snapshotVersion)),tU(h,y);const I=new kd(x.target,y,E,x.sequenceNumber);mR(h,I)}),h.remoteSyncer.applyRemoteEvent(g)}(i,s))}catch(u){Pt("RemoteStore","Failed to raise snapshot:",u),yield pS(i,u)}})).apply(this,arguments)}function pS(n,e,t){return(sN=sN||(0,ot.Z)(function*(i,r,s){if(!xf(r))throw r;i.vu.add(1),yield Ey(i),i.bu.set("Offline"),s||(s=()=>jB(i.localStore)),i.asyncQueue.enqueueRetryable((0,ot.Z)(function*(){Pt("RemoteStore","Retrying IndexedDB access"),yield s(),i.vu.delete(1),yield Vw(i)}))})).apply(this,arguments)}function iU(n,e){return e().catch(t=>pS(n,t,e))}function xy(n){return(oN=oN||(0,ot.Z)(function*(e){const t=cn(e),i=Ff(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;fG(t);)try{const s=yield Xj(t.localStore,r);if(null===s){0===t.Eu.length&&i.jo();break}r=s.batchId,mG(t,s)}catch(s){yield pS(t,s)}rU(t)&&sU(t)})).apply(this,arguments)}function fG(n){return Lf(n)&&n.Eu.length<10}function mG(n,e){n.Eu.push(e);const t=Ff(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function rU(n){return Lf(n)&&!Ff(n).Uo()&&n.Eu.length>0}function sU(n){Ff(n).start()}function pG(n){return(aN=aN||(0,ot.Z)(function*(e){Ff(e).hu()})).apply(this,arguments)}function gG(n){return(lN=lN||(0,ot.Z)(function*(e){const t=Ff(e);for(const i of e.Eu)t.uu(i.mutations)})).apply(this,arguments)}function _G(n,e,t){return(cN=cN||(0,ot.Z)(function*(i,r,s){const o=i.Eu.shift(),u=$k.from(o,r,s);yield iU(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield xy(i)})).apply(this,arguments)}function yG(n,e){return(uN=uN||(0,ot.Z)(function*(t,i){var r;i&&Ff(t).ou&&(yield function(s,o){return(r=r||(0,ot.Z)(function*(u,h){if(G2(m=h.code)&&m!==tt.ABORTED){const g=u.Eu.shift();Ff(u).Qo(),yield iU(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,h)),yield xy(u)}var m})).apply(this,arguments)}(t,i)),rU(t)&&sU(t)})).apply(this,arguments)}function oU(n,e){return(dN=dN||(0,ot.Z)(function*(t,i){const r=cn(t);r.asyncQueue.verifyOperationInProgress(),Pt("RemoteStore","RemoteStore received new credentials");const s=Lf(r);r.vu.add(3),yield Ey(r),s&&r.bu.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(i),r.vu.delete(3),yield Vw(r)})).apply(this,arguments)}function _R(n,e){return(hN=hN||(0,ot.Z)(function*(t,i){const r=cn(t);i?(r.vu.delete(2),yield Vw(r)):i||(r.vu.add(2),yield Ey(r),r.bu.set("Unknown"))})).apply(this,arguments)}function Ty(n){var e;return n.Su||(n.Su=function(t,i,r){const s=cn(t);return s.fu(),new rG(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:uG.bind(null,n),ao:dG.bind(null,n),nu:hG.bind(null,n)}),n.Ru.push(function(t){return(e=e||(0,ot.Z)(function*(i){i?(n.Su.Qo(),gR(n)?pR(n):n.bu.set("Unknown")):(yield n.Su.stop(),nU(n))})).apply(this,arguments)})),n.Su}function Ff(n){var e;return n.Du||(n.Du=function(t,i,r){const s=cn(t);return s.fu(),new sG(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:pG.bind(null,n),ao:yG.bind(null,n),au:gG.bind(null,n),cu:_G.bind(null,n)}),n.Ru.push(function(t){return(e=e||(0,ot.Z)(function*(i){i?(n.Du.Qo(),yield xy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Pt("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))})).apply(this,arguments)})),n.Du}class yR{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,u=new yR(e,t,o,r,s);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wt(tt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cy(n,e){if(xs("AsyncQueue",`${e}: ${n}`),xf(n))return new wt(tt.UNAVAILABLE,`${e}: ${n}`);throw n}class Iy{constructor(e){this.comparator=e?(t,i)=>e(t,i)||rn.comparator(t.key,i.key):(t,i)=>rn.comparator(t.key,i.key),this.keyedMap=Ew(),this.sortedSet=new Cr(this.comparator)}static emptySet(e){return new Iy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Iy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Iy;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class aU{constructor(){this.Cu=new Cr(rn.comparator)}track(e){const t=e.doc.key,i=this.Cu.get(t);i?0!==e.type&&3===i.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==i.type?this.Cu=this.Cu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Cu=this.Cu.remove(t):1===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):En():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Sy{constructor(e,t,i,r,s,o,u,h,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(u=>{o.push({type:0,doc:u})}),new Sy(e,t,Iy.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class vG{constructor(){this.Nu=void 0,this.listeners=[]}}class bG{constructor(){this.queries=new Ad(e=>I2(e),bw),this.onlineState="Unknown",this.ku=new Set}}function vR(n,e){return(fN=fN||(0,ot.Z)(function*(t,i){const r=cn(t),s=i.query;let o=!1,u=r.queries.get(s);if(u||(o=!0,u=new vG),o)try{u.Nu=yield r.onListen(s)}catch(h){const m=Cy(h,`Initialization of query '${Fk(i.query)}' failed`);return void i.onError(m)}r.queries.set(s,u),u.listeners.push(i),i.Mu(r.onlineState),u.Nu&&i.$u(u.Nu)&&wR(r)})).apply(this,arguments)}function bR(n,e){return(mN=mN||(0,ot.Z)(function*(t,i){const r=cn(t),s=i.query;let o=!1;const u=r.queries.get(s);if(u){const h=u.listeners.indexOf(i);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return r.queries.delete(s),r.onUnlisten(s)})).apply(this,arguments)}function wG(n,e){const t=cn(n);let i=!1;for(const r of e){const o=t.queries.get(r.query);if(o){for(const u of o.listeners)u.$u(r)&&(i=!0);o.Nu=r}}i&&wR(t)}function EG(n,e,t){const i=cn(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function wR(n){n.ku.forEach(e=>{e.next()})}class ER{constructor(e,t,i){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Sy(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Sy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class xG{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class lU{constructor(e){this.serializer=e}rr(e){return wu(this.serializer,e)}ur(e){return e.metadata.exists?oB(this.serializer,e.document,!1):Ur.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ts(e)}}class TG{constructor(e,t,i){this.ju=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cU(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const i=qi.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,i=new lU(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const o of r.metadata.queries){const u=(t.get(o)||vi()).add(s);t.set(o,u)}}return t}complete(){var e=this;return(0,ot.Z)(function*(){const t=yield function Qj(n,e,t,i){return(XF=XF||(0,ot.Z)(function*(r,s,o,u){const h=cn(r);let m=vi(),g=Ta();for(const x of o){const I=s.rr(x.metadata.name);x.document&&(m=m.add(I));const k=s.ur(x);k.setReadTime(s.cr(x.metadata.readTime)),g=g.insert(I,k)}const y=h.Zi.newChangeBuffer({trackRemovals:!0}),E=yield by(h,(x=u,Xo(dy(qi.fromString(`__bundle__/docs/${x}`)))));var x;return h.persistence.runTransaction("Apply bundle documents","readwrite",x=>GB(x,y,g).next(I=>(y.apply(x),I)).next(I=>h.Bs.removeMatchingKeysForTargetId(x,E.targetId).next(()=>h.Bs.addMatchingKeys(x,m,E.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(x,I.nr,I.sr)).next(()=>I.nr)))})).apply(this,arguments)}(e.localStore,new lU(e.serializer),e.documents,e.ju.id),i=e.Wu(e.documents);for(const r of e.queries)yield Jj(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function cU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class uU{constructor(e){this.key=e}}class dU{constructor(e){this.key=e}}class hU{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=vi(),this.mutatedKeys=vi(),this.tc=D2(e),this.ec=new Iy(this.tc)}get nc(){return this.Yu}sc(e,t){const i=t?t.ic:new aU,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,u=!1;const h="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,m="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,y)=>{const E=r.get(g),x=ww(this.query,y)?y:null,I=!!E&&this.mutatedKeys.has(E.key),k=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let P=!1;E&&x?E.data.isEqual(x.data)?I!==k&&(i.track({type:3,doc:x}),P=!0):this.rc(E,x)||(i.track({type:2,doc:x}),P=!0,(h&&this.tc(x,h)>0||m&&this.tc(x,m)<0)&&(u=!0)):!E&&x?(i.track({type:0,doc:x}),P=!0):E&&!x&&(i.track({type:1,doc:E}),P=!0,(h||m)&&(u=!0)),P&&(x?(o=o.add(x),s=k?s.add(g):s.delete(g)):(o=o.delete(g),s=s.delete(g)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const g="F"===this.query.limitType?o.last():o.first();o=o.delete(g.key),s=s.delete(g.key),i.track({type:1,doc:g})}return{ec:o,ic:i,zi:u,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((m,g)=>function(y,E){const x=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return En()}};return x(y)-x(E)}(m.type,g.type)||this.tc(m.doc,g.doc)),this.oc(i);const o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,h=u!==this.Xu;return this.Xu=u,0!==s.length||h?{snapshot:new Sy(this.query,e.ec,r,s,e.mutatedKeys,0===u,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new aU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=vi(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const t=[];return e.forEach(i=>{this.Zu.has(i)||t.push(new dU(i))}),this.Zu.forEach(i=>{e.has(i)||t.push(new uU(i))}),t}hc(e){this.Yu=e.ir,this.Zu=vi();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Sy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class CG{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class IG{constructor(e){this.key=e,this.fc=!1}}class SG{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Ad(u=>I2(u),bw),this._c=new Map,this.mc=new Set,this.gc=new Cr(rn.comparator),this.yc=new Map,this.Ic=new nR,this.Tc={},this.Ec=new Map,this.Ac=Yp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function DG(n,e){return(pN=pN||(0,ot.Z)(function*(t,i){const r=DR(t);let s,o;const u=r.wc.get(i);if(u)s=u.targetId,r.sharedClientState.addLocalQueryTarget(s),o=u.view.lc();else{const h=yield by(r.localStore,Xo(i)),m=r.sharedClientState.addLocalQueryTarget(h.targetId);s=h.targetId,o=yield xR(r,i,s,"current"===m,h.resumeToken),r.isPrimaryClient&&mS(r.remoteStore,h)}return o})).apply(this,arguments)}function xR(n,e,t,i,r){return(gN=gN||(0,ot.Z)(function*(s,o,u,h,m){s.Rc=(P,q,ae)=>{var ee;return function(ye,De,dt,it){return(ee=ee||(0,ot.Z)(function*(Dt,Nt,mt,Hn){let dn=Nt.view.sc(mt);dn.zi&&(dn=yield cS(Dt.localStore,Nt.query,!1).then(({documents:cr})=>Nt.view.sc(cr,dn)));const Oi=Hn&&Hn.targetChanges.get(Nt.targetId),Ss=Nt.view.applyChanges(dn,Dt.isPrimaryClient,Oi);return IR(Dt,Nt.targetId,Ss.cc),Ss.snapshot})).apply(this,arguments)}(s,P,q,ae)};const g=yield cS(s.localStore,o,!0),y=new hU(o,g.ir),E=y.sc(g.documents),x=Dw.createSynthesizedTargetChangeForCurrentChange(u,h&&"Offline"!==s.onlineState,m),I=y.applyChanges(E,s.isPrimaryClient,x);IR(s,u,I.cc);const k=new CG(o,u,y);return s.wc.set(o,k),s._c.has(u)?s._c.get(u).push(o):s._c.set(u,[o]),I.snapshot})).apply(this,arguments)}function AG(n,e){return(_N=_N||(0,ot.Z)(function*(t,i){const r=cn(t),s=r.wc.get(i),o=r._c.get(s.targetId);if(o.length>1)return r._c.set(s.targetId,o.filter(u=>!bw(u,i))),void r.wc.delete(i);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield wy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),Hw(r.remoteStore,s.targetId),Dy(r,s.targetId)}).catch(Ef))):(Dy(r,s.targetId),yield wy(r.localStore,s.targetId,!0))})).apply(this,arguments)}function fU(n,e){return(vN=vN||(0,ot.Z)(function*(t,i){const r=cn(t);try{const s=yield function Zj(n,e){const t=cn(n),i=e.snapshotVersion;let r=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Zi.newChangeBuffer({trackRemovals:!0});r=t.Ji;const u=[];e.targetChanges.forEach((g,y)=>{const E=r.get(y);if(!E)return;u.push(t.Bs.removeMatchingKeys(s,g.removedDocuments,y).next(()=>t.Bs.addMatchingKeys(s,g.addedDocuments,y)));let x=E.withSequenceNumber(s.currentSequenceNumber);var I,k,P;null!==e.targetMismatches.get(y)?x=x.withResumeToken(Ys.EMPTY_BYTE_STRING,Un.min()).withLastLimboFreeSnapshotVersion(Un.min()):g.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(g.resumeToken,i)),r=r.insert(y,x),k=x,P=g,(0===(I=E).resumeToken.approximateByteSize()||k.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8||P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0)&&u.push(t.Bs.updateTargetData(s,x))});let h=Ta(),m=vi();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),u.push(GB(s,o,e.documentUpdates).next(g=>{h=g.nr,m=g.sr})),!i.isEqual(Un.min())){const g=t.Bs.getLastRemoteSnapshotVersion(s).next(y=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));u.push(g)}return Ke.waitFor(u).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,h,m)).next(()=>h)}).then(s=>(t.Ji=r,s))}(r.localStore,i);i.targetChanges.forEach((o,u)=>{const h=r.yc.get(u);h&&(Nn(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.fc=!0:o.modifiedDocuments.size>0?Nn(h.fc):o.removedDocuments.size>0&&(Nn(h.fc),h.fc=!1))}),yield Rd(r,s,i)}catch(s){yield Ef(s)}})).apply(this,arguments)}function mU(n,e,t){const i=cn(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.wc.forEach((s,o)=>{const u=o.view.Mu(e);u.snapshot&&r.push(u.snapshot)}),function(s,o){const u=cn(s);u.onlineState=o;let h=!1;u.queries.forEach((m,g)=>{for(const y of g.listeners)y.Mu(o)&&(h=!0)}),h&&wR(u)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function kG(n,e,t){return(bN=bN||(0,ot.Z)(function*(i,r,s){const o=cn(i);o.sharedClientState.updateQueryState(r,"rejected",s);const u=o.yc.get(r),h=u&&u.key;if(h){let m=new Cr(rn.comparator);m=m.insert(h,Ur.newNoDocument(h,Un.min()));const g=vi().add(h),y=new Sw(Un.min(),new Map,new Cr(hi),m,g);yield fU(o,y),o.gc=o.gc.remove(h),o.yc.delete(r),SR(o)}else yield wy(o.localStore,r,!1).then(()=>Dy(o,r,s)).catch(Ef)})).apply(this,arguments)}function RG(n,e){return(wN=wN||(0,ot.Z)(function*(t,i){const r=cn(t),s=i.batch.batchId;try{const o=yield function Kj(n,e){const t=cn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(o,u,h,m){const g=h.batch,y=g.keys();let E=Ke.resolve();return y.forEach(x=>{E=E.next(()=>m.getEntry(u,x)).next(I=>{const k=h.docVersions.get(x);Nn(null!==k),I.version.compareTo(k)<0&&(g.applyToRemoteDocument(I,h),I.isValidDocument()&&(I.setReadTime(h.commitVersion),m.addEntry(I)))})}),E.next(()=>o.mutationQueue.removeMutationBatch(u,g))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let u=vi();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(u=u.add(o.batch.mutations[h].key));return u}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(r.localStore,i);CR(r,s,null),TR(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield Rd(r,o)}catch(o){yield Ef(o)}})).apply(this,arguments)}function OG(n,e,t){return(EN=EN||(0,ot.Z)(function*(i,r,s){const o=cn(i);try{const u=yield function(h,m){const g=cn(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return g.mutationQueue.lookupMutationBatch(y,m).next(x=>(Nn(null!==x),E=x.keys(),g.mutationQueue.removeMutationBatch(y,x))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,E,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>g.localDocuments.getDocuments(y,E))})}(o.localStore,r);CR(o,r,s),TR(o,r),o.sharedClientState.updateMutationState(r,"rejected",s),yield Rd(o,u)}catch(u){yield Ef(u)}})).apply(this,arguments)}function TR(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function CR(n,e,t){const i=cn(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function Dy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n._c.get(e))n.wc.delete(i),t&&n.dc.Pc(i,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(i=>{n.Ic.containsKey(i)||pU(n,i)})}function pU(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Hw(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),SR(n))}function IR(n,e,t){for(const i of t)i instanceof uU?(n.Ic.addReference(i.key,e),LG(n,i)):i instanceof dU?(Pt("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,e),n.Ic.containsKey(i.key)||pU(n,i.key)):En()}function LG(n,e){const t=e.key,i=t.path.canonicalString();n.gc.get(t)||n.mc.has(i)||(Pt("SyncEngine","New document in limbo: "+t),n.mc.add(i),SR(n))}function SR(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new rn(qi.fromString(e)),i=n.Ac.next();n.yc.set(i,new IG(t)),n.gc=n.gc.insert(t,i),mS(n.remoteStore,new kd(Xo(dy(t.path)),i,"TargetPurposeLimboResolution",nl.ct))}}function Rd(n,e,t){return(TN=TN||(0,ot.Z)(function*(i,r,s){var o;const u=cn(i),h=[],m=[],g=[];u.wc.isEmpty()||(u.wc.forEach((y,E)=>{g.push(u.Rc(E,r,s).then(x=>{if((x||s)&&u.isPrimaryClient&&u.sharedClientState.updateQueryState(E.targetId,x?.fromCache?"not-current":"current"),x){h.push(x);const I=aR.Li(E.targetId,x);m.push(I)}}))}),yield Promise.all(g),u.dc.nu(h),yield function(y,E){return(o=o||(0,ot.Z)(function*(x,I){const k=cn(x);try{yield k.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>Ke.forEach(I,q=>Ke.forEach(q.Fi,ae=>k.persistence.referenceDelegate.addReference(P,q.targetId,ae)).next(()=>Ke.forEach(q.Bi,ae=>k.persistence.referenceDelegate.removeReference(P,q.targetId,ae)))))}catch(P){if(!xf(P))throw P;Pt("LocalStore","Failed to update sequence numbers: "+P)}for(const P of I){const q=P.targetId;if(!P.fromCache){const ae=k.Ji.get(q),ye=ae.withLastLimboFreeSnapshotVersion(ae.snapshotVersion);k.Ji=k.Ji.insert(q,ye)}}})).apply(this,arguments)}(u.localStore,m))})).apply(this,arguments)}function FG(n,e){return(CN=CN||(0,ot.Z)(function*(t,i){const r=cn(t);if(!r.currentUser.isEqual(i)){Pt("SyncEngine","User change. New user:",i.toKey());const s=yield zB(r.localStore,i);r.currentUser=i,function(o,u){o.Ec.forEach(h=>{h.forEach(m=>{m.reject(new wt(tt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear()}(r),r.sharedClientState.handleUserChange(i,s.removedBatchIds,s.addedBatchIds),yield Rd(r,s.er)}})).apply(this,arguments)}function NG(n,e){const t=cn(n),i=t.yc.get(e);if(i&&i.fc)return vi().add(i.key);{let r=vi();const s=t._c.get(e);if(!s)return r;for(const o of s){const u=t.wc.get(o);r=r.unionWith(u.view.nc)}return r}}function BG(n,e){return(IN=IN||(0,ot.Z)(function*(t,i){const r=cn(t),s=yield cS(r.localStore,i.query,!0),o=i.view.hc(s);return r.isPrimaryClient&&IR(r,i.targetId,o.cc),o})).apply(this,arguments)}function UG(n,e){return(SN=SN||(0,ot.Z)(function*(t,i){const r=cn(t);return YB(r.localStore,i).then(s=>Rd(r,s))})).apply(this,arguments)}function $G(n,e,t,i){return(DN=DN||(0,ot.Z)(function*(r,s,o,u){const h=cn(r),m=yield function(g,y){const E=cn(g),x=cn(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",I=>x.Sn(I,y).next(k=>k?E.localDocuments.getDocuments(I,k):Ke.resolve(null)))}(h.localStore,s);var y;null!==m?("pending"===o?yield xy(h.remoteStore):"acknowledged"===o||"rejected"===o?(CR(h,s,u||null),TR(h,s),y=s,cn(cn(h.localStore).mutationQueue).Cn(y)):En(),yield Rd(h,m)):Pt("SyncEngine","Cannot apply mutation batch with id: "+s)})).apply(this,arguments)}function gU(n,e,t){return(MN=MN||(0,ot.Z)(function*(i,r,s){const o=cn(i),u=[],h=[];for(const m of r){let g;const y=o._c.get(m);if(y&&0!==y.length){g=yield by(o.localStore,Xo(y[0]));for(const E of y){const x=o.wc.get(E),I=yield BG(o,x);I.snapshot&&h.push(I.snapshot)}}else{const E=yield WB(o.localStore,m);g=yield by(o.localStore,E),yield xR(o,_U(E),m,!1,g.resumeToken)}u.push(g)}return o.dc.nu(h),u})).apply(this,arguments)}function _U(n){return T2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function HG(n){const e=cn(n);return cn(cn(e.localStore).persistence).$i()}function zG(n,e,t,i){return(kN=kN||(0,ot.Z)(function*(r,s,o,u){const h=cn(r);if(h.vc)return void Pt("SyncEngine","Ignoring unexpected query state notification.");const m=h._c.get(s);if(m&&m.length>0)switch(o){case"current":case"not-current":{const g=yield YB(h.localStore,S2(m[0])),y=Sw.createSynthesizedRemoteEventForCurrentChange(s,"current"===o,Ys.EMPTY_BYTE_STRING);yield Rd(h,g,y);break}case"rejected":yield wy(h.localStore,s,!0),Dy(h,s,u);break;default:En()}})).apply(this,arguments)}function jG(n,e,t){return(RN=RN||(0,ot.Z)(function*(i,r,s){const o=DR(i);if(o.vc){for(const u of r){if(o._c.has(u)){Pt("SyncEngine","Adding an already active target "+u);continue}const h=yield WB(o.localStore,u),m=yield by(o.localStore,h);yield xR(o,_U(h),m.targetId,!1,m.resumeToken),mS(o.remoteStore,m)}for(const u of s)o._c.has(u)&&(yield wy(o.localStore,u,!1).then(()=>{Hw(o.remoteStore,u),Dy(o,u)}).catch(Ef))}})).apply(this,arguments)}function DR(n){const e=cn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kG.bind(null,e),e.dc.nu=wG.bind(null,e.eventManager),e.dc.Pc=EG.bind(null,e.eventManager),e}function AR(n){const e=cn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OG.bind(null,e),e}class zw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ot.Z)(function*(){t.serializer=$w(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return HB(this.persistence,new VB,e.initialUser,this.serializer)}createPersistence(e){return new iR(oS.zs,this.serializer)}createSharedClientState(e){return new XB}terminate(){var e=this;return(0,ot.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class MR extends zw{constructor(e,t,i){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ot.Z)(function*(){yield t().call(i,e),yield i.Vc.initialize(i,e),yield AR(i.Vc.syncEngine),yield xy(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return HB(this.persistence,new VB,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new RB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new _z(t,this.persistence);return new gz(e.asyncQueue,i)}createPersistence(e){const t=oR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Lo.withCacheSize(this.cacheSizeBytes):Lo.DEFAULT;return new sR(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,JB(),fS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new XB}}class yU extends MR{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ot.Z)(function*(){var r;yield t().call(i,e);const s=i.Vc.syncEngine;i.sharedClientState instanceof dR&&(i.sharedClientState.syncEngine={jr:$G.bind(null,s),zr:zG.bind(null,s),Wr:jG.bind(null,s),$i:HG.bind(null,s),Qr:UG.bind(null,s)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(o){return(r=r||(0,ot.Z)(function*(u){yield function VG(n,e){return(AN=AN||(0,ot.Z)(function*(t,i){const r=cn(t);if(DR(r),AR(r),!0===i&&!0!==r.vc){const s=r.sharedClientState.getAllActiveQueryTargets(),o=yield gU(r,s.toArray());r.vc=!0,yield _R(r.remoteStore,!0);for(const u of o)mS(r.remoteStore,u)}else if(!1===i&&!1!==r.vc){const s=[];let o=Promise.resolve();r._c.forEach((u,h)=>{r.sharedClientState.isLocalQueryTarget(h)?s.push(h):o=o.then(()=>(Dy(r,h),wy(r.localStore,h,!0))),Hw(r.remoteStore,h)}),yield o,yield gU(r,s),function(u){const h=cn(u);h.yc.forEach((m,g)=>{Hw(h.remoteStore,g)}),h.Ic.Ts(),h.yc=new Map,h.gc=new Cr(rn.comparator)}(r),r.vc=!1,yield _R(r.remoteStore,!1)}})).apply(this,arguments)}(i.Vc.syncEngine,u),i.gcScheduler&&(u&&!i.gcScheduler.started?i.gcScheduler.start():u||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(u&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():u||i.indexBackfillerScheduler.stop())})).apply(this,arguments)})})()}createSharedClientState(e){const t=JB();if(!dR.D(t))throw new wt(tt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=oR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dR(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Ay{initialize(e,t){var i=this;return(0,ot.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>mU(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=FG.bind(null,i.syncEngine),yield _R(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new bG}createDatastore(e){const t=$w(e.databaseInfo.databaseId),i=new iG(e.databaseInfo);return function(s,o,u,h){return new oG(s,o,u,h)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=u=>mU(this.syncEngine,u,0),o=QB.D()?new QB:new eG,new cG(t,i,r,s,o);var t,i,r,s,o}createSyncEngine(e,t){return function(i,r,s,o,u,h,m){const g=new SG(i,r,s,o,u,h);return m&&(g.vc=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e;return function(t){return(e=e||(0,ot.Z)(function*(i){const r=cn(i);Pt("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Ey(r),r.Pu.shutdown(),r.bu.set("Unknown")})).apply(this,arguments)}(this.remoteStore)}}function vU(n,e=10240){let t=0;return{read:()=>(0,ot.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ot.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class gS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):xs("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class YG{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Ws,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ot.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ot.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ot.Z)(function*(){const t=yield e.kc();if(null===t)return null;const i=e.xc.decode(t),r=Number(i);isNaN(r)&&e.Mc(`length string (${i}) is not valid number`);const s=yield e.$c(r);return new xG(JSON.parse(s),t.length+r)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ot.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}$c(e){var t=this;return(0,ot.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const i=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ot.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class qG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ot.Z)(function*(){var i;if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new wt(tt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield function(s,o){return(i=i||(0,ot.Z)(function*(u,h){const m=cn(u),g=Mw(m.serializer)+"/documents",y={documents:h.map(k=>Aw(m.serializer,k))},E=yield m.vo("BatchGetDocuments",g,y,h.length),x=new Map;E.forEach(k=>{const P=function pj(n,e){return"found"in e?function(t,i){Nn(!!i.found);const r=wu(t,i.found.name),s=Ts(i.found.updateTime),o=i.found.createTime?Ts(i.found.createTime):Un.min(),u=new xo({mapValue:{fields:i.found.fields}});return Ur.newFoundDocument(r,s,o,u)}(n,e):"missing"in e?function(t,i){Nn(!!i.missing),Nn(!!i.readTime);const r=wu(t,i.missing),s=Ts(i.readTime);return Ur.newNoDocument(r,s)}(n,e):En()}(m.serializer,k);x.set(P.key.toString(),P)});const I=[];return h.forEach(k=>{const P=x.get(k.toString());Nn(!!P),I.push(P)}),I})).apply(this,arguments)}(t.datastore,e);return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new py(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ot.Z)(function*(){var t;if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const i=e.readVersions;e.mutations.forEach(r=>{i.delete(r.key.toString())}),i.forEach((r,s)=>{const o=rn.fromPath(s);e.mutations.push(new Bk(o,e.precondition(o)))}),yield function(r,s){return(t=t||(0,ot.Z)(function*(o,u){const h=cn(o),m=Mw(h.serializer)+"/documents",g={writes:u.map(y=>kw(h.serializer,y))};yield h.Io("Commit",m,g)})).apply(this,arguments)}(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw En();t=Un.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new wt(tt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Un.min())?qr.exists(!1):qr.updateTime(t):qr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Un.min()))throw new wt(tt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qr.updateTime(t)}return qr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class KG{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new fR(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ot.Z)(function*(){const t=new qG(e.datastore),i=e.qc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Uc(s)}))}).catch(r=>{e.Uc(r)})}))}qc(e){try{const t=this.updateFunction(e);return!fw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!G2(t)}return!1}}class ZG{constructor(e,t,i,r){var o,s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=to.UNAUTHENTICATED,this.clientId=VN.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(u){return(o=o||(0,ot.Z)(function*(h){Pt("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h})).apply(this,arguments)}),this.appCheckCredentials.start(i,u=>(Pt("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,ot.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new wt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ot.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Cy(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function _S(n,e){return(ON=ON||(0,ot.Z)(function*(t,i){var r;t.asyncQueue.verifyOperationInProgress(),Pt("FirestoreClient","Initializing OfflineComponentProvider");const s=yield t.getConfiguration();yield i.initialize(s);let o=s.initialUser;t.setCredentialChangeListener(function(u){return(r=r||(0,ot.Z)(function*(h){o.isEqual(h)||(yield zB(i.localStore,h),o=h)})).apply(this,arguments)}),i.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=i})).apply(this,arguments)}function kR(n,e){return(PN=PN||(0,ot.Z)(function*(t,i){t.asyncQueue.verifyOperationInProgress();const r=yield RR(t);Pt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield t.getConfiguration();yield i.initialize(r,s),t.setCredentialChangeListener(o=>oU(i.remoteStore,o)),t.setAppCheckTokenChangeListener((o,u)=>oU(i.remoteStore,u)),t._onlineComponents=i})).apply(this,arguments)}function bU(n){return"FirebaseError"===n.name?n.code===tt.FAILED_PRECONDITION||n.code===tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function RR(n){return(LN=LN||(0,ot.Z)(function*(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Pt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _S(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!bU(i))throw i;kl("Error using user provided cache. Falling back to memory cache: "+i),yield _S(e,new zw)}}else Pt("FirestoreClient","Using default OfflineComponentProvider"),yield _S(e,new zw);return e._offlineComponents})).apply(this,arguments)}function yS(n){return(FN=FN||(0,ot.Z)(function*(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Pt("FirestoreClient","Using user provided OnlineComponentProvider"),yield kR(e,e._uninitializedComponentsProvider._online)):(Pt("FirestoreClient","Using default OnlineComponentProvider"),yield kR(e,new Ay))),e._onlineComponents})).apply(this,arguments)}function wU(n){return RR(n).then(e=>e.persistence)}function vS(n){return RR(n).then(e=>e.localStore)}function EU(n){return yS(n).then(e=>e.remoteStore)}function OR(n){return yS(n).then(e=>e.syncEngine)}function My(n){return(NN=NN||(0,ot.Z)(function*(e){const t=yield yS(e),i=t.eventManager;return i.onListen=DG.bind(null,t.syncEngine),i.onUnlisten=AG.bind(null,t.syncEngine),i})).apply(this,arguments)}function TU(n,e,t={}){const i=new Ws;return n.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return function(r,s,o,u,h){const m=new gS({next:y=>{s.enqueueAndForget(()=>bR(r,g));const E=y.docs.has(o);!E&&y.fromCache?h.reject(new wt(tt.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&y.fromCache&&u&&"server"===u.source?h.reject(new wt(tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new ER(dy(o.path),m,{includeMetadataChanges:!0,Ku:!0});return vR(r,g)}(yield My(n),n.asyncQueue,e,t,i)})),i.promise}function CU(n,e,t={}){const i=new Ws;return n.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return function(r,s,o,u,h){const m=new gS({next:y=>{s.enqueueAndForget(()=>bR(r,g)),y.fromCache&&"server"===u.source?h.reject(new wt(tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new ER(o,m,{includeMetadataChanges:!0,Ku:!0});return vR(r,g)}(yield My(n),n.asyncQueue,e,t,i)})),i.promise}function IU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const SU=new Map;function PR(n,e,t){if(!t)throw new wt(tt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DU(n,e,t,i){if(!0===e&&!0===i)throw new wt(tt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function AU(n){if(!rn.isDocumentKey(n))throw new wt(tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MU(n){if(rn.isDocumentKey(n))throw new wt(tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":En()}function Fi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new wt(tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bS(n);throw new wt(tt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kU(n,e){if(e<=0)throw new wt(tt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class RU{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new wt(tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new wt(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=IU(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new wt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new wt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new wt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jw{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new wt(tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new wt(tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new rz;switch(t.type){case"firstParty":return new lz(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new wt(tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=SU.get(e);t&&(Pt("ComponentProvider","Removing Datastore"),SU.delete(e),t.terminate())}(this),Promise.resolve()}}function OU(n,e,t,i={}){var r;const s=(n=Fi(n,jw))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let u,h;if("string"==typeof i.mockUserToken)u=i.mockUserToken,h=to.MOCK_USER;else{u=(0,ui.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new wt(tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new to(m)}n._authCredentials=new sz(new UN(u,h))}}class $r{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $r(this.firestore,e,this._key)}}class To{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new To(this.firestore,e,this._query)}}class Eu extends To{constructor(e,t,i){super(e,t,dy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $r(this.firestore,null,new rn(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function PU(n,e,...t){if(n=(0,ui.m9)(n),PR("collection","path",e),n instanceof jw){const i=qi.fromString(e,...t);return MU(i),new Eu(n,null,i)}{if(!(n instanceof $r||n instanceof Eu))throw new wt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(qi.fromString(e,...t));return MU(i),new Eu(n.firestore,null,i)}}function Gw(n,e,...t){if(n=(0,ui.m9)(n),1===arguments.length&&(e=VN.A()),PR("doc","path",e),n instanceof jw){const i=qi.fromString(e,...t);return AU(i),new $r(n,null,new rn(i))}{if(!(n instanceof $r||n instanceof Eu))throw new wt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(qi.fromString(e,...t));return AU(i),new $r(n.firestore,n instanceof Eu?n.converter:null,new rn(i))}}function LU(n,e){return n=(0,ui.m9)(n),e=(0,ui.m9)(e),(n instanceof $r||n instanceof Eu)&&(e instanceof $r||e instanceof Eu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LR(n,e){return n=(0,ui.m9)(n),e=(0,ui.m9)(e),n instanceof To&&e instanceof To&&n.firestore===e.firestore&&bw(n._query,e._query)&&n.converter===e.converter}class o8{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new fR(this,"async_queue_retry"),this.Xc=()=>{const t=fS();t&&Pt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=fS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=fS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ws;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ot.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!xf(t))throw t;Pt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{this.Wc=i,this.Hc=!1;const r=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(i);throw xs("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Hc=!1,i))));return this.Gc=t,t}enqueueAfterDelay(e,t,i){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=yR.createAndSchedule(this,e,t,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&En()}verifyOperationInProgress(){}sa(){var e=this;return(0,ot.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function FR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class a8{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ws,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Vr extends jw{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new o8,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||NU(this),this._firestoreClient.terminate()}}function FU(n,e){const t="object"==typeof n?n:(0,Gr.getApp)(),i="string"==typeof n?n:e||"(default)",r=(0,Gr._getProvider)(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=(0,ui.P0)("firestore");s&&OU(r,...s)}return r}function Cs(n){return n._firestoreClient||NU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function NU(n){var e,t,i;const r=n._freezeSettings(),s=function(o,u,h,m){return new Bz(o,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,IU(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new ZG(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=r.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function BU(n,e,t){const i=new Ws;return n.asyncQueue.enqueue((0,ot.Z)(function*(){try{yield _S(n,t),yield kR(n,e),i.resolve()}catch(r){const s=r;if(!bU(s))throw s;kl("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function UU(n){if(n._initialized||n._terminated)throw new wt(tt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xu(Ys.fromBase64String(e))}catch(t){throw new wt(tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xu(Ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Od{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new wt(tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ps(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kp{constructor(e){this._methodName=e}}class wS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new wt(tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new wt(tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return hi(this._lat,e._lat)||hi(this._long,e._long)}}const y8=/^__.*__$/;class v8{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Md(e,this.data,this.fieldMask,t,this.fieldTransforms):new my(e,this.data,t,this.fieldTransforms)}}class $U{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Md(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw En()}}class ES{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ES(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return CS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(VU(this.ca)&&y8.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class b8{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||$w(e)}ya(e,t,i,r=!1){return new ES({ca:e,methodName:t,ga:i,path:ps.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zp(n){const e=n._freezeSettings(),t=$w(n._databaseId);return new b8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xS(n,e,t,i,r,s={}){const o=n.ya(s.merge||s.mergeFields?2:0,e,t,r);$R("Data must be an object, but it was:",o,i);const u=jU(i,o);let h,m;if(s.merge)h=new xa(o.fieldMask),m=o.fieldTransforms;else if(s.mergeFields){const g=[];for(const y of s.mergeFields){const E=qw(e,y,t);if(!o.contains(E))throw new wt(tt.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);WU(g,E)||g.push(E)}h=new xa(g),m=o.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,m=o.fieldTransforms;return new v8(new xo(u),h,m)}class Yw extends Kp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yw}}function HU(n,e,t){return new ES({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class NR extends Kp{_toFieldTransform(e){return new Tw(e.path,new hy)}isEqual(e){return e instanceof NR}}class w8 extends Kp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=HU(this,e,!0),i=this.pa.map(s=>Xp(s,t)),r=new $p(i);return new Tw(e.path,r)}isEqual(e){return this===e}}class E8 extends Kp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=HU(this,e,!0),i=this.pa.map(s=>Xp(s,t)),r=new Vp(i);return new Tw(e.path,r)}isEqual(e){return this===e}}class x8 extends Kp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new fy(e.serializer,P2(e.serializer,this.Ia));return new Tw(e.path,t)}isEqual(e){return this===e}}function BR(n,e,t,i){const r=n.ya(1,e,t);$R("Data must be an object, but it was:",r,i);const s=[],o=xo.empty();Tf(i,(h,m)=>{const g=TS(e,h,t);m=(0,ui.m9)(m);const y=r.da(g);if(m instanceof Yw)s.push(g);else{const E=Xp(m,y);null!=E&&(s.push(g),o.set(g,E))}});const u=new xa(s);return new $U(o,u,r.fieldTransforms)}function UR(n,e,t,i,r,s){const o=n.ya(1,e,t),u=[qw(e,i,t)],h=[r];if(s.length%2!=0)throw new wt(tt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<s.length;E+=2)u.push(qw(e,s[E])),h.push(s[E+1]);const m=[],g=xo.empty();for(let E=u.length-1;E>=0;--E)if(!WU(m,u[E])){const x=u[E];let I=h[E];I=(0,ui.m9)(I);const k=o.da(x);if(I instanceof Yw)m.push(x);else{const P=Xp(I,k);null!=P&&(m.push(x),g.set(x,P))}}const y=new xa(m);return new $U(g,y,o.fieldTransforms)}function zU(n,e,t,i=!1){return Xp(t,n.ya(i?4:3,e))}function Xp(n,e){if(GU(n=(0,ui.m9)(n)))return $R("Unsupported field value:",e,n),jU(n,e);if(n instanceof Kp)return function(t,i){if(!VU(i.ca))throw i._a(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const o of t){let u=Xp(o,i.wa(s));null==u&&(u={nullValue:"NULL_VALUE"}),r.push(u),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,ui.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return P2(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Yr.fromDate(t);return{timestampValue:gy(i.serializer,r)}}if(t instanceof Yr){const r=new Yr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gy(i.serializer,r)}}if(t instanceof wS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xu)return{bytesValue:tB(i.serializer,t._byteString)};if(t instanceof $r){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Gk(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i._a(`Unsupported field value: ${bS(t)}`)}(n,e)}function jU(n,e){const t={};return n2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tf(n,(i,r)=>{const s=Xp(r,e.ha(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function GU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yr||n instanceof wS||n instanceof xu||n instanceof $r||n instanceof Kp)}function $R(n,e,t){if(!GU(t)||!function(i){return"object"==typeof i&&null!==i&&(Object.getPrototypeOf(i)===Object.prototype||null===Object.getPrototypeOf(i))}(t)){const i=bS(t);throw e._a("an object"===i?n+" a custom object":n+" "+i)}}function qw(n,e,t){if((e=(0,ui.m9)(e))instanceof Od)return e._internalPath;if("string"==typeof e)return TS(n,e);throw CS("Field path arguments must be of type string or ",n,!1,void 0,t)}const T8=new RegExp("[~\\*/\\[\\]]");function TS(n,e,t){if(e.search(T8)>=0)throw CS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Od(...e.split("."))._internalPath}catch{throw CS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function CS(n,e,t,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(s||o)&&(h+=" (found",s&&(h+=` in field ${i}`),o&&(h+=` in document ${r}`),h+=")"),new wt(tt.INVALID_ARGUMENT,u+n+h)}function WU(n,e){return n.some(t=>t.isEqual(e))}class Kw{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $r(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new C8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(IS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class C8 extends Kw{data(){return super.data()}}function IS(n,e){return"string"==typeof e?TS(n,e):e instanceof Od?e._internalPath:e._delegate._internalPath}function YU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new wt(tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VR{}class Zw extends VR{}function Nf(n,e,...t){let i=[];e instanceof VR&&i.push(e),i=i.concat(t),function(r){const s=r.filter(u=>u instanceof ky).length,o=r.filter(u=>u instanceof Xw).length;if(s>1||s>0&&o>0)throw new wt(tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Xw extends Zw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Xw(e,t,i)}_apply(e){const t=this._parse(e);return XU(e._query,t),new To(e.firestore,e.converter,Lk(e._query,t))}_parse(e){const t=Zp(e.firestore);return function(r,s,o,u,h,m,g){let y;if(h.isKeyField()){if("array-contains"===m||"array-contains-any"===m)throw new wt(tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if("in"===m||"not-in"===m){ZU(g,m);const E=[];for(const x of g)E.push(KU(u,r,x));y={arrayValue:{values:E}}}else y=KU(u,r,g)}else"in"!==m&&"not-in"!==m&&"array-contains-any"!==m||ZU(g,m),y=zU(o,"where",g,"in"===m||"not-in"===m);return Li.create(h,m,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ky extends VR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ky(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:lr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,r){let s=i;const o=r.getFlattenedFilters();for(const u of o)XU(s,u),s=Lk(s,u)}(e._query,t),new To(e.firestore,e.converter,Lk(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class HR extends Zw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new HR(e,t)}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new wt(tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new wt(tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new cy(r,s);return function(u,h){if(null===Ok(u)){const m=GI(u);null!==m&&QU(0,m,h.field)}}(i,o),o}(e._query,this._field,this._direction);return new To(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Dd(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class SS extends Zw{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new SS(e,t,i)}_apply(e){return new To(e.firestore,e.converter,WI(e._query,this._limit,this._limitType))}}class DS extends Zw{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new DS(e,t,i)}_apply(e){const t=qU(e,this.type,this._docOrFields,this._inclusive);return new To(e.firestore,e.converter,function(i,r){return new Dd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)}(e._query,t))}}class AS extends Zw{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new AS(e,t,i)}_apply(e){const t=qU(e,this.type,this._docOrFields,this._inclusive);return new To(e.firestore,e.converter,function(i,r){return new Dd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)}(e._query,t))}}function qU(n,e,t,i){if(t[0]=(0,ui.m9)(t[0]),t[0]instanceof Kw)return function(r,s,o,u,h){if(!u)throw new wt(tt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const m=[];for(const g of Up(r))if(g.field.isKeyField())m.push(Np(s,u.key));else{const y=u.data.field(g.field);if(BI(y))throw new wt(tt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const E=g.field.canonicalString();throw new wt(tt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}m.push(y)}return new Mf(m,h)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Zp(n.firestore);return function(s,o,u,h,m,g){const y=s.explicitOrderBy;if(m.length>y.length)throw new wt(tt.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let x=0;x<m.length;x++){const I=m[x];if(y[x].field.isKeyField()){if("string"!=typeof I)throw new wt(tt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof I}`);if(!Pk(s)&&-1!==I.indexOf("/"))throw new wt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${I}' contains a slash.`);const k=s.path.child(qi.fromString(I));if(!rn.isDocumentKey(k))throw new wt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const P=new rn(k);E.push(Np(o,P))}else{const k=zU(u,h,I);E.push(k)}}return new Mf(E,g)}(n._query,n.firestore._databaseId,r,e,t,i)}}function KU(n,e,t){if("string"==typeof(t=(0,ui.m9)(t))){if(""===t)throw new wt(tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pk(e)&&-1!==t.indexOf("/"))throw new wt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(qi.fromString(t));if(!rn.isDocumentKey(i))throw new wt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Np(n,new rn(i))}if(t instanceof $r)return Np(n,t._key);throw new wt(tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bS(t)}.`)}function ZU(n,e){if(!Array.isArray(n)||0===n.length)throw new wt(tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XU(n,e){if(e.isInequality()){const i=GI(n),r=e.field;if(null!==i&&!i.isEqual(r))throw new wt(tt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=Ok(n);null!==s&&QU(0,r,s)}const t=function(i,r){for(const s of i)for(const o of s.getFlattenedFilters())if(r.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new wt(tt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function QU(n,e,t){if(!t.isEqual(e))throw new wt(tt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zR{convertValue(e,t="none"){switch(Df(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw En()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Tf(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new wS(gs(e.latitude),gs(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=UI(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(pw(e));default:return null}}convertTimestamp(e){const t=Cf(e);return new Yr(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=qi.fromString(e);Nn(dB(i));const r=new If(i.get(1),i.get(3)),s=new rn(i.popFirst(5));return r.isEqual(t)||xs(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function MS(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class P8 extends zR{constructor(e){super(),this.firestore=e}convertBytes(e){return new xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $r(this.firestore,null,t)}}class Qp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pd extends Kw{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(IS("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Qw extends Pd{data(e={}){return super.data(e)}}class Bf{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Qp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Qw(this._firestore,this._userDataWriter,i.key,i,new Qp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new wt(tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new Qw(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Qp(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||3!==o.type).map(o=>{const u=new Qw(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Qp(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return 0!==o.type&&(h=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),m=s.indexOf(o.doc.key)),{type:F8(o.type),doc:u,oldIndex:h,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function F8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return En()}}function e$(n,e){return n instanceof Pd&&e instanceof Pd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bf&&e instanceof Bf&&n._firestore===e._firestore&&LR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Uf extends zR{constructor(e){super(),this.firestore=e}convertBytes(e){return new xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $r(this.firestore,null,t)}}function t$(n,e,t){n=Fi(n,$r);const i=Fi(n.firestore,Vr),r=MS(n.converter,e,t);return Ry(i,[xS(Zp(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,qr.none())])}function kS(n,e,t,...i){n=Fi(n,$r);const r=Fi(n.firestore,Vr),s=Zp(r);let o;return o="string"==typeof(e=(0,ui.m9)(e))||e instanceof Od?UR(s,"updateDoc",n._key,e,t,i):BR(s,"updateDoc",n._key,e),Ry(r,[o.toMutation(n._key,qr.exists(!0))])}function jR(n,...e){var t,i,r;n=(0,ui.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||FR(e[o])||(s=e[o],o++);const u={includeMetadataChanges:s.includeMetadataChanges};if(FR(e[o])){const y=e[o];e[o]=null===(t=y.next)||void 0===t?void 0:t.bind(y),e[o+1]=null===(i=y.error)||void 0===i?void 0:i.bind(y),e[o+2]=null===(r=y.complete)||void 0===r?void 0:r.bind(y)}let h,m,g;if(n instanceof $r)m=Fi(n.firestore,Vr),g=dy(n._key.path),h={next:y=>{e[o]&&e[o](GR(m,n,y))},error:e[o+1],complete:e[o+2]};else{const y=Fi(n,To);m=Fi(y.firestore,Vr),g=y._query;const E=new Uf(m);h={next:x=>{e[o]&&e[o](new Bf(m,E,y,x))},error:e[o+1],complete:e[o+2]},YU(n._query)}return function(y,E,x,I){const k=new gS(I),P=new ER(E,k,x);return y.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return vR(yield My(y),P)})),()=>{k.Dc(),y.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return bR(yield My(y),P)}))}}(Cs(m),g,u,h)}function Ry(n,e){return function(t,i){const r=new Ws;return t.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return function MG(n,e,t){return(yN=yN||(0,ot.Z)(function*(i,r,s){const o=AR(i);try{const u=yield function(h,m){const g=cn(h),y=Yr.now(),E=m.reduce((k,P)=>k.add(P.key),vi());let x,I;return g.persistence.runTransaction("Locally write mutations","readwrite",k=>{let P=Ta(),q=vi();return g.Zi.getEntries(k,E).next(ae=>{P=ae,P.forEach((ee,ye)=>{ye.isValidDocument()||(q=q.add(ee))})}).next(()=>g.localDocuments.getOverlayedDocuments(k,P)).next(ae=>{x=ae;const ee=[];for(const ye of m){const De=sj(ye,x.get(ye.key).overlayedDocument);null!=De&&ee.push(new Md(ye.key,De,h2(De.value.mapValue),qr.exists(!0)))}return g.mutationQueue.addMutationBatch(k,y,ee,m)}).next(ae=>{I=ae;const ee=ae.applyToLocalDocumentSet(x,q);return g.documentOverlayCache.saveOverlays(k,ae.batchId,ee)})}).then(()=>({batchId:I.batchId,changes:M2(x)}))}(o.localStore,r);o.sharedClientState.addPendingMutation(u.batchId),function(h,m,g){let y=h.Tc[h.currentUser.toKey()];y||(y=new Cr(hi)),y=y.insert(m,g),h.Tc[h.currentUser.toKey()]=y}(o,u.batchId,s),yield Rd(o,u.changes),yield xy(o.remoteStore)}catch(u){const h=Cy(u,"Failed to persist write");s.reject(h)}})).apply(this,arguments)}(yield OR(t),i,r)})),r.promise}(Cs(n),e)}function GR(n,e,t){const i=t.docs.get(e._key),r=new Uf(n);return new Pd(n,r,e._key,i,new Qp(t.hasPendingWrites,t.fromCache),e.converter)}const e5={maxAttempts:5};class n${constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zp(e)}set(e,t,i){this._verifyNotCommitted();const r=$f(e,this._firestore),s=MS(r.converter,t,i),o=xS(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,qr.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=$f(e,this._firestore);let o;return o="string"==typeof(t=(0,ui.m9)(t))||t instanceof Od?UR(this._dataReader,"WriteBatch.update",s._key,t,i,r):BR(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,qr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$f(e,this._firestore);return this._mutations=this._mutations.concat(new py(t._key,qr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new wt(tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $f(n,e){if((n=(0,ui.m9)(n)).firestore!==e)throw new wt(tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class t5 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Zp(e)}get(e){const t=$f(e,this._firestore),i=new P8(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return En();const s=r[0];if(s.isFoundDocument())return new Kw(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new Kw(this._firestore,i,t._key,null,t.converter);throw En()})}set(e,t,i){const r=$f(e,this._firestore),s=MS(r.converter,t,i),o=xS(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,o),this}update(e,t,i,...r){const s=$f(e,this._firestore);let o;return o="string"==typeof(t=(0,ui.m9)(t))||t instanceof Od?UR(this._dataReader,"Transaction.update",s._key,t,i,r):BR(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=$f(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$f(e,this._firestore),i=new Uf(this._firestore);return super.get(e).then(r=>new Pd(this._firestore,i,t._key,r._document,new Qp(!1,!1),t.converter))}}function Kr(n){return null!=n&&"false"!=`${n}`}function Vf(n,e=0){return function c5(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function RS(n){return Array.isArray(n)?n:[n]}function Ps(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Jp(n){return n instanceof a.SBq?n.nativeElement:n}!function(n,e=!0){sy=Gr.SDK_VERSION,(0,Gr._registerComponent)(new hd.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),o=new Vr(new oz(t.getProvider("auth-internal")),new cz(t.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new wt(tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new If(u.options.projectId,h)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),(0,Gr.registerVersion)(BN,"3.13.0",n),(0,Gr.registerVersion)(BN,"3.13.0","esm2017")}();var u5=F(1144);const d5=["addListener","removeListener"],h5=["addEventListener","removeEventListener"],f5=["on","off"];function eg(n,e,t,i){if((0,Do.m)(t)&&(i=t,t=void 0),i)return eg(n,e,t).pipe(Us(i));const[r,s]=function g5(n){return(0,Do.m)(n.addEventListener)&&(0,Do.m)(n.removeEventListener)}(n)?h5.map(o=>u=>n[o](e,u,t)):function m5(n){return(0,Do.m)(n.addListener)&&(0,Do.m)(n.removeListener)}(n)?d5.map(r$(n,e)):function p5(n){return(0,Do.m)(n.on)&&(0,Do.m)(n.off)}(n)?f5.map(r$(n,e)):[];if(!r&&(0,u5.z)(n))return(0,kr.z)(o=>eg(o,e,t))((0,mo.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new zr.y(o=>{const u=(...h)=>o.next(1<h.length?h:h[0]);return r(u),()=>s(u)})}function r$(n,e){return t=>i=>n[t](e,i)}var s$=F(4408);const Jw={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Jw;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new Xs.w0(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Jw;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Jw;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var o$=F(7565);const v5=new class y5 extends o$.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class _5 extends s$.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Jw.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Jw.cancelAnimationFrame(t),e._scheduled=void 0)}});let WR,b5=1;const OS={};function a$(n){return n in OS&&(delete OS[n],!0)}const w5={setImmediate(n){const e=b5++;return OS[e]=!0,WR||(WR=Promise.resolve()),WR.then(()=>a$(e)&&n()),e},clearImmediate(n){a$(n)}},{setImmediate:E5,clearImmediate:x5}=w5,PS={setImmediate(...n){const{delegate:e}=PS;return(e?.setImmediate||E5)(...n)},clearImmediate(n){const{delegate:e}=PS;return(e?.clearImmediate||x5)(n)},delegate:void 0},YR=new class C5 extends o$.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class T5 extends s$.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=PS.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(PS.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});var eE=F(4986),S5=F(3532);function l$(n=0,e,t=eE.P){let i=-1;return null!=e&&((0,S5.K)(e)?t=e:i=e),new zr.y(r=>{let s=function D5(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function qR(n,e=eE.z){return function I5(n){return(0,xr.e)((e,t)=>{let i=!1,r=null,s=null,o=!1;const u=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const m=r;r=null,t.next(m)}o&&t.complete()},h=()=>{s=null,o&&t.complete()};e.subscribe((0,pr.x)(t,m=>{i=!0,r=m,s||(0,mo.Xf)(n(m)).subscribe(s=(0,pr.x)(t,u,h))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>l$(n,e))}var c$=F(5032);function br(n){return(0,xr.e)((e,t)=>{(0,mo.Xf)(n).subscribe((0,pr.x)(t,()=>t.complete(),c$.Z)),!t.closed&&e.subscribe(t)})}let KR;try{KR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{KR=!1}let tE,LS,tg,ZR,ro=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function tm(n){return n===Sc}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!KR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.Lbi))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Py(n){return function A5(){if(null==tE&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>tE=!0}))}finally{tE=tE||!1}return tE}()?n:!!n.capture}function d$(){if(null==tg){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return tg=!1,tg;if("scrollBehavior"in document.documentElement.style)tg=!0;else{const n=Element.prototype.scrollTo;tg=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return tg}function nE(){if("object"!=typeof document||!document)return 0;if(null==LS){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),LS=0,0===n.scrollLeft&&(n.scrollLeft=1,LS=0===n.scrollLeft?1:2),n.remove()}return LS}function FS(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Hf(n){return n.composedPath?n.composedPath()[0]:n.target}function XR(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const R5=new a.OlP("cdk-dir-doc",{providedIn:"root",factory:function O5(){return(0,a.f3M)(me)}}),P5=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ld=(()=>{class n{constructor(t){this.value="ltr",this.change=new a.vpe,t&&(this.value=function L5(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?P5.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(R5,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const F5=["contentWrapper"],N5=["*"],B5=new a.OlP("VIRTUAL_SCROLL_STRATEGY");let ng=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Ln.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new zr.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(qR(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):mn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Di(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Jp(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>eg(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.R0b),a.LFG(ro),a.LFG(me,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ig=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new Ln.x,this._elementScrolled=new zr.y(o=>this.ngZone.runOutsideAngular(()=>eg(this.elementRef.nativeElement,"scroll").pipe(br(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=nE()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==nE()?t.left=t.right:1==nE()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;d$()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&2==nE()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==nE()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(ng),a.Y36(a.R0b),a.Y36(Ld,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),NS=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Ln.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(qR(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ro),a.LFG(a.R0b),a.LFG(me,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const h$=new a.OlP("VIRTUAL_SCROLLABLE");let V5=(()=>{class n extends ig{constructor(t,i,r,s){super(t,i,r,s)}measureViewportSize(t){const i=this.elementRef.nativeElement;return"horizontal"===t?i.clientWidth:i.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(ng),a.Y36(a.R0b),a.Y36(Ld,8))},n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();const z5=typeof requestAnimationFrame<"u"?v5:YR;let j5=(()=>{class n extends V5{get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=Kr(t)}constructor(t,i,r,s,o,u,h,m){super(t,u,r,o),this.elementRef=t,this._changeDetectorRef=i,this._scrollStrategy=s,this.scrollable=m,this._platform=(0,a.f3M)(ro),this._detachedSubject=new Ln.x,this._renderedRangeSubject=new Ln.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new zr.y(g=>this._scrollStrategy.scrolledIndexChange.subscribe(y=>Promise.resolve().then(()=>this.ngZone.run(()=>g.next(y))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Xs.w0.EMPTY,this._viewportChanges=h.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(ks(null),qR(0,z5)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(br(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function H5(n,e){return n.start==e.start&&n.end==e.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,i="to-start"){t=this.appendOnly&&"to-start"===i?0:t;const s="horizontal"==this.orientation,o=s?"X":"Y";let h=`translate${o}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===i&&(h+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=h&&(this._renderedContentTransform=h,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=t:r.top=t,this.scrollable.scrollTo(r)}scrollToIndex(t,i="auto"){this._scrollStrategy.scrollToIndex(t,i)}measureScrollOffset(t){let i;return i=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,i(t??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let i;const r="left",s="right",o="rtl"==this.dir?.value;i="start"==t?o?s:r:"end"==t?o?r:s:t||("horizontal"===this.orientation?"left":"top");const u=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-u}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of t)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(a.R0b),a.Y36(B5,8),a.Y36(Ld,8),a.Y36(ng),a.Y36(NS),a.Y36(h$,8))},n.\u0275cmp=a.Xpm({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,i){if(1&t&&a.Gf(F5,7),2&t){let r;a.iGM(r=a.CRH())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,i){2&t&&a.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[a._Bn([{provide:ig,useFactory:(e,t)=>e||t,deps:[[new a.FiY,new a.tBr(h$)],n]}]),a.qOj,a.jDz],ngContentSelectors:N5,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,i){1&t&&(a.F$t(),a.TgZ(0,"div",0,1),a.Hsn(2),a.qZA(),a._UZ(3,"div",2)),2&t&&(a.xp6(3),a.Udp("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),Ly=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),f$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[iE,Ly,j5,iE,Ly]}),n})();class QR{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class BS extends QR{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class JR extends QR{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class G5 extends QR{constructor(e){super(),this.element=e instanceof a.SBq?e.nativeElement:e}}class eO{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof BS?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof JR?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof G5?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class W5 extends eO{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const u=o.element,h=this._document.createComment("dom-portal");u.parentNode.insertBefore(h,u),this.outletElement.appendChild(u),this._attachedPortal=o,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(u,h)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||a.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let tO=(()=>{class n extends eO{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new a.vpe,this.attachDomPortal=s=>{const o=s.element,u=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(u,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(o,u)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a._Vd),a.Y36(a.s_b),a.Y36(me))},n.\u0275dir=a.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[a.qOj]}),n})(),US=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const m$=d$();class Y5{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ps(-this._previousScrollPosition.left),e.style.top=Ps(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),m$&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),m$&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class q5{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Di(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class p${enable(){}disable(){}attach(){}}function nO(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function g$(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class K5{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();nO(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Z5=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new p$,this.close=o=>new q5(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Y5(this._viewportRuler,this._document),this.reposition=o=>new K5(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ng),a.LFG(NS),a.LFG(a.R0b),a.LFG(me))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class iO{constructor(e){if(this.scrollStrategy=new p$,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class X5{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let _$=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(me))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Q5=(()=>{class n extends _${constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const u=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(r)):u.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(me),a.LFG(a.R0b,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J5=(()=>{class n extends _${constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Hf(s)},this._clickListener=s=>{const o=Hf(s),u="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const h=this._attachedOverlays.slice();for(let m=h.length-1;m>-1;m--){const g=h[m];if(g._outsidePointerEvents.observers.length<1||!g.hasAttached())continue;if(g.overlayElement.contains(o)||g.overlayElement.contains(u))break;const y=g._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>y.next(s)):y.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(me),a.LFG(ro),a.LFG(a.R0b,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$S=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||XR()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),XR()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(me),a.LFG(ro))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rE{constructor(e,t,i,r,s,o,u,h,m,g=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=u,this._location=h,this._outsideClickDispatcher=m,this._animationsDisabled=g,this._backdropElement=null,this._backdropClick=new Ln.x,this._attachments=new Ln.x,this._detachments=new Ln.x,this._locationChanges=Xs.w0.EMPTY,this._backdropClickHandler=y=>this._backdropClick.next(y),this._backdropTransitionendHandler=y=>{this._disposeBackdrop(y.target)},this._keydownEvents=new Ln.x,this._outsidePointerEvents=new Ln.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Mr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ps(this._config.width),e.height=Ps(this._config.height),e.minWidth=Ps(this._config.minWidth),e.minHeight=Ps(this._config.minHeight),e.maxWidth=Ps(this._config.maxWidth),e.maxHeight=Ps(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=RS(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(br((0,El.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const y$="cdk-overlay-connected-position-bounding-box",eW=/([A-Za-z%]+)$/;class tW{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ln.x,this._resizeSubscription=Xs.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(y$),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let u of this._preferredPositions){let h=this._getOriginPoint(e,r,u),m=this._getOverlayPoint(h,t,u),g=this._getOverlayFit(m,t,i,u);if(g.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,h);this._canFitWithFlexibleDimensions(g,m,i)?s.push({position:u,origin:h,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(h,u)}):(!o||o.overlayFit.visibleArea<g.visibleArea)&&(o={overlayFit:g,overlayPoint:m,originPoint:h,position:u,overlayRect:t})}if(s.length){let u=null,h=-1;for(const m of s){const g=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);g>h&&(h=g,u=m)}return this._isPushed=!1,void this._applyPosition(u.position,u.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&rg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(y$),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,u=this._isRtl()?e.left:e.right;r="start"==i.originX?o:u}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=b$(t);let{x:o,y:u}=e,h=this._getOffset(r,"x"),m=this._getOffset(r,"y");h&&(o+=h),m&&(u+=m);let E=0-u,x=u+s.height-i.height,I=this._subtractOverflows(s.width,0-o,o+s.width-i.width),k=this._subtractOverflows(s.height,E,x),P=I*k;return{visibleArea:P,isCompletelyWithinViewport:s.width*s.height===P,fitsInViewportVertically:k===s.height,fitsInViewportHorizontally:I==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=v$(this._overlayRef.getConfig().minHeight),u=v$(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=u&&u<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=b$(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),u=Math.max(e.y+r.height-s.height,0),h=Math.max(s.top-i.top-e.y,0),m=Math.max(s.left-i.left-e.x,0);let g=0,y=0;return g=r.width<=s.width?m||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,y=r.height<=s.height?h||-u:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:g,y},{x:e.x+g,y:e.y+y}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new X5(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,u,g,y,E;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)u=i.height-e.y+2*this._viewportMargin,s=i.height-u+this._viewportMargin;else{const x=Math.min(i.bottom-e.y+i.top,e.y),I=this._lastBoundingBoxSize.height;s=2*x,o=e.y-x,s>I&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-I/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)E=i.width-e.x+this._viewportMargin,g=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)y=e.x,g=i.right-e.x;else{const x=Math.min(i.right-e.x+i.left,e.x),I=this._lastBoundingBoxSize.width;g=2*x,y=e.x-x,g>I&&!this._isInitialRender&&!this._growAfterOpen&&(y=e.x-I/2)}return{top:o,left:y,bottom:u,right:E,width:g,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Ps(i.height),r.top=Ps(i.top),r.bottom=Ps(i.bottom),r.width=Ps(i.width),r.left=Ps(i.left),r.right=Ps(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Ps(s)),o&&(r.maxWidth=Ps(o))}this._lastBoundingBoxSize=i,rg(this._boundingBox.style,r)}_resetBoundingBoxStyles(){rg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){rg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const g=this._viewportRuler.getViewportScrollPosition();rg(i,this._getExactOverlayY(t,e,g)),rg(i,this._getExactOverlayX(t,e,g))}else i.position="static";let u="",h=this._getOffset(t,"x"),m=this._getOffset(t,"y");h&&(u+=`translateX(${h}px) `),m&&(u+=`translateY(${m}px)`),i.transform=u.trim(),o.maxHeight&&(r?i.maxHeight=Ps(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Ps(o.maxWidth):s&&(i.maxWidth="")),rg(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Ps(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Ps(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:g$(e,i),isOriginOutsideView:nO(e,i),isOverlayClipped:g$(t,i),isOverlayOutsideView:nO(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&RS(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof a.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function rg(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function v$(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(eW);return t&&"px"!==t?null:parseFloat(e)}return n||null}function b$(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const w$="cdk-global-overlay-wrapper";class nW{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(w$),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:u}=i,h=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),m=!("100%"!==s&&"100vh"!==s||u&&"100%"!==u&&"100vh"!==u),g=this._xPosition,y=this._xOffset,E="rtl"===this._overlayRef.getConfig().direction;let x="",I="",k="";h?k="flex-start":"center"===g?(k="center",E?I=y:x=y):E?"left"===g||"end"===g?(k="flex-end",x=y):("right"===g||"start"===g)&&(k="flex-start",I=y):"left"===g||"start"===g?(k="flex-start",x=y):("right"===g||"end"===g)&&(k="flex-end",I=y),e.position=this._cssPosition,e.marginLeft=h?"0":x,e.marginTop=m?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=h?"0":I,t.justifyContent=k,t.alignItems=m?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(w$),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let iW=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new nW}flexibleConnectedTo(t){return new tW(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(NS),a.LFG(me),a.LFG(ro),a.LFG($S))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rW=0,Tu=(()=>{class n{constructor(t,i,r,s,o,u,h,m,g,y,E,x){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=u,this._ngZone=h,this._document=m,this._directionality=g,this._location=y,this._outsideClickDispatcher=E,this._animationsModuleType=x}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new iO(t);return o.direction=o.direction||this._directionality.value,new rE(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+rW++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(a.z2F)),new W5(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Z5),a.LFG($S),a.LFG(a._Vd),a.LFG(iW),a.LFG(Q5),a.LFG(a.zs3),a.LFG(a.R0b),a.LFG(me),a.LFG(Ld),a.LFG(Be),a.LFG(J5),a.LFG(a.QbO,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aW={provide:new a.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Tu],useFactory:function oW(n){return()=>n.scrollStrategies.reposition()}};let VS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[Tu,aW],imports:[iE,US,f$,f$]}),n})();function sg(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function HS(n,e=eE.z){return(0,xr.e)((t,i)=>{let r=null,s=null,o=null;const u=()=>{if(r){r.unsubscribe(),r=null;const m=s;s=null,i.next(m)}};function h(){const m=o+n,g=e.now();if(g<m)return r=this.schedule(void 0,m-g),void i.add(r);u()}t.subscribe((0,pr.x)(i,m=>{s=m,o=e.now(),r||(r=e.schedule(h,n),i.add(r))},()=>{u(),i.complete()},void 0,()=>{s=r=null}))})}function S$(n){return Di((e,t)=>n<=t)}function zS(n,e=ec.y){return n=n??wW,(0,xr.e)((t,i)=>{let r,s=!0;t.subscribe((0,pr.x)(i,o=>{const u=e(o);(s||!n(r,u))&&(s=!1,r=u,i.next(o))}))})}function wW(n,e){return n===e}let D$=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),A$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[D$]}),n})();const M$=new Set;let Fy,k$=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):CW}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function TW(n){if(!M$.has(n))try{Fy||(Fy=document.createElement("style"),Fy.setAttribute("type","text/css"),document.head.appendChild(Fy)),Fy.sheet&&(Fy.sheet.insertRule(`@media ${n} {body{ }}`,0),M$.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ro))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function CW(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let oO=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Ln.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return R$(RS(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){const r=R$(RS(t)).map(o=>this._registerQuery(o).observable);let s=nd(r);return s=nc(s.pipe(Mr(1)),s.pipe(S$(1),HS(0))),s.pipe((0,pn.U)(o=>{const u={matches:!1,breakpoints:{}};return o.forEach(({matches:h,query:m})=>{u.matches=u.matches||h,u.breakpoints[m]=h}),u}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new zr.y(o=>{const u=h=>this._zone.run(()=>o.next(h));return i.addListener(u),()=>{i.removeListener(u)}}).pipe(ks(i),(0,pn.U)(({matches:o})=>({query:t,matches:o})),br(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(k$),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function R$(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const jS_Small="(min-width: 600px) and (max-width: 959.98px)",jS_Handset="(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)";function GS(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}const P$="cdk-describedby-message",WS="cdk-describedby-host";let aO=0,DW=(()=>{class n{constructor(t,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+aO++,this._document=t,this._id=(0,a.f3M)(a.AFp)+"-"+aO++}describe(t,i,r){if(!this._canBeDescribed(t,i))return;const s=lO(i,r);"string"!=typeof i?(L$(i,this._id),this._messageRegistry.set(s,{messageElement:i,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(i,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,i,r){if(!i||!this._isElementNode(t))return;const s=lO(i,r);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),"string"==typeof i){const o=this._messageRegistry.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const t=this._document.querySelectorAll(`[${WS}="${this._id}"]`);for(let i=0;i<t.length;i++)this._removeCdkDescribedByReferenceIds(t[i]),t[i].removeAttribute(WS);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,i){const r=this._document.createElement("div");L$(r,this._id),r.textContent=t,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(lO(t,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<i.length;s++)i[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const i=GS(t,"aria-describedby").filter(r=>0!=r.indexOf(P$));t.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(t,i){const r=this._messageRegistry.get(i);(function IW(n,e,t){const i=GS(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(WS,this._id),r.referenceCount++}_removeMessageReference(t,i){const r=this._messageRegistry.get(i);r.referenceCount--,function SW(n,e,t){const r=GS(n,e).filter(s=>s!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(WS)}_isElementDescribedByMessage(t,i){const r=GS(t,"aria-describedby"),s=this._messageRegistry.get(i),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(t,i){if(!this._isElementNode(t))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(me),a.LFG(ro))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lO(n,e){return"string"==typeof n?`${e||""}/${n}`:n}function L$(n,e){n.id||(n.id=`${P$}-${e}-${aO++}`)}class AW{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Ln.x,this._typeaheadSubscription=Xs.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Ln.x,this.change=new Ln.x,e instanceof a.n_E&&(this._itemChangesSubscription=e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,ur.b)(t=>this._pressedLetters.push(t)),HS(e),Di(()=>this._pressedLetters.length>0),(0,pn.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||sg(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof a.n_E?this._items.toArray():this._items}}class F$ extends AW{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let oE=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function kW(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function MW(n){try{return n.frameElement}catch{return null}}(function UW(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===B$(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=B$(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function NW(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function BW(n){return!function OW(n){return function LW(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function RW(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function PW(n){return function FW(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||N$(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ro))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function N$(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function B$(n){if(!N$(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class $W{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Mr(1)).subscribe(e)}}let YS=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new $W(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(oE),a.LFG(a.R0b),a.LFG(me))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cO(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function uO(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const VW=new a.OlP("cdk-input-modality-detector-options"),HW={ignoreKeys:[18,17,224,91,16]},Ny=Py({passive:!0,capture:!0});let zW=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new As(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(u=>u===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Hf(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(cO(o)?"keyboard":"mouse"),this._mostRecentTarget=Hf(o))},this._onTouchstart=o=>{uO(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Hf(o))},this._options={...HW,...s},this.modalityDetected=this._modality.pipe(S$(1)),this.modalityChanged=this.modalityDetected.pipe(zS()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Ny),r.addEventListener("mousedown",this._onMousedown,Ny),r.addEventListener("touchstart",this._onTouchstart,Ny)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ny),document.removeEventListener("mousedown",this._onMousedown,Ny),document.removeEventListener("touchstart",this._onTouchstart,Ny))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ro),a.LFG(a.R0b),a.LFG(me),a.LFG(VW,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const GW=new a.OlP("cdk-focus-monitor-default-options"),qS=Py({passive:!0,capture:!0});let zf=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ln.x,this._rootNodeFocusAndBlurListener=u=>{for(let m=Hf(u);m;m=m.parentElement)"focus"===u.type?this._onFocus(u,m):this._onBlur(u,m)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=Jp(t);if(!this._platform.isBrowser||1!==r.nodeType)return mn(null);const s=function k5(n){if(function M5(){if(null==ZR){const n=typeof document<"u"?document.head:null;ZR=!(!n||!n.createShadowRoot&&!n.attachShadow)}return ZR}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const u={checkChildren:i,subject:new Ln.x,rootNode:s};return this._elementInfo.set(r,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(t){const i=Jp(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Jp(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([u,h])=>this._originChanged(u,i,h)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Hf(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,qS),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,qS)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(br(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,qS),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,qS),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.R0b),a.LFG(ro),a.LFG(zW),a.LFG(me,8),a.LFG(GW,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $$="cdk-high-contrast-black-on-white",V$="cdk-high-contrast-white-on-black",dO="cdk-high-contrast-active";let H$=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=(0,a.f3M)(oO).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(dO,$$,V$),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(dO,$$):2===i&&t.add(dO,V$)}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ro),a.LFG(me))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z$=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(H$))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[A$]}),n})();function WW(n,e){}class KS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let j$=(()=>{class n extends eO{constructor(t,i,r,s,o,u,h,m){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=u,this._overlayRef=h,this._focusMonitor=m,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=g=>{this._portalOutlet.hasAttached();const y=this._portalOutlet.attachDomPortal(g);return this._contentAttached(),y},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=FS(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=FS();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=FS())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(YS),a.Y36(me,8),a.Y36(KS),a.Y36(oE),a.Y36(a.R0b),a.Y36(rE),a.Y36(zf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&a.Gf(tO,7),2&t){let r;a.iGM(r=a.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&a.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[a.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&a.YNc(0,WW,0,0,"ng-template",0)},dependencies:[tO],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class hO{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Ln.x,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!sg(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const G$=new a.OlP("DialogScrollStrategy"),YW=new a.OlP("DialogData"),qW=new a.OlP("DefaultDialogConfig"),ZW={provide:G$,deps:[Tu],useFactory:function KW(n){return()=>n.scrollStrategies.block()}};let XW=0,W$=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,s,o,u){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ln.x,this._afterOpenedAtThisLevel=new Ln.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Kc(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ks(void 0))),this._scrollStrategy=u}open(t,i){(i={...this._defaultOptions||new KS,...i}).id=i.id||"cdk-dialog-"+XW++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),u=new hO(o,i),h=this._attachContainer(o,u,i);return u.containerInstance=h,this._attachDialogContent(t,u,h,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(u),u.closed.subscribe(()=>this._removeOpenDialog(u,!0)),this.afterOpened.next(u),u}closeAll(){fO(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){fO(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),fO(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new iO({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:KS,useValue:r},{provide:hO,useValue:i},{provide:rE,useValue:t}];let u;r.container?"function"==typeof r.container?u=r.container:(u=r.container.type,o.push(...r.container.providers(r))):u=j$;const h=new BS(u,r.viewContainerRef,a.zs3.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(h).instance}_attachDialogContent(t,i,r,s){if(t instanceof a.Rgc){const o=this._createInjector(s,i,r,void 0);let u={$implicit:s.data,dialogRef:i};s.templateContext&&(u={...u,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new JR(t,null,u,o))}else{const o=this._createInjector(s,i,r,this._injector),u=r.attachComponentPortal(new BS(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentInstance=u.instance}}_createInjector(t,i,r,s){const o=t.injector||t.viewContainerRef?.injector,u=[{provide:YW,useValue:t.data},{provide:hO,useValue:i}];return t.providers&&("function"==typeof t.providers?u.push(...t.providers(i,t,r)):u.push(...t.providers)),t.direction&&(!o||!o.get(Ld,null,{optional:!0}))&&u.push({provide:Ld,useValue:{value:t.direction,change:mn()}}),a.zs3.create({parent:o||s,providers:u})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Tu),a.LFG(a.zs3),a.LFG(qW,8),a.LFG(n,12),a.LFG($S),a.LFG(G$))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function fO(n,e){let t=n.length;for(;t--;)e(n[t])}let QW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[W$,ZW],imports:[VS,US,z$,US]}),n})();const e9=new a.OlP("mat-sanity-checks",{providedIn:"root",factory:function JW(){return!0}});let Is=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!XR()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(H$),a.LFG(e9,8),a.LFG(me))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[iE,iE]}),n})();function K$(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=Kr(e)}constructor(...e){super(...e),this._disabled=!1}}}function t9(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function Z$(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Kr(e)}constructor(...e){super(...e),this._disableRipple=!1}}}class i9{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const X$=Py({passive:!0,capture:!0});class r9{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Hf(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,X$)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,X$)))}}const Q$={enterDuration:225,exitDuration:150},J$=Py({passive:!0,capture:!0}),eV=["mousedown","touchstart"],tV=["mouseup","mouseleave","touchend","touchcancel"];class By{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Jp(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...Q$,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function o9(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),u=e-r.left,h=t-r.top,m=s.enterDuration,g=document.createElement("div");g.classList.add("mat-ripple-element"),g.style.left=u-o+"px",g.style.top=h-o+"px",g.style.height=2*o+"px",g.style.width=2*o+"px",null!=i.color&&(g.style.backgroundColor=i.color),g.style.transitionDuration=`${m}ms`,this._containerElement.appendChild(g);const y=window.getComputedStyle(g),x=y.transitionDuration,I="none"===y.transitionProperty||"0s"===x||"0s, 0s"===x||0===r.width&&0===r.height,k=new i9(this,g,i,I);g.style.transform="scale3d(1, 1, 1)",k.state=0,i.persistent||(this._mostRecentTransientRipple=k);let P=null;return!I&&(m||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const q=()=>this._finishRippleTransition(k),ae=()=>this._destroyRipple(k);g.addEventListener("transitionend",q),g.addEventListener("transitioncancel",ae),P={onTransitionEnd:q,onTransitionCancel:ae}}),this._activeRipples.set(k,P),(I||!m)&&this._finishRippleTransition(k),k}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...Q$,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Jp(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,eV.forEach(i=>{By._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{tV.forEach(t=>{this._triggerElement.addEventListener(t,this,J$)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=cO(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!uO(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(eV.forEach(t=>By._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&tV.forEach(t=>e.removeEventListener(t,this,J$)))}}By._eventManager=new r9;const mO=new a.OlP("mat-ripple-global-options");let lE=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new By(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(ro),a.Y36(mO,8),a.Y36(a.QbO,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&a.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),ZS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[Is,Is]}),n})(),a9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[Is]}),n})();class nV{}class l9{}const Fd="*";function Uy(n,e){return{type:7,name:n,definitions:e,options:{}}}function Cu(n,e=null){return{type:4,styles:e,timings:n}}function rV(n,e=null){return{type:2,steps:n,options:e}}function No(n){return{type:6,styles:n,offset:null}}function Nd(n,e,t){return{type:0,name:n,styles:e,options:t}}function Iu(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function aV(n){Promise.resolve().then(n)}class cE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){aV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class lV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?aV(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,u)=>Math.max(o,u.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const pO="!";function c9(n,e){}class XS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const gO="mdc-dialog--open",cV="mdc-dialog--opening",uV="mdc-dialog--closing";let h9=(()=>{class n extends j${constructor(t,i,r,s,o,u,h,m){super(t,i,r,s,o,u,h,m),this._animationStateChanged=new a.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(YS),a.Y36(me,8),a.Y36(XS),a.Y36(oE),a.Y36(a.R0b),a.Y36(rE),a.Y36(zf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],features:[a.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();const dV="--mat-dialog-transition-duration";function hV(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?Vf(n.substring(0,n.length-2)):n.endsWith("s")?1e3*Vf(n.substring(0,n.length-1)):"0"===n?0:null}let f9=(()=>{class n extends h9{constructor(t,i,r,s,o,u,h,m,g){super(t,i,r,s,o,u,h,g),this._animationMode=m,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?hV(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?hV(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(dV,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(cV,gO)),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(gO),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(gO),this._animationsEnabled?(this._hostElement.style.setProperty(dV,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(uV)),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(cV,uV)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(YS),a.Y36(me,8),a.Y36(XS),a.Y36(oE),a.Y36(a.R0b),a.Y36(rE),a.Y36(a.QbO,8),a.Y36(zf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(t,i){2&t&&(a.Ikx("id",i._config.id),a.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),a.ekj("_mat-animation-noopable",!i._animationsEnabled))},features:[a.qOj],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(a.TgZ(0,"div",0)(1,"div",1),a.YNc(2,c9,0,0,"ng-template",2),a.qZA()())},dependencies:[tO],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),n})();class fV{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Ln.x,this._beforeClosed=new Ln.x,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(Di(r=>"opened"===r.state),Mr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Di(r=>"closed"===r.state),Mr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,El.T)(this.backdropClick(),this.keydownEvents().pipe(Di(r=>27===r.keyCode&&!this.disableClose&&!sg(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function m9(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Di(t=>"closing"===t.state),Mr(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const mV=new a.OlP("MatMdcDialogData"),p9=new a.OlP("mat-mdc-dialog-default-options"),pV=new a.OlP("mat-mdc-dialog-scroll-strategy"),_9={provide:pV,deps:[Tu],useFactory:function g9(n){return()=>n.scrollStrategies.block()}};let y9=0,v9=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,s,o,u,h,m,g,y){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=h,this._dialogContainerType=m,this._dialogDataToken=g,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ln.x,this._afterOpenedAtThisLevel=new Ln.x,this._idPrefix="mat-dialog-",this.dialogConfigClass=XS,this.afterAllClosed=Kc(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ks(void 0))),this._scrollStrategy=u,this._dialog=i.get(W$)}open(t,i){let r;(i={...this._defaultOptions||new XS,...i}).id=i.id||`${this._idPrefix}${y9++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:KS,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,u,h)=>(r=new this._dialogRefConstructor(o,i,h),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:h},{provide:this._dialogDataToken,useValue:u.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){a.$Z()},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),gV=(()=>{class n extends v9{constructor(t,i,r,s,o,u,h,m){super(t,i,s,u,h,o,fV,f9,mV,m),this._idPrefix="mat-mdc-dialog-"}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Tu),a.LFG(a.zs3),a.LFG(Be,8),a.LFG(p9,8),a.LFG(pV),a.LFG(n,12),a.LFG($S),a.LFG(a.QbO,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),b9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[gV,_9],imports:[QW,VS,US,Is,Is]}),n})();const w9=["mat-button",""],E9=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],x9=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],T9=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],C9=t9(K$(Z$(class{constructor(n){this._elementRef=n}})));let I9=(()=>{class n extends C9{constructor(t,i,r,s){super(t),this._platform=i,this._ngZone=r,this._animationMode=s,this._focusMonitor=(0,a.f3M)(zf),this._isFab=!1;const o=t.nativeElement.classList;for(const u of T9)this._hasHostAttributes(u.selector)&&u.mdcClasses.forEach(h=>{o.add(h)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...t){return t.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(t){a.$Z()},n.\u0275dir=a.lG2({type:n,viewQuery:function(t,i){if(1&t&&a.Gf(lE,5),2&t){let r;a.iGM(r=a.CRH())&&(i.ripple=r.first)}},features:[a.qOj]}),n})(),yV=(()=>{class n extends I9{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(ro),a.Y36(a.R0b),a.Y36(a.QbO,8))},n.\u0275cmp=a.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(t,i){2&t&&(a.uIk("disabled",i.disabled||null),a.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[a.qOj],attrs:w9,ngContentSelectors:x9,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){1&t&&(a.F$t(E9),a._UZ(0,"span",0),a.Hsn(1),a.TgZ(2,"span",1),a.Hsn(3,1),a.qZA(),a.Hsn(4,2),a._UZ(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(a.ekj("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab),a.xp6(6),a.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[lE],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),A9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[Is,ZS,Is]}),n})();let bV=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n}),n})(),og=(()=>{class n extends bV{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(n)))(i||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();const Bo=new a.OlP("NgValueAccessor"),M9={provide:Bo,useExisting:(0,a.Gpc)(()=>_O),multi:!0};let _O=(()=>{class n extends og{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(n)))(i||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,i){1&t&&a.NdJ("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[a._Bn([M9]),a.qOj]}),n})();const k9={provide:Bo,useExisting:(0,a.Gpc)(()=>yO),multi:!0},O9=new a.OlP("CompositionEventMode");let yO=(()=>{class n extends bV{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function R9(){const n=B()?B().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(O9,8))},n.\u0275dir=a.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&a.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[a._Bn([k9]),a.qOj]}),n})();const P9=!1;function jf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const so=new a.OlP("NgValidators"),Gf=new a.OlP("NgAsyncValidators");function QS(n){return null}function MV(n){return null!=n}function kV(n){const e=(0,a.QGY)(n)?(0,Hi.D)(n):n;if(P9&&!(0,a.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new a.vHH(-1101,t)}return e}function RV(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function OV(n,e){return e.map(t=>t(n))}function PV(n){return n.map(e=>function F9(n){return!n.validate}(e)?e:t=>e.validate(t))}function vO(n){return null!=n?function LV(n){if(!n)return null;const e=n.filter(MV);return 0==e.length?null:function(t){return RV(OV(t,e))}}(PV(n)):null}function FV(n){if(!n)return null;const e=n.filter(MV);return 0==e.length?null:function(t){return function vV(...n){const e=(0,Ds.jO)(n),{args:t,keys:i}=Ms(n),r=new zr.y(s=>{const{length:o}=t;if(!o)return void s.complete();const u=new Array(o);let h=o,m=o;for(let g=0;g<o;g++){let y=!1;(0,mo.Xf)(t[g]).subscribe((0,pr.x)(s,E=>{y||(y=!0,m--),u[g]=E},()=>h--,void 0,()=>{(!h||!y)&&(m||s.next(i?Ua(i,u):u),s.complete())}))}});return e?r.pipe(Us(e)):r}(OV(t,e).map(kV)).pipe((0,pn.U)(RV))}}function bO(n){return null!=n?FV(PV(n)):null}function NV(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wO(n){return n?Array.isArray(n)?n:[n]:[]}function JS(n,e){return Array.isArray(n)?n.includes(e):n===e}function $V(n,e){const t=wO(e);return wO(n).forEach(r=>{JS(t,r)||t.push(r)}),t}function VV(n,e){return wO(e).filter(t=>!JS(n,t))}class HV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qo extends HV{get formDirective(){return null}get path(){return null}}class Bd extends HV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class zV{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let jV=(()=>{class n extends zV{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Bd,2))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&a.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[a.qOj]}),n})();const uE="VALID",tD="INVALID",$y="PENDING",dE="DISABLED";function nD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class qV{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===uE}get invalid(){return this.status===tD}get pending(){return this.status==$y}get disabled(){return this.status===dE}get enabled(){return this.status!==dE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($V(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($V(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VV(e,this._rawAsyncValidators))}hasValidator(e){return JS(this._rawValidators,e)}hasAsyncValidator(e){return JS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$y,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dE,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=uE,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===uE||this.status===$y)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dE:uE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$y,this._hasOwnPendingAsyncValidator=!0;const t=kV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?dE:this.errors?tD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($y)?$y:this._anyControlsHaveStatus(tD)?tD:uE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function j9(n){return Array.isArray(n)?vO(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function G9(n){return Array.isArray(n)?bO(n):n||null}(this._rawAsyncValidators)}}const Vy=new a.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>iD}),iD="always";function hE(n,e,t=iD){(function DO(n,e){const t=function BV(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(NV(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function UV(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(NV(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();oD(e._rawValidators,r),oD(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function q9(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&KV(n,e)})}(n,e),function Z9(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function K9(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&KV(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Y9(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function oD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function KV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function QV(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function JV(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const e3=class extends qV{constructor(e=null,t,i){super(function CO(n){return(nD(n)?n.validators:n)||null}(t),function IO(n,e){return(nD(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=JV(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){QV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){QV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){JV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},r7={provide:Bd,useExisting:(0,a.Gpc)(()=>OO)},r3=(()=>Promise.resolve())();let OO=(()=>{class n extends Bd{constructor(t,i,r,s,o,u){super(),this._changeDetectorRef=o,this.callSetDisabledState=u,this.control=new e3,this._registered=!1,this.update=new a.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function kO(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===yO?t=s:function J9(n){return Object.getPrototypeOf(n.constructor)===og}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function MO(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){r3.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&(0,a.D6c)(i);r3.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function rD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Qo,9),a.Y36(so,10),a.Y36(Gf,10),a.Y36(Bo,10),a.Y36(a.sBO,8),a.Y36(Vy,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([r7]),a.qOj,a.TTD]}),n})(),o3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function g3(n){return"number"==typeof n?n:parseFloat(n)}let ag=(()=>{class n{constructor(){this._validator=QS}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):QS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=a.lG2({type:n,features:[a.TTD]}),n})();const w7={provide:so,useExisting:(0,a.Gpc)(()=>UO),multi:!0};let UO=(()=>{class n extends ag{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>g3(t),this.createValidator=t=>function xV(n){return e=>{if(jf(e.value)||jf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(n)))(i||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&a.uIk("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[a._Bn([w7]),a.qOj]}),n})();const E7={provide:so,useExisting:(0,a.Gpc)(()=>$O),multi:!0};let $O=(()=>{class n extends ag{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>g3(t),this.createValidator=t=>function EV(n){return e=>{if(jf(e.value)||jf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(n)))(i||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&a.uIk("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[a._Bn([E7]),a.qOj]}),n})(),A7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[o3]}),n})(),k7=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Vy,useValue:t.callSetDisabledState??iD}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[A7]}),n})(),R7=(()=>{var n;class e{constructor(i,r){this.dialogRef=i,this.data=r,this.policyAccepted=!1}onNoClick(){this.dialogRef.close()}accept(){this.policyAccepted&&this.dialogRef.close()}decline(){}}return(n=e).\u0275fac=function(i){return new(i||n)(a.Y36(fV),a.Y36(mV))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-dialog-alert"]],decls:26,vars:2,consts:[[1,"img-arrow"],["src","https://clipart-library.com/img1/1670503.png","alt",""],["src","  assets/mobile.png\n    ","alt",""],[2,"color","#1a73e8"],[1,"dis-flex","wtf2"],["for","policyCheckbox",1,"policy-statement"],["placeholder","","type","checkbox","id","policyCheckbox",3,"ngModel","ngModelChange"],[1,"dis-flex","wtf1"],["mat-button","",1,"decline-button",3,"click"],[3,"disabled","click"]],template:function(i,r){1&i&&(a.TgZ(0,"div",0)(1,"p"),a._uU(2,"Control the channel using the arrow keys"),a.qZA(),a._UZ(3,"img",1)(4,"br"),a.TgZ(5,"p"),a._uU(6,"Or Remote throught your device"),a.qZA(),a._UZ(7,"img",2),a.TgZ(8,"p")(9,"span",3),a._uU(10,"Policy Statement:"),a.qZA(),a._UZ(11,"br"),a._uU(12," Content Availability: Availability of content may be limited due to licensing agreements and provider restrictions. "),a._UZ(13,"br"),a._uU(14," Internet Connectivity: A good internet connection is essential for the best user experience. "),a._UZ(15,"br"),a._uU(16," Device Compatibility: Some devices may not support all features. Internet "),a.qZA(),a.TgZ(17,"div",4)(18,"label",5),a._uU(19,"I have read and agree to the policy statements"),a.qZA(),a.TgZ(20,"input",6),a.NdJ("ngModelChange",function(o){return r.policyAccepted=o}),a.qZA()(),a.TgZ(21,"div",7)(22,"button",8),a.NdJ("click",function(){return r.decline()}),a._uU(23,"Decline"),a.qZA(),a.TgZ(24,"button",9),a.NdJ("click",function(){return r.accept()}),a._uU(25,"Accept"),a.qZA()()()),2&i&&(a.xp6(20),a.Q6J("ngModel",r.policyAccepted),a.xp6(4),a.Q6J("disabled",!r.policyAccepted))},dependencies:[yV,_O,jV,OO],styles:[".img-arrow[_ngcontent-%COMP%]{padding:29px;align-items:center;justify-content:center;display:flex;height:500px;flex-direction:column;background-color:#fff}.img-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;margin:auto}.img-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:last-child{width:60px;margin:auto}.img-arrow[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}.img-arrow[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:5px}.img-arrow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;color:#fff;background-color:#1a73e8;cursor:pointer;margin-top:10px}.img-arrow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.decline-button[_ngcontent-%COMP%]{background-color:#f44336!important}.dis-flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.wtf1[_ngcontent-%COMP%]{gap:20px}.wtf2[_ngcontent-%COMP%]{margin-top:7px}"]}),e})(),O7=(()=>{var n;class e{constructor(){this.localChannels=[{name:"TVK1",url:"https://live.kh.malimarcdn.com/live/tvk.stream/playlist.m3u8"},{name:"TVK2",url:"https://live.kh.malimarcdn.com/live/tvk2.stream/playlist.m3u8"},{name:"SeaTV",url:"https://seatv.netlinkbroadcaster.com/hls/test.m3u8"},{name:"SeaTV Radio",url:"https://fmseatv.netlinkbroadcaster.com/hls/test.m3u8"},{name:"TeaTv",url:"https://livefta.malimarcdn.com/ftaedge00/teatv2.sdp/playlist.m3u8"},{name:"KHMERTV",url:"https://livefta.malimarcdn.com/ftaedge00/khmertv2020.stream/chunklist.m3u8"},{name:"Kanali 7",url:"https://fe.tring.al/delta/105/out/u/1200_1.m3u8"},{name:"Alpo TV",url:"https://5d00db0e0fcd5.streamlock.net/7236/7236/playlist.m3u8"},{name:"CNA",url:"https://live1.mediadesk.al/cnatvlive.m3u8"},{name:"News 24 \u24c8",url:"https://tv.balkanweb.com/news24/livestream/playlist.m3u8"},{name:"Ora News",url:"https://live1.mediadesk.al/oranews.m3u8"},{name:"Report TV",url:"https://deb10stream.duckdns.org/hls/stream.m3u8"},{name:"Syri",url:"https://stream.syritv.al/SyriTV/index.m3u8"},{name:"Tropoja",url:"https://live.prostream.al/al/smil:tropojatv.smil/playlist.m3u8"},{name:"TV 7 Albania",url:"https://5d00db0e0fcd5.streamlock.net/7064/7064/playlist.m3u8"},{name:"TV Apollon \u24c8",url:"https://live.apollon.tv/Apollon-WEB/video.m3u8?token=tnt3u76re30d2"},{name:"Vizion Plus",url:"https://fe.tring.al/delta/105/out/u/rdghfhsfhfshs.m3u8"},{name:"CCTV1",url:"https://node1.olelive.com:6443/live/CCTV1HD/hls.m3u8"},{name:"CCTV2",url:"https://node1.olelive.com:6443/live/CCTV2HD/hls.m3u8"},{name:"CCTV7",url:"https://node1.olelive.com:6443/live/CCTV7HD/hls.m3u8"},{name:"CCTV8",url:"https://node1.olelive.com:6443/live/CCTV8HD/hls.m3u8"},{name:"CCTV9",url:"https://node1.olelive.com:6443/live/CCTV9HD/hls.m3u8"},{name:"CCTV10",url:"https://node1.olelive.com:6443/live/CCTV10HD/hls.m3u8"},{name:"CCTV17",url:"https://node1.olelive.com:6443/live/CCTV17HD/hls.m3u8"},{name:"TV BRICS Chinese",url:"https://brics.bonus-tv.ru/cdn/brics/chinese/playlist.m3u8"},{name:"ABC News",url:"https://content.uplynk.com/channel/3324f2467c414329b3b0cc5cd987b6be.m3u8"},{name:"CBS News",url:"https://cbsnews.akamaized.net/hls/live/2020607/cbsnlineup_8/master.m3u8"},{name:"Reuters TV",url:"https://reuters-reutersnow-1-eu.rakuten.wurl.tv/playlist.m3u8"},{name:"Spacetoon",url:"https://streams.spacetoon.com/live/stchannel/smil:livesmil.smil/playlist.m3u8"},{name:"Cartoon Network",url:"https://playout.cdn.cartoonnetwork.com.br/playout_02/playlist-720p.m3u8"},{name:"4Fun TV",url:"https://stream.4fun.tv:8888/hls/4f_high/index.m3u8"},{name:"Desi",url:"https://live.wmncdn.net/desichannel/7e2dd0aed46b70a5c77f4affdb702e4b.sdp/mono.m3u8"},{name:"Dove",url:"https://dai.google.com/linear/hls/event/dfbBGQhPQQqypdEAjpUGlA/master.m3u8"},{name:"zindagitv",url:"https://5ad386ff92705.streamlock.net/live_transcoder/ngrp:zindagitv.stream_all/chunklist.m3u8"},{name:"Pocket watch",url:"https://dai2.xumo.com/amagi_hls_data_xumo1212A-xumo-pocket-watch/CDN/master.m3u8"},{name:" Cartoon Nitro",url:"https://playout.cdn.cartoonnetwork.com.br/playout_04/playlist.m3u8"},{name:"ANTD",url:"https://liveh34.vtvcab.vn/hls/ONANTV_CL/04.m3u8"},{name:"2",url:"https://wzorigin.teroradio.com/Tofu/Tofu-Webcam1/playlist.m3u8"}],this.globalChannels=[{name:"LOKAL",url:"http://andriant.my.id"},{name:"CH2 STARMAX",url:"http://stream.rs.co.th/ch2-hi/index.m3u8"},{name:"CH3 HD",url:"http://27.254.130.64/feed/ch3hd/playlist.m3u8"},{name:"CH5",url:"http://27.254.130.64/feed/ch5hd/playlist.m3u8"},{name:"CH7 HD",url:"http://27.254.130.64/feed/ch7hd/playlist.m3u8"},{name:"CH8",url:"http://stream.rs.co.th/ch8-hi/index.m3u8"},{name:"MCOT HD",url:"http://27.254.130.64/feed/chmcothd/playlist.m3u8"},{name:"CH11 NBT",url:"http://27.254.130.64/live01/ch14.m3u8?p=m3u8"},{name:"CH11 NBT",url:"http://122.155.92.8:1935/live/ch1_L.sdp/chunklist.m3u8"},{name:"Workpoint",url:"https://gcorigin.wisdomcloud.net/live/master/playlist.m3u8_500.m3u8"}]}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function HO(){return(0,xr.e)((n,e)=>{let t,i=!1;n.subscribe((0,pr.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}F(9568);var P7=F(3942);function zO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new wt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function E3(){if(typeof Uint8Array>"u")throw new wt("unimplemented","Uint8Arrays are not available in this environment.")}function x3(){if(!function Fz(){return typeof atob<"u"}())throw new wt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class mE{constructor(e){this._delegate=e}static fromBase64String(e){return x3(),new mE(xu.fromBase64String(e))}static fromUint8Array(e){return E3(),new mE(xu.fromUint8Array(e))}toBase64(){return x3(),this._delegate.toBase64()}toUint8Array(){return E3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jO(n){return function N7(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class B7{enableIndexedDbPersistence(e,t){return function c8(n,e){UU(n=Fi(n,Vr));const t=Cs(n);if(t._uninitializedComponentsProvider)throw new wt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");kl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new Ay;return BU(t,r,new MR(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function u8(n){UU(n=Fi(n,Vr));const e=Cs(n);if(e._uninitializedComponentsProvider)throw new wt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");kl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new Ay;return BU(e,i,new yU(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function d8(n){if(n._initialized&&!n._terminated)throw new wt(tt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ws;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ot.Z)(function*(){try{var t;yield function(i){return(t=t||(0,ot.Z)(function*(r){if(!bc.D())return Promise.resolve();const s=r+"main";yield bc.delete(s)})).apply(this,arguments)}(oR(n._databaseId,n._persistenceKey)),e.resolve()}catch(i){e.reject(i)}})),e.promise}(e._delegate)}}class T3{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof If||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&kl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){OU(this._delegate,e,t,i)}enableNetwork(){return function f8(n){return function XG(n){return n.asyncQueue.enqueue((0,ot.Z)(function*(){const e=yield wU(n),t=yield EU(n);return e.setNetworkEnabled(!0),function(i){const r=cn(i);return r.vu.delete(0),Vw(r)}(t)}))}(Cs(n=Fi(n,Vr)))}(this._delegate)}disableNetwork(){return function m8(n){return function QG(n){return n.asyncQueue.enqueue((0,ot.Z)(function*(){var e;const t=yield wU(n),i=yield EU(n);return t.setNetworkEnabled(!1),function(r){return(e=e||(0,ot.Z)(function*(s){const o=cn(s);o.vu.add(0),yield Ey(o),o.bu.set("Offline")})).apply(this,arguments)}(i)}))}(Cs(n=Fi(n,Vr)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,DU("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function h8(n){return function(e){const t=new Ws;return e.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return function PG(n,e){return(xN=xN||(0,ot.Z)(function*(t,i){const r=cn(t);Lf(r.remoteStore)||Pt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(u){const h=cn(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.mutationQueue.getHighestUnacknowledgedBatchId(m))}(r.localStore);if(-1===s)return void i.resolve();const o=r.Ec.get(s)||[];o.push(i),r.Ec.set(s,o)}catch(s){const o=Cy(s,"Initialization of waitForPendingWrites() operation failed");i.reject(o)}})).apply(this,arguments)}(yield OR(e),t)})),t.promise}(Cs(n=Fi(n,Vr)))}(this._delegate)}onSnapshotsInSync(e){return function G8(n,e){return function t8(n,e){const t=new gS(e);return n.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return function(i,r){cn(i).ku.add(r),r.next()}(yield My(n),t)})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){return function(i,r){cn(i).ku.delete(r)}(yield My(n),t)}))}}(Cs(n=Fi(n,Vr)),FR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new wt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hy(this,PU(this._delegate,e))}catch(t){throw Jo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Rl(this,Gw(this._delegate,e))}catch(t){throw Jo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ea(this,function s8(n,e){if(n=Fi(n,jw),PR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new wt(tt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new To(n,null,(t=e,new Dd(qi.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Jo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function n5(n,e,t){n=Fi(n,Vr);const i=Object.assign(Object.assign({},e5),t);return function(r){if(r.maxAttempts<1)throw new wt(tt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,o){const u=new Ws;return r.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){const h=yield function xU(n){return yS(n).then(e=>e.datastore)}(r);new KG(r.asyncQueue,h,o,s,u).run()})),u.promise}(Cs(n),r=>e(new t5(n,r)),i)}(this._delegate,t=>e(new C3(this,t)))}batch(){return Cs(this._delegate),new I3(new n$(this._delegate,e=>Ry(this._delegate,e)))}loadBundle(e){return function p8(n,e){const t=Cs(n=Fi(n,Vr)),i=new a8;return function n8(n,e,t,i){const r=function(s,o){let u;return u="string"==typeof s?Y2().encode(s):s,h=function(h,m){if(h instanceof Uint8Array)return vU(h,m);if(h instanceof ArrayBuffer)return vU(new Uint8Array(h),m);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new YG(h,o);var h}(t,$w(e));n.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){!function GG(n,e,t){var i;const r=cn(n);(function(s,o,u){return(i=i||(0,ot.Z)(function*(h,m,g){try{const y=yield m.getMetadata();if(yield function(k,P){const q=cn(k),ae=Ts(P.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",ee=>q.qs.getBundleMetadata(ee,P.id)).then(ee=>!!ee&&ee.createTime.compareTo(ae)>=0)}(h.localStore,y))return yield m.close(),g._completeWith({taskState:"Success",documentsLoaded:(k=y).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);g._updateProgress(cU(y));const E=new TG(y,h.localStore,m.serializer);let x=yield m.bc();for(;x;){const k=yield E.zu(x);k&&g._updateProgress(k),x=yield m.bc()}const I=yield E.complete();return yield Rd(h,I.Ju,void 0),yield function(k,P){const q=cn(k);return q.persistence.runTransaction("Save bundle","readwrite",ae=>q.qs.saveBundleMetadata(ae,P))}(h.localStore,y),g._completeWith(I.progress),Promise.resolve(I.Hu)}catch(y){return kl("SyncEngine",`Loading bundle failed with ${y}`),g._failWith(y),Promise.resolve(new Set)}var k})).apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield OR(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function g8(n,e){return function i8(n,e){return n.asyncQueue.enqueue((0,ot.Z)(function*(){return function(t,i){const r=cn(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield vS(n),e)}))}(Cs(n=Fi(n,Vr)),e).then(t=>t?new To(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ea(this,t):null)}}class lD extends zR{constructor(e){super(),this.firestore=e}convertBytes(e){return new mE(new xu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Rl.forKey(t,this.firestore,null)}}class C3{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lD(e)}get(e){const t=cg(e);return this._delegate.get(t).then(i=>new pE(this._firestore,new Pd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=cg(e);return i?(zO("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=cg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=cg(e);return this._delegate.delete(t),this}}class I3{constructor(e){this._delegate=e}set(e,t,i){const r=cg(e);return i?(zO("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=cg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=cg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class lg{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Qw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gE(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=lg.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new lg(e,new lD(e),t),r.set(t,s)),s}}lg.INSTANCES=new WeakMap;class Rl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lD(e)}static forPath(e,t,i){if(e.length%2!=0)throw new wt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Rl(t,new $r(t._delegate,i,new rn(e)))}static forKey(e,t,i){return new Rl(t,new $r(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Hy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hy(this.firestore,PU(this._delegate,e))}catch(t){throw Jo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ui.m9)(e))instanceof $r&&LU(this._delegate,e)}set(e,t){t=zO("DocumentReference.set",t);try{return t?t$(this._delegate,e,t):t$(this._delegate,e)}catch(i){throw Jo(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?kS(this._delegate,e):kS(this._delegate,e,t,...i)}catch(r){throw Jo(r,"updateDoc()","DocumentReference.update()")}}delete(){return function z8(n){return Ry(Fi(n.firestore,Vr),[new py(n._key,qr.none())])}(this._delegate)}onSnapshot(...e){const t=S3(e),i=D3(e,r=>new pE(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return jR(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function B8(n){n=Fi(n,$r);const e=Fi(n.firestore,Vr),t=Cs(e),i=new Uf(e);return function JG(n,e){const t=new Ws;return n.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){var i;return function(r,s,o){return(i=i||(0,ot.Z)(function*(u,h,m){try{const g=yield function(y,E){const x=cn(y);return x.persistence.runTransaction("read document","readonly",I=>x.localDocuments.getDocument(I,E))}(u,h);g.isFoundDocument()?m.resolve(g):g.isNoDocument()?m.resolve(null):m.reject(new wt(tt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const y=Cy(g,`Failed to get document '${h} from cache`);m.reject(y)}})).apply(this,arguments)}(yield vS(n),e,t)})),t.promise}(t,n._key).then(r=>new Pd(e,i,n._key,r,new Qp(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function U8(n){n=Fi(n,$r);const e=Fi(n.firestore,Vr);return TU(Cs(e),n._key,{source:"server"}).then(t=>GR(e,n,t))}(this._delegate):function N8(n){n=Fi(n,$r);const e=Fi(n.firestore,Vr);return TU(Cs(e),n._key).then(t=>GR(e,n,t))}(this._delegate),t.then(i=>new pE(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Rl(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}function Jo(n,e,t){return n.message=n.message.replace(e,t),n}function S3(n){for(const e of n)if("object"==typeof e&&!jO(e))return e;return{}}function D3(n,e){var t,i;let r;return r=jO(n[0])?n[0]:jO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class pE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Rl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return e$(this._delegate,e._delegate)}}class gE extends pE{data(e){const t=this._delegate.data(e);return function iz(n,e){n||En()}(void 0!==t),t}}class ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lD(e)}where(e,t,i){try{return new ea(this.firestore,Nf(this._delegate,function I8(n,e,t){const i=e,r=IS("where",n);return Xw._create(r,i,t)}(e,t,i)))}catch(r){throw Jo(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ea(this.firestore,Nf(this._delegate,function S8(n,e="asc"){const t=e,i=IS("orderBy",n);return HR._create(i,t)}(e,t)))}catch(i){throw Jo(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ea(this.firestore,Nf(this._delegate,function D8(n){return kU("limit",n),SS._create("limit",n,"F")}(e)))}catch(t){throw Jo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ea(this.firestore,Nf(this._delegate,function A8(n){return kU("limitToLast",n),SS._create("limitToLast",n,"L")}(e)))}catch(t){throw Jo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ea(this.firestore,Nf(this._delegate,function M8(...n){return DS._create("startAt",n,!0)}(...e)))}catch(t){throw Jo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ea(this.firestore,Nf(this._delegate,function k8(...n){return DS._create("startAfter",n,!1)}(...e)))}catch(t){throw Jo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ea(this.firestore,Nf(this._delegate,function R8(...n){return AS._create("endBefore",n,!1)}(...e)))}catch(t){throw Jo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ea(this.firestore,Nf(this._delegate,function O8(...n){return AS._create("endAt",n,!0)}(...e)))}catch(t){throw Jo(t,"endAt()","Query.endAt()")}}isEqual(e){return LR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function V8(n){n=Fi(n,To);const e=Fi(n.firestore,Vr),t=Cs(e),i=new Uf(e);return function e8(n,e){const t=new Ws;return n.asyncQueue.enqueueAndForget((0,ot.Z)(function*(){var i;return function(r,s,o){return(i=i||(0,ot.Z)(function*(u,h,m){try{const g=yield cS(u,h,!0),y=new hU(h,g.ir),E=y.sc(g.documents),x=y.applyChanges(E,!1);m.resolve(x.snapshot)}catch(g){const y=Cy(g,`Failed to execute query '${h} against cache`);m.reject(y)}})).apply(this,arguments)}(yield vS(n),e,t)})),t.promise}(t,n._query).then(r=>new Bf(e,i,n,r))}(this._delegate):"server"===e?.source?function H8(n){n=Fi(n,To);const e=Fi(n.firestore,Vr),t=Cs(e),i=new Uf(e);return CU(t,n._query,{source:"server"}).then(r=>new Bf(e,i,n,r))}(this._delegate):function $8(n){n=Fi(n,To);const e=Fi(n.firestore,Vr),t=Cs(e),i=new Uf(e);return YU(n._query),CU(t,n._query).then(r=>new Bf(e,i,n,r))}(this._delegate),t.then(i=>new GO(this.firestore,new Bf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=S3(e),i=D3(e,r=>new GO(this.firestore,new Bf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return jR(this._delegate,t,i)}withConverter(e){return new ea(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}class $7{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class GO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ea(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $7(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new gE(this._firestore,i))})}isEqual(e){return e$(this._delegate,e._delegate)}}class Hy extends ea{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rl(this.firestore,e):null}doc(e){try{return new Rl(this.firestore,void 0===e?Gw(this._delegate):Gw(this._delegate,e))}catch(t){throw Jo(t,"doc()","CollectionReference.doc()")}}add(e){return function j8(n,e){const t=Fi(n.firestore,Vr),i=Gw(n),r=MS(n.converter,e);return Ry(t,[xS(Zp(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,qr.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Rl(this.firestore,t))}isEqual(e){return LU(this._delegate,e._delegate)}withConverter(e){return new Hy(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}function cg(n){return Fi(n,$r)}class WO{constructor(...e){this._delegate=new Od(...e)}static documentId(){return new WO(ps.keyField().canonicalString())}isEqual(e){return(e=(0,ui.m9)(e))instanceof Od&&this._delegate._internalPath.isEqual(e._internalPath)}}class ug{constructor(e){this._delegate=e}static serverTimestamp(){const e=function s5(){return new NR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ug(e)}static delete(){const e=function r5(){return new Yw("deleteField")}();return e._methodName="FieldValue.delete",new ug(e)}static arrayUnion(...e){const t=function o5(...n){return new w8("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ug(t)}static arrayRemove(...e){const t=function a5(...n){return new E8("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ug(t)}static increment(e){const t=function l5(n){return new x8("increment",n)}(e);return t._methodName="FieldValue.increment",new ug(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const V7={Firestore:T3,GeoPoint:wS,Timestamp:Yr,Blob:mE,Transaction:C3,WriteBatch:I3,DocumentReference:Rl,DocumentSnapshot:pE,Query:ea,QueryDocumentSnapshot:gE,QuerySnapshot:GO,CollectionReference:Hy,FieldPath:WO,FieldValue:ug,setLogLevel:function U7(n){!function nz(n){wf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function A3(n,e){return function j7(n,e=eE.z){return new zr.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function YO(n,e){return A3(n,e).pipe((0,pn.U)(t=>({payload:t,type:"query"})))}function cD(n,e){return YO(n,e).pipe(ks(void 0),HO(),(0,pn.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(o=>({type:o.type,payload:o}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((o,u)=>{const h=r.find(g=>g.doc.ref.isEqual(o.ref)),m=t?.payload.docs.find(g=>g.ref.isEqual(o.ref));h&&JSON.stringify(h.doc.metadata)===JSON.stringify(o.metadata)||!h&&m&&JSON.stringify(m.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:o}})}),s}))}function M3(n,e,t){return cD(n,t).pipe(Xc((i,r)=>function W7(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function Y7(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return qO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return qO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qO(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),zS(),(0,pn.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function qO(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function k3(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function z7(n){(function H7(n,e){n.INTERNAL.registerComponent(new hd.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},V7)))})(n,(e,t)=>new T3(e,t,new B7)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(P7.Z);class R3{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=cD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pn.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(ks(void 0),HO(),Di(([i,r])=>r.length>0||!i),(0,pn.U)(([i,r])=>r),pi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Xc((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=k3(e);return M3(this.query,t,this.afs.schedulers.outsideAngular).pipe(pi.iC)}valueChanges(e={}){return YO(this.query,this.afs.schedulers.outsideAngular).pipe((0,pn.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),pi.iC)}get(e){return(0,Hi.D)(this.query.get(e)).pipe(pi.iC)}add(e){return this.ref.add(e)}doc(e){return new O3(this.ref.doc(e),this.afs)}}class O3{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=F3(i,t);return new R3(r,s,this.afs)}snapshotChanges(){return function G7(n,e){return A3(n,e).pipe(ks(void 0),HO(),(0,pn.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Hi.D)(this.ref.get(e)).pipe(pi.iC)}}class q7{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cD(this.query,this.afs.schedulers.outsideAngular).pipe((0,pn.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),Di(t=>t.length>0),pi.iC):cD(this.query,this.afs.schedulers.outsideAngular).pipe(pi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Xc((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=k3(e);return M3(this.query,t,this.afs.schedulers.outsideAngular).pipe(pi.iC)}valueChanges(e={}){return YO(this.query,this.afs.schedulers.outsideAngular).pipe((0,pn.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),pi.iC)}get(e){return(0,Hi.D)(this.query.get(e)).pipe(pi.iC)}}const P3=new a.OlP("angularfire2.enableFirestorePersistence"),L3=new a.OlP("angularfire2.firestore.persistenceSettings"),K7=new a.OlP("angularfire2.firestore.settings"),Z7=new a.OlP("angularfire2.firestore.use-emulator");function F3(n,e=(t=>t)){return{query:e(n),ref:n}}let KO=(()=>{class n{constructor(t,i,r,s,o,u,h,m,g,y,E,x,I,k,P,q,ae){this.schedulers=h;const ee=(0,fa.on)(t,u,i),ye=g;y&&i_(ee,u,E,I,k,P,x,q),[this.firestore,this.persistenceEnabled$]=(0,fa.cc)(`${ee.name}.firestore`,"AngularFirestore",ee.name,()=>{const De=u.runOutsideAngular(()=>ee.firestore());if(s&&De.settings(s),ye&&De.useEmulator(...ye),r&&!nm(o)){const dt=()=>{try{return(0,Hi.D)(De.enablePersistence(m||void 0).then(()=>!0,()=>!1))}catch(it){return typeof console<"u"&&console.warn(it),mn(!1)}};return[De,u.runOutsideAngular(dt)]}return[De,mn(!1)]},[s,ye,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=F3(r,i),u=this.schedulers.ngZone.run(()=>s);return new R3(u,o,this)}collectionGroup(t,i){const r=i||(o=>o),s=this.firestore.collectionGroup(t);return new q7(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new O3(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(fa.Dh),a.LFG(fa.xv,8),a.LFG(P3,8),a.LFG(K7,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(pi.HU),a.LFG(L3,8),a.LFG(Z7,8),a.LFG(cu,8),a.LFG(o0,8),a.LFG(a0,8),a.LFG(oT,8),a.LFG(l0,8),a.LFG(c0,8),a.LFG(n_,8),a.LFG(hc,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),X7=(()=>{class n{constructor(){rT.Z.registerVersion("angularfire",pi.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:P3,useValue:!0},{provide:L3,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[KO]}),n})();const Q7=["videoPlayer"];function J7(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",28)(1,"a",29),a.NdJ("click",function(){const r=a.CHM(t),s=r.index,o=r.$implicit,u=a.oxw();return u.createCollection(s,o.name),a.KtG(u.changeChannel(s,!0))}),a._uU(2),a.qZA()()}if(2&n){const t=e.$implicit,i=e.index,r=a.oxw();a.xp6(1),a.ekj("active",r.activeLocalChannel===i),a.xp6(1),a.AsE(" ",i,". ",t.name," ")}}function eY(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"button",30),a.NdJ("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r.auth.loginWithGoogle())}),a._uU(1," Sign In "),a.qZA()}}function tY(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"button",31),a.NdJ("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r.auth.logout())}),a._uU(1," Sign Out "),a.qZA()}}function nY(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"button",32),a.NdJ("click",function(){const s=a.CHM(t).$implicit,o=a.oxw();return a.KtG(o.updateChannelIndex(s))}),a._uU(1),a.qZA()}if(2&n){const t=e.$implicit;a.xp6(1),a.hij(" ",t," ")}}const iY=function(){return[1,2,3,4,5,6,7,8,9]};let rY=(()=>{var n;class e{constructor(i,r,s,o,u,h,m,g,y){this.route=i,this.router=r,this.store=s,this.auth=o,this.afAuth=u,this.firestore=h,this.ngZone=m,this.dialog=g,this.mediaMatcher=y,this.documentRef=null,this.volumeLevel=0,this.activeLocalChannel=-1,this.activeGlobalChannel=-1,this.channelIndex=0,this.hls=new Sl,this.currentTime=new Date;const E=y.matchMedia("(max-width: 500px)");E.addEventListener("change",()=>{this.ngZone.run(()=>{this.isMobileScreen=E.matches,this.isMobileScreen&&this.dialog.closeAll()})}),this.isMobileScreen=E.matches}handleKeyboardEvent(i){"ArrowLeft"===i.key?this.changeChannel(this.activeLocalChannel-1,!0):"ArrowRight"===i.key&&this.changeChannel(this.activeLocalChannel+1,!0)}createCollection(i,r){var s=this;return(0,ot.Z)(function*(){const o=yield s.afAuth.currentUser,u=s.firestore.collection("users"),h=o?.uid;if(o){const m=o.displayName;console.log("username",o);const g={SelectedIndex:i,ChannelName:r,IncreaseVolume:30,DecreaseVolume:30,key:"",username:m};s.data=g;const y=u.doc(h);return s.documentRef=y.ref,g.key=y.ref.id,y.set(g).then(()=>{s.documentRef&&kS(s.documentRef,{SelectedIndex:i})}).catch(E=>{}),s.unsubscribe=jR(s.documentRef,E=>{const x=E.data();x&&s.router.navigate(["/television",x.ChannelName,x.SelectedIndex])}),y}throw new Error("User is not authenticated.")})()}ngOnInit(){this.auth.isLoading=!0,this.afAuth.authState.subscribe(i=>{i&&this.ngZone.run(()=>{this.auth.isLoading=!1,this.userData=i,this.auth.userDataAuth=this.userData,this.firestore.collection("users").doc(this.userData?.uid).valueChanges().subscribe(r=>{if(r&&r.ChannelName){const s=r.ChannelName;this.selectedIndex=r.SelectedIndex||0,this.router.navigate(["/television",s,this.selectedIndex])}}),console.log("User is authenticated",this.userData??"UID not available")})}),window.innerWidth>500&&this.dialog.open(R7,{width:"550px",data:{title:"Dialog Title",message:"Hello, this is the dialog content!"}}),setInterval(()=>{this.currentTime=new Date},1e3),this.fetchData()}fetchData(){this.afAuth.authState.subscribe(i=>{i?(this.userData=i,this.firestore.doc(`users/${i.uid}`).valueChanges().subscribe(s=>{const{SelectedIndex:o=0,ChannelName:u="",IncreaseVolume:h=0,DecreaseVolume:m=0,key:g="",username:y=null}=s||{};this.data={SelectedIndex:o,ChannelName:u,IncreaseVolume:h,DecreaseVolume:m,key:g,username:y}})):this.data={SelectedIndex:0,ChannelName:"",IncreaseVolume:0,DecreaseVolume:0,key:"",username:null}})}ngAfterViewInit(){var r,i=this;Sl.isSupported()&&this.route.paramMap.subscribe(function(s){return(r=r||(0,ot.Z)(function*(o){const u=(o.get("channelName")||"").replace(/-/g," "),h=o.get("index");if(null!==h){const g=+h;i.changeChannel(g,g<i.store.localChannels.length);const E=i.createCollection(g,u);var m;E&&(yield E).valueChanges().subscribe(function(x){return(m=m||(0,ot.Z)(function*(I){if(I){void 0!==I.IncreaseVolume&&(i.videoplayer.nativeElement.volume=I.IncreaseVolume/100),void 0!==I.DecreaseVolume&&(i.videoplayer.nativeElement.volume=I.DecreaseVolume/100),void 0!==I.ChannelUrl&&i.activeLocalChannel===g&&(i.playChannel(I.ChannelUrl),i.isMobileDevice()&&i.enableAutoplayOnMobile());const P=(yield i.afAuth.currentUser)?.displayName;if(i.documentRef&&P){const ae=Gw(FU(),"users",i.documentRef.id);yield kS(ae,{username:P})}}})).apply(this,arguments)})}})).apply(this,arguments)})}isMobileDevice(){return this.mediaMatcher.matchMedia("(max-width: 600px)").matches}enableAutoplayOnMobile(){const i=this.videoplayer.nativeElement.play();void 0!==i&&i.catch(r=>{console.error("Autoplay prevented:",r)})}ngOnDestroy(){}playChannel(i){this.videoplayer&&this.videoplayer.nativeElement&&(i.startsWith("blob:")?fetch(i).then(r=>r.blob()).then(r=>{const s=URL.createObjectURL(r);this.videoplayer.nativeElement.src=s,this.videoplayer.nativeElement.play()}):(this.hls.loadSource(i),this.hls.attachMedia(this.videoplayer.nativeElement),this.hls.on(Sl.Events.MANIFEST_PARSED,()=>{this.videoplayer.nativeElement.play()})))}changeChannel(i,r){const s=r?this.store.localChannels:this.store.globalChannels;i<0?i=0:i>=s.length&&(i%=s.length),r?(this.activeLocalChannel=i,this.activeGlobalChannel=-1):(this.activeGlobalChannel=i,this.activeLocalChannel=-1),this.playChannel(s[i].url);const u=s[i].name;this.createCollection(i,u),this.router.navigate(["/television",u,i])}updateChannelIndex(i){this.channelIndex=10*this.channelIndex+i,this.changeChannelTimeout&&clearTimeout(this.changeChannelTimeout),this.changeChannelTimeout=setTimeout(()=>{this.changeChannel(this.channelIndex,!0),this.channelIndex=0},2e3),this.createCollection(this.channelIndex,this.store.localChannels[this.channelIndex].name)}increaseVolume(){this.updateVolume(.1)}decreaseVolume(){this.updateVolume(-.1)}updateVolume(i){let r=this.videoplayer.nativeElement.volume;const s=Math.max(Math.min(r+i,1),0);r!==s&&(this.videoplayer.nativeElement.volume=s,this.volumeLevel=Math.round(100*s),this.createCollection(this.activeLocalChannel,this.store.localChannels[this.activeLocalChannel].name))}onChannelIndexChange(i){this.channelIndex=+i.target.value}}return(n=e).\u0275fac=function(i){return new(i||n)(a.Y36(za),a.Y36(jr),a.Y36(O7),a.Y36(tf),a.Y36(cu),a.Y36(KO),a.Y36(a.R0b),a.Y36(gV),a.Y36(k$))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-main-display"]],viewQuery:function(i,r){if(1&i&&a.Gf(Q7,5),2&i){let s;a.iGM(s=a.CRH())&&(r.videoplayer=s.first)}},hostBindings:function(i,r){1&i&&a.NdJ("keydown",function(o){return r.handleKeyboardEvent(o)},!1,a.Jf7)},decls:53,vars:16,consts:[[1,"container"],[1,"ticker"],[1,"ticker-logo"],[1,"ticker-logo-channel"],["id","clock"],[1,"ticker-news"],[1,"row"],[1,"centre"],[1,"tv-frame"],["controls","","autoplay","",1,"w-100","video"],["videoPlayer",""],[1,"channel"],[1,"btn-channel"],["class","button",4,"ngFor","ngForOf"],[1,"remote-control"],["mat-flat-button","","color","accent","color","accent",3,"click",4,"ngIf"],["mat-flat-button","","color","accent","color","primary",3,"click",4,"ngIf"],[1,"title-remote"],[1,"volume-display"],[1,"number-display"],[1,"remote-row","col"],[1,"remote-updown","up",3,"click"],[1,"remote-updown","center"],[1,"remote-updown","down",3,"click"],[1,"channel-input"],[1,"number-buttons"],["class","num",3,"click",4,"ngFor","ngForOf"],[1,"num","zero",3,"click"],[1,"button"],["matRipple","",3,"click"],["mat-flat-button","","color","accent","color","accent",3,"click"],["mat-flat-button","","color","accent","color","primary",3,"click"],[1,"num",3,"click"]],template:function(i,r){1&i&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),a._uU(5),a.ALo(6,"date"),a.qZA()()(),a.TgZ(7,"div",5)(8,"p"),a._uU(9," \u17a2\u17d2\u1793\u1780\u17a2\u17b6\u1785\u1798\u17be\u179b\u1791\u17bc\u179a\u1791\u179f\u17d2\u179f\u1793\u17cd\u1781\u17d2\u1798\u17c2\u179a\u178a\u17c2\u179b\u1798\u17b6\u1793\u1794\u17d2\u179a\u1797\u17c1\u1791\u1785\u17d2\u179a\u17be\u1793\u1794\u17d2\u179a\u179f\u17b7\u1793\u1794\u17be\u17a2\u17d2\u1793\u1780\u1785\u1784\u17cb\u17d4 \u1780\u17b6\u179a\u1785\u17bc\u179b\u1791\u17c5\u1780\u17b6\u1793\u17cb\u1791\u17b8\u1795\u17d2\u179f\u17b6\u179a\u1791\u17bc\u179a\u1791\u179f\u17d2\u179f\u1793\u17cd\u1781\u17d2\u1798\u17c2\u179a\u178a\u17c2\u179b\u1798\u17b6\u1793\u1794\u17d2\u179a\u1797\u17c1\u1791\u1785\u17d2\u179a\u17be\u1793\u1782\u17ba\u17a2\u17b6\u1785\u1787\u17b6\u1787\u1798\u17d2\u179a\u17be\u179f\u178a\u17c2\u179b\u1794\u17d2\u179a\u17be\u1794\u17d2\u179a\u17b6\u179f\u17cb\u1794\u17b6\u1793\u17d4 \u17a7\u1791\u17b6\u17a0\u179a\u178e\u17cd\u1782\u17ba\u1798\u17b6\u1793\u1780\u1798\u17d2\u1798\u179c\u17b7\u1792\u17b8 RITHY TV \u178a\u17c2\u179b\u17a2\u17b6\u1785\u1795\u17d2\u178f\u179b\u17cb\u1793\u17bc\u179c\u1791\u17bc\u179a\u1791\u179f\u17d2\u179f\u1793\u17cd\u1781\u17d2\u1798\u17c2\u179a\u1785\u17d2\u179a\u17be\u1793\u1794\u17d2\u179a\u1797\u17c1\u1791\u178a\u17bc\u1785\u1787\u17b6 Rasmey Hang Meas HDTV, MYTV, CTN, CNC, TV3, TV5, CTV9, Apsara TV, BTV News, Bayon TV, SeaTV, ETV, PNN \u1793\u17b7\u1784\u1785\u17d2\u179a\u17be\u1793\u1791\u17c0\u178f\u17d4 \u17a2\u17d2\u1793\u1780\u17a2\u17b6\u1785\u1798\u17be\u179b\u1791\u17bc\u179a\u1791\u179f\u17d2\u179f\u1793\u17cd\u1793\u17c1\u17c7\u1794\u17b6\u1793\u179b\u17be\u1782\u17d2\u179a\u17bf\u1784\u1794\u1793\u17d2\u1791\u17b6\u1793\u17cb\u179f\u1798\u17d0\u1799\u178a\u17c2\u179b\u1798\u17b6\u1793\u1794\u17d2\u179a\u1796\u17d0\u1793\u17d2\u1792\u1794\u17d2\u179a\u17be\u1794\u17d2\u179a\u17b6\u179f\u17cb\u1794\u17b6\u1793\u1787\u17b6\u1785\u17d2\u179a\u17be\u1793\u1794\u17d2\u179a\u1797\u17c1\u1791\u1793\u17c5\u1796\u17c1\u179b\u178e\u17b6\u1798\u17bd\u1799\u178a\u17c2\u179b\u17a2\u17d2\u1793\u1780\u1785\u1784\u17cb\u17d4 \u179f\u17bc\u1798\u17a2\u179a\u1782\u17bb\u178e\u17d4 "),a.qZA()()(),a.TgZ(10,"div",6)(11,"div",7)(12,"div",8),a._UZ(13,"video",9,10),a.qZA()(),a.TgZ(15,"div",11)(16,"h2"),a._uU(17,"Channels"),a.qZA(),a.TgZ(18,"div",12),a.YNc(19,J7,3,4,"div",13),a.qZA()()()(),a.TgZ(20,"div",14),a.YNc(21,eY,2,0,"button",15),a.ALo(22,"async"),a.YNc(23,tY,2,0,"button",16),a.ALo(24,"async"),a.TgZ(25,"p",17),a._uU(26,"THY SMART Remote"),a.qZA(),a.TgZ(27,"p",17),a._uU(28),a.qZA(),a.TgZ(29,"div",18),a._uU(30),a.qZA(),a.TgZ(31,"div",19),a._uU(32),a.qZA(),a.TgZ(33,"div",6)(34,"div",20)(35,"button",21),a.NdJ("click",function(){return r.increaseVolume()}),a._uU(36,"+"),a.qZA(),a.TgZ(37,"button",22),a._uU(38,"VOL"),a.qZA(),a.TgZ(39,"button",23),a.NdJ("click",function(){return r.decreaseVolume()}),a._uU(40,"-"),a.qZA()(),a.TgZ(41,"div",20)(42,"button",21),a.NdJ("click",function(){return r.changeChannel(r.selectedIndex+1,!0)}),a._uU(43," + "),a.qZA(),a.TgZ(44,"button",22),a._uU(45,"CN"),a.qZA(),a.TgZ(46,"button",23),a.NdJ("click",function(){return r.changeChannel(r.selectedIndex-1,!0)}),a._uU(47," - "),a.qZA()()(),a.TgZ(48,"div",24)(49,"div",25),a.YNc(50,nY,2,1,"button",26),a.TgZ(51,"button",27),a.NdJ("click",function(){return r.updateChannelIndex(0)}),a._uU(52,"0"),a.qZA()()()()),2&i&&(a.xp6(5),a.Oqu(a.xi3(6,8,r.currentTime,"h:mm:ssa")),a.xp6(14),a.Q6J("ngForOf",r.store.localChannels),a.xp6(2),a.Q6J("ngIf",null===a.lcZ(22,11,r.afAuth.authState)),a.xp6(2),a.Q6J("ngIf",a.lcZ(24,13,r.afAuth.authState)),a.xp6(5),a.hij(" Welcome Back ",null==r.auth.userDataAuth?null:r.auth.userDataAuth.displayName," "),a.xp6(2),a.hij("Volume: ",r.volumeLevel,""),a.xp6(2),a.hij(" Channel: ",r.channelIndex||r.data.SelectedIndex," "),a.xp6(18),a.Q6J("ngForOf",a.DdM(15,iY)))},dependencies:[ao,sr,yV,lE,Lt,cs],styles:['.container[_ngcontent-%COMP%]{font-family:Arial,sans-serif;min-width:100%;color:#fff;margin-top:50px;position:relative}.channel[_ngcontent-%COMP%]{padding-top:14px;background-color:#fff;margin-left:auto;z-index:99;display:flex;flex-direction:column;text-align:center}.channel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000}.channel[_ngcontent-%COMP%]   .btn-channel[_ngcontent-%COMP%]{padding:0 10px 10px;overflow:hidden auto;max-height:calc(100vh - 122px)}.button[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:13px;border-radius:10px;width:100%;padding-left:3px}.button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:3px;text-align:start;align-items:flex-start;flex-shrink:0;padding:11px 10px;background-color:#bbd9e9;opacity:.8;transition:opacity .3s;border-radius:10px;width:90%;cursor:pointer;font-weight:500;color:#000;margin:4px 0}.button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1}.button[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.tv-frame[_ngcontent-%COMP%]{width:704px;height:536px;background-image:url(/assets/PngItem_1681287.png);background-size:cover;background-position:center;position:relative}@media (max-width: 1000px){.tv-frame[_ngcontent-%COMP%]{width:281.6px;height:214.4px}}.video[_ngcontent-%COMP%]{border-radius:7px;position:absolute;top:7px;left:7px;object-fit:fill;width:98.2%;height:79.4%}@media (max-width: 1000px){.video[_ngcontent-%COMP%]{border-radius:4px;top:3px;left:2.9px}}.remote-control[_ngcontent-%COMP%]{display:none}.remote-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:10px}.row[_ngcontent-%COMP%]{overflow:hidden;display:flex}.col[_ngcontent-%COMP%]{flex-direction:column;border-radius:50%;padding:0 10px;width:70px}.remote-button[_ngcontent-%COMP%]{margin:5px;padding:5px 10px;font-size:14px;background-color:#f0f0f0;border:none;border-radius:5px;color:#333;transition:background-color .3s ease-in-out,transform .3s ease-in-out}.remote-button[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.remote-button[_ngcontent-%COMP%]:active{animation:_ngcontent-%COMP%_button-click .2s linear}.remote-updown[_ngcontent-%COMP%]{padding:20px;border:none}.up[_ngcontent-%COMP%]{border-radius:50% 50% 0 0;font-size:20px}.center[_ngcontent-%COMP%]{font-weight:500}.down[_ngcontent-%COMP%]{font-size:20px;border-radius:0 0 50% 50%}.remote-updown.up[_ngcontent-%COMP%]:hover, .remote-updown.down[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.remote-updown.up[_ngcontent-%COMP%]:active, .remote-updown.down[_ngcontent-%COMP%]:active{animation:_ngcontent-%COMP%_button-click .2s linear;background-color:#f0f0f096}@keyframes _ngcontent-%COMP%_button-click{0%{transform:scale(1)}50%{transform:scale(.9)}to{transform:scale(1)}}.number-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;justify-items:center;align-items:center}.centre[_ngcontent-%COMP%]{display:block;margin:50px auto}@media (max-width: 1000px){.centre[_ngcontent-%COMP%]{margin:0 auto}}.num[_ngcontent-%COMP%]{width:100px;height:50px;font-size:16px;background-color:#f0f0f0;border:none;border-radius:5px;color:#333;transition:background-color .3s ease-in-out,transform .3s ease-in-out;display:flex;align-items:center;justify-content:center}.num.zero[_ngcontent-%COMP%]{grid-column:span 3}.num[_ngcontent-%COMP%]:active{color:#fff;background-color:#007bff;animation:_ngcontent-%COMP%_button-click .2s linear}.volume-display[_ngcontent-%COMP%], .number-display[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#000;padding:10px;margin-bottom:20px;border-radius:6px;font-size:16px}@media screen and (max-width: 600px){.container[_ngcontent-%COMP%]{display:none}.title-remote[_ngcontent-%COMP%]{color:#000!important;font-size:12px}.remote-control[_ngcontent-%COMP%]{display:block;position:fixed;height:100vh;width:100vw;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center}.remote-control[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#fff;padding:20px;border-radius:15px}.title-remote[_ngcontent-%COMP%]{font-size:16px!important}}#clock[_ngcontent-%COMP%]{color:#fff;display:inline;font-size:14px;padding:10px;left:0;font-family:Montserrat,sans-serif;font-weight:400}.ticker[_ngcontent-%COMP%]{overflow:hidden;width:100%;position:absolute;bottom:0;left:0;font-family:KhmerOS Siemreap,sans-serif}.ticker-logo-channel[_ngcontent-%COMP%]{position:absolute;top:-50px;left:-21px;font-size:160px;font-weight:700}.ticker-logo[_ngcontent-%COMP%]{position:absolute;top:8px;left:20px;z-index:10}.ticker-logo[_ngcontent-%COMP%]:before{display:table;content:"";width:100px;height:37px;border-right:5px solid #ffffff;position:absolute;top:-8px;left:-28px;background:linear-gradient(to right,#333 0%,#333 84%,#333 91%,#333 100%,#ffffff 100%)}  .mat-typography p{margin:0!important}.ticker-tip[_ngcontent-%COMP%]{width:100%;padding:6px 0;margin-left:200px;box-shadow:inset 0 -3px 3px #ffffff80;background-color:#fff;color:#111;transform:skew(-45deg)}.ticker-tip-info[_ngcontent-%COMP%]{margin-left:50px;position:relative;transform:skew(45deg)}.ticker-title[_ngcontent-%COMP%]{width:2500px;margin-top:5px;padding-bottom:5px;color:#fff;font-size:20px;text-transform:uppercase;text-shadow:0 0 2px #065b70;background:linear-gradient(135deg,#333 0%,#333 11%,#333 24%,#333 30%,#333 68%);border-bottom:5px solid #b8860b}.ticker-title[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;margin-right:50px;animation:_ngcontent-%COMP%_title 10s infinite linear}@keyframes _ngcontent-%COMP%_title{0%{transform:translate(0)}to{transform:translate(-233px)}}.ticker-news[_ngcontent-%COMP%]{width:7000px;padding:8px 0;color:#fff;font-size:14px;text-transform:uppercase;text-shadow:0 0 5px black;background:linear-gradient(-45deg,rgba(114,39,16,.6),rgba(79,7,34,.6),rgba(18,113,147,.6),rgba(11,113,89,.6));background-size:400% 400%;animation:_ngcontent-%COMP%_gradient 15s ease infinite}.ticker-news[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Khmer,sans-serif}@keyframes _ngcontent-%COMP%_gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.ticker-news[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;animation:_ngcontent-%COMP%_news 50s infinite linear}@keyframes _ngcontent-%COMP%_news{0%{transform:translate(0)}to{transform:translate(-4135px)}}']}),e})(),sY=(()=>{var n;class e{constructor(i,r,s,o){this.router=i,this.firestore=r,this.auth=s,this.afAuth=o}ngOnInit(){this.afAuth.authState.subscribe(i=>{i&&this.firestore.collection("users").doc(i?.uid).valueChanges().subscribe(r=>{r&&r.ChannelName&&this.router.navigate(["/television",r.ChannelName,r.SelectedIndex])})})}}return(n=e).\u0275fac=function(i){return new(i||n)(a.Y36(jr),a.Y36(KO),a.Y36(tf),a.Y36(cu))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],decls:0,vars:0,template:function(i,r){},encapsulation:2}),e})();const uD=["*"],oY=["content"];function aY(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",2),a.NdJ("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r._onBackdropClicked())}),a.qZA()}if(2&n){const t=a.oxw();a.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function lY(n,e){1&n&&(a.TgZ(0,"mat-drawer-content"),a.Hsn(1,2),a.qZA())}const cY=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],uY=["mat-drawer","mat-drawer-content","*"];function dY(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",2),a.NdJ("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r._onBackdropClicked())}),a.qZA()}if(2&n){const t=a.oxw();a.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function hY(n,e){1&n&&(a.TgZ(0,"mat-sidenav-content"),a.Hsn(1,2),a.qZA())}const fY=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],mY=["mat-sidenav","mat-sidenav-content","*"],N3={transformDrawer:Uy("transform",[Nd("open, open-instant",No({transform:"none",visibility:"visible"})),Nd("void",No({"box-shadow":"none",visibility:"hidden"})),Iu("void => open-instant",Cu("0ms")),Iu("void <=> open, open-instant => void",Cu("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},gY=new a.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function _Y(){return!1}}),ZO=new a.OlP("MAT_DRAWER_CONTAINER");let dD=(()=>{class n extends ig{constructor(t,i,r,s,o){super(r,s,o),this._changeDetectorRef=t,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.sBO),a.Y36((0,a.Gpc)(()=>U3)),a.Y36(a.SBq),a.Y36(ng),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,i){2&t&&a.Udp("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[a._Bn([{provide:ig,useExisting:n}]),a.qOj],ngContentSelectors:uD,decls:1,vars:0,template:function(t,i){1&t&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),B3=(()=>{class n{get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Kr(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=Kr(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(Kr(t))}constructor(t,i,r,s,o,u,h,m){this._elementRef=t,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=s,this._ngZone=o,this._interactivityChecker=u,this._doc=h,this._container=m,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Ln.x,this._animationEnd=new Ln.x,this._animationState="void",this.openedChange=new a.vpe(!0),this._openedStream=this.openedChange.pipe(Di(g=>g),(0,pn.U)(()=>{})),this.openedStart=this._animationStarted.pipe(Di(g=>g.fromState!==g.toState&&0===g.toState.indexOf("open")),Ao(void 0)),this._closedStream=this.openedChange.pipe(Di(g=>!g),(0,pn.U)(()=>{})),this.closedStart=this._animationStarted.pipe(Di(g=>g.fromState!==g.toState&&"void"===g.toState),Ao(void 0)),this._destroyed=new Ln.x,this.onPositionChanged=new a.vpe,this._modeChanged=new Ln.x,this.openedChange.subscribe(g=>{g?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{eg(this._elementRef.nativeElement,"keydown").pipe(Di(g=>27===g.keyCode&&!this.disableClose&&!sg(g)),br(this._destroyed)).subscribe(g=>this._ngZone.run(()=>{this.close(),g.stopPropagation(),g.preventDefault()}))}),this._animationEnd.pipe(zS((g,y)=>g.fromState===y.fromState&&g.toState===y.toState)).subscribe(g=>{const{fromState:y,toState:E}=g;(0===E.indexOf("open")&&"void"===y||"void"===E&&0===y.indexOf("open"))&&this.openedChange.emit(this._opened)})}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,i){t&&i&&(this._openedVia=i);const r=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),r}_setOpen(t,i,r){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(Mr(1)).subscribe(o=>s(o?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const i=this._elementRef.nativeElement,r=i.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(YS),a.Y36(zf),a.Y36(ro),a.Y36(a.R0b),a.Y36(oE),a.Y36(me,8),a.Y36(ZO,8))},n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,i){if(1&t&&a.Gf(oY,5),2&t){let r;a.iGM(r=a.CRH())&&(i._content=r.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,i){1&t&&a.WFA("@transform.start",function(s){return i._animationStarted.next(s)})("@transform.done",function(s){return i._animationEnd.next(s)}),2&t&&(a.uIk("align",null),a.d8E("@transform",i._animationState),a.ekj("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:uD,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,i){1&t&&(a.F$t(),a.TgZ(0,"div",0,1),a.Hsn(2),a.qZA())},dependencies:[ig],encapsulation:2,data:{animation:[N3.transformDrawer]},changeDetection:0}),n})(),U3=(()=>{class n{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Kr(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:Kr(t)}get scrollable(){return this._userContent||this._content}constructor(t,i,r,s,o,u=!1,h){this._dir=t,this._element=i,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=h,this._drawers=new a.n_E,this.backdropClick=new a.vpe,this._destroyed=new Ln.x,this._doCheckSubject=new Ln.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Ln.x,t&&t.change.pipe(br(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(br(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=u}ngAfterContentInit(){this._allDrawers.changes.pipe(ks(this._allDrawers),br(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(ks(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(HS(10),br(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();t+=r,i-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();i+=r,t-=r}t=t||null,i=i||null,(t!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:t,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Di(i=>i.fromState!==i.toState),br(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(br(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(br(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Mr(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(br((0,El.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";t?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Ld,8),a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(a.sBO),a.Y36(NS),a.Y36(gY),a.Y36(a.QbO,8))},n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,i,r){if(1&t&&(a.Suo(r,dD,5),a.Suo(r,B3,5)),2&t){let s;a.iGM(s=a.CRH())&&(i._content=s.first),a.iGM(s=a.CRH())&&(i._allDrawers=s)}},viewQuery:function(t,i){if(1&t&&a.Gf(dD,5),2&t){let r;a.iGM(r=a.CRH())&&(i._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,i){2&t&&a.ekj("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[a._Bn([{provide:ZO,useExisting:n}])],ngContentSelectors:uY,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){1&t&&(a.F$t(cY),a.YNc(0,aY,1,2,"div",0),a.Hsn(1),a.Hsn(2,1),a.YNc(3,lY,2,0,"mat-drawer-content",1)),2&t&&(a.Q6J("ngIf",i.hasBackdrop),a.xp6(3),a.Q6J("ngIf",!i._content))},dependencies:[sr,dD],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),n})(),XO=(()=>{class n extends dD{constructor(t,i,r,s,o){super(t,i,r,s,o)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.sBO),a.Y36((0,a.Gpc)(()=>V3)),a.Y36(a.SBq),a.Y36(ng),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,i){2&t&&a.Udp("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[a._Bn([{provide:ig,useExisting:n}]),a.qOj],ngContentSelectors:uD,decls:1,vars:0,template:function(t,i){1&t&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),$3=(()=>{class n extends B3{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=Kr(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=Vf(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=Vf(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(n)))(i||n)}}(),n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,i){2&t&&(a.uIk("align",null),a.Udp("top",i.fixedInViewport?i.fixedTopGap:null,"px")("bottom",i.fixedInViewport?i.fixedBottomGap:null,"px"),a.ekj("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened)("mat-sidenav-fixed",i.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[a.qOj],ngContentSelectors:uD,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,i){1&t&&(a.F$t(),a.TgZ(0,"div",0,1),a.Hsn(2),a.qZA())},dependencies:[ig],encapsulation:2,data:{animation:[N3.transformDrawer]},changeDetection:0}),n})(),V3=(()=>{class n extends U3{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(n)))(i||n)}}(),n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(t,i,r){if(1&t&&(a.Suo(r,XO,5),a.Suo(r,$3,5)),2&t){let s;a.iGM(s=a.CRH())&&(i._content=s.first),a.iGM(s=a.CRH())&&(i._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,i){2&t&&a.ekj("mat-drawer-container-explicit-backdrop",i._backdropOverride)},exportAs:["matSidenavContainer"],features:[a._Bn([{provide:ZO,useExisting:n}]),a.qOj],ngContentSelectors:mY,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){1&t&&(a.F$t(fY),a.YNc(0,dY,1,2,"div",0),a.Hsn(1),a.Hsn(2,1),a.YNc(3,hY,2,0,"mat-sidenav-content",1)),2&t&&(a.Q6J("ngIf",i.hasBackdrop),a.xp6(3),a.Q6J("ngIf",!i._content))},dependencies:[sr,XO],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),n})(),yY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[Fl,Is,Ly,Ly,Is]}),n})(),vY=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Kr(t)}get inset(){return this._inset}set inset(t){this._inset=Kr(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,i){2&t&&(a.uIk("aria-orientation",i.vertical?"vertical":"horizontal"),a.ekj("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,i){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),n})(),bY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[Is,Is]}),n})();const z3=["*"],zY=new a.OlP("MAT_LIST_CONFIG");let _E=(()=>{class n{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=(0,a.f3M)(zY,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Kr(t)}get disabled(){return this._disabled}set disabled(t){this._disabled=Kr(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=a.lG2({type:n,hostVars:1,hostBindings:function(t,i){2&t&&a.uIk("aria-disabled",i.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}}),n})(),GY=(()=>{class n extends _E{constructor(){super(...arguments),this._isNonInteractive=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(n)))(i||n)}}(),n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],features:[a._Bn([{provide:_E,useExisting:n}]),a.qOj],ngContentSelectors:z3,decls:1,vars:0,template:function(t,i){1&t&&(a.F$t(),a.Hsn(0))},styles:['@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-base{--mdc-list-list-item-container-shape:0;--mdc-list-list-item-leading-avatar-shape:50%;--mdc-list-list-item-container-color:transparent;--mdc-list-list-item-selected-container-color:transparent;--mdc-list-list-item-leading-avatar-color:transparent;--mdc-list-list-item-leading-icon-size:24px;--mdc-list-list-item-leading-avatar-size:40px;--mdc-list-list-item-trailing-icon-size:24px;--mdc-list-list-item-disabled-state-layer-color:transparent;--mdc-list-list-item-disabled-state-layer-opacity:0;--mdc-list-list-item-disabled-label-text-opacity:0.38;--mdc-list-list-item-disabled-leading-icon-opacity:0.38;--mdc-list-list-item-disabled-trailing-icon-opacity:0.38}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}'],encapsulation:2,changeDetection:0}),n})(),KY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[A$,Fl,Is,ZS,a9,bY]}),n})();const K3={EMPTY:"https://firebasestorage.googleapis.com/v0/b/sysanotta.appspot.com/o/no_image.svg?alt=media&token=f25af902-6c62-47e6-bdf3-48e3b0c6fe8c",EMPTY_PHOTO:"https://firebasestorage.googleapis.com/v0/b/ecpp-auxswot.appspot.com/o/photo%2Fempty_image.jpeg?alt=media&token=53a1095a-e2f4-48e7-930f-ded6be1eecc8",EMPTY_COVER:"/src/assets/images/GDI-Doc-Cover-2.jpg",PDF:"https://firebasestorage.googleapis.com/v0/b/doccamwin.appspot.com/o/file_icons%2Fpdf.svg?alt=media&token=d7a5750b-410d-43e1-8bdc-17a698bfa3b8",EMPTY_PASSPORT:""},ZY=["tooltip"],Z3=new a.OlP("mat-tooltip-scroll-strategy"),JY={provide:Z3,deps:[Tu],useFactory:function QY(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},tq=new a.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function eq(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),X3="tooltip-panel",Q3=Py({passive:!0});let aq=(()=>{class n{get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=Kr(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Kr(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=Vf(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=Vf(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(t,i,r,s,o,u,h,m,g,y,E,x){this._overlay=t,this._elementRef=i,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=u,this._ariaDescriber=h,this._focusMonitor=m,this._dir=y,this._defaultOptions=E,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Ln.x,this._scrollStrategy=g,this._document=x,E&&(E.position&&(this.position=E.position),E.positionAtOrigin&&(this.positionAtOrigin=E.positionAtOrigin),E.touchGestures&&(this.touchGestures=E.touchGestures)),y.change.pipe(br(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(br(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{t.removeEventListener(i,r,Q3)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const r=this._createOverlay(i);this._detach(),this._portal=this._portal||new BS(this._tooltipComponent,this._viewContainerRef);const s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(br(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(t)}hide(t=this.hideDelay){const i=this._tooltipInstance;i&&(i.isVisible()?i.hide(t):(i._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){const s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&s._origin instanceof a.SBq)return this._overlayRef;this._detach()}const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&t||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return r.positionChanges.pipe(br(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${X3}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(br(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(br(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(br(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!sg(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const i=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();i.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i||"below"==i?r={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={originX:"start",originY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i?r={overlayX:"center",overlayY:"bottom"}:"below"==i?r={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Mr(1),br(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:i}}_updateCurrentPositionClass(t){const{overlayY:i,originX:r,originY:s}=t;let o;if(o="center"===i?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===i&&"top"===s?"above":"below",o!==this._currentPosition){const u=this._overlayRef;if(u){const h=`${this._cssClassPrefix}-${X3}-`;u.removePanelClass(h+this._currentPosition),u.addPanelClass(h+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{let i;this._setupPointerExitEventsIfNeeded(),void 0!==t.x&&void 0!==t.y&&(i=t),this.show(void 0,i)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{const i=t.targetTouches?.[0],r=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,r),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",i=>{const r=i.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",i],["touchcancel",i])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,Q3)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const i=this._elementRef.nativeElement,r=i.style;("on"===t||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(t){a.$Z()},n.\u0275dir=a.lG2({type:n,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),J3=(()=>{class n extends aq{constructor(t,i,r,s,o,u,h,m,g,y,E,x){super(t,i,r,s,o,u,h,m,g,y,E,x),this._tooltipComponent=cq,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(t){const r=!this._dir||"ltr"==this._dir.value;return"top"===t.originY?t.offsetY=-8:"bottom"===t.originY?t.offsetY=8:"start"===t.originX?t.offsetX=r?-8:8:"end"===t.originX&&(t.offsetX=r?8:-8),t}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Tu),a.Y36(a.SBq),a.Y36(ng),a.Y36(a.s_b),a.Y36(a.R0b),a.Y36(ro),a.Y36(DW),a.Y36(zf),a.Y36(Z3),a.Y36(Ld,8),a.Y36(tq,8),a.Y36(me))},n.\u0275dir=a.lG2({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[a.qOj]}),n})(),lq=(()=>{class n{constructor(t,i){this._changeDetectorRef=t,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Ln.x,this._animationsDisabled="NoopAnimations"===i}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const i=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(i.classList.remove(t?s:r),i.classList.add(t?r:s),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(i);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.sBO),a.Y36(a.QbO,8))},n.\u0275dir=a.lG2({type:n}),n})(),cq=(()=>{class n extends lq{constructor(t,i,r){super(t,r),this._elementRef=i,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>24&&t.width>=200}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.QbO,8))},n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(t,i){if(1&t&&a.Gf(ZY,7),2&t){let r;a.iGM(r=a.CRH())&&(i._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,i){1&t&&a.NdJ("mouseleave",function(s){return i._handleMouseLeave(s)}),2&t&&a.Udp("zoom",i.isVisible()?1:null)},features:[a.qOj],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(t,i){1&t&&(a.TgZ(0,"div",0,1),a.NdJ("animationend",function(s){return i._handleAnimationEnd(s)}),a.TgZ(2,"div",2),a._uU(3),a.qZA()()),2&t&&(a.ekj("mdc-tooltip--multiline",i._isMultiline),a.Q6J("ngClass",i.tooltipClass),a.xp6(3),a.Oqu(i.message))},dependencies:[jn],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),n})(),uq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[JY],imports:[z$,Fl,VS,Is,Is,Ly]}),n})();function e6(n,e){return e?t=>nc(e.pipe(Mr(1),function dq(){return(0,xr.e)((n,e)=>{n.subscribe((0,pr.x)(e,c$.Z))})}()),t.pipe(e6(n))):(0,kr.z)((t,i)=>(0,mo.Xf)(n(t,i)).pipe(Mr(1),Ao(t)))}function t6(n,e=eE.z){const t=l$(n,e);return e6(()=>t)}const hq=["mat-menu-item",""];function fq(n,e){1&n&&(a.O4$(),a.TgZ(0,"svg",3),a._UZ(1,"polygon",4),a.qZA())}const mq=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],pq=["mat-icon, [matMenuItemIcon]","*"];function gq(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",0),a.NdJ("keydown",function(r){a.CHM(t);const s=a.oxw();return a.KtG(s._handleKeydown(r))})("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r.closed.emit("click"))})("@transformMenu.start",function(r){a.CHM(t);const s=a.oxw();return a.KtG(s._onAnimationStart(r))})("@transformMenu.done",function(r){a.CHM(t);const s=a.oxw();return a.KtG(s._onAnimationDone(r))}),a.TgZ(1,"div",1),a.Hsn(2),a.qZA()()}if(2&n){const t=a.oxw();a.Q6J("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),a.uIk("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const _q=["*"],QO=new a.OlP("MAT_MENU_PANEL"),yq=Z$(K$(class{}));let JO=(()=>{class n extends yq{constructor(t,i,r,s,o){super(),this._elementRef=t,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new Ln.x,this._focused=new Ln.x,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),i=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(me),a.Y36(zf),a.Y36(QO,8),a.Y36(a.sBO))},n.\u0275cmp=a.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(t,i){1&t&&a.NdJ("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&t&&(a.uIk("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled)("disabled",i.disabled||null),a.ekj("mat-mdc-menu-item-highlighted",i._highlighted)("mat-mdc-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[a.qOj],attrs:hq,ngContentSelectors:pq,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,i){1&t&&(a.F$t(mq),a.Hsn(0),a.TgZ(1,"span",0),a.Hsn(2,1),a.qZA(),a._UZ(3,"div",1),a.YNc(4,fq,2,0,"svg",2)),2&t&&(a.xp6(3),a.Q6J("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),a.xp6(1),a.Q6J("ngIf",i._triggersSubmenu))},dependencies:[sr,lE],encapsulation:2,changeDetection:0}),n})();const vq=new a.OlP("MatMenuContent"),hD={transformMenu:Uy("transformMenu",[Nd("void",No({opacity:0,transform:"scale(0.8)"})),Iu("void => enter",Cu("120ms cubic-bezier(0, 0, 0.2, 1)",No({opacity:1,transform:"scale(1)"}))),Iu("* => void",Cu("100ms 25ms linear",No({opacity:0})))]),fadeInItems:Uy("fadeInItems",[Nd("showing",No({opacity:1})),Iu("void => *",[No({opacity:0}),Cu("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let bq=0;const n6=new a.OlP("mat-menu-default-options",{providedIn:"root",factory:function wq(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let yE=(()=>{class n{get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Kr(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Kr(t)}set panelClass(t){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new a.n_E,this._classList={},this._panelAnimationState="void",this._animationDone=new Ln.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new a.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+bq++}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new F$(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(ks(this._directDescendantItems),nr(t=>(0,El.T)(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const i=this._keyManager;if("enter"===this._panelAnimationState&&i.activeItem?._hasFocus()){const r=t.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(ks(this._directDescendantItems),nr(i=>(0,El.T)(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const i=t.keyCode,r=this._keyManager;switch(i){case 27:sg(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(Mr(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const i=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,i=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===t,r["mat-menu-after"]="after"===t,r["mat-menu-above"]="above"===i,r["mat-menu-below"]="below"===i,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(ks(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(n6),a.Y36(a.sBO))},n.\u0275dir=a.lG2({type:n,contentQueries:function(t,i,r){if(1&t&&(a.Suo(r,vq,5),a.Suo(r,JO,5),a.Suo(r,JO,4)),2&t){let s;a.iGM(s=a.CRH())&&(i.lazyContent=s.first),a.iGM(s=a.CRH())&&(i._allItems=s),a.iGM(s=a.CRH())&&(i.items=s)}},viewQuery:function(t,i){if(1&t&&a.Gf(a.Rgc,5),2&t){let r;a.iGM(r=a.CRH())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),Eq=(()=>{class n extends yE{constructor(t,i,r,s){super(t,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(n6),a.Y36(a.sBO))},n.\u0275cmp=a.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,i){2&t&&a.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[a._Bn([{provide:QO,useExisting:n}]),a.qOj],ngContentSelectors:_q,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(t,i){1&t&&(a.F$t(),a.YNc(0,gq,3,6,"ng-template"))},dependencies:[jn],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[hD.transformMenu,hD.fadeInItems]},changeDetection:0}),n})();const i6=new a.OlP("mat-menu-scroll-strategy"),Tq={provide:i6,deps:[Tu],useFactory:function xq(n){return()=>n.scrollStrategies.reposition()}},r6=Py({passive:!0});let Cq=(()=>{class n{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(t,i,r,s,o,u,h,m,g){this._overlay=t,this._element=i,this._viewContainerRef=r,this._menuItemInstance=u,this._dir=h,this._focusMonitor=m,this._ngZone=g,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Xs.w0.EMPTY,this._hoverSubscription=Xs.w0.EMPTY,this._menuCloseSubscription=Xs.w0.EMPTY,this._changeDetectorRef=(0,a.f3M)(a.sBO),this._handleTouchStart=y=>{uO(y)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new a.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new a.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof yE?o:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,r6)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,r6),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const i=this._createOverlay(t),r=i.getConfig(),s=r.positionStrategy;this._setPosition(t,s),r.hasBackdrop=null==t.hasBackdrop?!this.triggersSubmenu():t.hasBackdrop,i.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof yE&&(t._startAnimation(),t._directDescendantItems.changes.pipe(br(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof yE?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(Di(r=>"void"===r.toState),Mr(1),br(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let i=0,r=t.parentMenu;for(;r;)i++,r=r.parentMenu;t.setElevation(i)}}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){const i=this._getOverlayConfig(t);this._subscribeToPositions(t,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new iO({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,i){t.setPositionClasses&&i.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,o)):t.setPositionClasses(s,o)})}_setPosition(t,i){let[r,s]="before"===t.xPosition?["end","start"]:["start","end"],[o,u]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[h,m]=[o,u],[g,y]=[r,s],E=0;if(this.triggersSubmenu()){if(y=r="before"===t.xPosition?"start":"end",s=g="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const x=this._parentMaterialMenu.items.first;this._parentInnerPadding=x?x._getHostElement().offsetTop:0}E="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(h="top"===o?"bottom":"top",m="top"===u?"bottom":"top");i.withPositions([{originX:r,originY:h,overlayX:g,overlayY:o,offsetY:E},{originX:s,originY:h,overlayX:y,overlayY:o,offsetY:E},{originX:r,originY:m,overlayX:g,overlayY:u,offsetY:-E},{originX:s,originY:m,overlayX:y,overlayY:u,offsetY:-E}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:mn(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Di(o=>o!==this._menuItemInstance),Di(()=>this._menuOpen)):mn();return(0,El.T)(t,r,s,i)}_handleMousedown(t){cO(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const i=t.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Di(t=>t===this._menuItemInstance&&!t.disabled),t6(0,YR)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof yE&&this.menu._isAnimating?this.menu._animationDone.pipe(Mr(1),t6(0,YR),br(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new JR(t.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Tu),a.Y36(a.SBq),a.Y36(a.s_b),a.Y36(i6),a.Y36(QO,8),a.Y36(JO,10),a.Y36(Ld,8),a.Y36(zf),a.Y36(a.R0b))},n.\u0275dir=a.lG2({type:n,hostVars:3,hostBindings:function(t,i){1&t&&a.NdJ("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&t&&a.uIk("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),Iq=(()=>{class n extends Cq{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(n)))(i||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[a.qOj]}),n})(),Sq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[Tq],imports:[Fl,ZS,Is,VS,Ly,Is]}),n})();var vE=F(3435),en=(F(9804),F(7582));const _6=new a.OlP("USERCONFIG");class y6{constructor(e={}){this.data=e}get(e){return this.data[e]}}let bE=(()=>{class n{constructor(){this.zone=(0,a.f3M)(a.R0b),this.applicationRef=(0,a.f3M)(a.z2F)}create(t,i,r){return new Kq(t,i,this.applicationRef,this.zone,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Kq{constructor(e,t,i,r,s){this.environmentInjector=e,this.injector=t,this.applicationRef=i,this.zone=r,this.elementReferenceKey=s,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(e,t,i,r){return this.zone.run(()=>new Promise(s=>{const o={...i};void 0!==this.elementReferenceKey&&(o[this.elementReferenceKey]=e),s(Zq(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,e,t,o,r,this.elementReferenceKey))}))}removeViewFromDom(e,t){return this.zone.run(()=>new Promise(i=>{const r=this.elRefMap.get(t);if(r){r.destroy(),this.elRefMap.delete(t);const s=this.elEventsMap.get(t);s&&(s(),this.elEventsMap.delete(t))}i()}))}}const Zq=(n,e,t,i,r,s,o,u,h,m,g)=>{const y=a.zs3.create({providers:Qq(h),parent:t}),E=(0,a.LMc)(u,{environmentInjector:e,elementInjector:y}),x=E.instance,I=E.location.nativeElement;if(h&&(g&&void 0!==x[g]&&console.error(`[Ionic Error]: ${g} is a reserved property when using ${o.tagName.toLowerCase()}. Rename or remove the "${g}" property from ${u.name}.`),Object.assign(x,h)),m)for(const P of m)I.classList.add(P);const k=v6(n,x,I);return o.appendChild(I),i.attachView(E.hostView),r.set(I,E),s.set(I,k),I},Xq=[vE.L,vE.a,vE.b,vE.c,vE.d],v6=(n,e,t)=>n.run(()=>{const i=Xq.filter(r=>"function"==typeof e[r]).map(r=>{const s=o=>e[r](o.detail);return t.addEventListener(r,s),()=>t.removeEventListener(r,s)});return()=>i.forEach(r=>r())}),b6=new a.OlP("NavParamsToken"),Qq=n=>[{provide:b6,useValue:n},{provide:y6,useFactory:Jq,deps:[b6]}],Jq=n=>new y6(n),S6=new a.OlP("");let pK=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=nd([i.queryParams,i.params,i.data]).pipe(nr(([s,o,u],h)=>(u={...s,...o,...u},0===h?mn(u):Promise.resolve(u)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const o=(0,a.qFp)(i.component);if(o)for(const{templateName:u}of o.inputs)t.activatedComponentRef.setInput(u,s[u]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function _K(n){return n?.componentInputBindingEnabled?new pK:null}const D6=n=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(n):"function"==typeof requestAnimationFrame?requestAnimationFrame(n):setTimeout(n);class A6{constructor(e){this.ctrl=e}create(e){return this.ctrl.create(e||{})}dismiss(e,t,i){return this.ctrl.dismiss(e,t,i)}getTop(){return this.ctrl.getTop()}}F(2876),F(9528),F(1838),F(6705),F(5067);var DK=F(4649),AK=F(7036),M6=(F(8931),F(8042)),MK=(F(2972),F(408));F(2889);const RK=DK.i,sn=["*"],jK=(n,e)=>{const t=n.prototype;e.forEach(i=>{Object.defineProperty(t,i,{get(){return this.el[i]},set(r){this.z.runOutsideAngular(()=>this.el[i]=r)},configurable:!0})})},GK=(n,e)=>{const t=n.prototype;e.forEach(i=>{t[i]=function(){const r=arguments;return this.z.runOutsideAngular(()=>this.el[i].apply(this.el,r))}})};function un(n){return function(t){const{defineCustomElementFn:i,inputs:r,methods:s}=n;return void 0!==i&&i(),r&&jK(t,r),s&&GK(t,s),t}}let k6=(()=>{let n=class{constructor(t,i,r){this.z=r,t.detach(),this.el=i.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:sn,decls:1,vars:0,template:function(t,i){1&t&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,en.gn)([un({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],n),n})();const bX={provide:so,useExisting:(0,a.Gpc)(()=>R6),multi:!0};let R6=(()=>{class n extends UO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(n)))(i||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&a.uIk("max",i._enabled?i.max:null)},features:[a._Bn([bX]),a.qOj]}),n})();const wX={provide:so,useExisting:(0,a.Gpc)(()=>O6),multi:!0};let O6=(()=>{class n extends $O{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=a.n5z(n)))(i||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&a.uIk("min",i._enabled?i.min:null)},features:[a._Bn([wX]),a.qOj]}),n})(),EX=(()=>{class n extends A6{constructor(){super(M6.m),this.angularDelegate=(0,a.f3M)(bE),this.injector=(0,a.f3M)(a.zs3),this.environmentInjector=(0,a.f3M)(a.lqb)}create(t){return super.create({...t,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class xX extends A6{constructor(){super(M6.c),this.angularDelegate=(0,a.f3M)(bE),this.injector=(0,a.f3M)(a.zs3),this.environmentInjector=(0,a.f3M)(a.lqb)}create(e){return super.create({...e,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}const TX=(n,e,t)=>()=>{if(e.defaultView&&typeof window<"u"){(0,AK.s)({...n,_zoneGate:s=>t.run(s)});const r="__zone_symbol__addEventListener"in e.body?"__zone_symbol__addEventListener":"addEventListener";return function kK(){var n=[];if(typeof window<"u"){var e=window;(!e.customElements||e.Element&&(!e.Element.prototype.closest||!e.Element.prototype.matches||!e.Element.prototype.remove||!e.Element.prototype.getRootNode))&&n.push(F.e(6748).then(F.t.bind(F,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||e.NodeList&&!e.NodeList.prototype.forEach||!e.fetch||!function(){try{var i=new URL("b","http://a");return i.pathname="c%20d","http://a/c%20d"===i.href&&i.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&n.push(F.e(2214).then(F.t.bind(F,4144,23)))}return Promise.all(n)}().then(()=>((n,e)=>{if(!(typeof window>"u"))return RK(),(0,MK.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"placeholder":["placeholderChanged"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"counterFormatter":["counterFormatterChanged"]}],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"],"checked":["styleChanged"],"color":["styleChanged"],"disabled":["styleChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"disabled":[4],"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]},null,{"value":["valueChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"legacy":[4]},null,{"checked":["styleChanged"],"disabled":["styleChanged"]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),e)})(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:D6,jmp:s=>t.runOutsideAngular(s),ael(s,o,u,h){s[r](o,u,h)},rel(s,o,u,h){s.removeEventListener(o,u,h)}}))}};let CX=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:_6,useValue:t},{provide:a.ip1,useFactory:TX,multi:!0,deps:[_6,me,a.R0b]},{provide:S6,useFactory:_K,deps:[jr]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[bE,EX,xX],imports:[Fl]}),n})();function IX(n,e){if(1&n&&a._UZ(0,"img",24),2&n){const t=a.oxw();a.s9C("src",null==t.auth||null==t.auth.userDataAuth?null:t.auth.userDataAuth.photoURL,a.LSH)}}function SX(n,e){1&n&&a._UZ(0,"div",25),2&n&&a.Q6J("@fadeInOut",void 0)}function DX(n,e){1&n&&a._UZ(0,"mat-divider")}function AX(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"span",26),a.NdJ("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r.auth.loginWithGoogle())}),a._uU(1," Sign In "),a.qZA()}}function MX(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"span",27),a.NdJ("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r.auth.logout())}),a._uU(1," Sign Out "),a.qZA()}}function kX(n,e){if(1&n&&a._UZ(0,"img",24),2&n){const t=a.oxw();a.s9C("src",t.photoLib.EMPTY,a.LSH)}}let RX=(()=>{var n;class e{constructor(i,r){this.afAuth=i,this.auth=r,this.photoLib=K3,this.languages=[{key:"kh",text:"khmer",flag:"assets/Logo/cambodia_flag_circle.png"},{key:"en",text:"english",flag:"assets/Logo/english_flag_circle.png"},{key:"cn",text:"chinese",flag:"assets/Logo/chinese_flag_circle.png"}]}ngOnInit(){}signOut(){this.auth.loginWithGoogle()}menuProfileHandle(i){"yt"===i?window.open("https://www.youtube.com/channel/UCGns_bl7d25rbBI8_BcX56Q","_blank"):"fb"===i&&window.open("https://web.facebook.com/Rithy500","_blank")}toggleAdditionalMenuItems(){this.auth.showAdditionalMenuItems=!this.auth.showAdditionalMenuItems}closeTree(){this.auth.showAdditionalMenuItems=!1}}return(n=e).\u0275fac=function(i){return new(i||n)(a.Y36(cu),a.Y36(tf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-button-profile"]],decls:39,vars:12,consts:[[1,"profile-container"],[1,"profile-wrapper"],[1,"profile-header"],["src","assets/images/bg-angkor.webp","alt","",1,"profile-cover"],["class","img-profile",3,"src",4,"ngIf","ngIfElse"],[1,"profile-text-user"],[1,"user-name"],[1,"email"],[1,"profile-menu"],[1,"profile-menu-list"],[1,"icon"],["name","globe-outline"],[1,"text"],["class","scroll style-1",4,"ngIf"],[4,"ngIf"],["matTooltip","Visit our Facebook page","matTooltipPosition","left",1,"profile-menu-list",3,"click"],["name","logo-facebook","color","primary"],["matTooltip","Visit our Youtube channel","matTooltipPosition","left",1,"profile-menu-list",3,"click"],["name","logo-youtube","color","danger"],[1,"icon","log-out"],["name","log-out-outline"],["color","accent","class","text log-out",3,"click",4,"ngIf"],["class","text log-out","color","primary",3,"click",4,"ngIf"],["emptyImage",""],[1,"img-profile",3,"src"],[1,"scroll","style-1"],["color","accent",1,"text","log-out",3,"click"],["color","primary",1,"text","log-out",3,"click"]],template:function(i,r){if(1&i&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2),a._UZ(3,"img",3),a.YNc(4,IX,1,1,"img",4),a.TgZ(5,"div",5)(6,"p",6),a._uU(7),a.qZA(),a.TgZ(8,"p",7),a._uU(9),a.qZA()()(),a._UZ(10,"mat-divider"),a.TgZ(11,"div",8)(12,"div",9)(13,"span",10),a._UZ(14,"ion-icon",11),a.qZA(),a.TgZ(15,"span",12),a._uU(16,"Visit Us"),a.qZA()(),a.YNc(17,SX,1,1,"div",13),a.YNc(18,DX,1,0,"mat-divider",14),a.TgZ(19,"div",15),a.NdJ("click",function(){return r.menuProfileHandle("fb")}),a.TgZ(20,"span",10),a._UZ(21,"ion-icon",16),a.qZA(),a.TgZ(22,"span",12),a._uU(23,"Facebook"),a.qZA()(),a.TgZ(24,"div",17),a.NdJ("click",function(){return r.menuProfileHandle("yt")}),a.TgZ(25,"span",10),a._UZ(26,"ion-icon",18),a.qZA(),a.TgZ(27,"span",12),a._uU(28,"Youtube"),a.qZA()(),a._UZ(29,"mat-divider"),a.TgZ(30,"div",9)(31,"span",19),a._UZ(32,"ion-icon",20),a.qZA(),a.YNc(33,AX,2,0,"span",21),a.ALo(34,"async"),a.YNc(35,MX,2,0,"span",22),a.ALo(36,"async"),a.qZA()()()(),a.YNc(37,kX,1,1,"ng-template",null,23,a.W1O)),2&i){const s=a.MAs(38);a.xp6(4),a.Q6J("ngIf",null==r.auth||null==r.auth.userDataAuth?null:r.auth.userDataAuth.photoURL)("ngIfElse",s),a.xp6(3),a.hij(" ",(null==r.auth.userDataAuth?null:r.auth.userDataAuth.displayName)||"Anonymous"," "),a.xp6(2),a.Oqu(null==r.auth.userDataAuth?null:r.auth.userDataAuth.email),a.xp6(8),a.Q6J("ngIf",r.auth.showAdditionalMenuItems),a.xp6(1),a.Q6J("ngIf",r.auth.showAdditionalMenuItems),a.xp6(15),a.Q6J("ngIf",null===a.lcZ(34,8,r.afAuth.authState)),a.xp6(2),a.Q6J("ngIf",a.lcZ(36,10,r.afAuth.authState))}},dependencies:[J3,k6,sr,vY,Lt],styles:['@import"https://fonts.googleapis.com/css2?family=Khmer&family=Passion+One&family=Russo+One&display=swap";body[_ngcontent-%COMP%]{--background-color: #18181B;--text-color: #A1A1AA;--card-background-color: rgba(255, 255, 255, .015);--card-border-color: rgba(255, 255, 255, .1);--card-box-shadow-1: rgba(0, 0, 0, .05);--card-box-shadow-1-y: 3px;--card-box-shadow-1-blur: 6px;--card-box-shadow-2: rgba(0, 0, 0, .1);--card-box-shadow-2-y: 8px;--card-box-shadow-2-blur: 15px;--card-label-color: #FFFFFF;--card-icon-color: #D4D4D8;--card-icon-background-color: rgba(255, 255, 255, .08);--card-icon-border-color: rgba(255, 255, 255, .12);--card-shine-opacity: .1;--card-shine-gradient: conic-gradient(from 205deg at 50% 50%, rgba(16, 185, 129, 0) 0deg, #10B981 25deg, rgba(52, 211, 153, .18) 295deg, rgba(16, 185, 129, 0) 360deg);--card-line-color: #2A2B2C;--card-tile-color: rgba(16, 185, 129, .05);--card-hover-border-color: rgba(255, 255, 255, .2);--card-hover-box-shadow-1: rgba(0, 0, 0, .04);--card-hover-box-shadow-1-y: 5px;--card-hover-box-shadow-1-blur: 10px;--card-hover-box-shadow-2: rgba(0, 0, 0, .3);--card-hover-box-shadow-2-y: 15px;--card-hover-box-shadow-2-blur: 25px;--card-hover-icon-color: #34D399;--card-hover-icon-background-color: rgba(52, 211, 153, .1);--card-hover-icon-border-color: rgba(52, 211, 153, .2);--blur-opacity: .01}body.light[_ngcontent-%COMP%]{--background-color: #FAFAFA;--text-color: #52525B;--card-background-color: transparent;--card-border-color: rgba(24, 24, 27, .08);--card-box-shadow-1: rgba(24, 24, 27, .02);--card-box-shadow-1-y: 3px;--card-box-shadow-1-blur: 6px;--card-box-shadow-2: rgba(24, 24, 27, .04);--card-box-shadow-2-y: 2px;--card-box-shadow-2-blur: 7px;--card-label-color: #18181B;--card-icon-color: #18181B;--card-icon-background-color: rgba(24, 24, 27, .04);--card-icon-border-color: rgba(24, 24, 27, .1);--card-shine-opacity: .3;--card-shine-gradient: conic-gradient(from 225deg at 50% 50%, rgba(16, 185, 129, 0) 0deg, #10B981 25deg, #EDFAF6 285deg, #FFFFFF 345deg, rgba(16, 185, 129, 0) 360deg);--card-line-color: #E9E9E7;--card-tile-color: rgba(16, 185, 129, .08);--card-hover-border-color: rgba(24, 24, 27, .15);--card-hover-box-shadow-1: rgba(24, 24, 27, .05);--card-hover-box-shadow-1-y: 3px;--card-hover-box-shadow-1-blur: 6px;--card-hover-box-shadow-2: rgba(24, 24, 27, .1);--card-hover-box-shadow-2-y: 8px;--card-hover-box-shadow-2-blur: 15px;--card-hover-icon-color: #18181B;--card-hover-icon-background-color: rgba(24, 24, 27, .04);--card-hover-icon-border-color: rgba(24, 24, 27, .34);--blur-opacity: .1}body.toggle[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{transition-duration:0s!important}.profile-container[_ngcontent-%COMP%]{min-width:280px;max-width:280px}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]{position:relative}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-cover[_ngcontent-%COMP%]{background-color:#e6e6e6;top:0;position:absolute;height:92px;background-size:cover;object-fit:cover;background-position:center;width:280px}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px 16px 4px}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .img-profile[_ngcontent-%COMP%]{z-index:99;width:80px;margin-top:8px;height:80px;border-radius:50%;margin-bottom:2px;border:3px solid #fff;background-color:#e6e6e6}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .profile-text-user[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,".SFNSText-Regular",auxswot,khmeros_siemreap,Roboto,Open Sans,Helvetica Neue,Helvetica,Arial,Battambang,khmeros_siemreap,Roboto Bold English;letter-spacing:normal;color:#1f1f1f;text-align:center}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .profile-text-user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:500;font-size:18px;color:#333}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .profile-text-user[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]{margin-bottom:4px}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]{overflow:auto}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-menu-list[_ngcontent-%COMP%]{padding:0 16px;height:38px;display:flex;align-items:center;position:relative;font-family:system-ui,-apple-system,BlinkMacSystemFont,".SFNSText-Regular",auxswot,khmeros_siemreap,Roboto,Open Sans,Helvetica Neue,Helvetica,Arial,Battambang,khmeros_siemreap,Roboto Bold English;color:#1f1f1f;font-size:14px;transition:.2s ease}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-menu-list[_ngcontent-%COMP%]:hover{background-color:#e6e6e6;cursor:pointer}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-menu-list[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:22px;position:absolute;top:53%;left:10%;transform:translate(-50%,-50%)}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-menu-list[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .icon-lang[_ngcontent-%COMP%]{width:22px}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-menu-list[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:40px}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-menu-list[_ngcontent-%COMP%]   .log-out[_ngcontent-%COMP%]{color:#e30000}.profile-container[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-menu-list[_ngcontent-%COMP%]   .dropdown-list[_ngcontent-%COMP%]{position:absolute;top:37%;right:10%}mat-divider[_ngcontent-%COMP%]{padding:2px 0;border-bottom:1px solid rgba(0,0,0,.2)}  .mat-mdc-menu-panel.mat-mdc-menu-panel{background-color:#fff!important}  .mat-mdc-menu-content{padding:0!important}'],data:{animation:[Uy("fadeInOut",[Nd("void",No({opacity:0})),Iu("void <=> *",Cu(200))])]}}),e})();function OX(n,e){if(1&n&&a._UZ(0,"img",16),2&n){const t=a.oxw();a.s9C("src",null==t.auth||null==t.auth.userDataAuth?null:t.auth.userDataAuth.photoURL,a.LSH)}}function PX(n,e){if(1&n&&a._UZ(0,"img",16),2&n){const t=a.oxw();a.s9C("src",t.photoLib.EMPTY,a.LSH)}}function LX(n,e){if(1&n&&a._UZ(0,"img",17),2&n){const t=a.oxw();a.s9C("src",t.photoLib.EMPTY,a.LSH)}}let FX=(()=>{var n;class e{constructor(i,r,s){this.auth=i,this.afAuth=r,this.breakpointObserver=s,this.photoLib=K3,this.isMobileScreen=!1,this.navbarWidth="calc(100vw - 233px)"}login(){this.auth.loginWithGoogle()}ngOnInit(){this.breakpointObserver.observe([jS_Handset,jS_Small]).subscribe(i=>{this.isMobileScreen=i.matches,this.navbarWidth=this.isMobileScreen?"100vw":"calc(100vw - 233px)"})}stopPropagation(i){i.stopPropagation()}}return(n=e).\u0275fac=function(i){return new(i||n)(a.Y36(tf),a.Y36(cu),a.Y36(oO))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-navbar"]],decls:24,vars:6,consts:[[1,"navbar"],[1,"navbar-logo"],[1,"navbar-menu"],[1,"navbar-item"],["href","/"],["href","/about"],["href","/contact"],[1,"navbar-auth"],["matTooltip","Profile",3,"matMenuTriggerFor"],[1,"user-profile"],["class","img-profile",3,"src",4,"ngIf","ngIfElse"],["emptyImage",""],["loadingTemplate",""],["yPosition","below",1,"profile-dropdown",3,"overlapTrigger"],["userAccountMenu",""],[3,"click"],[1,"img-profile",3,"src"],[1,"img-profile","loading",3,"src"]],template:function(i,r){if(1&i&&(a.TgZ(0,"nav",0),a._UZ(1,"div",1),a.TgZ(2,"ul",2)(3,"li",3)(4,"a",4),a._uU(5,"Home"),a.qZA()(),a.TgZ(6,"li",3)(7,"a",5),a._uU(8,"About"),a.qZA()(),a.TgZ(9,"li",3)(10,"a",6),a._uU(11,"Contact"),a.qZA()()(),a.TgZ(12,"ul",7)(13,"li",3)(14,"div",8)(15,"div",9),a.YNc(16,OX,1,1,"img",10),a.YNc(17,PX,1,1,"ng-template",null,11,a.W1O),a.qZA(),a.YNc(19,LX,1,1,"ng-template",null,12,a.W1O),a.qZA(),a.TgZ(21,"mat-menu",13,14)(23,"app-button-profile",15),a.NdJ("click",function(o){return r.stopPropagation(o)}),a.qZA()()()()()),2&i){const s=a.MAs(18),o=a.MAs(22);a.Udp("width",r.navbarWidth),a.xp6(14),a.Q6J("matMenuTriggerFor",o),a.xp6(2),a.Q6J("ngIf",null==r.auth||null==r.auth.userDataAuth?null:r.auth.userDataAuth.photoURL)("ngIfElse",s),a.xp6(5),a.Q6J("overlapTrigger",!1)}},dependencies:[J3,Eq,Iq,sr,RX],styles:['@import"https://fonts.googleapis.com/css2?family=Khmer&family=Passion+One&family=Russo+One&display=swap";.navbar[_ngcontent-%COMP%]{position:fixed;top:0;right:0;background-color:#4e6b7b;color:#fff;display:flex;justify-content:space-between;align-items:center;height:50px;z-index:999;width:calc(100vw - 233px)}.wtf[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover}.navbar-logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:10px;gap:10px}.navbar-logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;color:#fff;font-size:16px;text-decoration:none}.navbar-menu[_ngcontent-%COMP%]{list-style:none;padding:0}.navbar-item[_ngcontent-%COMP%]{display:inline-block;margin-right:10px}.navbar-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;position:relative;transition:color .2s ease-in-out}.navbar-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:2px;background-color:#fff;transform:scaleX(0);transition:transform .2s ease-in-out}.navbar-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#bbb}.navbar-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}@media screen and (max-width: 600px){*[_ngcontent-%COMP%]{display:none;background-color:transparent!important}}body[_ngcontent-%COMP%]{--background-color: #18181B;--text-color: #A1A1AA;--card-background-color: rgba(255, 255, 255, .015);--card-border-color: rgba(255, 255, 255, .1);--card-box-shadow-1: rgba(0, 0, 0, .05);--card-box-shadow-1-y: 3px;--card-box-shadow-1-blur: 6px;--card-box-shadow-2: rgba(0, 0, 0, .1);--card-box-shadow-2-y: 8px;--card-box-shadow-2-blur: 15px;--card-label-color: #FFFFFF;--card-icon-color: #D4D4D8;--card-icon-background-color: rgba(255, 255, 255, .08);--card-icon-border-color: rgba(255, 255, 255, .12);--card-shine-opacity: .1;--card-shine-gradient: conic-gradient(from 205deg at 50% 50%, rgba(16, 185, 129, 0) 0deg, #10B981 25deg, rgba(52, 211, 153, .18) 295deg, rgba(16, 185, 129, 0) 360deg);--card-line-color: #2A2B2C;--card-tile-color: rgba(16, 185, 129, .05);--card-hover-border-color: rgba(255, 255, 255, .2);--card-hover-box-shadow-1: rgba(0, 0, 0, .04);--card-hover-box-shadow-1-y: 5px;--card-hover-box-shadow-1-blur: 10px;--card-hover-box-shadow-2: rgba(0, 0, 0, .3);--card-hover-box-shadow-2-y: 15px;--card-hover-box-shadow-2-blur: 25px;--card-hover-icon-color: #34D399;--card-hover-icon-background-color: rgba(52, 211, 153, .1);--card-hover-icon-border-color: rgba(52, 211, 153, .2);--blur-opacity: .01}body.light[_ngcontent-%COMP%]{--background-color: #FAFAFA;--text-color: #52525B;--card-background-color: transparent;--card-border-color: rgba(24, 24, 27, .08);--card-box-shadow-1: rgba(24, 24, 27, .02);--card-box-shadow-1-y: 3px;--card-box-shadow-1-blur: 6px;--card-box-shadow-2: rgba(24, 24, 27, .04);--card-box-shadow-2-y: 2px;--card-box-shadow-2-blur: 7px;--card-label-color: #18181B;--card-icon-color: #18181B;--card-icon-background-color: rgba(24, 24, 27, .04);--card-icon-border-color: rgba(24, 24, 27, .1);--card-shine-opacity: .3;--card-shine-gradient: conic-gradient(from 225deg at 50% 50%, rgba(16, 185, 129, 0) 0deg, #10B981 25deg, #EDFAF6 285deg, #FFFFFF 345deg, rgba(16, 185, 129, 0) 360deg);--card-line-color: #E9E9E7;--card-tile-color: rgba(16, 185, 129, .08);--card-hover-border-color: rgba(24, 24, 27, .15);--card-hover-box-shadow-1: rgba(24, 24, 27, .05);--card-hover-box-shadow-1-y: 3px;--card-hover-box-shadow-1-blur: 6px;--card-hover-box-shadow-2: rgba(24, 24, 27, .1);--card-hover-box-shadow-2-y: 8px;--card-hover-box-shadow-2-blur: 15px;--card-hover-icon-color: #18181B;--card-hover-icon-background-color: rgba(24, 24, 27, .04);--card-hover-icon-border-color: rgba(24, 24, 27, .34);--blur-opacity: .1}body.toggle[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{transition-duration:0s!important}.toolbar-item-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.dis-none[_ngcontent-%COMP%]{display:none}.main-header[_ngcontent-%COMP%]{display:flex;position:fixed;justify-content:center;align-self:center;top:0;z-index:999;box-sizing:border-box;padding:6px 16px;width:100%;background-color:#fff;box-shadow:0 0 6px #0000001a}[_nghost-%COMP%]     .mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:0%!important;max-width:0%!important;overflow:hidden}.logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.logo-img[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:10px}.logo-font[_ngcontent-%COMP%]{font-family:Roboto Bold English,Moul,Roboto Bold;font-size:16px;color:#1a73e8;text-decoration:none;cursor:pointer;position:relative}.logo-font[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:2px;background-color:#5f9bea;transform-origin:right;transform:scaleX(0);transition:transform .3s ease-in-out}.logo-font[_ngcontent-%COMP%]:hover:after{transform-origin:left;transform:scaleX(1)}.logo[_ngcontent-%COMP%], .language[_ngcontent-%COMP%], .lang-dropdown[_ngcontent-%COMP%]{margin-right:16px}@media screen and (max-width: 554px){.logo-font[_ngcontent-%COMP%]{font-family:Roboto Bold English,Moul,Roboto Bold;font-size:11px;color:#1a73e8;min-width:150px;text-decoration:none}.language[_ngcontent-%COMP%]{display:none}.lang-dropdown[_ngcontent-%COMP%]{display:block}}.mat-mdc-icon-button.mat-mdc-button-base[_ngcontent-%COMP%]{width:40px;height:40px;padding:8px}.notification-wrapper[_ngcontent-%COMP%]{display:block;width:300px;height:600px;overflow-y:auto}.notification-wrapper[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]{padding:15px;color:#111;background-color:#fff;border-bottom:1px solid rgb(211,211,211)}.notification-wrapper[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,".SFNSText-Regular",auxswot,khmeros_siemreap,Roboto,Open Sans,Helvetica Neue,Helvetica,Arial,Battambang,khmeros_siemreap,Roboto Bold English;font-weight:500}.notification-header[_ngcontent-%COMP%]{position:fixed;padding:15px;color:#111;background-color:#fff;border-bottom:1px solid rgb(211,211,211);width:100%}.mt[_ngcontent-%COMP%]{margin-top:60px}.noti-child[_ngcontent-%COMP%]{display:flex;border:0px;border-style:solid;border-bottom-width:1px;border-image:linear-gradient(to right,white 15%,#cedae0 40%,#cedae0 60%,white 85%) 1 20%;padding:8px;border-radius:5px;margin:5px;cursor:pointer}.noti-child[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.noti-img[_ngcontent-%COMP%]{width:140px;height:140px;display:block;margin:0 auto 30px}.noti-user-name[_ngcontent-%COMP%]{color:#393a3d;font-size:14px;line-height:21px}.noti-user-decs[_ngcontent-%COMP%]{font-size:12px;color:#6b6c72}.mat-menu-panel[_ngcontent-%COMP%]   .mat-menu-panel[_ngcontent-%COMP%]{width:400px!important;height:400px!important}.mat-mdc-icon-button.mat-mdc-button-base[_ngcontent-%COMP%]{background-color:#d9d9d9;margin:0 2px}.img-profile[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:50%;cursor:pointer;margin-left:4px}.loading[_ngcontent-%COMP%]{background-color:#cdcdcc}.centre[_ngcontent-%COMP%]{position:fixed;width:100%;top:45%;left:50%;transform:translate(-50%,-50%)}.text-nodata[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,".SFNSText-Regular",auxswot,khmeros_siemreap,Roboto,Open Sans,Helvetica Neue,Helvetica,Arial,Battambang,khmeros_siemreap,Roboto Bold English;text-align:center;margin:0 auto;color:#1a73e8;font-size:18px}.dis-flex[_ngcontent-%COMP%]{display:flex;justify-content:start;align-items:center;gap:20px;padding:6px 24px 6px 10px;font-family:system-ui,-apple-system,BlinkMacSystemFont,".SFNSText-Regular",auxswot,khmeros_siemreap,Roboto,Open Sans,Helvetica Neue,Helvetica,Arial,Battambang,khmeros_siemreap,Roboto Bold English;cursor:pointer}.dis-flex[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}  .lang-menu{overflow:hidden!important}  .mat-mdc-menu-panel.mat-mdc-menu-panel{overflow:hidden!important}  .noti-dropdown{min-width:100%!important;max-width:100%!important;overflow:hidden!important}']}),e})();function NX(n,e){if(1&n&&(a.TgZ(0,"a",2),a._uU(1),a.qZA()),2&n){const t=e.$implicit;a.xp6(1),a.hij(" ",t," ")}}let BX=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-btn-charthub"]],inputs:{items:"items",activeLocalChannel:"activeLocalChannel"},decls:2,vars:1,consts:[[1,"button"],["matRipple","",4,"ngFor","ngForOf"],["matRipple",""]],template:function(i,r){1&i&&(a.TgZ(0,"div",0),a.YNc(1,NX,2,1,"a",1),a.qZA()),2&i&&(a.xp6(1),a.Q6J("ngForOf",r.items))},dependencies:[ao,lE],styles:[".button[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:13px;scrollbar-width:none;border-radius:10px;width:100%;color:#000;padding-left:3px}.button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:3px;align-items:start;flex-shrink:0;padding:11px 10px;background-color:#bbd9e9;opacity:.8;transition:opacity .3s;border-radius:10px;width:90%;cursor:pointer;font-weight:500}.button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1}"]}),e})();const UX=["sidenav"],$X=[{path:"",component:u0,children:[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:(()=>{var n;class e{constructor(i){this.breakpointObserver=i,this.items=["TV","Movie","Traffic"],this.logoSrc="assets/logo-02.gif"}ngOnInit(){this.breakpointObserver.observe([jS_Handset,jS_Small]).subscribe(i=>{this.isMobileScreen=i.matches,this.isMobileScreen?this.sidenav.close():this.sidenav.open()})}toggleSidenav(){this.isMobileScreen&&this.sidenav.toggle()}disableContextMenu(i){i.preventDefault()}}return(n=e).\u0275fac=function(i){return new(i||n)(a.Y36(oO))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-sidenav"]],viewQuery:function(i,r){if(1&i&&a.Gf(UX,5),2&i){let s;a.iGM(s=a.CRH())&&(r.sidenav=s.first)}},decls:10,vars:3,consts:[[1,"sidenav-container"],["mode","side",3,"opened"],["sidenav",""],[1,"logo"],["id","logo-image",3,"src","contextmenu"],[3,"items"],[1,"sidenav-content"]],template:function(i,r){1&i&&(a.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2)(3,"div",3)(4,"img",4),a.NdJ("contextmenu",function(o){return r.disableContextMenu(o)}),a.qZA()(),a.TgZ(5,"mat-nav-list"),a._UZ(6,"app-btn-charthub",5),a.qZA()(),a.TgZ(7,"mat-sidenav-content",6),a._UZ(8,"app-navbar")(9,"router-outlet"),a.qZA()()),2&i&&(a.xp6(1),a.Q6J("opened",!r.isMobileScreen),a.xp6(3),a.Q6J("src",r.logoSrc,a.LSH),a.xp6(2),a.Q6J("items",r.items))},dependencies:[Pg,$3,V3,XO,GY,FX,BX],styles:[".sidebar{background-color:#bbd9e9;height:100vh}  .text-a{color:#fff!important}.sidenav-content[_ngcontent-%COMP%]{background-color:#71a4be}.logo[_ngcontent-%COMP%]{display:inline-block;position:relative;width:90px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;transition:transform .3s ease}.logo[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:rotate(180deg)}.toggle-button[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;z-index:2}.sidenav-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.sidenav-content[_ngcontent-%COMP%]{flex-grow:1}@media screen and (max-width: 600px){.sidenav-container[_ngcontent-%COMP%]{justify-content:flex-start}.sidenav-container[_ngcontent-%COMP%] > mat-sidenav[_ngcontent-%COMP%]{display:none}.sidenav-content[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > app-navbar[_ngcontent-%COMP%]{display:none}}"]}),e})(),children:[{path:"",redirectTo:"television/default-channel/draftChannel",pathMatch:"full"},{path:"television/:channelName/:index",component:rY}]}]},{path:"redirect",component:sY},{path:"**",redirectTo:"redirect"}];let VX=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[UA.forRoot($X),UA]}),e})();function P6(n){return new a.vHH(3e3,!1)}function EQ(){return typeof window<"u"&&typeof window.document<"u"}function aP(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Yf(n){switch(n.length){case 0:return new cE;case 1:return n[0];default:return new lV(n)}}function L6(n,e,t,i,r=new Map,s=new Map){const o=[],u=[];let h=-1,m=null;if(i.forEach(g=>{const y=g.get("offset"),E=y==h,x=E&&m||new Map;g.forEach((I,k)=>{let P=k,q=I;if("offset"!==k)switch(P=e.normalizePropertyName(P,o),q){case pO:q=r.get(k);break;case Fd:q=s.get(k);break;default:q=e.normalizeStyleValue(k,P,q,o)}x.set(P,q)}),E||u.push(x),m=x,h=y}),o.length)throw function uQ(n){return new a.vHH(3502,!1)}();return u}function lP(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&cP(t,"start",n)));break;case"done":n.onDone(()=>i(t&&cP(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&cP(t,"destroy",n)))}}function cP(n,e,t){const s=uP(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function uP(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function il(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function F6(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let dP=(n,e)=>!1,N6=(n,e,t)=>[],B6=null;function hP(n){const e=n.parentNode||n.host;return e===B6?null:e}(aP()||typeof Element<"u")&&(EQ()?(B6=(()=>document.documentElement)(),dP=(n,e)=>{for(;e;){if(e===n)return!0;e=hP(e)}return!1}):dP=(n,e)=>n.contains(e),N6=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let hg=null,U6=!1;const $6=dP,V6=N6;let H6=(()=>{class n{validateStyleProperty(t){return function TQ(n){hg||(hg=function CQ(){return typeof document<"u"?document.body:null}()||{},U6=!!hg.style&&"WebkitAppearance"in hg.style);let e=!0;return hg.style&&!function xQ(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in hg.style,!e&&U6&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in hg.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return $6(t,i)}getParentElement(t){return hP(t)}query(t,i,r){return V6(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,u=[],h){return new cE(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),fP=(()=>{class n{}return n.NOOP=new H6,n})();const IQ=1e3,mP="ng-enter",gD="ng-leave",_D="ng-trigger",yD=".ng-trigger",j6="ng-animating",pP=".ng-animating";function Ud(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:gP(parseFloat(e[1]),e[2])}function gP(n,e){return"s"===e?n*IQ:n}function vD(n,e,t){return n.hasOwnProperty("duration")?n:function DQ(n,e,t){let r,s=0,o="";if("string"==typeof n){const u=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===u)return e.push(P6()),{duration:0,delay:0,easing:""};r=gP(parseFloat(u[1]),u[2]);const h=u[3];null!=h&&(s=gP(parseFloat(h),u[4]));const m=u[5];m&&(o=m)}else r=n;if(!t){let u=!1,h=e.length;r<0&&(e.push(function HX(){return new a.vHH(3100,!1)}()),u=!0),s<0&&(e.push(function zX(){return new a.vHH(3101,!1)}()),u=!0),u&&e.splice(h,0,P6())}return{duration:r,delay:s,easing:o}}(n,e,t)}function EE(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function G6(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function qf(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function Y6(n,e,t){return t?e+":"+t+";":""}function q6(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=Y6(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Y6(0,RQ(t),n.style[t]));n.setAttribute("style",e)}function Su(n,e,t){n.style&&(e.forEach((i,r)=>{const s=yP(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),aP()&&q6(n))}function fg(n,e){n.style&&(e.forEach((t,i)=>{const r=yP(i);n.style[r]=""}),aP()&&q6(n))}function xE(n){return Array.isArray(n)?1==n.length?n[0]:rV(n):n}const _P=new RegExp("{{\\s*(.+?)\\s*}}","g");function K6(n){let e=[];if("string"==typeof n){let t;for(;t=_P.exec(n);)e.push(t[1]);_P.lastIndex=0}return e}function TE(n,e,t){const i=n.toString(),r=i.replace(_P,(s,o)=>{let u=e[o];return null==u&&(t.push(function GX(n){return new a.vHH(3003,!1)}()),u=""),u.toString()});return r==i?n:r}function bD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const kQ=/-+([a-z0-9])/g;function yP(n){return n.replace(kQ,(...e)=>e[1].toUpperCase())}function RQ(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function rl(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function WX(n){return new a.vHH(3004,!1)}()}}function Z6(n,e){return window.getComputedStyle(n)[e]}const xD="*";function BQ(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function UQ(n,e,t){if(":"==n[0]){const h=function $Q(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function oQ(n){return new a.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof h)return void e.push(h);n=h}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function sQ(n){return new a.vHH(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(X6(r,o));"<"==s[0]&&!(r==xD&&o==xD)&&e.push(X6(o,r))}(i,t,e)):t.push(n),t}const TD=new Set(["true","1"]),CD=new Set(["false","0"]);function X6(n,e){const t=TD.has(n)||CD.has(n),i=TD.has(e)||CD.has(e);return(r,s)=>{let o=n==xD||n==r,u=e==xD||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?TD.has(n):CD.has(n)),!u&&i&&"boolean"==typeof s&&(u=s?TD.has(e):CD.has(e)),o&&u}}const VQ=new RegExp("s*:selfs*,?","g");function vP(n,e,t,i){return new HQ(n).build(e,t,i)}class HQ{constructor(e){this._driver=e}build(e,t,i){const r=new GQ(t);return this._resetContextStyleTimingState(r),rl(this,xE(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function qX(){return new a.vHH(3006,!1)}()),e.definitions.forEach(u=>{if(this._resetContextStyleTimingState(t),0==u.type){const h=u,m=h.name;m.toString().split(/\s*,\s*/).forEach(g=>{h.name=g,s.push(this.visitState(h,t))}),h.name=m}else if(1==u.type){const h=this.visitTransition(u,t);i+=h.queryCount,r+=h.depCount,o.push(h)}else t.errors.push(function KX(){return new a.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(u=>{u instanceof Map&&u.forEach(h=>{K6(h).forEach(m=>{o.hasOwnProperty(m)||s.add(m)})})}),s.size&&(bD(s.values()),t.errors.push(function ZX(n,e){return new a.vHH(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=rl(this,xE(e.animation),t);return{type:1,matchers:BQ(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:mg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>rl(this,i,t)),options:mg(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const u=rl(this,o,t);return r=Math.max(r,t.currentTime),u});return t.currentTime=r,{type:3,steps:s,options:mg(e.options)}}visitAnimate(e,t){const i=function YQ(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return bP(vD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=bP(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=vD(t,e);return bP(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:No({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,u=!1;if(!o){u=!0;const m={};i.easing&&(m.easing=i.easing),o=No(m)}t.currentTime+=i.duration+i.delay;const h=this.visitStyle(o,t);h.isEmptyStep=u,r=h}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let u of r)"string"==typeof u?u===Fd?i.push(u):t.errors.push(new a.vHH(3002,!1)):i.push(G6(u));let s=!1,o=null;return i.forEach(u=>{if(u instanceof Map&&(u.has("easing")&&(o=u.get("easing"),u.delete("easing")),!s))for(let h of u.values())if(h.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((u,h)=>{const m=t.collectedStyles.get(t.currentQuerySelector),g=m.get(h);let y=!0;g&&(s!=r&&s>=g.startTime&&r<=g.endTime&&(t.errors.push(function QX(n,e,t,i,r){return new a.vHH(3010,!1)}()),y=!1),s=g.startTime),y&&m.set(h,{startTime:s,endTime:r}),t.options&&function MQ(n,e,t){const i=e.params||{},r=K6(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function jX(n){return new a.vHH(3001,!1)}())})}(u,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function JX(){return new a.vHH(3011,!1)}()),i;let s=0;const o=[];let u=!1,h=!1,m=0;const g=e.steps.map(q=>{const ae=this._makeStyleAst(q,t);let ee=null!=ae.offset?ae.offset:function WQ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ae.styles),ye=0;return null!=ee&&(s++,ye=ae.offset=ee),h=h||ye<0||ye>1,u=u||ye<m,m=ye,o.push(ye),ae});h&&t.errors.push(function eQ(){return new a.vHH(3012,!1)}()),u&&t.errors.push(function tQ(){return new a.vHH(3200,!1)}());const y=e.steps.length;let E=0;s>0&&s<y?t.errors.push(function nQ(){return new a.vHH(3202,!1)}()):0==s&&(E=1/(y-1));const x=y-1,I=t.currentTime,k=t.currentAnimateTimings,P=k.duration;return g.forEach((q,ae)=>{const ee=E>0?ae==x?1:E*ae:o[ae],ye=ee*P;t.currentTime=I+k.delay+ye,k.duration=ye,this._validateStyleAst(q,t),q.offset=ee,i.styles.push(q)}),i}visitReference(e,t){return{type:8,animation:rl(this,xE(e.animation),t),options:mg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:mg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:mg(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function zQ(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(VQ,"")),n=n.replace(/@\*/g,yD).replace(/@\w+/g,t=>yD+"-"+t.slice(1)).replace(/:animating/g,pP),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,il(t.collectedStyles,t.currentQuerySelector,new Map);const u=rl(this,xE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:u,originalSelector:e.selector,options:mg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function iQ(){return new a.vHH(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:vD(e.timings,t.errors,!0);return{type:12,animation:rl(this,xE(e.animation),t),timings:i,options:null}}}class GQ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function mg(n){return n?(n=EE(n)).params&&(n.params=function jQ(n){return n?EE(n):null}(n.params)):n={},n}function bP(n,e,t){return{duration:n,delay:e,easing:t}}function wP(n,e,t,i,r,s,o=null,u=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:u}}class ID{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ZQ=new RegExp(":enter","g"),QQ=new RegExp(":leave","g");function EP(n,e,t,i,r,s=new Map,o=new Map,u,h,m=[]){return(new JQ).buildKeyframes(n,e,t,i,r,s,o,u,h,m)}class JQ{buildKeyframes(e,t,i,r,s,o,u,h,m,g=[]){m=m||new ID;const y=new xP(e,t,m,r,s,g,[]);y.options=h;const E=h.delay?Ud(h.delay):0;y.currentTimeline.delayNextStep(E),y.currentTimeline.setStyles([o],null,y.errors,h),rl(this,i,y);const x=y.timelines.filter(I=>I.containsAnimation());if(x.length&&u.size){let I;for(let k=x.length-1;k>=0;k--){const P=x[k];if(P.element===t){I=P;break}}I&&!I.allowOnlyTimelineStyles()&&I.setStyles([u],null,y.errors,h)}return x.length?x.map(I=>I.buildKeyframes()):[wP(t,[],[],[],0,E,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:Ud(TE(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Ud(i.duration):null,u=null!=i.delay?Ud(i.delay):null;return 0!==o&&e.forEach(h=>{const m=t.appendInstructionToTimeline(h,o,u);s=Math.max(s,m.duration+m.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),rl(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=SD);const o=Ud(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>rl(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ud(e.options.delay):0;e.steps.forEach(o=>{const u=t.createSubContext(e.options);s&&u.delayNextStep(s),rl(this,o,u),r=Math.max(r,u.currentTimeline.currentTime),i.push(u.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return vD(t.params?TE(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,u=t.createSubContext().currentTimeline;u.easing=i.easing,e.styles.forEach(h=>{u.forwardTime((h.offset||0)*s),u.setStyles(h.styles,h.easing,t.errors,t.options),u.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(u),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Ud(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=SD);let o=i;const u=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=u.length;let h=null;u.forEach((m,g)=>{t.currentQueryIndex=g;const y=t.createSubContext(e.options,m);s&&y.delayNextStep(s),m===t.element&&(h=y.currentTimeline),rl(this,e.animation,y),y.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,y.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),h&&(t.currentTimeline.mergeTimelineCollectedStyles(h),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),u=o*(t.currentQueryTotal-1);let h=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":h=u-h;break;case"full":h=i.currentStaggerTime}const g=t.currentTimeline;h&&g.delayNextStep(h);const y=g.currentTime;rl(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-y+(r.startTime-i.currentTimeline.startTime)}}const SD={};class xP{constructor(e,t,i,r,s,o,u,h){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=u,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=SD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=h||new DD(this._driver,t,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Ud(i.duration)),null!=i.delay&&(r.delay=Ud(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(u=>{(!t||!o.hasOwnProperty(u))&&(o[u]=TE(s[u],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new xP(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=SD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new eJ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let u=[];if(r&&u.push(this.element),e.length>0){e=(e=e.replace(ZQ,"."+this._enterClassName)).replace(QQ,"."+this._leaveClassName);let m=this._driver.query(this.element,e,1!=i);0!==i&&(m=i<0?m.slice(m.length+i,m.length):m.slice(0,i)),u.push(...m)}return!s&&0==u.length&&o.push(function rQ(n){return new a.vHH(3014,!1)}()),u}}class DD{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new DD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Fd),this._currentKeyframe.set(t,Fd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function tJ(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,Fd)}else qf(r,t)}),t}(e,this._globalTimelineStyles);for(let[u,h]of o){const m=TE(h,s,i);this._pendingStyles.set(u,m),this._localTimelineStyles.has(u)||this._backFill.set(u,this._globalTimelineStyles.get(u)??Fd),this._updateStyle(u,m)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((u,h)=>{const m=qf(u,new Map,this._backFill);m.forEach((g,y)=>{g===pO?e.add(y):g===Fd&&t.add(y)}),i||m.set("offset",h/this.duration),r.push(m)});const s=e.size?bD(e.values()):[],o=t.size?bD(t.values()):[];if(i){const u=r[0],h=new Map(u);u.set("offset",0),h.set("offset",1),r=[u,h]}return wP(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class eJ extends DD{constructor(e,t,i,r,s,o,u=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=u,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,u=t/o,h=qf(e[0]);h.set("offset",0),s.push(h);const m=qf(e[0]);m.set("offset",e4(u)),s.push(m);const g=e.length-1;for(let y=1;y<=g;y++){let E=qf(e[y]);const x=E.get("offset");E.set("offset",e4((t+x*i)/o)),s.push(E)}i=o,t=0,r="",e=s}return wP(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function e4(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class TP{}const nJ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class iJ extends TP{normalizePropertyName(e,t){return yP(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(nJ.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const u=i.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&0==u[1].length&&r.push(function YX(n,e){return new a.vHH(3005,!1)}())}return o+s}}function t4(n,e,t,i,r,s,o,u,h,m,g,y,E){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:u,queriedElements:h,preStyleProps:m,postStyleProps:g,totalTime:y,errors:E}}const CP={};class n4{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function rJ(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,u,h,m,g){const y=[],E=this.ast.options&&this.ast.options.params||CP,I=this.buildStyles(i,u&&u.params||CP,y),k=h&&h.params||CP,P=this.buildStyles(r,k,y),q=new Set,ae=new Map,ee=new Map,ye="void"===r,De={params:sJ(k,E),delay:this.ast.options?.delay},dt=g?[]:EP(e,t,this.ast.animation,s,o,I,P,De,m,y);let it=0;if(dt.forEach(Nt=>{it=Math.max(Nt.duration+Nt.delay,it)}),y.length)return t4(t,this._triggerName,i,r,ye,I,P,[],[],ae,ee,it,y);dt.forEach(Nt=>{const mt=Nt.element,Hn=il(ae,mt,new Set);Nt.preStyleProps.forEach(Oi=>Hn.add(Oi));const dn=il(ee,mt,new Set);Nt.postStyleProps.forEach(Oi=>dn.add(Oi)),mt!==t&&q.add(mt)});const Dt=bD(q.values());return t4(t,this._triggerName,i,r,ye,I,P,dt,Dt,ae,ee,it)}}function sJ(n,e){const t=EE(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class oJ{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=EE(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,u)=>{o&&(o=TE(o,r,t));const h=this.normalizer.normalizePropertyName(u,t);o=this.normalizer.normalizeStyleValue(u,h,o,t),i.set(u,o)})}),i}}class lJ{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new oJ(r.style,r.options&&r.options.params||{},i))}),i4(this.states,"true","1"),i4(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new n4(e,r,this.states))}),this.fallbackTransition=function cJ(n,e,t){return new n4(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,u)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function i4(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const uJ=new ID;class dJ{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],r=[],s=vP(this._driver,t,i,r);if(i.length)throw function dQ(n){return new a.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=L6(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const u=new Map;if(s?(o=EP(this._driver,t,s,mP,gD,new Map,new Map,i,uJ,r),o.forEach(g=>{const y=il(u,g.element,new Map);g.postStyleProps.forEach(E=>y.set(E,null))})):(r.push(function hQ(){return new a.vHH(3300,!1)}()),o=[]),r.length)throw function fQ(n){return new a.vHH(3504,!1)}();u.forEach((g,y)=>{g.forEach((E,x)=>{g.set(x,this._driver.computeStyle(y,x,Fd))})});const m=Yf(o.map(g=>{const y=u.get(g.element);return this._buildPlayer(g,new Map,y)}));return this._playersById.set(e,m),m.onDestroy(()=>this.destroy(e)),this.players.push(m),m}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function mQ(n){return new a.vHH(3301,!1)}();return t}listen(e,t,i,r){const s=uP(t,"","","");return lP(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const r4="ng-animate-queued",IP="ng-animate-disabled",gJ=[],s4={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},_J={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ol="__ng_removed";class SP{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function wJ(n){return n??null}(i?e.value:e),i){const s=EE(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const CE="void",DP=new SP(CE);class yJ{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Pl(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function pQ(n,e){return new a.vHH(3302,!1)}();if(null==i||0==i.length)throw function gQ(n){return new a.vHH(3303,!1)}();if(!function EJ(n){return"start"==n||"done"==n}(i))throw function _Q(n,e){return new a.vHH(3400,!1)}();const s=il(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const u=il(this._engine.statesByElement,e,new Map);return u.has(t)||(Pl(e,_D),Pl(e,_D+"-"+t),u.set(t,DP)),()=>{this._engine.afterFlush(()=>{const h=s.indexOf(o);h>=0&&s.splice(h,1),this._triggers.has(t)||u.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function yQ(n){return new a.vHH(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new AP(this.id,t,e);let u=this._engine.statesByElement.get(e);u||(Pl(e,_D),Pl(e,_D+"-"+t),this._engine.statesByElement.set(e,u=new Map));let h=u.get(t);const m=new SP(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&h&&m.absorbOptions(h.options),u.set(t,m),h||(h=DP),m.value!==CE&&h.value===m.value){if(!function CJ(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(h.params,m.params)){const k=[],P=s.matchStyles(h.value,h.params,k),q=s.matchStyles(m.value,m.params,k);k.length?this._engine.reportError(k):this._engine.afterFlush(()=>{fg(e,P),Su(e,q)})}return}const E=il(this._engine.playersByElement,e,[]);E.forEach(k=>{k.namespaceId==this.id&&k.triggerName==t&&k.queued&&k.destroy()});let x=s.matchTransition(h.value,m.value,e,m.params),I=!1;if(!x){if(!r)return;x=s.fallbackTransition,I=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:x,fromState:h,toState:m,player:o,isFallbackTransition:I}),I||(Pl(e,r4),o.onStart(()=>{Yy(e,r4)})),o.onDone(()=>{let k=this.players.indexOf(o);k>=0&&this.players.splice(k,1);const P=this._engine.playersByElement.get(e);if(P){let q=P.indexOf(o);q>=0&&P.splice(q,1)}}),this.players.push(o),E.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,yD,!0);i.forEach(r=>{if(r[Ol])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const u=[];if(s.forEach((h,m)=>{if(o.set(m,h.value),this._triggers.has(m)){const g=this.trigger(e,m,CE,r);g&&u.push(g)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Yf(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const h=this._triggers.get(o).fallbackTransition,m=i.get(o)||DP,g=new SP(CE),y=new AP(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:h,fromState:m,toState:g,player:y,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ol];(!s||s===s4)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Pl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(u=>{if(u.name==i.triggerName){const h=uP(s,i.triggerName,i.fromState.value,i.toState.value);h._data=e,lP(i.player,u.phase,h,u.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class vJ{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new yJ(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,u=this.driver.getParentElement(t);for(;u;){const h=r.get(u);if(h){const m=i.indexOf(h);i.splice(m+1,0,e),o=!0;break}u=this.driver.getParentElement(u)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(AD(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!AD(t))return;const s=t[Ol];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Pl(e,IP)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Yy(e,IP))}removeNode(e,t,i,r){if(AD(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Ol]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return AD(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,yD,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,pP,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Yf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ol];if(t&&t.setForRemoval){if(e[Ol]=s4,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(IP)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Pl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Yf(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function vQ(n){return new a.vHH(3402,!1)}()}_flushAnimations(e,t){const i=new ID,r=[],s=new Map,o=[],u=new Map,h=new Map,m=new Map,g=new Set;this.disabledNodes.forEach(Ht=>{g.add(Ht);const ln=this.driver.query(Ht,".ng-animate-queued",!0);for(let xt=0;xt<ln.length;xt++)g.add(ln[xt])});const y=this.bodyNode,E=Array.from(this.statesByElement.keys()),x=l4(E,this.collectedEnterElements),I=new Map;let k=0;x.forEach((Ht,ln)=>{const xt=mP+k++;I.set(ln,xt),Ht.forEach(zt=>Pl(zt,xt))});const P=[],q=new Set,ae=new Set;for(let Ht=0;Ht<this.collectedLeaveElements.length;Ht++){const ln=this.collectedLeaveElements[Ht],xt=ln[Ol];xt&&xt.setForRemoval&&(P.push(ln),q.add(ln),xt.hasAnimation?this.driver.query(ln,".ng-star-inserted",!0).forEach(zt=>q.add(zt)):ae.add(ln))}const ee=new Map,ye=l4(E,Array.from(q));ye.forEach((Ht,ln)=>{const xt=gD+k++;ee.set(ln,xt),Ht.forEach(zt=>Pl(zt,xt))}),e.push(()=>{x.forEach((Ht,ln)=>{const xt=I.get(ln);Ht.forEach(zt=>Yy(zt,xt))}),ye.forEach((Ht,ln)=>{const xt=ee.get(ln);Ht.forEach(zt=>Yy(zt,xt))}),P.forEach(Ht=>{this.processLeaveNode(Ht)})});const De=[],dt=[];for(let Ht=this._namespaceList.length-1;Ht>=0;Ht--)this._namespaceList[Ht].drainQueuedTransitions(t).forEach(xt=>{const zt=xt.player,fi=xt.element;if(De.push(zt),this.collectedEnterElements.length){const Zr=fi[Ol];if(Zr&&Zr.setForMove){if(Zr.previousTriggersValues&&Zr.previousTriggersValues.has(xt.triggerName)){const xc=Zr.previousTriggersValues.get(xt.triggerName),Ll=this.statesByElement.get(xt.element);if(Ll&&Ll.has(xt.triggerName)){const zD=Ll.get(xt.triggerName);zD.value=xc,Ll.set(xt.triggerName,zD)}}return void zt.destroy()}}const Ni=!y||!this.driver.containsElement(y,fi),gi=ee.get(fi),dr=I.get(fi),Bi=this._buildInstruction(xt,i,dr,gi,Ni);if(Bi.errors&&Bi.errors.length)return void dt.push(Bi);if(Ni)return zt.onStart(()=>fg(fi,Bi.fromStyles)),zt.onDestroy(()=>Su(fi,Bi.toStyles)),void r.push(zt);if(xt.isFallbackTransition)return zt.onStart(()=>fg(fi,Bi.fromStyles)),zt.onDestroy(()=>Su(fi,Bi.toStyles)),void r.push(zt);const Ia=[];Bi.timelines.forEach(Zr=>{Zr.stretchStartingKeyframe=!0,this.disabledNodes.has(Zr.element)||Ia.push(Zr)}),Bi.timelines=Ia,i.append(fi,Bi.timelines),o.push({instruction:Bi,player:zt,element:fi}),Bi.queriedElements.forEach(Zr=>il(u,Zr,[]).push(zt)),Bi.preStyleProps.forEach((Zr,xc)=>{if(Zr.size){let Ll=h.get(xc);Ll||h.set(xc,Ll=new Set),Zr.forEach((zD,oL)=>Ll.add(oL))}}),Bi.postStyleProps.forEach((Zr,xc)=>{let Ll=m.get(xc);Ll||m.set(xc,Ll=new Set),Zr.forEach((zD,oL)=>Ll.add(oL))})});if(dt.length){const Ht=[];dt.forEach(ln=>{Ht.push(function bQ(n,e){return new a.vHH(3505,!1)}())}),De.forEach(ln=>ln.destroy()),this.reportError(Ht)}const it=new Map,Dt=new Map;o.forEach(Ht=>{const ln=Ht.element;i.has(ln)&&(Dt.set(ln,ln),this._beforeAnimationBuild(Ht.player.namespaceId,Ht.instruction,it))}),r.forEach(Ht=>{const ln=Ht.element;this._getPreviousPlayers(ln,!1,Ht.namespaceId,Ht.triggerName,null).forEach(zt=>{il(it,ln,[]).push(zt),zt.destroy()})});const Nt=P.filter(Ht=>u4(Ht,h,m)),mt=new Map;a4(mt,this.driver,ae,m,Fd).forEach(Ht=>{u4(Ht,h,m)&&Nt.push(Ht)});const dn=new Map;x.forEach((Ht,ln)=>{a4(dn,this.driver,new Set(Ht),h,pO)}),Nt.forEach(Ht=>{const ln=mt.get(Ht),xt=dn.get(Ht);mt.set(Ht,new Map([...Array.from(ln?.entries()??[]),...Array.from(xt?.entries()??[])]))});const Oi=[],Ss=[],cr={};o.forEach(Ht=>{const{element:ln,player:xt,instruction:zt}=Ht;if(i.has(ln)){if(g.has(ln))return xt.onDestroy(()=>Su(ln,zt.toStyles)),xt.disabled=!0,xt.overrideTotalTime(zt.totalTime),void r.push(xt);let fi=cr;if(Dt.size>1){let gi=ln;const dr=[];for(;gi=gi.parentNode;){const Bi=Dt.get(gi);if(Bi){fi=Bi;break}dr.push(gi)}dr.forEach(Bi=>Dt.set(Bi,fi))}const Ni=this._buildAnimation(xt.namespaceId,zt,it,s,dn,mt);if(xt.setRealPlayer(Ni),fi===cr)Oi.push(xt);else{const gi=this.playersByElement.get(fi);gi&&gi.length&&(xt.parentPlayer=Yf(gi)),r.push(xt)}}else fg(ln,zt.fromStyles),xt.onDestroy(()=>Su(ln,zt.toStyles)),Ss.push(xt),g.has(ln)&&r.push(xt)}),Ss.forEach(Ht=>{const ln=s.get(Ht.element);if(ln&&ln.length){const xt=Yf(ln);Ht.setRealPlayer(xt)}}),r.forEach(Ht=>{Ht.parentPlayer?Ht.syncPlayerEvents(Ht.parentPlayer):Ht.destroy()});for(let Ht=0;Ht<P.length;Ht++){const ln=P[Ht],xt=ln[Ol];if(Yy(ln,gD),xt&&xt.hasAnimation)continue;let zt=[];if(u.size){let Ni=u.get(ln);Ni&&Ni.length&&zt.push(...Ni);let gi=this.driver.query(ln,pP,!0);for(let dr=0;dr<gi.length;dr++){let Bi=u.get(gi[dr]);Bi&&Bi.length&&zt.push(...Bi)}}const fi=zt.filter(Ni=>!Ni.destroyed);fi.length?xJ(this,ln,fi):this.processLeaveNode(ln)}return P.length=0,Oi.forEach(Ht=>{this.players.push(Ht),Ht.onDone(()=>{Ht.destroy();const ln=this.players.indexOf(Ht);this.players.splice(ln,1)}),Ht.play()}),Oi}elementContainsData(e,t){let i=!1;const r=t[Ol];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const u=this.playersByQueriedElement.get(e);u&&(o=u)}else{const u=this.playersByElement.get(e);if(u){const h=!s||s==CE;u.forEach(m=>{m.queued||!h&&m.triggerName!=r||o.push(m)})}}return(i||r)&&(o=o.filter(u=>!(i&&i!=u.namespaceId||r&&r!=u.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,u=t.isRemovalTransition?void 0:t.triggerName;for(const h of t.timelines){const m=h.element,g=m!==s,y=il(i,m,[]);this._getPreviousPlayers(m,g,o,u,t.toState).forEach(x=>{const I=x.getRealPlayer();I.beforeDestroy&&I.beforeDestroy(),x.destroy(),y.push(x)})}fg(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const u=t.triggerName,h=t.element,m=[],g=new Set,y=new Set,E=t.timelines.map(I=>{const k=I.element;g.add(k);const P=k[Ol];if(P&&P.removedBeforeQueried)return new cE(I.duration,I.delay);const q=k!==h,ae=function TJ(n){const e=[];return c4(n,e),e}((i.get(k)||gJ).map(it=>it.getRealPlayer())).filter(it=>!!it.element&&it.element===k),ee=s.get(k),ye=o.get(k),De=L6(0,this._normalizer,0,I.keyframes,ee,ye),dt=this._buildPlayer(I,De,ae);if(I.subTimeline&&r&&y.add(k),q){const it=new AP(e,u,k);it.setRealPlayer(dt),m.push(it)}return dt});m.forEach(I=>{il(this.playersByQueriedElement,I.element,[]).push(I),I.onDone(()=>function bJ(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,I.element,I))}),g.forEach(I=>Pl(I,j6));const x=Yf(E);return x.onDestroy(()=>{g.forEach(I=>Yy(I,j6)),Su(h,t.toStyles)}),y.forEach(I=>{il(r,I,[]).push(x)}),x}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new cE(e.duration,e.delay)}}class AP{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new cE,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>lP(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){il(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function AD(n){return n&&1===n.nodeType}function o4(n,e){const t=n.style.display;return n.style.display=e??"none",t}function a4(n,e,t,i,r){const s=[];t.forEach(h=>s.push(o4(h)));const o=[];i.forEach((h,m)=>{const g=new Map;h.forEach(y=>{const E=e.computeStyle(m,y,r);g.set(y,E),(!E||0==E.length)&&(m[Ol]=_J,o.push(m))}),n.set(m,g)});let u=0;return t.forEach(h=>o4(h,s[u++])),o}function l4(n,e){const t=new Map;if(n.forEach(u=>t.set(u,[])),0==e.length)return t;const i=1,r=new Set(e),s=new Map;function o(u){if(!u)return i;let h=s.get(u);if(h)return h;const m=u.parentNode;return h=t.has(m)?m:r.has(m)?i:o(m),s.set(u,h),h}return e.forEach(u=>{const h=o(u);h!==i&&t.get(h).push(u)}),t}function Pl(n,e){n.classList?.add(e)}function Yy(n,e){n.classList?.remove(e)}function xJ(n,e,t){Yf(t).onDone(()=>n.processLeaveNode(e))}function c4(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof lV?c4(i.players,e):e.push(i)}}function u4(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class MD{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new vJ(e,t,i),this._timelineEngine=new dJ(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let u=this._triggerCache[o];if(!u){const h=[],m=[],g=vP(this._driver,s,h,m);if(h.length)throw function cQ(n,e){return new a.vHH(3404,!1)}();u=function aJ(n,e,t){return new lJ(n,e,t)}(r,g,this._normalizer),this._triggerCache[o]=u}this._transitionEngine.registerTrigger(t,r,u)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=F6(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,u]=F6(i);return this._timelineEngine.listen(o,t,u,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let SJ=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Su(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Su(this._element,this._initialStyles),this._endStyles&&(Su(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(fg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fg(this._element,this._endStyles),this._endStyles=null),Su(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function MP(n){let e=null;return n.forEach((t,i)=>{(function DJ(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class d4{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:Z6(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class AJ{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return $6(e,t)}getParentElement(e){return hP(e)}query(e,t,i){return V6(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const h={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(h.easing=s);const m=new Map,g=o.filter(x=>x instanceof d4);(function OQ(n,e){return 0===n||0===e})(i,r)&&g.forEach(x=>{x.currentSnapshot.forEach((I,k)=>m.set(k,I))});let y=function AQ(n){return n.length?n[0]instanceof Map?n:n.map(e=>G6(e)):[]}(t).map(x=>qf(x));y=function PQ(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(u=>o.set(u,Z6(n,u)))}}return e}(e,y,m);const E=function IJ(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=MP(e[0]),e.length>1&&(i=MP(e[e.length-1]))):e instanceof Map&&(t=MP(e)),t||i?new SJ(n,t,i):null}(e,y);return new d4(e,y,h,E)}}let MJ=(()=>{class n extends nV{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:a.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?rV(t):t;return h4(this._renderer,null,i,"register",[r]),new kJ(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.FYo),a.LFG(me))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class kJ extends l9{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new RJ(this._id,e,t||{},this._renderer)}}class RJ{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return h4(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function h4(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const f4="@.disabled";let OJ=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const u=o?.parentNode(s);u&&o.removeChild(u,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let g=this._rendererCache.get(s);return g||(g=new m4("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,g)),g}const o=i.id,u=i.id+"-"+this._currentId;this._currentId++,this.engine.register(u,t);const h=g=>{Array.isArray(g)?g.forEach(h):this.engine.registerTrigger(o,u,t,g.name,g)};return i.data.animation.forEach(h),new PJ(this,u,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,u]=s;o(u)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.FYo),a.LFG(MD),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class m4{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==f4?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class PJ extends m4{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==f4?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function LJ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function FJ(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,u=>{this.factory.scheduleListenerCallback(u._data||-1,i,u)})}return this.delegate.listen(e,t,i)}}let NJ=(()=>{class n extends MD{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(me),a.LFG(fP),a.LFG(TP),a.LFG(a.z2F))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const p4=[{provide:nV,useClass:MJ},{provide:TP,useFactory:function BJ(){return new iJ}},{provide:MD,useClass:NJ},{provide:a.FYo,useFactory:function UJ(n,e,t){return new OJ(n,e,t)},deps:[Ks,MD,a.R0b]}],kP=[{provide:fP,useFactory:()=>new AJ},{provide:a.QbO,useValue:"BrowserAnimations"},...p4],g4=[{provide:fP,useClass:H6},{provide:a.QbO,useValue:"NoopAnimations"},...p4];let $J=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?g4:kP}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:kP,imports:[jo]}),n})();class RP{constructor(e){return e}}class RD{constructor(){return(0,pi.vb)("auth")}}const OP=new a.OlP("angularfire2.auth-instances");function HJ(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new RP(i)}}const zJ={provide:RD,deps:[[new a.FiY,OP]]},jJ={provide:RP,useFactory:function VJ(n,e){const t=(0,pi.JM)("auth",n,e);return t&&new RP(t)},deps:[[new a.FiY,OP],au]};let GJ=(()=>{class n{constructor(){(0,ma.KN)("angularfire",pi.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[jJ,zJ]}),n})();function WJ(n,...e){return{ngModule:GJ,providers:[{provide:OP,useFactory:HJ(n),multi:!0,deps:[a.R0b,a.zs3,pi.HU,qm,[new a.FiY,hc],...e]}]}}const YJ=(0,pi.u3)(Gg.o,!0);class PP{constructor(e){return e}}const y4="firestore",LP=new a.OlP("angularfire2.firestore-instances");function ZJ(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new PP(i)}}const XJ={provide:class qJ{constructor(){return(0,pi.vb)(y4)}},deps:[[new a.FiY,LP]]},QJ={provide:PP,useFactory:function KJ(n,e){const t=(0,pi.JM)(y4,n,e);return t&&new PP(t)},deps:[[new a.FiY,LP],au]};let JJ=(()=>{class n{constructor(){(0,ma.KN)("angularfire",pi.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[QJ,XJ]}),n})();function eee(n,...e){return{ngModule:JJ,providers:[{provide:LP,useFactory:ZJ(n),multi:!0,deps:[a.R0b,a.zs3,pi.HU,qm,[new a.FiY,RD],[new a.FiY,hc],...e]}]}}const tee=(0,pi.u3)(FU,!0),b4="firebasestorage.googleapis.com",w4="storageBucket";class ss extends ui.ZR{constructor(e,t,i=0){super(FP(e),`Firebase Storage: ${t} (${FP(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ss.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return FP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ir=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ir||(Ir={})),Ir))();function FP(n){return"storage/"+n}function BP(n){return new ss(Ir.INVALID_ARGUMENT,n)}function C4(){return new ss(Ir.APP_DELETED,"The Firebase app was deleted.")}class ta{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=ta.makeFromUrl(e,t)}catch{return new ta(e,"")}if(""===i.path)return i;throw function dee(n){return new ss(Ir.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",u=new RegExp("^gs://"+r+"(/(.*))?$","i");function m(ye){ye.path_=decodeURIComponent(ye.path)}const y=t.replace(/[.]/g,"\\."),ee=[{regex:u,indices:{bucket:1,path:3},postModify:function s(ye){"/"===ye.path.charAt(ye.path.length-1)&&(ye.path_=ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${y}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:m},{regex:new RegExp(`^https?://${t===b4?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:m}];for(let ye=0;ye<ee.length;ye++){const De=ee[ye],dt=De.regex.exec(e);if(dt){let Dt=dt[De.indices.path];Dt||(Dt=""),i=new ta(dt[De.indices.bucket],Dt),De.postModify(i);break}}if(null==i)throw function uee(n){return new ss(Ir.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return i}}class _ee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function $P(n,e,t,i){if(i<e)throw BP(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw BP(`Invalid value for '${n}'. Expected ${t} or less.`)}var Kf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Kf||(Kf={})),Kf))();class xee{constructor(e,t,i,r,s,o,u,h,m,g,y,E=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=h,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=y,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,I)=>{this.resolve_=x,this.reject_=I,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,o=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());!function bee(n){return void 0!==n}(h)?s():s(h)}catch(h){o(h)}else if(null!==u){const h=function NP(){return new ss(Ir.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();h.serverResponse=u.getErrorText(),o(this.errorCallback_?this.errorCallback_(u,h):h)}else o(r.canceled?this.appDelete_?C4():function x4(){return new ss(Ir.CANCELED,"User canceled the upload/download.")}():function E4(){return new ss(Ir.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new PD(!1,null,!0)):this.backoffId_=function yee(n,e,t){let i=1,r=null,s=null,o=!1,u=0;function h(){return 2===u}let m=!1;function g(...P){m||(m=!0,e.apply(null,P))}function y(P){r=setTimeout(()=>{r=null,n(x,h())},P)}function E(){s&&clearTimeout(s)}function x(P,...q){if(m)return void E();if(P)return E(),void g.call(null,P,...q);if(h()||o)return E(),void g.call(null,P,...q);let ee;i<64&&(i*=2),1===u?(u=2,ee=0):ee=1e3*(i+Math.random()),y(ee)}let I=!1;function k(P){I||(I=!0,E(),!m&&(null!==r?(P||(u=2),clearTimeout(r),y(0)):P||(u=1)))}return y(0),s=setTimeout(()=>{o=!0,k(!0)},t),k}((i,r)=>{if(r)return void i(!1,new PD(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=u=>{null!==this.progressCallback_&&this.progressCallback_(u.loaded,u.lengthComputable?u.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const u=s.getErrorCode()===Kf.NO_ERROR,h=s.getStatus();if(!u||function D4(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||r||s}(h,this.additionalRetryCodes_)&&this.retry){const g=s.getErrorCode()===Kf.ABORT;return void i(!1,new PD(!1,null,g))}const m=-1!==this.successCodes_.indexOf(h);i(!0,new PD(m,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function vee(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class PD{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}class pg{constructor(e,t){this._service=e,this._location=t instanceof ta?t:ta.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pg(e,t)}get root(){const e=new ta(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function O4(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function Nee(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ta(this._location.bucket,e);return new pg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function gee(n){return new ss(Ir.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function q4(n,e){const t=e?.[w4];return null==t?null:ta.makeFromBucketSpec(t,n)}class WP{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=b4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ta.makeFromBucketSpec(r,this._host):q4(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ta.makeFromBucketSpec(this._url,e):q4(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$P("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$P("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ot.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ot.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pg(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new _ee(C4());{const o=function Dee(n,e,t,i,r,s,o=!0){const u=function S4(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}(n.urlParams),h=n.url+u,m=Object.assign({},n.headers);return function Iee(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function Tee(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function Cee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(m,s),function See(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,i),new xee(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var i=this;return(0,ot.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const K4="@firebase/storage",X4="storage";function Ete(n=(0,Gr.getApp)(),e){n=(0,ui.m9)(n);const i=(0,Gr._getProvider)(n,X4).getImmediate({identifier:e}),r=(0,ui.P0)("storage");return r&&function xte(n,e,t,i={}){!function wte(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,ui.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(i,...r),i}function Tte(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new WP(t,i,r,e,Gr.SDK_VERSION)}!function Cte(){(0,Gr._registerComponent)(new hd.wA(X4,Tte,"PUBLIC").setMultipleInstances(!0)),(0,Gr.registerVersion)(K4,"0.11.2",""),(0,Gr.registerVersion)(K4,"0.11.2","esm2017")}();class YP{constructor(e){return e}}const Q4="storage",qP=new a.OlP("angularfire2.storage-instances");function Dte(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new YP(i)}}const Ate={provide:class Ite{constructor(){return(0,pi.vb)(Q4)}},deps:[[new a.FiY,qP]]},Mte={provide:YP,useFactory:function Ste(n,e){const t=(0,pi.JM)(Q4,n,e);return t&&new YP(t)},deps:[[new a.FiY,qP],au]};let kte=(()=>{class n{constructor(){(0,ma.KN)("angularfire",pi.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[Mte,Ate]}),n})();function Rte(n,...e){return{ngModule:kte,providers:[{provide:qP,useFactory:Dte(n),multi:!0,deps:[a.R0b,a.zs3,pi.HU,qm,[new a.FiY,RD],[new a.FiY,hc],...e]}]}}const Ote=(0,pi.u3)(Ete,!0),ZP="functions";class Bte{constructor(e,t,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||t.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){var e=this;return(0,ot.Z)(function*(){if(e.auth)try{return(yield e.auth.getToken())?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return(0,ot.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(e){var t=this;return(0,ot.Z)(function*(){if(t.appCheck){const i=e?yield t.appCheck.getLimitedUseToken():yield t.appCheck.getToken();return i.error?null:i.token}return null})()}getContext(e){var t=this;return(0,ot.Z)(function*(){return{authToken:yield t.getAuthToken(),messagingToken:yield t.getMessagingToken(),appCheckToken:yield t.getAppCheckToken(e)}})()}}const XP="us-central1";class $te{constructor(e,t,i,r,s=XP,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Bte(t,i,r),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(s);this.customDomain=u.origin,this.region=XP}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const rH="@firebase/functions";function Zte(n=(0,Gr.getApp)(),e=XP){const i=(0,Gr._getProvider)((0,ui.m9)(n),ZP).getImmediate({identifier:e}),r=(0,ui.P0)("functions");return r&&function Xte(n,e,t){!function Vte(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}((0,ui.m9)(n),e,t)}(i,...r),i}!function Kte(n,e){(0,Gr._registerComponent)(new hd.wA(ZP,(i,{instanceIdentifier:r})=>{const s=i.getProvider("app").getImmediate(),o=i.getProvider("auth-internal"),u=i.getProvider("messaging-internal"),h=i.getProvider("app-check-internal");return new $te(s,o,u,h,r,n)},"PUBLIC").setMultipleInstances(!0)),(0,Gr.registerVersion)(rH,"0.10.0",e),(0,Gr.registerVersion)(rH,"0.10.0","esm2017")}(fetch.bind(self));class QP{constructor(e){return e}}const oH="functions",JP=new a.OlP("angularfire2.functions-instances");function ene(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new QP(i)}}const tne={provide:class Qte{constructor(){return(0,pi.vb)(oH)}},deps:[[new a.FiY,JP]]},nne={provide:QP,useFactory:function Jte(n,e){const t=(0,pi.JM)(oH,n,e);return t&&new QP(t)},deps:[[new a.FiY,JP],au]};let ine=(()=>{class n{constructor(){(0,ma.KN)("angularfire",pi.q4.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[nne,tne]}),n})();function rne(n,...e){return{ngModule:ine,providers:[{provide:JP,useFactory:ene(n),multi:!0,deps:[a.R0b,a.zs3,pi.HU,qm,[new a.FiY,RD],[new a.FiY,hc],...e]}]}}const sne=(0,pi.u3)(Zte,!0);let kne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[Is,Is]}),n})(),Rne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[Is,Is]}),n})(),Pne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[Is]}),n})();const xH_firebaseConfig={apiKey:"AIzaSyAmG52vP8RvmwchQ71fQggTMu0eRdUz0Bc",authDomain:"tv-project-ffd44.firebaseapp.com",databaseURL:"https://tv-project-ffd44-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"tv-project-ffd44",storageBucket:"tv-project-ffd44.appspot.com",messagingSenderId:"711946849087",appId:"1:711946849087:web:0079a3cd80b97cea04e18a",measurementId:"G-0GRY2RNYRQ"};let Lne=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275mod=a.oAB({type:n,bootstrap:[u0]}),n.\u0275inj=a.cJS({imports:[uq,Sq,CX.forRoot(),b9,jo,VX,A9,$J,k7,yY,KY,Pne,kne,ZS,Rne,fa.hO.initializeApp(xH_firebaseConfig),X7,jA(()=>GA(xH_firebaseConfig)),WJ(()=>YJ()),eee(()=>tee()),Rte(()=>Ote()),rne(()=>sne(kx(),"asia-east2"))]}),e})();fh().bootstrapModule(Lne).catch(n=>console.error(n))},9751:(jt,Ze,F)=>{"use strict";F.d(Ze,{y:()=>_e});var a=F(930),K=F(727),B=F(8822),Ee=F(9635),Ae=F(2416),me=F(576),oe=F(2806);let _e=(()=>{class se{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const ke=new se;return ke.source=this,ke.operator=xe,ke}subscribe(xe,ke,Ue){const te=function X(se){return se&&se instanceof a.Lv||function ie(se){return se&&(0,me.m)(se.next)&&(0,me.m)(se.error)&&(0,me.m)(se.complete)}(se)&&(0,K.Nn)(se)}(xe)?xe:new a.Hp(xe,ke,Ue);return(0,oe.x)(()=>{const{operator:le,source:ue}=this;te.add(le?le.call(te,ue):ue?this._subscribe(te):this._trySubscribe(te))}),te}_trySubscribe(xe){try{return this._subscribe(xe)}catch(ke){xe.error(ke)}}forEach(xe,ke){return new(ke=Me(ke))((Ue,te)=>{const le=new a.Hp({next:ue=>{try{xe(ue)}catch(Be){te(Be),le.unsubscribe()}},error:te,complete:Ue});this.subscribe(le)})}_subscribe(xe){var ke;return null===(ke=this.source)||void 0===ke?void 0:ke.subscribe(xe)}[B.L](){return this}pipe(...xe){return(0,Ee.U)(xe)(this)}toPromise(xe){return new(xe=Me(xe))((ke,Ue)=>{let te;this.subscribe(le=>te=le,le=>Ue(le),()=>ke(te))})}}return se.create=be=>new se(be),se})();function Me(se){var be;return null!==(be=se??Ae.v.Promise)&&void 0!==be?be:Promise}},7579:(jt,Ze,F)=>{"use strict";F.d(Ze,{x:()=>oe});var a=F(9751),K=F(727);const Ee=(0,F(3888).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=F(8737),me=F(2806);let oe=(()=>{class Me extends a.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(X){const se=new _e(this,this);return se.operator=X,se}_throwIfClosed(){if(this.closed)throw new Ee}next(X){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const se of this.currentObservers)se.next(X)}})}error(X){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=X;const{observers:se}=this;for(;se.length;)se.shift().error(X)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:X}=this;for(;X.length;)X.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var X;return(null===(X=this.observers)||void 0===X?void 0:X.length)>0}_trySubscribe(X){return this._throwIfClosed(),super._trySubscribe(X)}_subscribe(X){return this._throwIfClosed(),this._checkFinalizedStatuses(X),this._innerSubscribe(X)}_innerSubscribe(X){const{hasError:se,isStopped:be,observers:xe}=this;return se||be?K.Lc:(this.currentObservers=null,xe.push(X),new K.w0(()=>{this.currentObservers=null,(0,Ae.P)(xe,X)}))}_checkFinalizedStatuses(X){const{hasError:se,thrownError:be,isStopped:xe}=this;se?X.error(be):xe&&X.complete()}asObservable(){const X=new a.y;return X.source=this,X}}return Me.create=(ie,X)=>new _e(ie,X),Me})();class _e extends oe{constructor(ie,X){super(),this.destination=ie,this.source=X}next(ie){var X,se;null===(se=null===(X=this.destination)||void 0===X?void 0:X.next)||void 0===se||se.call(X,ie)}error(ie){var X,se;null===(se=null===(X=this.destination)||void 0===X?void 0:X.error)||void 0===se||se.call(X,ie)}complete(){var ie,X;null===(X=null===(ie=this.destination)||void 0===ie?void 0:ie.complete)||void 0===X||X.call(ie)}_subscribe(ie){var X,se;return null!==(se=null===(X=this.source)||void 0===X?void 0:X.subscribe(ie))&&void 0!==se?se:K.Lc}}},930:(jt,Ze,F)=>{"use strict";F.d(Ze,{Hp:()=>Ue,Lv:()=>se});var a=F(576),K=F(727),B=F(2416),Ee=F(7849),Ae=F(5032);const me=Me("C",void 0,void 0);function Me(Ce,Ne,Le){return{kind:Ce,value:Ne,error:Le}}var ie=F(3410),X=F(2806);class se extends K.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,K.Nn)(Ne)&&Ne.add(this)):this.destination=Be}static create(Ne,Le,$e){return new Ue(Ne,Le,$e)}next(Ne){this.isStopped?ue(function _e(Ce){return Me("N",Ce,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?ue(function oe(Ce){return Me("E",void 0,Ce)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?ue(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const be=Function.prototype.bind;function xe(Ce,Ne){return be.call(Ce,Ne)}class ke{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:Le}=this;if(Le.next)try{Le.next(Ne)}catch($e){te($e)}}error(Ne){const{partialObserver:Le}=this;if(Le.error)try{Le.error(Ne)}catch($e){te($e)}else te(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(Le){te(Le)}}}class Ue extends se{constructor(Ne,Le,$e){let Z;if(super(),(0,a.m)(Ne)||!Ne)Z={next:Ne??void 0,error:Le??void 0,complete:$e??void 0};else{let he;this&&B.v.useDeprecatedNextContext?(he=Object.create(Ne),he.unsubscribe=()=>this.unsubscribe(),Z={next:Ne.next&&xe(Ne.next,he),error:Ne.error&&xe(Ne.error,he),complete:Ne.complete&&xe(Ne.complete,he)}):Z=Ne}this.destination=new ke(Z)}}function te(Ce){B.v.useDeprecatedSynchronousErrorHandling?(0,X.O)(Ce):(0,Ee.h)(Ce)}function ue(Ce,Ne){const{onStoppedNotification:Le}=B.v;Le&&ie.z.setTimeout(()=>Le(Ce,Ne))}const Be={closed:!0,next:Ae.Z,error:function le(Ce){throw Ce},complete:Ae.Z}},727:(jt,Ze,F)=>{"use strict";F.d(Ze,{Lc:()=>me,w0:()=>Ae,Nn:()=>oe});var a=F(576);const B=(0,F(3888).d)(Me=>function(X){Me(this),this.message=X?`${X.length} errors occurred during unsubscription:\n${X.map((se,be)=>`${be+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=X});var Ee=F(8737);class Ae{constructor(ie){this.initialTeardown=ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ie;if(!this.closed){this.closed=!0;const{_parentage:X}=this;if(X)if(this._parentage=null,Array.isArray(X))for(const xe of X)xe.remove(this);else X.remove(this);const{initialTeardown:se}=this;if((0,a.m)(se))try{se()}catch(xe){ie=xe instanceof B?xe.errors:[xe]}const{_finalizers:be}=this;if(be){this._finalizers=null;for(const xe of be)try{_e(xe)}catch(ke){ie=ie??[],ke instanceof B?ie=[...ie,...ke.errors]:ie.push(ke)}}if(ie)throw new B(ie)}}add(ie){var X;if(ie&&ie!==this)if(this.closed)_e(ie);else{if(ie instanceof Ae){if(ie.closed||ie._hasParent(this))return;ie._addParent(this)}(this._finalizers=null!==(X=this._finalizers)&&void 0!==X?X:[]).push(ie)}}_hasParent(ie){const{_parentage:X}=this;return X===ie||Array.isArray(X)&&X.includes(ie)}_addParent(ie){const{_parentage:X}=this;this._parentage=Array.isArray(X)?(X.push(ie),X):X?[X,ie]:ie}_removeParent(ie){const{_parentage:X}=this;X===ie?this._parentage=null:Array.isArray(X)&&(0,Ee.P)(X,ie)}remove(ie){const{_finalizers:X}=this;X&&(0,Ee.P)(X,ie),ie instanceof Ae&&ie._removeParent(this)}}Ae.EMPTY=(()=>{const Me=new Ae;return Me.closed=!0,Me})();const me=Ae.EMPTY;function oe(Me){return Me instanceof Ae||Me&&"closed"in Me&&(0,a.m)(Me.remove)&&(0,a.m)(Me.add)&&(0,a.m)(Me.unsubscribe)}function _e(Me){(0,a.m)(Me)?Me():Me.unsubscribe()}},2416:(jt,Ze,F)=>{"use strict";F.d(Ze,{v:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(jt,Ze,F)=>{"use strict";F.d(Ze,{E:()=>K});const K=new(F(9751).y)(Ae=>Ae.complete())},8996:(jt,Ze,F)=>{"use strict";F.d(Ze,{D:()=>Ne});var a=F(8421),K=F(5363),B=F(9468),me=F(9751),_e=F(2202),Me=F(576),ie=F(9672);function se(Le,$e){if(!Le)throw new Error("Iterable cannot be null");return new me.y(Z=>{(0,ie.f)(Z,$e,()=>{const he=Le[Symbol.asyncIterator]();(0,ie.f)(Z,$e,()=>{he.next().then(ve=>{ve.done?Z.complete():Z.next(ve.value)})},0,!0)})})}var be=F(3670),xe=F(8239),ke=F(1144),Ue=F(6495),te=F(2206),le=F(4532),ue=F(3260);function Ne(Le,$e){return $e?function Ce(Le,$e){if(null!=Le){if((0,be.c)(Le))return function Ee(Le,$e){return(0,a.Xf)(Le).pipe((0,B.R)($e),(0,K.Q)($e))}(Le,$e);if((0,ke.z)(Le))return function oe(Le,$e){return new me.y(Z=>{let he=0;return $e.schedule(function(){he===Le.length?Z.complete():(Z.next(Le[he++]),Z.closed||this.schedule())})})}(Le,$e);if((0,xe.t)(Le))return function Ae(Le,$e){return(0,a.Xf)(Le).pipe((0,B.R)($e),(0,K.Q)($e))}(Le,$e);if((0,te.D)(Le))return se(Le,$e);if((0,Ue.T)(Le))return function X(Le,$e){return new me.y(Z=>{let he;return(0,ie.f)(Z,$e,()=>{he=Le[_e.h](),(0,ie.f)(Z,$e,()=>{let ve,Te;try{({value:ve,done:Te}=he.next())}catch(Ye){return void Z.error(Ye)}Te?Z.complete():Z.next(ve)},0,!0)}),()=>(0,Me.m)(he?.return)&&he.return()})}(Le,$e);if((0,ue.L)(Le))return function Be(Le,$e){return se((0,ue.Q)(Le),$e)}(Le,$e)}throw(0,le.z)(Le)}(Le,$e):(0,a.Xf)(Le)}},8421:(jt,Ze,F)=>{"use strict";F.d(Ze,{Xf:()=>be});var a=F(7582),K=F(1144),B=F(8239),Ee=F(9751),Ae=F(3670),me=F(2206),oe=F(4532),_e=F(6495),Me=F(3260),ie=F(576),X=F(7849),se=F(8822);function be(Ce){if(Ce instanceof Ee.y)return Ce;if(null!=Ce){if((0,Ae.c)(Ce))return function xe(Ce){return new Ee.y(Ne=>{const Le=Ce[se.L]();if((0,ie.m)(Le.subscribe))return Le.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,K.z)(Ce))return function ke(Ce){return new Ee.y(Ne=>{for(let Le=0;Le<Ce.length&&!Ne.closed;Le++)Ne.next(Ce[Le]);Ne.complete()})}(Ce);if((0,B.t)(Ce))return function Ue(Ce){return new Ee.y(Ne=>{Ce.then(Le=>{Ne.closed||(Ne.next(Le),Ne.complete())},Le=>Ne.error(Le)).then(null,X.h)})}(Ce);if((0,me.D)(Ce))return le(Ce);if((0,_e.T)(Ce))return function te(Ce){return new Ee.y(Ne=>{for(const Le of Ce)if(Ne.next(Le),Ne.closed)return;Ne.complete()})}(Ce);if((0,Me.L)(Ce))return function ue(Ce){return le((0,Me.Q)(Ce))}(Ce)}throw(0,oe.z)(Ce)}function le(Ce){return new Ee.y(Ne=>{(function Be(Ce,Ne){var Le,$e,Z,he;return(0,a.mG)(this,void 0,void 0,function*(){try{for(Le=(0,a.KL)(Ce);!($e=yield Le.next()).done;)if(Ne.next($e.value),Ne.closed)return}catch(ve){Z={error:ve}}finally{try{$e&&!$e.done&&(he=Le.return)&&(yield he.call(Le))}finally{if(Z)throw Z.error}}Ne.complete()})})(Ce,Ne).catch(Le=>Ne.error(Le))})}},6451:(jt,Ze,F)=>{"use strict";F.d(Ze,{T:()=>me});var a=F(8189),K=F(8421),B=F(515),Ee=F(3269),Ae=F(8996);function me(...oe){const _e=(0,Ee.yG)(oe),Me=(0,Ee._6)(oe,1/0),ie=oe;return ie.length?1===ie.length?(0,K.Xf)(ie[0]):(0,a.J)(Me)((0,Ae.D)(ie,_e)):B.E}},5403:(jt,Ze,F)=>{"use strict";F.d(Ze,{x:()=>K});var a=F(930);function K(Ee,Ae,me,oe,_e){return new B(Ee,Ae,me,oe,_e)}class B extends a.Lv{constructor(Ae,me,oe,_e,Me,ie){super(Ae),this.onFinalize=Me,this.shouldUnsubscribe=ie,this._next=me?function(X){try{me(X)}catch(se){Ae.error(se)}}:super._next,this._error=_e?function(X){try{_e(X)}catch(se){Ae.error(se)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(X){Ae.error(X)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(Ae=this.onFinalize)||void 0===Ae||Ae.call(this))}}}},4004:(jt,Ze,F)=>{"use strict";F.d(Ze,{U:()=>B});var a=F(4482),K=F(5403);function B(Ee,Ae){return(0,a.e)((me,oe)=>{let _e=0;me.subscribe((0,K.x)(oe,Me=>{oe.next(Ee.call(Ae,Me,_e++))}))})}},8189:(jt,Ze,F)=>{"use strict";F.d(Ze,{J:()=>B});var a=F(5577),K=F(4671);function B(Ee=1/0){return(0,a.z)(K.y,Ee)}},5577:(jt,Ze,F)=>{"use strict";F.d(Ze,{z:()=>_e});var a=F(4004),K=F(8421),B=F(4482),Ee=F(9672),Ae=F(5403),oe=F(576);function _e(Me,ie,X=1/0){return(0,oe.m)(ie)?_e((se,be)=>(0,a.U)((xe,ke)=>ie(se,xe,be,ke))((0,K.Xf)(Me(se,be))),X):("number"==typeof ie&&(X=ie),(0,B.e)((se,be)=>function me(Me,ie,X,se,be,xe,ke,Ue){const te=[];let le=0,ue=0,Be=!1;const Ce=()=>{Be&&!te.length&&!le&&ie.complete()},Ne=$e=>le<se?Le($e):te.push($e),Le=$e=>{xe&&ie.next($e),le++;let Z=!1;(0,K.Xf)(X($e,ue++)).subscribe((0,Ae.x)(ie,he=>{be?.(he),xe?Ne(he):ie.next(he)},()=>{Z=!0},void 0,()=>{if(Z)try{for(le--;te.length&&le<se;){const he=te.shift();ke?(0,Ee.f)(ie,ke,()=>Le(he)):Le(he)}Ce()}catch(he){ie.error(he)}}))};return Me.subscribe((0,Ae.x)(ie,Ne,()=>{Be=!0,Ce()})),()=>{Ue?.()}}(se,be,Me,X)))}},5363:(jt,Ze,F)=>{"use strict";F.d(Ze,{Q:()=>Ee});var a=F(9672),K=F(4482),B=F(5403);function Ee(Ae,me=0){return(0,K.e)((oe,_e)=>{oe.subscribe((0,B.x)(_e,Me=>(0,a.f)(_e,Ae,()=>_e.next(Me),me),()=>(0,a.f)(_e,Ae,()=>_e.complete(),me),Me=>(0,a.f)(_e,Ae,()=>_e.error(Me),me)))})}},3099:(jt,Ze,F)=>{"use strict";F.d(Ze,{B:()=>Ae});var a=F(8421),K=F(7579),B=F(930),Ee=F(4482);function Ae(oe={}){const{connector:_e=(()=>new K.x),resetOnError:Me=!0,resetOnComplete:ie=!0,resetOnRefCountZero:X=!0}=oe;return se=>{let be,xe,ke,Ue=0,te=!1,le=!1;const ue=()=>{xe?.unsubscribe(),xe=void 0},Be=()=>{ue(),be=ke=void 0,te=le=!1},Ce=()=>{const Ne=be;Be(),Ne?.unsubscribe()};return(0,Ee.e)((Ne,Le)=>{Ue++,!le&&!te&&ue();const $e=ke=ke??_e();Le.add(()=>{Ue--,0===Ue&&!le&&!te&&(xe=me(Ce,X))}),$e.subscribe(Le),!be&&Ue>0&&(be=new B.Hp({next:Z=>$e.next(Z),error:Z=>{le=!0,ue(),xe=me(Be,Me,Z),$e.error(Z)},complete:()=>{te=!0,ue(),xe=me(Be,ie),$e.complete()}}),(0,a.Xf)(Ne).subscribe(be))})(se)}}function me(oe,_e,...Me){if(!0===_e)return void oe();if(!1===_e)return;const ie=new B.Hp({next:()=>{ie.unsubscribe(),oe()}});return(0,a.Xf)(_e(...Me)).subscribe(ie)}},9468:(jt,Ze,F)=>{"use strict";F.d(Ze,{R:()=>K});var a=F(4482);function K(B,Ee=0){return(0,a.e)((Ae,me)=>{me.add(B.schedule(()=>Ae.subscribe(me),Ee))})}},8505:(jt,Ze,F)=>{"use strict";F.d(Ze,{b:()=>Ae});var a=F(576),K=F(4482),B=F(5403),Ee=F(4671);function Ae(me,oe,_e){const Me=(0,a.m)(me)||oe||_e?{next:me,error:oe,complete:_e}:me;return Me?(0,K.e)((ie,X)=>{var se;null===(se=Me.subscribe)||void 0===se||se.call(Me);let be=!0;ie.subscribe((0,B.x)(X,xe=>{var ke;null===(ke=Me.next)||void 0===ke||ke.call(Me,xe),X.next(xe)},()=>{var xe;be=!1,null===(xe=Me.complete)||void 0===xe||xe.call(Me),X.complete()},xe=>{var ke;be=!1,null===(ke=Me.error)||void 0===ke||ke.call(Me,xe),X.error(xe)},()=>{var xe,ke;be&&(null===(xe=Me.unsubscribe)||void 0===xe||xe.call(Me)),null===(ke=Me.finalize)||void 0===ke||ke.call(Me)}))}):Ee.y}},4408:(jt,Ze,F)=>{"use strict";F.d(Ze,{o:()=>Ae});var a=F(727);class K extends a.w0{constructor(oe,_e){super()}schedule(oe,_e=0){return this}}const B={setInterval(me,oe,..._e){const{delegate:Me}=B;return Me?.setInterval?Me.setInterval(me,oe,..._e):setInterval(me,oe,..._e)},clearInterval(me){const{delegate:oe}=B;return(oe?.clearInterval||clearInterval)(me)},delegate:void 0};var Ee=F(8737);class Ae extends K{constructor(oe,_e){super(oe,_e),this.scheduler=oe,this.work=_e,this.pending=!1}schedule(oe,_e=0){var Me;if(this.closed)return this;this.state=oe;const ie=this.id,X=this.scheduler;return null!=ie&&(this.id=this.recycleAsyncId(X,ie,_e)),this.pending=!0,this.delay=_e,this.id=null!==(Me=this.id)&&void 0!==Me?Me:this.requestAsyncId(X,this.id,_e),this}requestAsyncId(oe,_e,Me=0){return B.setInterval(oe.flush.bind(oe,this),Me)}recycleAsyncId(oe,_e,Me=0){if(null!=Me&&this.delay===Me&&!1===this.pending)return _e;null!=_e&&B.clearInterval(_e)}execute(oe,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Me=this._execute(oe,_e);if(Me)return Me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,_e){let ie,Me=!1;try{this.work(oe)}catch(X){Me=!0,ie=X||new Error("Scheduled action threw falsy error")}if(Me)return this.unsubscribe(),ie}unsubscribe(){if(!this.closed){const{id:oe,scheduler:_e}=this,{actions:Me}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ee.P)(Me,this),null!=oe&&(this.id=this.recycleAsyncId(_e,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(jt,Ze,F)=>{"use strict";F.d(Ze,{v:()=>B});var a=F(6063);class K{constructor(Ae,me=K.now){this.schedulerActionCtor=Ae,this.now=me}schedule(Ae,me=0,oe){return new this.schedulerActionCtor(this,Ae).schedule(oe,me)}}K.now=a.l.now;class B extends K{constructor(Ae,me=K.now){super(Ae,me),this.actions=[],this._active=!1}flush(Ae){const{actions:me}=this;if(this._active)return void me.push(Ae);let oe;this._active=!0;do{if(oe=Ae.execute(Ae.state,Ae.delay))break}while(Ae=me.shift());if(this._active=!1,oe){for(;Ae=me.shift();)Ae.unsubscribe();throw oe}}}},4986:(jt,Ze,F)=>{"use strict";F.d(Ze,{P:()=>Ee,z:()=>B});var a=F(4408);const B=new(F(7565).v)(a.o),Ee=B},6063:(jt,Ze,F)=>{"use strict";F.d(Ze,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},3410:(jt,Ze,F)=>{"use strict";F.d(Ze,{z:()=>a});const a={setTimeout(K,B,...Ee){const{delegate:Ae}=a;return Ae?.setTimeout?Ae.setTimeout(K,B,...Ee):setTimeout(K,B,...Ee)},clearTimeout(K){const{delegate:B}=a;return(B?.clearTimeout||clearTimeout)(K)},delegate:void 0}},2202:(jt,Ze,F)=>{"use strict";F.d(Ze,{h:()=>K});const K=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(jt,Ze,F)=>{"use strict";F.d(Ze,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(jt,Ze,F)=>{"use strict";F.d(Ze,{_6:()=>me,jO:()=>Ee,yG:()=>Ae});var a=F(576),K=F(3532);function B(oe){return oe[oe.length-1]}function Ee(oe){return(0,a.m)(B(oe))?oe.pop():void 0}function Ae(oe){return(0,K.K)(B(oe))?oe.pop():void 0}function me(oe,_e){return"number"==typeof B(oe)?oe.pop():_e}},8737:(jt,Ze,F)=>{"use strict";function a(K,B){if(K){const Ee=K.indexOf(B);0<=Ee&&K.splice(Ee,1)}}F.d(Ze,{P:()=>a})},3888:(jt,Ze,F)=>{"use strict";function a(K){const Ee=K(Ae=>{Error.call(Ae),Ae.stack=(new Error).stack});return Ee.prototype=Object.create(Error.prototype),Ee.prototype.constructor=Ee,Ee}F.d(Ze,{d:()=>a})},2806:(jt,Ze,F)=>{"use strict";F.d(Ze,{O:()=>Ee,x:()=>B});var a=F(2416);let K=null;function B(Ae){if(a.v.useDeprecatedSynchronousErrorHandling){const me=!K;if(me&&(K={errorThrown:!1,error:null}),Ae(),me){const{errorThrown:oe,error:_e}=K;if(K=null,oe)throw _e}}else Ae()}function Ee(Ae){a.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=Ae)}},9672:(jt,Ze,F)=>{"use strict";function a(K,B,Ee,Ae=0,me=!1){const oe=B.schedule(function(){Ee(),me?K.add(this.schedule(null,Ae)):this.unsubscribe()},Ae);if(K.add(oe),!me)return oe}F.d(Ze,{f:()=>a})},4671:(jt,Ze,F)=>{"use strict";function a(K){return K}F.d(Ze,{y:()=>a})},1144:(jt,Ze,F)=>{"use strict";F.d(Ze,{z:()=>a});const a=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(jt,Ze,F)=>{"use strict";F.d(Ze,{D:()=>K});var a=F(576);function K(B){return Symbol.asyncIterator&&(0,a.m)(B?.[Symbol.asyncIterator])}},576:(jt,Ze,F)=>{"use strict";function a(K){return"function"==typeof K}F.d(Ze,{m:()=>a})},3670:(jt,Ze,F)=>{"use strict";F.d(Ze,{c:()=>B});var a=F(8822),K=F(576);function B(Ee){return(0,K.m)(Ee[a.L])}},6495:(jt,Ze,F)=>{"use strict";F.d(Ze,{T:()=>B});var a=F(2202),K=F(576);function B(Ee){return(0,K.m)(Ee?.[a.h])}},8239:(jt,Ze,F)=>{"use strict";F.d(Ze,{t:()=>K});var a=F(576);function K(B){return(0,a.m)(B?.then)}},3260:(jt,Ze,F)=>{"use strict";F.d(Ze,{L:()=>Ee,Q:()=>B});var a=F(7582),K=F(576);function B(Ae){return(0,a.FC)(this,arguments,function*(){const oe=Ae.getReader();try{for(;;){const{value:_e,done:Me}=yield(0,a.qq)(oe.read());if(Me)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(_e)}}finally{oe.releaseLock()}})}function Ee(Ae){return(0,K.m)(Ae?.getReader)}},3532:(jt,Ze,F)=>{"use strict";F.d(Ze,{K:()=>K});var a=F(576);function K(B){return B&&(0,a.m)(B.schedule)}},4482:(jt,Ze,F)=>{"use strict";F.d(Ze,{A:()=>K,e:()=>B});var a=F(576);function K(Ee){return(0,a.m)(Ee?.lift)}function B(Ee){return Ae=>{if(K(Ae))return Ae.lift(function(me){try{return Ee(me,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(jt,Ze,F)=>{"use strict";function a(){}F.d(Ze,{Z:()=>a})},9635:(jt,Ze,F)=>{"use strict";F.d(Ze,{U:()=>B,z:()=>K});var a=F(4671);function K(...Ee){return B(Ee)}function B(Ee){return 0===Ee.length?a.y:1===Ee.length?Ee[0]:function(me){return Ee.reduce((oe,_e)=>_e(oe),me)}}},7849:(jt,Ze,F)=>{"use strict";F.d(Ze,{h:()=>B});var a=F(2416),K=F(3410);function B(Ee){K.z.setTimeout(()=>{const{onUnhandledError:Ae}=a.v;if(!Ae)throw Ee;Ae(Ee)})}},4532:(jt,Ze,F)=>{"use strict";function a(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ze,{z:()=>a})},863:(jt,Ze,F)=>{var a={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,2143,9230],"./ion-datetime_3.entry.js":[4959,2143,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168]};function K(B){if(!F.o(a,B))return Promise.resolve().then(()=>{var me=new Error("Cannot find module '"+B+"'");throw me.code="MODULE_NOT_FOUND",me});var Ee=a[B],Ae=Ee[0];return Promise.all(Ee.slice(1).map(F.e)).then(()=>F(Ae))}K.keys=()=>Object.keys(a),K.id=863,jt.exports=K},4650:(jt,Ze,F)=>{"use strict";F.d(Ze,{$8M:()=>dl,$WT:()=>Et,$Z:()=>Tx,AFp:()=>B_,ALo:()=>gC,AaK:()=>_e,AsE:()=>E0,CHM:()=>Xd,CRH:()=>hb,CZH:()=>N_,CqO:()=>f1,D6c:()=>ek,DdM:()=>dC,EJc:()=>LM,EiD:()=>nA,EpF:()=>d1,F$t:()=>l0,F4k:()=>h1,FYo:()=>Tv,FiY:()=>Ba,Gf:()=>M_,GfV:()=>ix,GkF:()=>tT,Gpc:()=>X,Hsn:()=>c0,Ikx:()=>S0,JOm:()=>Fn,JVY:()=>NE,JZr:()=>Ue,Jf7:()=>ox,KtG:()=>Qd,L6k:()=>BE,LAX:()=>za,LFG:()=>ri,LMc:()=>Zb,LSH:()=>hv,Lbi:()=>$C,Lck:()=>oC,MAs:()=>Jv,MMx:()=>X0,NdJ:()=>nT,O4$:()=>um,OlP:()=>Si,Oqu:()=>w0,P3R:()=>qE,PXZ:()=>Tp,Q6J:()=>np,QGY:()=>s0,QbO:()=>RM,Qsj:()=>mA,R0b:()=>Ea,RDi:()=>YD,Rgc:()=>pf,SBq:()=>Vh,Sil:()=>NM,Suo:()=>k_,TTD:()=>jd,TgZ:()=>ef,Udp:()=>g0,W1O:()=>CC,WFA:()=>iT,X6Q:()=>Fb,XFs:()=>st,Xpm:()=>_i,Xts:()=>mv,Y36:()=>Wh,YKP:()=>v_,YNc:()=>Qv,Yjl:()=>gn,Yz7:()=>Tt,Z0I:()=>zn,ZZ4:()=>kp,_Bn:()=>sC,_UZ:()=>t0,_Vd:()=>$h,_c5:()=>JM,_uU:()=>TT,aQg:()=>Es,c2e:()=>OM,cJS:()=>Vt,cg1:()=>sf,d8E:()=>c_,dDg:()=>jM,dqk:()=>Zn,eBb:()=>XD,eFA:()=>QC,eJc:()=>mb,ekj:()=>_0,eoX:()=>KC,f3M:()=>rr,g9A:()=>U_,h0i:()=>bt,hGG:()=>fI,hij:()=>a_,iGM:()=>EC,ifc:()=>j,ip1:()=>Db,jDz:()=>Q0,kL8:()=>A0,kcU:()=>Wl,lG2:()=>fn,lcZ:()=>hf,lqb:()=>ud,lri:()=>YC,mCW:()=>Oh,n5z:()=>Ju,n_E:()=>T_,oAB:()=>ze,oxw:()=>a0,pB0:()=>UE,q3G:()=>Rr,q4F:()=>rx,qFp:()=>pI,qLn:()=>$m,qOj:()=>Xg,qZA:()=>e0,qzn:()=>Mo,rWj:()=>qC,s9C:()=>n_,sBO:()=>Bb,s_b:()=>vo,soG:()=>$_,tBr:()=>Ms,tb:()=>an,tp0:()=>pn,uIk:()=>Yv,vHH:()=>te,vpe:()=>Ro,wAp:()=>Gn,xi3:()=>_C,xp6:()=>gx,z2F:()=>W_,z3N:()=>Ha,zSh:()=>ou,zs3:()=>zh});var a=F(7579),K=F(727),B=F(9751),Ee=F(6451),Ae=F(3099);function me(l){for(let c in l)if(l[c]===me)return c;throw Error("Could not find renamed property on target object.")}function oe(l,c){for(const d in c)c.hasOwnProperty(d)&&!l.hasOwnProperty(d)&&(l[d]=c[d])}function _e(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(_e).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return`${l.overriddenName}`;if(l.name)return`${l.name}`;const c=l.toString();if(null==c)return""+c;const d=c.indexOf("\n");return-1===d?c:c.substring(0,d)}function Me(l,c){return null==l||""===l?null===c?"":c:null==c||""===c?l:l+" "+c}const ie=me({__forward_ref__:me});function X(l){return l.__forward_ref__=X,l.toString=function(){return _e(this())},l}function se(l){return be(l)?l():l}function be(l){return"function"==typeof l&&l.hasOwnProperty(ie)&&l.__forward_ref__===X}function xe(l){return l&&!!l.\u0275providers}const Ue="https://g.co/ng/security#xss";class te extends Error{constructor(c,d){super(le(c,d)),this.code=c}}function le(l,c){return`NG0${Math.abs(l)}${c?": "+c.trim():""}`}function ue(l){return"string"==typeof l?l:null==l?"":String(l)}function $e(l,c){throw new te(-201,!1)}function de(l,c){null==l&&function fe(l,c,d,f){throw new Error(`ASSERTION ERROR: ${l}`+(null==f?"":` [Expected=> ${d} ${f} ${c} <=Actual]`))}(c,l,null,"!=")}function Tt(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function Vt(l){return{providers:l.providers||[],imports:l.imports||[]}}function vn(l){return Bn(l,Wt)||Bn(l,Ct)}function zn(l){return null!==vn(l)}function Bn(l,c){return l.hasOwnProperty(c)?l[c]:null}function Gt(l){return l&&(l.hasOwnProperty(lt)||l.hasOwnProperty(at))?l[lt]:null}const Wt=me({\u0275prov:me}),lt=me({\u0275inj:me}),Ct=me({ngInjectableDef:me}),at=me({ngInjectorDef:me});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let Dn;function bn(l){const c=Dn;return Dn=l,c}function ai(l,c,d){const f=vn(l);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:d&st.Optional?null:void 0!==c?c:void $e(_e(l))}const Zn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ui={},Ti="__NG_DI_FLAG__",Mi="ngTempTokenPath",Xi="ngTokenPath",$i=/\n/gm,os="\u0275",bi="__source";let Ii;function $n(l){const c=Ii;return Ii=l,c}function hr(l,c=st.Default){if(void 0===Ii)throw new te(-203,!1);return null===Ii?ai(l,void 0,c):Ii.get(l,c&st.Optional?null:void 0,c)}function ri(l,c=st.Default){return(function mi(){return Dn}()||hr)(se(l),c)}function rr(l,c=st.Default){return ri(l,fr(c))}function fr(l){return typeof l>"u"||"number"==typeof l?l:0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)}function Xr(l){const c=[];for(let d=0;d<l.length;d++){const f=se(l[d]);if(Array.isArray(f)){if(0===f.length)throw new te(900,!1);let p,_=st.Default;for(let w=0;w<f.length;w++){const C=f[w],S=_s(C);"number"==typeof S?-1===S?p=C.token:_|=S:p=C}c.push(ri(p,_))}else c.push(ri(f))}return c}function Ji(l,c){return l[Ti]=c,l.prototype[Ti]=c,l}function _s(l){return l[Ti]}function re(l){return{toString:l}.toString()}var z=(()=>((z=z||{})[z.OnPush=0]="OnPush",z[z.Default=1]="Default",z))(),j=(()=>{return(l=j||(j={}))[l.Emulated=0]="Emulated",l[l.None=2]="None",l[l.ShadowDom=3]="ShadowDom",j;var l})();const $={},pe=[],et=me({\u0275cmp:me}),Ut=me({\u0275dir:me}),Vn=me({\u0275pipe:me}),Mn=me({\u0275mod:me}),Wn=me({\u0275fac:me}),xn=me({__NG_ELEMENT_ID__:me});let Ci=0;function _i(l){return re(()=>{const c=wr(l),d={...c,decls:l.decls,vars:l.vars,template:l.template,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,onPush:l.changeDetection===z.OnPush,directiveDefs:null,pipeDefs:null,dependencies:c.standalone&&l.dependencies||null,getStandaloneInjector:null,data:l.data||{},encapsulation:l.encapsulation||j.Emulated,id:"c"+Ci++,styles:l.styles||pe,_:null,schemas:l.schemas||null,tView:null};Pi(d);const f=l.dependencies;return d.directiveDefs=oo(f,!1),d.pipeDefs=oo(f,!0),d})}function Jr(l){return _n(l)||ci(l)}function nt(l){return null!==l}function ze(l){return re(()=>({type:l.type,bootstrap:l.bootstrap||pe,declarations:l.declarations||pe,imports:l.imports||pe,exports:l.exports||pe,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null}))}function hn(l,c){if(null==l)return $;const d={};for(const f in l)if(l.hasOwnProperty(f)){let p=l[f],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),d[p]=f,c&&(c[p]=_)}return d}function fn(l){return re(()=>{const c=wr(l);return Pi(c),c})}function gn(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,standalone:!0===l.standalone,onDestroy:l.type.prototype.ngOnDestroy||null}}function _n(l){return l[et]||null}function ci(l){return l[Ut]||null}function Yn(l){return l[Vn]||null}function Et(l){const c=_n(l)||ci(l)||Yn(l);return null!==c&&c.standalone}function Ai(l,c){const d=l[Mn]||null;if(!d&&!0===c)throw new Error(`Type ${_e(l)} does not have '\u0275mod' property.`);return d}function wr(l){const c={};return{type:l.type,providersResolver:null,factory:null,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:c,exportAs:l.exportAs||null,standalone:!0===l.standalone,selectors:l.selectors||pe,viewQuery:l.viewQuery||null,features:l.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hn(l.inputs,c),outputs:hn(l.outputs)}}function Pi(l){l.features?.forEach(c=>c(l))}function oo(l,c){if(!l)return null;const d=c?Yn:Jr;return()=>("function"==typeof l?l():l).map(f=>d(f)).filter(nt)}const ls=0,Kt=1,jn=2,wi=3,Ei=4,ti=5,Dr=6,ao=7,Xn=8,Vi=9,sr=10,Pn=11,lo=12,co=13,Ls=14,Ge=15,It=16,Qt=17,N=18,W=19,Oe=20,Se=21,We=22,pt=1,ct=2,At=7,gt=8,Lt=9,Bt=10;function Sn(l){return Array.isArray(l)&&"object"==typeof l[pt]}function ki(l){return Array.isArray(l)&&!0===l[pt]}function er(l){return 0!=(4&l.flags)}function Wi(l){return l.componentOffset>-1}function Zi(l){return 1==(1&l.flags)}function cs(l){return!!l.template}function mr(l){return 0!=(256&l[jn])}function Da(l,c){return l.hasOwnProperty(Wn)?l[Wn]:null}class im{constructor(c,d,f){this.previousValue=c,this.currentValue=d,this.firstChange=f}isFirstChange(){return this.firstChange}}function jd(){return Pu}function Pu(l){return l.type.prototype.ngOnChanges&&(l.setInput=Nl),rm}function rm(){const l=sm(this),c=l?.current;if(c){const d=l.previous;if(d===$)l.previous=c;else for(let f in c)d[f]=c[f];l.current=null,this.ngOnChanges(c)}}function Nl(l,c,d,f){const p=this.declaredInputs[d],_=sm(l)||function om(l,c){return l[Dc]=c}(l,{previous:$,current:null}),w=_.current||(_.current={}),C=_.previous,S=C[p];w[p]=new im(S&&S.currentValue,c,C===$),l[f]=c}jd.ngInherit=!0;const Dc="__ngSimpleChanges__";function sm(l){return l[Dc]||null}const Ar=function(l,c,d){},Ac="svg";function yi(l){for(;Array.isArray(l);)l=l[ls];return l}function ol(l,c){return yi(c[l])}function us(l,c){return yi(c[l.index])}function Fu(l,c){return l.data[c]}function Ns(l,c){return l[c]}function es(l,c){const d=c[l];return Sn(d)?d:d[ls]}function uo(l){return 64==(64&l[jn])}function ra(l,c){return null==c?null:l[c]}function kc(l){l[N]=0}function al(l,c){l[ti]+=c;let d=l,f=l[wi];for(;null!==f&&(1===c&&1===d[ti]||-1===c&&0===d[ti]);)f[ti]+=c,d=f,f=f[wi]}const qn={lFrame:ih(null),bindingsEnabled:!0};function Bu(){return qn.bindingsEnabled}function ut(){return qn.lFrame.lView}function si(){return qn.lFrame.tView}function Xd(l){return qn.lFrame.contextLView=l,l[Xn]}function Qd(l){return qn.lFrame.contextLView=null,l}function ts(){let l=Jd();for(;null!==l&&64===l.type;)l=l.parent;return l}function Jd(){return qn.lFrame.currentTNode}function ns(l,c){const d=qn.lFrame;d.currentTNode=l,d.isParent=c}function Uu(){return qn.lFrame.isParent}function $u(){qn.lFrame.isParent=!1}function or(){const l=qn.lFrame;let c=l.bindingRootIndex;return-1===c&&(c=l.bindingRootIndex=l.tView.bindingStartIndex),c}function zl(){return qn.lFrame.bindingIndex++}function Uo(l){const c=qn.lFrame,d=c.bindingIndex;return c.bindingIndex=c.bindingIndex+l,d}function jl(l,c){const d=qn.lFrame;d.bindingIndex=d.bindingRootIndex=l,fo(c)}function fo(l){qn.lFrame.currentDirectiveIndex=l}function qs(l){const c=qn.lFrame.currentDirectiveIndex;return-1===c?null:l[c]}function Oc(){return qn.lFrame.currentQueryIndex}function ys(l){qn.lFrame.currentQueryIndex=l}function lm(l){const c=l[Kt];return 2===c.type?c.declTNode:1===c.type?l[Dr]:null}function th(l,c,d){if(d&st.SkipSelf){let p=c,_=l;for(;!(p=p.parent,null!==p||d&st.Host||(p=lm(_),null===p||(_=_[Ge],10&p.type))););if(null===p)return!1;c=p,l=_}const f=qn.lFrame=nh();return f.currentTNode=c,f.lView=l,!0}function Gl(l){const c=nh(),d=l[Kt];qn.lFrame=c,c.currentTNode=d.firstChild,c.lView=l,c.tView=d,c.contextLView=l,c.bindingIndex=d.bindingStartIndex,c.inI18n=!1}function nh(){const l=qn.lFrame,c=null===l?null:l.child;return null===c?ih(l):c}function ih(l){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=c),c}function cm(){const l=qn.lFrame;return qn.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}const $o=cm;function Aa(){const l=cm();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function Er(){return qn.lFrame.selectedIndex}function sa(l){qn.lFrame.selectedIndex=l}function tr(){const l=qn.lFrame;return Fu(l.tView,l.selectedIndex)}function um(){qn.lFrame.currentNamespace=Ac}function Wl(){!function sh(){qn.lFrame.currentNamespace=null}()}function Yl(l,c){for(let d=c.directiveStart,f=c.directiveEnd;d<f;d++){const _=l.data[d].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:C,ngAfterViewInit:S,ngAfterViewChecked:R,ngOnDestroy:H}=_;w&&(l.contentHooks??(l.contentHooks=[])).push(-d,w),C&&((l.contentHooks??(l.contentHooks=[])).push(d,C),(l.contentCheckHooks??(l.contentCheckHooks=[])).push(d,C)),S&&(l.viewHooks??(l.viewHooks=[])).push(-d,S),R&&((l.viewHooks??(l.viewHooks=[])).push(d,R),(l.viewCheckHooks??(l.viewCheckHooks=[])).push(d,R)),null!=H&&(l.destroyHooks??(l.destroyHooks=[])).push(d,H)}}function Lc(l,c,d){ql(l,c,3,d)}function zu(l,c,d,f){(3&l[jn])===d&&ql(l,c,d,f)}function Fc(l,c){let d=l[jn];(3&d)===c&&(d&=2047,d+=1,l[jn]=d)}function ql(l,c,d,f){const _=f??-1,w=c.length-1;let C=0;for(let S=void 0!==f?65535&l[N]:0;S<w;S++)if("number"==typeof c[S+1]){if(C=c[S],null!=f&&C>=f)break}else c[S]<0&&(l[N]+=65536),(C<_||-1==_)&&(Kl(l,d,c,S),l[N]=(4294901760&l[N])+S+2),S++}function Kl(l,c,d,f){const p=d[f]<0,_=d[f+1],C=l[p?-d[f]:d[f]];if(p){if(l[jn]>>11<l[N]>>16&&(3&l[jn])===c){l[jn]+=2048,Ar(4,C,_);try{_.call(C)}finally{Ar(5,C,_)}}}else{Ar(4,C,_);try{_.call(C)}finally{Ar(5,C,_)}}}const ka=-1;class oa{constructor(c,d,f){this.factory=c,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=f}}function ll(l,c,d){let f=0;for(;f<d.length;){const p=d[f];if("number"==typeof p){if(0!==p)break;f++;const _=d[f++],w=d[f++],C=d[f++];l.setAttribute(c,w,C,_)}else{const _=p,w=d[++f];aa(_)?l.setProperty(c,_,w):l.setAttribute(c,_,w),f++}}return f}function Wu(l){return 3===l||4===l||6===l}function aa(l){return 64===l.charCodeAt(0)}function Ra(l,c){if(null!==c&&0!==c.length)if(null===l||0===l.length)l=c.slice();else{let d=-1;for(let f=0;f<c.length;f++){const p=c[f];"number"==typeof p?d=p:0===d||Vo(l,d,p,null,-1===d||2===d?c[++f]:null)}}return l}function Vo(l,c,d,f,p){let _=0,w=l.length;if(-1===c)w=-1;else for(;_<l.length;){const C=l[_++];if("number"==typeof C){if(C===c){w=-1;break}if(C>c){w=_-1;break}}}for(;_<l.length;){const C=l[_];if("number"==typeof C)break;if(C===d){if(null===f)return void(null!==p&&(l[_+1]=p));if(f===l[_+1])return void(l[_+2]=p)}_++,null!==f&&_++,null!==p&&_++}-1!==w&&(l.splice(w,0,c),_=w+1),l.splice(_++,0,d),null!==f&&l.splice(_++,0,f),null!==p&&l.splice(_++,0,p)}function Zl(l){return l!==ka}function Xl(l){return 32767&l}function Bc(l,c){let d=function mm(l){return l>>16}(l),f=c;for(;d>0;)f=f[Ge],d--;return f}let Uc=!0;function cl(l){const c=Uc;return Uc=l,c}const pm=255,Yu=5;let qu=0;const Ks={};function lh(l,c){const d=gm(l,c);if(-1!==d)return d;const f=c[Kt];f.firstCreatePass&&(l.injectorIndex=c.length,ch(f.data,l),ch(c,null),ch(f.blueprint,null));const p=la(l,c),_=l.injectorIndex;if(Zl(p)){const w=Xl(p),C=Bc(p,c),S=C[Kt].data;for(let R=0;R<8;R++)c[_+R]=C[w+R]|S[w+R]}return c[_+8]=p,_}function ch(l,c){l.push(0,0,0,0,0,0,0,0,c)}function gm(l,c){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===c[l.injectorIndex+8]?-1:l.injectorIndex}function la(l,c){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;let d=0,f=null,p=c;for(;null!==p;){if(f=mh(p),null===f)return ka;if(d++,p=p[Ge],-1!==f.injectorIndex)return f.injectorIndex|d<<16}return ka}function ca(l,c,d){!function ah(l,c,d){let f;"string"==typeof d?f=d.charCodeAt(0)||0:d.hasOwnProperty(xn)&&(f=d[xn]),null==f&&(f=d[xn]=qu++);const p=f&pm;c.data[l+(p>>Yu)]|=1<<p}(l,c,d)}function Zu(l,c,d){if(d&st.Optional||void 0!==l)return l;$e()}function $c(l,c,d,f){if(d&st.Optional&&void 0===f&&(f=null),!(d&(st.Self|st.Host))){const p=l[Vi],_=bn(void 0);try{return p?p.get(c,f,d&st.Optional):ai(c,f,d&st.Optional)}finally{bn(_)}}return Zu(f,0,d)}function uh(l,c,d,f=st.Default,p){if(null!==l){if(1024&c[jn]){const w=function fh(l,c,d,f,p){let _=l,w=c;for(;null!==_&&null!==w&&1024&w[jn]&&!(256&w[jn]);){const C=Xu(_,w,d,f|st.Self,Ks);if(C!==Ks)return C;let S=_.parent;if(!S){const R=w[Se];if(R){const H=R.get(d,Ks,f);if(H!==Ks)return H}S=mh(w),w=w[Ge]}_=S}return p}(l,c,d,f,Ks);if(w!==Ks)return w}const _=Xu(l,c,d,f,Ks);if(_!==Ks)return _}return $c(c,d,f,p)}function Xu(l,c,d,f,p){const _=function _m(l){if("string"==typeof l)return l.charCodeAt(0)||0;const c=l.hasOwnProperty(xn)?l[xn]:void 0;return"number"==typeof c?c>=0?c&pm:hh:c}(d);if("function"==typeof _){if(!th(c,l,f))return f&st.Host?Zu(p,0,f):$c(c,d,f,p);try{const w=_(f);if(null!=w||f&st.Optional)return w;$e()}finally{$o()}}else if("number"==typeof _){let w=null,C=gm(l,c),S=ka,R=f&st.Host?c[It][Dr]:null;for((-1===C||f&st.SkipSelf)&&(S=-1===C?la(l,c):c[C+8],S!==ka&&Qu(f,!1)?(w=c[Kt],C=Xl(S),c=Bc(S,c)):C=-1);-1!==C;){const H=c[Kt];if(Oa(_,C,H.data)){const J=dh(C,c,d,w,f,R);if(J!==Ks)return J}S=c[C+8],S!==ka&&Qu(f,c[Kt].data[C+8]===R)&&Oa(_,C,c)?(w=H,C=Xl(S),c=Bc(S,c)):C=-1}}return p}function dh(l,c,d,f,p,_){const w=c[Kt],C=w.data[l+8],H=Ho(C,w,d,null==f?Wi(C)&&Uc:f!=w&&0!=(3&C.type),p&st.Host&&_===C);return null!==H?zo(c,w,H,C):Ks}function Ho(l,c,d,f,p){const _=l.providerIndexes,w=c.data,C=1048575&_,S=l.directiveStart,H=_>>20,Ie=p?C+H:l.directiveEnd;for(let je=f?C:C+H;je<Ie;je++){const ft=w[je];if(je<S&&d===ft||je>=S&&ft.type===d)return je}if(p){const je=w[S];if(je&&cs(je)&&je.type===d)return S}return null}function zo(l,c,d,f){let p=l[d];const _=c.data;if(function dm(l){return l instanceof oa}(p)){const w=p;w.resolving&&function Ce(l,c){const d=c?`. Dependency path: ${c.join(" > ")} > ${l}`:"";throw new te(-200,`Circular dependency in DI detected for ${l}${d}`)}(function Be(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():ue(l)}(_[d]));const C=cl(w.canSeeViewProviders);w.resolving=!0;const S=w.injectImpl?bn(w.injectImpl):null;th(l,f,st.Default);try{p=l[d]=w.factory(void 0,_,l,f),c.firstCreatePass&&d>=f.directiveStart&&function Ma(l,c,d){const{ngOnChanges:f,ngOnInit:p,ngDoCheck:_}=c.type.prototype;if(f){const w=Pu(c);(d.preOrderHooks??(d.preOrderHooks=[])).push(l,w),(d.preOrderCheckHooks??(d.preOrderCheckHooks=[])).push(l,w)}p&&(d.preOrderHooks??(d.preOrderHooks=[])).push(0-l,p),_&&((d.preOrderHooks??(d.preOrderHooks=[])).push(l,_),(d.preOrderCheckHooks??(d.preOrderCheckHooks=[])).push(l,_))}(d,_[d],c)}finally{null!==S&&bn(S),cl(C),w.resolving=!1,$o()}}return p}function Oa(l,c,d){return!!(d[c+(l>>Yu)]&1<<l)}function Qu(l,c){return!(l&st.Self||l&st.Host&&c)}class Pa{constructor(c,d){this._tNode=c,this._lView=d}get(c,d,f){return uh(this._tNode,this._lView,c,fr(f),d)}}function hh(){return new Pa(ts(),ut())}function Ju(l){return re(()=>{const c=l.prototype.constructor,d=c[Wn]||ul(c),f=Object.prototype;let p=Object.getPrototypeOf(l.prototype).constructor;for(;p&&p!==f;){const _=p[Wn]||ul(p);if(_&&_!==d)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function ul(l){return be(l)?()=>{const c=ul(se(l));return c&&c()}:Da(l)}function mh(l){const c=l[Kt],d=c.type;return 2===d?c.declTNode:1===d?l[Dr]:null}function dl(l){return function Ku(l,c){if("class"===c)return l.classes;if("style"===c)return l.styles;const d=l.attrs;if(d){const f=d.length;let p=0;for(;p<f;){const _=d[p];if(Wu(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<f&&"string"==typeof d[p];)p++;else{if(_===c)return d[p+1];p+=2}}}return null}(ts(),l)}const jo="__parameters__";function hl(l,c,d){return re(()=>{const f=function xi(l){return function(...d){if(l){const f=l(...d);for(const p in f)this[p]=f[p]}}}(c);function p(..._){if(this instanceof p)return f.apply(this,_),this;const w=new p(..._);return C.annotation=w,C;function C(S,R,H){const J=S.hasOwnProperty(jo)?S[jo]:Object.defineProperty(S,jo,{value:[]})[jo];for(;J.length<=H;)J.push(null);return(J[H]=J[H]||[]).push(w),S}}return d&&(p.prototype=Object.create(d.prototype)),p.prototype.ngMetadataName=l,p.annotationCls=p,p})}class Si{constructor(c,d){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=Tt({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Fa(l,c){l.forEach(d=>Array.isArray(d)?Fa(d,c):c(d))}function wm(l,c,d){c>=l.length?l.push(d):l.splice(c,0,d)}function Jl(l,c){return c>=l.length-1?l.pop():l.splice(c,1)[0]}function jc(l,c){const d=[];for(let f=0;f<l;f++)d.push(c);return d}function Zs(l,c,d){let f=Ds(l,c);return f>=0?l[1|f]=d:(f=~f,function Gc(l,c,d,f){let p=l.length;if(p==c)l.push(d,f);else if(1===p)l.push(f,l[0]),l[0]=d;else{for(p--,l.push(l[p-1],l[p]);p>c;)l[p]=l[p-2],p--;l[c]=d,l[c+1]=f}}(l,f,c,d)),f}function Hi(l,c){const d=Ds(l,c);if(d>=0)return l[1|d]}function Ds(l,c){return function Ln(l,c,d){let f=0,p=l.length>>d;for(;p!==f;){const _=f+(p-f>>1),w=l[_<<d];if(c===w)return _<<d;w>c?p=_:f=_+1}return~(p<<d)}(l,c,1)}const Ms=Ji(hl("Inject",l=>({token:l})),-1),Ba=Ji(hl("Optional"),8),pn=Ji(hl("SkipSelf"),4);var Fn=(()=>((Fn=Fn||{})[Fn.Important=1]="Important",Fn[Fn.DashCase=2]="DashCase",Fn))();const Th=new Map;let Yo=0;const ce="__ngContext__";function Pe(l,c){Sn(c)?(l[ce]=c[Oe],function Ch(l){Th.set(l[Oe],l)}(c)):l[ce]=c}let Qn;function Tr(l,c){return Qn(l,c)}function _o(l){const c=l[wi];return ki(c)?c[wi]:c}function sc(l){return Im(l[co])}function oc(l){return Im(l[Ei])}function Im(l){for(;null!==l&&!ki(l);)l=l[Ei];return l}function _l(l,c,d,f,p){if(null!=f){let _,w=!1;ki(f)?_=f:Sn(f)&&(w=!0,f=f[ls]);const C=yi(f);0===l&&null!==d?null==p?On(c,d,C):wn(c,d,C,p||null,!0):1===l&&null!==d?wn(c,d,C,p||null,!0):2===l?function nv(l,c,d){const f=rs(l,c);f&&function is(l,c,d,f){l.removeChild(c,d,f)}(l,f,c,d)}(c,C,w):3===l&&c.destroyNode(C),null!=_&&function km(l,c,d,f,p){const _=d[At];_!==yi(d)&&_l(c,l,f,_,p);for(let C=Bt;C<d.length;C++){const S=d[C];Mm(S[Kt],S,l,c,f,_)}}(c,l,_,d,p)}}function Dm(l,c,d){return l.createElement(c,d)}function T(l,c){const d=l[Lt],f=d.indexOf(c),p=c[wi];512&c[jn]&&(c[jn]&=-513,al(p,-1)),d.splice(f,1)}function L(l,c){if(l.length<=Bt)return;const d=Bt+c,f=l[d];if(f){const p=f[Qt];null!==p&&p!==l&&T(p,f),c>0&&(l[d-1][Ei]=f[Ei]);const _=Jl(l,Bt+c);!function Dg(l,c){Mm(l,c,c[Pn],2,null,null),c[ls]=null,c[Dr]=null}(f[Kt],f);const w=_[W];null!==w&&w.detachView(_[Kt]),f[wi]=null,f[Ei]=null,f[jn]&=-65}return f}function V(l,c){if(!(128&c[jn])){const d=c[Pn];d.destroyNode&&Mm(l,c,d,3,null,null),function M(l){let c=l[co];if(!c)return ne(l[Kt],l);for(;c;){let d=null;if(Sn(c))d=c[co];else{const f=c[Bt];f&&(d=f)}if(!d){for(;c&&!c[Ei]&&c!==l;)Sn(c)&&ne(c[Kt],c),c=c[wi];null===c&&(c=l),Sn(c)&&ne(c[Kt],c),d=c&&c[Ei]}c=d}}(c)}}function ne(l,c){if(!(128&c[jn])){c[jn]&=-65,c[jn]|=128,function qe(l,c){let d;if(null!=l&&null!=(d=l.destroyHooks))for(let f=0;f<d.length;f+=2){const p=c[d[f]];if(!(p instanceof oa)){const _=d[f+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const C=p[_[w]],S=_[w+1];Ar(4,C,S);try{S.call(C)}finally{Ar(5,C,S)}}else{Ar(4,p,_);try{_.call(p)}finally{Ar(5,p,_)}}}}}(l,c),function we(l,c){const d=l.cleanup,f=c[ao];let p=-1;if(null!==d)for(let _=0;_<d.length-1;_+=2)if("string"==typeof d[_]){const w=d[_+3];w>=0?f[p=w]():f[p=-w].unsubscribe(),_+=2}else{const w=f[p=d[_+1]];d[_].call(w)}if(null!==f){for(let _=p+1;_<f.length;_++)(0,f[_])();c[ao]=null}}(l,c),1===c[Kt].type&&c[Pn].destroy();const d=c[Qt];if(null!==d&&ki(c[wi])){d!==c[wi]&&T(d,c);const f=c[W];null!==f&&f.detachView(l)}!function Ig(l){Th.delete(l[Oe])}(c)}}function yt(l,c,d){return function An(l,c,d){let f=c;for(;null!==f&&40&f.type;)f=(c=f).parent;if(null===f)return d[ls];{const{componentOffset:p}=f;if(p>-1){const{encapsulation:_}=l.data[f.directiveStart+p];if(_===j.None||_===j.Emulated)return null}return us(f,d)}}(l,c.parent,d)}function wn(l,c,d,f,p){l.insertBefore(c,d,f,p)}function On(l,c,d){l.appendChild(c,d)}function Ri(l,c,d,f,p){null!==f?wn(l,c,d,f,p):On(l,c,d)}function rs(l,c){return l.parentNode(c)}function Sh(l,c,d){return yl(l,c,d)}let Dh,ad,rv,Mg,yl=function od(l,c,d){return 40&l.type?us(l,d):null};function iu(l,c,d,f){const p=yt(l,f,c),_=c[Pn],C=Sh(f.parent||c[Dr],f,c);if(null!=p)if(Array.isArray(d))for(let S=0;S<d.length;S++)Ri(_,p,d[S],C,!1);else Ri(_,p,d,C,!1);void 0!==Dh&&Dh(_,f,c,d,p)}function Mh(l,c){if(null!==c){const d=c.type;if(3&d)return us(c,l);if(4&d)return vl(-1,l[c.index]);if(8&d){const f=c.child;if(null!==f)return Mh(l,f);{const p=l[c.index];return ki(p)?vl(-1,p):yi(p)}}if(32&d)return Tr(c,l)()||yi(l[c.index]);{const f=ru(l,c);return null!==f?Array.isArray(f)?f[0]:Mh(_o(l[It]),f):Mh(l,c.next)}}return null}function ru(l,c){return null!==c?l[It][Dr].projection[c.projection]:null}function vl(l,c){const d=Bt+l+1;if(d<c.length){const f=c[d],p=f[Kt].firstChild;if(null!==p)return Mh(f,p)}return c[At]}function Am(l,c,d,f,p,_,w){for(;null!=d;){const C=f[d.index],S=d.type;if(w&&0===c&&(C&&Pe(yi(C),f),d.flags|=2),32!=(32&d.flags))if(8&S)Am(l,c,d.child,f,p,_,!1),_l(c,l,p,C,_);else if(32&S){const R=Tr(d,f);let H;for(;H=R();)_l(c,l,p,H,_);_l(c,l,p,C,_)}else 16&S?iv(l,c,f,d,p,_):_l(c,l,p,C,_);d=w?d.projectionNext:d.next}}function Mm(l,c,d,f,p,_){Am(d,f,l.firstChild,c,p,_,!1)}function iv(l,c,d,f,p,_){const w=d[It],S=w[Dr].projection[f.projection];if(Array.isArray(S))for(let R=0;R<S.length;R++)_l(c,l,p,S[R],_);else Am(l,c,S,w[wi],p,_,!0)}function su(l,c,d){""===d?l.removeAttribute(c,"class"):l.setAttribute(c,"class",d)}function Rm(l,c,d){const{mergedAttrs:f,classes:p,styles:_}=d;null!==f&&ll(l,c,f),null!==p&&su(l,c,p),null!==_&&function Ag(l,c,d){l.setAttribute(c,"style",d)}(l,c,_)}function kh(l){return function Om(){if(void 0===ad&&(ad=null,Zn.trustedTypes))try{ad=Zn.trustedTypes.createPolicy("angular",{createHTML:l=>l,createScript:l=>l,createScriptURL:l=>l})}catch{}return ad}()?.createHTML(l)||l}function YD(l){rv=l}function LE(l){return function sv(){if(void 0===Mg&&(Mg=null,Zn.trustedTypes))try{Mg=Zn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:l=>l,createScript:l=>l,createScriptURL:l=>l})}catch{}return Mg}()?.createScriptURL(l)||l}class ld{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ue})`}}class qD extends ld{getTypeName(){return"HTML"}}class KD extends ld{getTypeName(){return"Style"}}class ZD extends ld{getTypeName(){return"Script"}}class FE extends ld{getTypeName(){return"URL"}}class av extends ld{getTypeName(){return"ResourceURL"}}function Ha(l){return l instanceof ld?l.changingThisBreaksApplicationSecurity:l}function Mo(l,c){const d=function Rh(l){return l instanceof ld&&l.getTypeName()||null}(l);if(null!=d&&d!==c){if("ResourceURL"===d&&"URL"===c)return!0;throw new Error(`Required a safe ${c}, got a ${d} (see ${Ue})`)}return d===c}function NE(l){return new qD(l)}function BE(l){return new KD(l)}function XD(l){return new ZD(l)}function za(l){return new FE(l)}function UE(l){return new av(l)}class kg{constructor(c){this.inertDocumentHelper=c}getInertBodyElement(c){c="<body><remove></remove>"+c;try{const d=(new window.DOMParser).parseFromString(kh(c),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(c):(d.removeChild(d.firstChild),d)}catch{return null}}}class VE{constructor(c){this.defaultDoc=c,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(c){const d=this.inertDocument.createElement("template");return d.innerHTML=kh(c),d}}const HE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Oh(l){return(l=String(l)).match(HE)?l:"unsafe:"+l}function ja(l){const c={};for(const d of l.split(","))c[d]=!0;return c}function Pm(...l){const c={};for(const d of l)for(const f in d)d.hasOwnProperty(f)&&(c[f]=!0);return c}const Ph=ja("area,br,col,hr,img,wbr"),zE=ja("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jE=ja("rp,rt"),Rg=Pm(Ph,Pm(zE,ja("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pm(jE,ja("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pm(jE,zE)),Og=ja("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Lm=Pm(Og,ja("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ja("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Pg=ja("script,style,template");class eA{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(c){let d=c.firstChild,f=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?f=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,f&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let p=this.checkClobberedElement(d,d.nextSibling);if(p){d=p;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(c){const d=c.nodeName.toLowerCase();if(!Rg.hasOwnProperty(d))return this.sanitizedSomething=!0,!Pg.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const f=c.attributes;for(let p=0;p<f.length;p++){const _=f.item(p),w=_.name,C=w.toLowerCase();if(!Lm.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let S=_.value;Og[C]&&(S=Oh(S)),this.buf.push(" ",w,'="',uv(S),'"')}return this.buf.push(">"),!0}endElement(c){const d=c.nodeName.toLowerCase();Rg.hasOwnProperty(d)&&!Ph.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(c){this.buf.push(uv(c))}checkClobberedElement(c,d){if(d&&(c.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${c.outerHTML}`);return d}}const tA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cv=/([^\#-~ |!])/g;function uv(l){return l.replace(/&/g,"&amp;").replace(tA,function(c){return"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";"}).replace(cv,function(c){return"&#"+c.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let dv;function nA(l,c){let d=null;try{dv=dv||function $E(l){const c=new VE(l);return function lv(){try{return!!(new window.DOMParser).parseFromString(kh(""),"text/html")}catch{return!1}}()?new kg(c):c}(l);let f=c?String(c):"";d=dv.getInertBodyElement(f);let p=5,_=f;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,f=_,_=d.innerHTML,d=dv.getInertBodyElement(f)}while(f!==_);return kh((new eA).sanitizeChildren(WE(d)||d))}finally{if(d){const f=WE(d)||d;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function WE(l){return"content"in l&&function cL(l){return l.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===l.nodeName}(l)?l.content:null}var Rr=(()=>((Rr=Rr||{})[Rr.NONE=0]="NONE",Rr[Rr.HTML=1]="HTML",Rr[Rr.STYLE=2]="STYLE",Rr[Rr.SCRIPT=3]="SCRIPT",Rr[Rr.URL=4]="URL",Rr[Rr.RESOURCE_URL=5]="RESOURCE_URL",Rr))();function hv(l){const c=Nm();return c?c.sanitize(Rr.URL,l)||"":Mo(l,"URL")?Ha(l):Oh(ue(l))}function Lg(l){const c=Nm();if(c)return LE(c.sanitize(Rr.RESOURCE_URL,l)||"");if(Mo(l,"ResourceURL"))return LE(Ha(l));throw new te(904,!1)}function qE(l,c,d){return function sA(l,c){return"src"===c&&("embed"===l||"frame"===l||"iframe"===l||"media"===l||"script"===l)||"href"===c&&("base"===l||"link"===l)?Lg:hv}(c,d)(l)}function Nm(){const l=ut();return l&&l[lo]}const mv=new Si("ENVIRONMENT_INITIALIZER"),cd=new Si("INJECTOR",-1),Fh=new Si("INJECTOR_DEF_TYPES");class KE{get(c,d=Ui){if(d===Ui){const f=new Error(`NullInjectorError: No provider for ${_e(c)}!`);throw f.name="NullInjectorError",f}return d}}function Bm(...l){return{\u0275providers:Nh(0,l),\u0275fromNgModule:!0}}function Nh(l,...c){const d=[],f=new Set;let p;return Fa(c,_=>{const w=_;pv(w,d,[],f)&&(p||(p=[]),p.push(w))}),void 0!==p&&ZE(p,d),d}function ZE(l,c){for(let d=0;d<l.length;d++){const{providers:p}=l[d];gv(p,_=>{c.push(_)})}}function pv(l,c,d,f){if(!(l=se(l)))return!1;let p=null,_=Gt(l);const w=!_&&_n(l);if(_||w){if(w&&!w.standalone)return!1;p=l}else{const S=l.ngModule;if(_=Gt(S),!_)return!1;p=S}const C=f.has(p);if(w){if(C)return!1;if(f.add(p),w.dependencies){const S="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const R of S)pv(R,c,d,f)}}else{if(!_)return!1;{if(null!=_.imports&&!C){let R;f.add(p);try{Fa(_.imports,H=>{pv(H,c,d,f)&&(R||(R=[]),R.push(H))})}finally{}void 0!==R&&ZE(R,c)}if(!C){const R=Da(p)||(()=>new p);c.push({provide:p,useFactory:R,deps:pe},{provide:Fh,useValue:p,multi:!0},{provide:mv,useValue:()=>ri(p),multi:!0})}const S=_.providers;null==S||C||gv(S,H=>{c.push(H)})}}return p!==l&&void 0!==l.providers}function gv(l,c){for(let d of l)xe(d)&&(d=d.\u0275providers),Array.isArray(d)?gv(d,c):c(d)}const aA=me({provide:String,useValue:me});function _v(l){return null!==l&&"object"==typeof l&&aA in l}function lc(l){return"function"==typeof l}const ou=new Si("Set Injector scope."),Ng={},cA={};let yv;function Bg(){return void 0===yv&&(yv=new KE),yv}class ud{}class QE extends ud{get destroyed(){return this._destroyed}constructor(c,d,f,p){super(),this.parent=d,this.source=f,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uh(c,w=>this.processProvider(w)),this.records.set(cd,Bh(void 0,this)),p.has("environment")&&this.records.set(ud,Bh(void 0,this));const _=this.records.get(ou);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(Fh.multi,pe,st.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();for(const c of this._onDestroyHooks)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(c){this._onDestroyHooks.push(c)}runInContext(c){this.assertNotDestroyed();const d=$n(this),f=bn(void 0);try{return c()}finally{$n(d),bn(f)}}get(c,d=Ui,f=st.Default){this.assertNotDestroyed(),f=fr(f);const p=$n(this),_=bn(void 0);try{if(!(f&st.SkipSelf)){let C=this.records.get(c);if(void 0===C){const S=function Ev(l){return"function"==typeof l||"object"==typeof l&&l instanceof Si}(c)&&vn(c);C=S&&this.injectableDefInScope(S)?Bh(vv(c),Ng):null,this.records.set(c,C)}if(null!=C)return this.hydrate(c,C)}return(f&st.Self?Bg():this.parent).get(c,d=f&st.Optional&&d===Ui?null:d)}catch(w){if("NullInjectorError"===w.name){if((w[Mi]=w[Mi]||[]).unshift(_e(c)),p)throw w;return function as(l,c,d,f){const p=l[Mi];throw c[bi]&&p.unshift(c[bi]),l.message=function ge(l,c,d,f=null){l=l&&"\n"===l.charAt(0)&&l.charAt(1)==os?l.slice(2):l;let p=_e(c);if(Array.isArray(c))p=c.map(_e).join(" -> ");else if("object"==typeof c){let _=[];for(let w in c)if(c.hasOwnProperty(w)){let C=c[w];_.push(w+":"+("string"==typeof C?JSON.stringify(C):_e(C)))}p=`{${_.join(", ")}}`}return`${d}${f?"("+f+")":""}[${p}]: ${l.replace($i,"\n  ")}`}("\n"+l.message,p,d,f),l[Xi]=p,l[Mi]=null,l}(w,c,"R3InjectorError",this.source)}throw w}finally{bn(_),$n(p)}}resolveInjectorInitializers(){const c=$n(this),d=bn(void 0);try{const f=this.get(mv.multi,pe,st.Self);for(const p of f)p()}finally{$n(c),bn(d)}}toString(){const c=[],d=this.records;for(const f of d.keys())c.push(_e(f));return`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(c){let d=lc(c=se(c))?c:se(c&&c.provide);const f=function dA(l){return _v(l)?Bh(void 0,l.useValue):Bh(bv(l),Ng)}(c);if(lc(c)||!0!==c.multi)this.records.get(d);else{let p=this.records.get(d);p||(p=Bh(void 0,Ng,!0),p.factory=()=>Xr(p.multi),this.records.set(d,p)),d=c,p.multi.push(c)}this.records.set(d,f)}hydrate(c,d){return d.value===Ng&&(d.value=cA,d.value=d.factory()),"object"==typeof d.value&&d.value&&function JE(l){return null!==l&&"object"==typeof l&&"function"==typeof l.ngOnDestroy}(d.value)&&this._ngOnDestroyHooks.add(d.value),d.value}injectableDefInScope(c){if(!c.providedIn)return!1;const d=se(c.providedIn);return"string"==typeof d?"any"===d||this.scopes.has(d):this.injectorDefTypes.has(d)}}function vv(l){const c=vn(l),d=null!==c?c.factory:Da(l);if(null!==d)return d;if(l instanceof Si)throw new te(204,!1);if(l instanceof Function)return function uA(l){const c=l.length;if(c>0)throw jc(c,"?"),new te(204,!1);const d=function Zt(l){return l&&(l[Wt]||l[Ct])||null}(l);return null!==d?()=>d.factory(l):()=>new l}(l);throw new te(204,!1)}function bv(l,c,d){let f;if(lc(l)){const p=se(l);return Da(p)||vv(p)}if(_v(l))f=()=>se(l.useValue);else if(function XE(l){return!(!l||!l.useFactory)}(l))f=()=>l.useFactory(...Xr(l.deps||[]));else if(function lA(l){return!(!l||!l.useExisting)}(l))f=()=>ri(se(l.useExisting));else{const p=se(l&&(l.useClass||l.provide));if(!function wv(l){return!!l.deps}(l))return Da(p)||vv(p);f=()=>new p(...Xr(l.deps))}return f}function Bh(l,c,d=!1){return{factory:l,value:c,multi:d?[]:void 0}}function Uh(l,c){for(const d of l)Array.isArray(d)?Uh(d,c):d&&xe(d)?Uh(d.\u0275providers,c):c(d)}class hA{}class ex{}class nx{resolveComponentFactory(c){throw function fA(l){const c=Error(`No component factory found for ${_e(l)}. Did you add it to @NgModule.entryComponents?`);return c.ngComponent=l,c}(c)}}let $h=(()=>{class l{}return l.NULL=new nx,l})();function Ug(){return cc(ts(),ut())}function cc(l,c){return new Vh(us(l,c))}let Vh=(()=>{class l{constructor(d){this.nativeElement=d}}return l.__NG_ELEMENT_ID__=Ug,l})();function Um(l){return l instanceof Vh?l.nativeElement:l}class Tv{}let mA=(()=>{class l{}return l.__NG_ELEMENT_ID__=()=>function pA(){const l=ut(),d=es(ts().index,l);return(Sn(d)?d:l)[Pn]}(),l})(),gA=(()=>{class l{}return l.\u0275prov=Tt({token:l,providedIn:"root",factory:()=>null}),l})();class ix{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const rx=new ix("15.2.9"),$g={},Cv="ngOriginalError";function Iv(l){return l[Cv]}class $m{constructor(){this._console=console}handleError(c){const d=this._findOriginalError(c);this._console.error("ERROR",c),d&&this._console.error("ORIGINAL ERROR",d)}_findOriginalError(c){let d=c&&Iv(c);for(;d&&Iv(d);)d=Iv(d);return d||null}}function ox(l){return l.ownerDocument.defaultView}function wl(l){return l instanceof Function?l():l}function dx(l,c,d){let f=l.length;for(;;){const p=l.indexOf(c,d);if(-1===p)return p;if(0===p||l.charCodeAt(p-1)<=32){const _=c.length;if(p+_===f||l.charCodeAt(p+_)<=32)return p}d=p+1}}const Sv="ng-template";function Dv(l,c,d){let f=0,p=!0;for(;f<l.length;){let _=l[f++];if("string"==typeof _&&p){const w=l[f++];if(d&&"class"===_&&-1!==dx(w.toLowerCase(),c,0))return!0}else{if(1===_){for(;f<l.length&&"string"==typeof(_=l[f++]);)if(_.toLowerCase()===c)return!0;return!1}"number"==typeof _&&(p=!1)}}return!1}function Av(l){return 4===l.type&&l.value!==Sv}function Hh(l,c,d){return c===(4!==l.type||d?l.value:Sv)}function Mv(l,c,d){let f=4;const p=l.attrs||[],_=function fx(l){for(let c=0;c<l.length;c++)if(Wu(l[c]))return c;return l.length}(p);let w=!1;for(let C=0;C<c.length;C++){const S=c[C];if("number"!=typeof S){if(!w)if(4&f){if(f=2|1&f,""!==S&&!Hh(l,S,d)||""===S&&1===c.length){if(Ga(f))return!1;w=!0}}else{const R=8&f?S:c[++C];if(8&f&&null!==l.attrs){if(!Dv(l.attrs,R,d)){if(Ga(f))return!1;w=!0}continue}const J=hx(8&f?"class":S,p,Av(l),d);if(-1===J){if(Ga(f))return!1;w=!0;continue}if(""!==R){let Ie;Ie=J>_?"":p[J+1].toLowerCase();const je=8&f?Ie:null;if(je&&-1!==dx(je,R,0)||2&f&&R!==Ie){if(Ga(f))return!1;w=!0}}}}else{if(!w&&!Ga(f)&&!Ga(S))return!1;if(w&&Ga(S))continue;w=!1,f=S|1&f}}return Ga(f)||w}function Ga(l){return 0==(1&l)}function hx(l,c,d,f){if(null===c)return-1;let p=0;if(f||!d){let _=!1;for(;p<c.length;){const w=c[p];if(w===l)return p;if(3===w||6===w)_=!0;else{if(1===w||2===w){let C=c[++p];for(;"string"==typeof C;)C=c[++p];continue}if(4===w)break;if(0===w){p+=4;continue}}p+=_?1:2}return-1}return function mx(l,c){let d=l.indexOf(4);if(d>-1)for(d++;d<l.length;){const f=l[d];if("number"==typeof f)return-1;if(f===c)return d;d++}return-1}(c,l)}function Hm(l,c,d=!1){for(let f=0;f<c.length;f++)if(Mv(l,c[f],d))return!0;return!1}function EA(l,c){e:for(let d=0;d<c.length;d++){const f=c[d];if(l.length===f.length){for(let p=0;p<l.length;p++)if(l[p]!==f[p])continue e;return!0}}return!1}function px(l,c){return l?":not("+c.trim()+")":c}function xA(l){let c=l[0],d=1,f=2,p="",_=!1;for(;d<l.length;){let w=l[d];if("string"==typeof w)if(2&f){const C=l[++d];p+="["+w+(C.length>0?'="'+C+'"':"")+"]"}else 8&f?p+="."+w:4&f&&(p+=" "+w);else""!==p&&!Ga(w)&&(c+=px(_,p),p=""),f=w,_=_||!Ga(f);d++}return""!==p&&(c+=px(_,p)),c}const oi={};function gx(l){_x(si(),ut(),Er()+l,!1)}function _x(l,c,d,f){if(!f)if(3==(3&c[jn])){const _=l.preOrderCheckHooks;null!==_&&Lc(c,_,d)}else{const _=l.preOrderHooks;null!==_&&zu(c,_,0,d)}sa(d)}function vx(l,c=null,d=null,f){const p=kv(l,c,d,f);return p.resolveInjectorInitializers(),p}function kv(l,c=null,d=null,f,p=new Set){const _=[d||pe,Bm(l)];return f=f||("object"==typeof l?void 0:_e(l)),new QE(_,c||Bg(),f||null,p)}let zh=(()=>{class l{static create(d,f){if(Array.isArray(d))return vx({name:""},f,d,"");{const p=d.name??"";return vx({name:p},d.parent,d.providers,p)}}}return l.THROW_IF_NOT_FOUND=Ui,l.NULL=new KE,l.\u0275prov=Tt({token:l,providedIn:"any",factory:()=>ri(cd)}),l.__NG_ELEMENT_ID__=-1,l})();function Wh(l,c=st.Default){const d=ut();return null===d?ri(l,c):uh(ts(),d,se(l),c)}function Tx(){throw new Error("invalid")}function Cx(l,c){const d=l.contentQueries;if(null!==d)for(let f=0;f<d.length;f+=2){const _=d[f+1];if(-1!==_){const w=l.data[_];ys(d[f]),w.contentQueries(2,c[_],_)}}}function jg(l,c,d,f,p,_,w,C,S,R,H){const J=c.blueprint.slice();return J[ls]=p,J[jn]=76|f,(null!==H||l&&1024&l[jn])&&(J[jn]|=1024),kc(J),J[wi]=J[Ge]=l,J[Xn]=d,J[sr]=w||l&&l[sr],J[Pn]=C||l&&l[Pn],J[lo]=S||l&&l[lo]||null,J[Vi]=R||l&&l[Vi]||null,J[Dr]=_,J[Oe]=function rd(){return Yo++}(),J[Se]=H,J[It]=2==c.type?l[It]:J,J}function Ym(l,c,d,f,p){let _=l.data[c];if(null===_)_=function Gg(l,c,d,f,p){const _=Jd(),w=Uu(),S=l.data[c]=function pi(l,c,d,f,p,_){return{type:d,index:f,insertBeforeIndex:null,injectorIndex:c?c.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,d,c,f,p);return null===l.firstChild&&(l.firstChild=S),null!==_&&(w?null==_.child&&null!==S.parent&&(_.child=S):null===_.next&&(_.next=S,S.prev=_)),S}(l,c,d,f,p),function eh(){return qn.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=d,_.value=f,_.attrs=p;const w=function $l(){const l=qn.lFrame,c=l.currentTNode;return l.isParent?c:c.parent}();_.injectorIndex=null===w?-1:w.injectorIndex}return ns(_,!0),_}function ui(l,c,d,f){if(0===d)return-1;const p=c.length;for(let _=0;_<d;_++)c.push(f),l.blueprint.push(f),l.data.push(null);return p}function Gr(l,c,d){Gl(c);try{const f=l.viewQuery;null!==f&&$v(1,f,d);const p=l.template;null!==p&&hd(l,c,p,1,d),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&Cx(l,c),l.staticViewQueries&&$v(2,l.viewQuery,d);const _=l.components;null!==_&&function Ix(l,c){for(let d=0;d<c.length;d++)$x(l,c[d])}(c,_)}catch(f){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),f}finally{c[jn]&=-5,Aa()}}function Wa(l,c,d,f){const p=c[jn];if(128!=(128&p)){Gl(c);try{kc(c),function ho(l){return qn.lFrame.bindingIndex=l}(l.bindingStartIndex),null!==d&&hd(l,c,d,2,f);const w=3==(3&p);if(w){const R=l.preOrderCheckHooks;null!==R&&Lc(c,R,null)}else{const R=l.preOrderHooks;null!==R&&zu(c,R,0,null),Fc(c,0)}if(function Bx(l){for(let c=sc(l);null!==c;c=oc(c)){if(!c[ct])continue;const d=c[Lt];for(let f=0;f<d.length;f++){const p=d[f];512&p[jn]||al(p[wi],1),p[jn]|=512}}}(c),function Nx(l){for(let c=sc(l);null!==c;c=oc(c))for(let d=Bt;d<c.length;d++){const f=c[d],p=f[Kt];uo(f)&&Wa(p,f,p.template,f[Xn])}}(c),null!==l.contentQueries&&Cx(l,c),w){const R=l.contentCheckHooks;null!==R&&Lc(c,R)}else{const R=l.contentHooks;null!==R&&zu(c,R,1),Fc(c,1)}!function $A(l,c){const d=l.hostBindingOpCodes;if(null!==d)try{for(let f=0;f<d.length;f++){const p=d[f];if(p<0)sa(~p);else{const _=p,w=d[++f],C=d[++f];jl(w,_),C(2,c[_])}}}finally{sa(-1)}}(l,c);const C=l.components;null!==C&&function VA(l,c){for(let d=0;d<c.length;d++)Ux(l,c[d])}(c,C);const S=l.viewQuery;if(null!==S&&$v(2,S,f),w){const R=l.viewCheckHooks;null!==R&&Lc(c,R)}else{const R=l.viewHooks;null!==R&&zu(c,R,2),Fc(c,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),c[jn]&=-41,512&c[jn]&&(c[jn]&=-513,al(c[wi],-1))}finally{Aa()}}}function hd(l,c,d,f,p){const _=Er(),w=2&f;try{sa(-1),w&&c.length>We&&_x(l,c,We,!1),Ar(w?2:0,p),d(f,p)}finally{sa(_),Ar(w?3:1,p)}}function El(l,c,d){if(er(c)){const p=c.directiveEnd;for(let _=c.directiveStart;_<p;_++){const w=l.data[_];w.contentQueries&&w.contentQueries(1,d[_],_)}}}function Yh(l,c,d){Bu()&&(function EL(l,c,d,f){const p=d.directiveStart,_=d.directiveEnd;Wi(d)&&function Px(l,c,d){const f=us(c,l),p=Sx(d),_=l[sr],w=_r(l,jg(l,p,null,d.onPush?32:16,f,c,_,_.createRenderer(f,d),null,null,null));l[c.index]=w}(c,d,l.data[p+d.componentOffset]),l.firstCreatePass||lh(d,c),Pe(f,c);const w=d.initialInputs;for(let C=p;C<_;C++){const S=l.data[C],R=zo(c,l,C,d);Pe(R,c),null!==w&&Lx(0,C-p,R,S,0,w),cs(S)&&(es(d.index,c)[Xn]=zo(c,l,C,d))}}(l,c,d,us(d,c)),64==(64&d.flags)&&kx(l,c,d))}function Fv(l,c,d=us){const f=c.localNames;if(null!==f){let p=c.index+1;for(let _=0;_<f.length;_+=2){const w=f[_+1],C=-1===w?d(c,l):l[w];l[p++]=C}}}function Sx(l){const c=l.tView;return null===c||c.incompleteFirstPass?l.tView=Wg(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):c}function Wg(l,c,d,f,p,_,w,C,S,R){const H=We+f,J=H+p,Ie=function Dx(l,c){const d=[];for(let f=0;f<c;f++)d.push(f<l?null:oi);return d}(H,J),je="function"==typeof R?R():R;return Ie[Kt]={type:l,blueprint:Ie,template:d,queries:null,viewQuery:C,declTNode:c,data:Ie.slice().fill(null,H),bindingStartIndex:H,expandoStartIndex:J,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:S,consts:je,incompleteFirstPass:!1}}function Yg(l,c,d,f){const p=Hx(c);null===d?p.push(f):(p.push(d),l.firstCreatePass&&Vv(l).push(f,p.length-1))}function fa(l,c,d,f){for(let p in l)if(l.hasOwnProperty(p)){d=null===d?{}:d;const _=l[p];null===f?ma(d,c,p,_):f.hasOwnProperty(p)&&ma(d,c,f[p],_)}return d}function ma(l,c,d,f){l.hasOwnProperty(d)?l[d].push(c,f):l[d]=[c,f]}function pa(l,c,d,f,p,_,w,C){const S=us(c,d);let H,R=c.inputs;!C&&null!=R&&(H=R[f])?(Hv(l,d,H,f,p),Wi(c)&&function HA(l,c){const d=es(c,l);16&d[jn]||(d[jn]|=32)}(d,c.index)):3&c.type&&(f=function qm(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(f),p=null!=w?w(p,c.value||"",f):p,_.setProperty(S,f,p))}function Bv(l,c,d,f){if(Bu()){const p=null===f?null:{"":-1},_=function GA(l,c){const d=l.directiveRegistry;let f=null,p=null;if(d)for(let _=0;_<d.length;_++){const w=d[_];if(Hm(c,w.selectors,!1))if(f||(f=[]),cs(w))if(null!==w.findHostDirectiveDefs){const C=[];p=p||new Map,w.findHostDirectiveDefs(w,C,p),f.unshift(...C,w),Rx(l,c,C.length)}else f.unshift(w),Rx(l,c,0);else p=p||new Map,w.findHostDirectiveDefs?.(w,f,p),f.push(w)}return null===f?null:[f,p]}(l,d);let w,C;null===_?w=C=null:[w,C]=_,null!==w&&Mx(l,c,d,w,p,C),p&&function TL(l,c,d){if(c){const f=l.localNames=[];for(let p=0;p<c.length;p+=2){const _=d[c[p+1]];if(null==_)throw new te(-301,!1);f.push(c[p],_)}}}(d,f,p)}d.mergedAttrs=Ra(d.mergedAttrs,d.attrs)}function Mx(l,c,d,f,p,_){for(let R=0;R<f.length;R++)ca(lh(d,c),l,f[R].type);!function ot(l,c,d){l.flags|=1,l.directiveStart=c,l.directiveEnd=c+d,l.providerIndexes=c}(d,l.data.length,f.length);for(let R=0;R<f.length;R++){const H=f[R];H.providersResolver&&H.providersResolver(H)}let w=!1,C=!1,S=ui(l,c,f.length,null);for(let R=0;R<f.length;R++){const H=f[R];d.mergedAttrs=Ra(d.mergedAttrs,H.hostAttrs),Ox(l,d,c,S,H),CL(S,H,p),null!==H.contentQueries&&(d.flags|=4),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(d.flags|=64);const J=H.type.prototype;!w&&(J.ngOnChanges||J.ngOnInit||J.ngDoCheck)&&((l.preOrderHooks??(l.preOrderHooks=[])).push(d.index),w=!0),!C&&(J.ngOnChanges||J.ngDoCheck)&&((l.preOrderCheckHooks??(l.preOrderCheckHooks=[])).push(d.index),C=!0),S++}!function au(l,c,d){const p=c.directiveEnd,_=l.data,w=c.attrs,C=[];let S=null,R=null;for(let H=c.directiveStart;H<p;H++){const J=_[H],Ie=d?d.get(J):null,ft=Ie?Ie.outputs:null;S=fa(J.inputs,H,S,Ie?Ie.inputs:null),R=fa(J.outputs,H,R,ft);const Ft=null===S||null===w||Av(c)?null:Fx(S,H,w);C.push(Ft)}null!==S&&(S.hasOwnProperty("class")&&(c.flags|=8),S.hasOwnProperty("style")&&(c.flags|=16)),c.initialInputs=C,c.inputs=S,c.outputs=R}(l,d,_)}function kx(l,c,d){const f=d.directiveStart,p=d.directiveEnd,_=d.index,w=function Jy(){return qn.lFrame.currentDirectiveIndex}();try{sa(_);for(let C=f;C<p;C++){const S=l.data[C],R=c[C];fo(C),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&xL(S,R)}}finally{sa(-1),fo(w)}}function xL(l,c){null!==l.hostBindings&&l.hostBindings(1,c)}function Rx(l,c,d){c.componentOffset=d,(l.components??(l.components=[])).push(c.index)}function CL(l,c,d){if(d){if(c.exportAs)for(let f=0;f<c.exportAs.length;f++)d[c.exportAs[f]]=l;cs(c)&&(d[""]=l)}}function Ox(l,c,d,f,p){l.data[f]=p;const _=p.factory||(p.factory=Da(p.type)),w=new oa(_,cs(p),Wh);l.blueprint[f]=w,d[f]=w,function zA(l,c,d,f,p){const _=p.hostBindings;if(_){let w=l.hostBindingOpCodes;null===w&&(w=l.hostBindingOpCodes=[]);const C=~c.index;(function jA(l){let c=l.length;for(;c>0;){const d=l[--c];if("number"==typeof d&&d<0)return d}return 0})(w)!=C&&w.push(C),w.push(d,f,_)}}(l,c,f,ui(l,d,p.hostVars,oi),p)}function Ya(l,c,d,f,p,_){const w=us(l,c);!function qg(l,c,d,f,p,_,w){if(null==_)l.removeAttribute(c,p,d);else{const C=null==w?ue(_):w(_,f||"",p);l.setAttribute(c,p,C,d)}}(c[Pn],w,_,l.value,d,f,p)}function Lx(l,c,d,f,p,_){const w=_[c];if(null!==w){const C=f.setInput;for(let S=0;S<w.length;){const R=w[S++],H=w[S++],J=w[S++];null!==C?f.setInput(d,J,R,H):d[H]=J}}}function Fx(l,c,d){let f=null,p=0;for(;p<d.length;){const _=d[p];if(0!==_)if(5!==_){if("number"==typeof _)break;if(l.hasOwnProperty(_)){null===f&&(f=[]);const w=l[_];for(let C=0;C<w.length;C+=2)if(w[C]===c){f.push(_,w[C+1],d[p+1]);break}}p+=2}else p+=2;else p+=4}return f}function Uv(l,c,d,f){return[l,!0,!1,c,null,0,f,d,null,null]}function Ux(l,c){const d=es(c,l);if(uo(d)){const f=d[Kt];48&d[jn]?Wa(f,d,f.template,d[Xn]):d[ti]>0&&Km(d)}}function Km(l){for(let f=sc(l);null!==f;f=oc(f))for(let p=Bt;p<f.length;p++){const _=f[p];if(uo(_))if(512&_[jn]){const w=_[Kt];Wa(w,_,w.template,_[Xn])}else _[ti]>0&&Km(_)}const d=l[Kt].components;if(null!==d)for(let f=0;f<d.length;f++){const p=es(d[f],l);uo(p)&&p[ti]>0&&Km(p)}}function $x(l,c){const d=es(c,l),f=d[Kt];(function WA(l,c){for(let d=c.length;d<l.blueprint.length;d++)c.push(l.blueprint[d])})(f,d),Gr(f,d,d[Xn])}function _r(l,c){return l[co]?l[Ls][Ei]=c:l[co]=c,l[Ls]=c,c}function Kg(l){for(;l;){l[jn]|=32;const c=_o(l);if(mr(l)&&!c)return l;l=c}return null}function fd(l,c,d,f=!0){const p=c[sr];p.begin&&p.begin();try{Wa(l,c,l.template,d)}catch(w){throw f&&jx(c,w),w}finally{p.end&&p.end()}}function $v(l,c,d){ys(0),c(l,d)}function Hx(l){return l[ao]||(l[ao]=[])}function Vv(l){return l.cleanup||(l.cleanup=[])}function zx(l,c,d){return(null===l||cs(l))&&(d=function Bl(l){for(;Array.isArray(l);){if("object"==typeof l[pt])return l;l=l[ls]}return null}(d[c.index])),d[Pn]}function jx(l,c){const d=l[Vi],f=d?d.get($m,null):null;f&&f.handleError(c)}function Hv(l,c,d,f,p){for(let _=0;_<d.length;){const w=d[_++],C=d[_++],S=c[w],R=l.data[w];null!==R.setInput?R.setInput(S,p,f,C):S[C]=p}}function uc(l,c,d){const f=ol(c,l);!function Sm(l,c,d){l.setValue(c,d)}(l[Pn],f,d)}function fs(l,c,d){let f=d?l.styles:null,p=d?l.classes:null,_=0;if(null!==c)for(let w=0;w<c.length;w++){const C=c[w];"number"==typeof C?_=C:1==_?p=Me(p,C):2==_&&(f=Me(f,C+": "+c[++w]+";"))}d?l.styles=f:l.stylesWithoutHost=f,d?l.classes=p:l.classesWithoutHost=p}function md(l,c,d,f,p=!1){for(;null!==d;){const _=c[d.index];if(null!==_&&f.push(yi(_)),ki(_))for(let C=Bt;C<_.length;C++){const S=_[C],R=S[Kt].firstChild;null!==R&&md(S[Kt],S,R,f)}const w=d.type;if(8&w)md(l,c,d.child,f);else if(32&w){const C=Tr(d,c);let S;for(;S=C();)f.push(S)}else if(16&w){const C=ru(c,d);if(Array.isArray(C))f.push(...C);else{const S=_o(c[It]);md(S[Kt],S,C,f,!0)}}d=p?d.projectionNext:d.next}return f}class pd{get rootNodes(){const c=this._lView,d=c[Kt];return md(d,c,d.firstChild,[])}constructor(c,d){this._lView=c,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xn]}set context(c){this._lView[Xn]=c}get destroyed(){return 128==(128&this._lView[jn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[wi];if(ki(c)){const d=c[gt],f=d?d.indexOf(this):-1;f>-1&&(L(c,f),Jl(d,f))}this._attachedToViewContainer=!1}V(this._lView[Kt],this._lView)}onDestroy(c){Yg(this._lView[Kt],this._lView,null,c)}markForCheck(){Kg(this._cdRefInjectingView||this._lView)}detach(){this._lView[jn]&=-65}reattach(){this._lView[jn]|=64}detectChanges(){fd(this._lView[Kt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ih(l,c){Mm(l,c,c[Pn],2,null,null)}(this._lView[Kt],this._lView)}attachToAppRef(c){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=c}}class zv extends pd{constructor(c){super(c),this._view=c}detectChanges(){const c=this._view;fd(c[Kt],c,c[Xn],!1)}checkNoChanges(){}get context(){return null}}class Zm extends $h{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const d=_n(c);return new qh(d,this.ngModule)}}function Xm(l){const c=[];for(let d in l)l.hasOwnProperty(d)&&c.push({propName:l[d],templateName:d});return c}class qA{constructor(c,d){this.injector=c,this.parentInjector=d}get(c,d,f){f=fr(f);const p=this.injector.get(c,$g,f);return p!==$g||d===$g?p:this.parentInjector.get(c,d,f)}}class qh extends ex{get inputs(){return Xm(this.componentDef.inputs)}get outputs(){return Xm(this.componentDef.outputs)}constructor(c,d){super(),this.componentDef=c,this.ngModule=d,this.componentType=c.type,this.selector=function TA(l){return l.map(xA).join(",")}(c.selectors),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!d}create(c,d,f,p){let _=(p=p||this.ngModule)instanceof ud?p:p?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const w=_?new qA(c,_):c,C=w.get(Tv,null);if(null===C)throw new te(407,!1);const S=w.get(gA,null),R=C.createRenderer(null,this.componentDef),H=this.componentDef.selectors[0][0]||"div",J=f?function Ax(l,c,d){return l.selectRootElement(c,d===j.ShadowDom)}(R,f,this.componentDef.encapsulation):Dm(R,H,function YA(l){const c=l.toLowerCase();return"svg"===c?Ac:"math"===c?"math":null}(H)),Ie=this.componentDef.onPush?288:272,je=Wg(0,null,null,1,0,null,null,null,null,null),ft=jg(null,je,null,Ie,null,null,C,R,S,w,null);let Ft,nn;Gl(ft);try{const Jt=this.componentDef;let Kn,St=null;Jt.findHostDirectiveDefs?(Kn=[],St=new Map,Jt.findHostDirectiveDefs(Jt,Kn,St),Kn.push(Jt)):Kn=[Jt];const ii=function Qm(l,c){const d=l[Kt],f=We;return l[f]=c,Ym(d,f,2,"#host",null)}(ft,J),vr=function Gx(l,c,d,f,p,_,w,C){const S=p[Kt];!function Zg(l,c,d,f){for(const p of l)c.mergedAttrs=Ra(c.mergedAttrs,p.hostAttrs);null!==c.mergedAttrs&&(fs(c,c.mergedAttrs,!0),null!==d&&Rm(f,d,c))}(f,l,c,w);const R=_.createRenderer(c,d),H=jg(p,Sx(d),null,d.onPush?32:16,p[l.index],l,_,R,C||null,null,null);return S.firstCreatePass&&Rx(S,l,f.length-1),_r(p,H),p[l.index]=H}(ii,J,Jt,Kn,ft,C,R);nn=Fu(je,We),J&&function ZA(l,c,d,f){if(f)ll(l,d,["ng-version",rx.full]);else{const{attrs:p,classes:_}=function CA(l){const c=[],d=[];let f=1,p=2;for(;f<l.length;){let _=l[f];if("string"==typeof _)2===p?""!==_&&c.push(_,l[++f]):8===p&&d.push(_);else{if(!Ga(p))break;p=_}f++}return{attrs:c,classes:d}}(c.selectors[0]);p&&ll(l,d,p),_&&_.length>0&&su(l,d,_.join(" "))}}(R,Jt,J,f),void 0!==d&&function XA(l,c,d){const f=l.projection=[];for(let p=0;p<c.length;p++){const _=d[p];f.push(null!=_?Array.from(_):null)}}(nn,this.ngContentSelectors,d),Ft=function Wx(l,c,d,f,p,_){const w=ts(),C=p[Kt],S=us(w,p);Mx(C,p,w,d,null,f);for(let H=0;H<d.length;H++)Pe(zo(p,C,w.directiveStart+H,w),p);kx(C,p,w),S&&Pe(S,p);const R=zo(p,C,w.directiveStart+w.componentOffset,w);if(l[Xn]=p[Xn]=R,null!==_)for(const H of _)H(R,c);return El(C,w,l),R}(vr,Jt,Kn,St,ft,[QA]),Gr(je,ft,null)}finally{Aa()}return new KA(this.componentType,Ft,cc(nn,ft),ft,nn)}}class KA extends hA{constructor(c,d,f,p,_){super(),this.location=f,this._rootLView=p,this._tNode=_,this.instance=d,this.hostView=this.changeDetectorRef=new zv(p),this.componentType=c}setInput(c,d){const f=this._tNode.inputs;let p;if(null!==f&&(p=f[c])){const _=this._rootLView;Hv(_[Kt],_,p,c,d),Kg(es(this._tNode.index,_))}}get injector(){return new Pa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}function QA(){const l=ts();Yl(ut()[Kt],l)}function Xg(l){let c=function Yx(l){return Object.getPrototypeOf(l.prototype).constructor}(l.type),d=!0;const f=[l];for(;c;){let p;if(cs(l))p=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new te(903,!1);p=c.\u0275dir}if(p){if(d){f.push(p);const w=l;w.inputs=Qg(l.inputs),w.declaredInputs=Qg(l.declaredInputs),w.outputs=Qg(l.outputs);const C=p.hostBindings;C&&jv(l,C);const S=p.viewQuery,R=p.contentQueries;if(S&&Jm(l,S),R&&JA(l,R),oe(l.inputs,p.inputs),oe(l.declaredInputs,p.declaredInputs),oe(l.outputs,p.outputs),cs(p)&&p.data.animation){const H=l.data;H.animation=(H.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let w=0;w<_.length;w++){const C=_[w];C&&C.ngInherit&&C(l),C===Xg&&(d=!1)}}c=Object.getPrototypeOf(c)}!function qx(l){let c=0,d=null;for(let f=l.length-1;f>=0;f--){const p=l[f];p.hostVars=c+=p.hostVars,p.hostAttrs=Ra(p.hostAttrs,d=Ra(d,p.hostAttrs))}}(f)}function Qg(l){return l===$?{}:l===pe?[]:l}function Jm(l,c){const d=l.viewQuery;l.viewQuery=d?(f,p)=>{c(f,p),d(f,p)}:c}function JA(l,c){const d=l.contentQueries;l.contentQueries=d?(f,p,_)=>{c(f,p,_),d(f,p,_)}:c}function jv(l,c){const d=l.hostBindings;l.hostBindings=d?(f,p)=>{c(f,p),d(f,p)}:c}function ep(l){return!!lu(l)&&(Array.isArray(l)||!(l instanceof Map)&&Symbol.iterator in l)}function lu(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function xl(l,c,d){return l[c]=d}function Qs(l,c,d){return!Object.is(l[c],d)&&(l[c]=d,!0)}function gd(l,c,d,f){const p=Qs(l,c,d);return Qs(l,c+1,f)||p}function Yv(l,c,d,f){const p=ut();return Qs(p,zl(),c)&&(si(),Ya(tr(),p,l,c,d,f)),Yv}function Zh(l,c,d,f){return Qs(l,zl(),d)?c+ue(d)+f:oi}function dc(l,c,d,f,p,_){const C=gd(l,function ds(){return qn.lFrame.bindingIndex}(),d,p);return Uo(2),C?c+ue(d)+f+ue(p)+_:oi}function Qv(l,c,d,f,p,_,w,C){const S=ut(),R=si(),H=l+We,J=R.firstCreatePass?function c1(l,c,d,f,p,_,w,C,S){const R=c.consts,H=Ym(c,l,4,w||null,ra(R,C));Bv(c,d,H,ra(R,S)),Yl(c,H);const J=H.tView=Wg(2,H,f,p,_,c.directiveRegistry,c.pipeRegistry,null,c.schemas,R);return null!==c.queries&&(c.queries.template(c,H),J.queries=c.queries.embeddedTView(H)),H}(H,R,S,c,d,f,p,_,w):R.data[H];ns(J,!1);const Ie=S[Pn].createComment("");iu(R,S,Ie,J),Pe(Ie,S),_r(S,S[H]=Uv(Ie,S,Ie,J)),Zi(J)&&Yh(R,S,J),null!=w&&Fv(S,J,C)}function Jv(l){return Ns(function Vl(){return qn.lFrame.contextLView}(),We+l)}function np(l,c,d){const f=ut();return Qs(f,zl(),c)&&pa(si(),tr(),f,l,c,f[Pn],d,!1),np}function hc(l,c,d,f,p){const w=p?"class":"style";Hv(l,d,c.inputs[w],w,f)}function ef(l,c,d,f){const p=ut(),_=si(),w=We+l,C=p[Pn],S=_.firstCreatePass?function AL(l,c,d,f,p,_){const w=c.consts,S=Ym(c,l,2,f,ra(w,p));return Bv(c,d,S,ra(w,_)),null!==S.attrs&&fs(S,S.attrs,!1),null!==S.mergedAttrs&&fs(S,S.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,S),S}(w,_,p,c,d,f):_.data[w],R=p[w]=Dm(C,c,function Hu(){return qn.lFrame.currentNamespace}()),H=Zi(S);return ns(S,!0),Rm(C,R,S),32!=(32&S.flags)&&iu(_,p,R,S),0===function Rc(){return qn.lFrame.elementDepthCount}()&&Pe(R,p),function Kd(){qn.lFrame.elementDepthCount++}(),H&&(Yh(_,p,S),El(_,S,p)),null!==f&&Fv(p,S),ef}function e0(){let l=ts();Uu()?$u():(l=l.parent,ns(l,!1));const c=l;!function Zd(){qn.lFrame.elementDepthCount--}();const d=si();return d.firstCreatePass&&(Yl(d,l),er(l)&&d.queries.elementEnd(l)),null!=c.classesWithoutHost&&function hm(l){return 0!=(8&l.flags)}(c)&&hc(d,c,ut(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function fm(l){return 0!=(16&l.flags)}(c)&&hc(d,c,ut(),c.stylesWithoutHost,!1),e0}function t0(l,c,d,f){return ef(l,c,d,f),e0(),t0}function n0(l,c,d){const f=ut(),p=si(),_=l+We,w=p.firstCreatePass?function ML(l,c,d,f,p){const _=c.consts,w=ra(_,f),C=Ym(c,l,8,"ng-container",w);return null!==w&&fs(C,w,!0),Bv(c,d,C,ra(_,p)),null!==c.queries&&c.queries.elementStart(c,C),C}(_,p,f,c,d):p.data[_];ns(w,!0);const C=f[_]=f[Pn].createComment("");return iu(p,f,C,w),Pe(C,f),Zi(w)&&(Yh(p,f,w),El(p,w,f)),null!=d&&Fv(f,w),n0}function r0(){let l=ts();const c=si();return Uu()?$u():(l=l.parent,ns(l,!1)),c.firstCreatePass&&(Yl(c,l),er(l)&&c.queries.elementEnd(l)),r0}function tT(l,c,d){return n0(l,c,d),r0(),tT}function d1(){return ut()}function s0(l){return!!l&&"function"==typeof l.then}function h1(l){return!!l&&"function"==typeof l.subscribe}const f1=h1;function nT(l,c,d,f){const p=ut(),_=si(),w=ts();return rT(_,p,p[Pn],w,l,c,f),nT}function iT(l,c){const d=ts(),f=ut(),p=si();return rT(p,f,zx(qs(p.data),d,f),d,l,c),iT}function rT(l,c,d,f,p,_,w){const C=Zi(f),R=l.firstCreatePass&&Vv(l),H=c[Xn],J=Hx(c);let Ie=!0;if(3&f.type||w){const Ft=us(f,c),nn=w?w(Ft):Ft,Jt=J.length,Kn=w?ii=>w(yi(ii[f.index])):f.index;let St=null;if(!w&&C&&(St=function kL(l,c,d,f){const p=l.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const w=p[_];if(w===d&&p[_+1]===f){const C=c[ao],S=p[_+2];return C.length>S?C[S]:null}"string"==typeof w&&(_+=2)}return null}(l,c,p,f.index)),null!==St)(St.__ngLastListenerFn__||St).__ngNextListenerFn__=_,St.__ngLastListenerFn__=_,Ie=!1;else{_=o0(f,c,H,_,!1);const ii=d.listen(nn,p,_);J.push(_,ii),R&&R.push(p,Kn,Jt,Jt+1)}}else _=o0(f,c,H,_,!1);const je=f.outputs;let ft;if(Ie&&null!==je&&(ft=je[p])){const Ft=ft.length;if(Ft)for(let nn=0;nn<Ft;nn+=2){const vr=c[ft[nn]][ft[nn+1]].subscribe(_),Fr=J.length;J.push(_,vr),R&&R.push(p,f.index,Fr,-(Fr+1))}}}function sT(l,c,d,f){try{return Ar(6,c,d),!1!==d(f)}catch(p){return jx(l,p),!1}finally{Ar(7,c,d)}}function o0(l,c,d,f,p){return function _(w){if(w===Function)return f;Kg(l.componentOffset>-1?es(l.index,c):c);let S=sT(c,d,f,w),R=_.__ngNextListenerFn__;for(;R;)S=sT(c,d,R,w)&&S,R=R.__ngNextListenerFn__;return p&&!1===S&&(w.preventDefault(),w.returnValue=!1),S}}function a0(l=1){return function Pc(l){return(qn.lFrame.contextLView=function rh(l,c){for(;l>0;)c=c[Ge],l--;return c}(l,qn.lFrame.contextLView))[Xn]}(l)}function oT(l,c){let d=null;const f=function Vg(l){const c=l.attrs;if(null!=c){const d=c.indexOf(5);if(!(1&d))return c[d+1]}return null}(l);for(let p=0;p<c.length;p++){const _=c[p];if("*"!==_){if(null===f?Hm(l,_,!0):EA(f,_))return p}else d=p}return d}function l0(l){const c=ut()[It][Dr];if(!c.projection){const f=c.projection=jc(l?l.length:1,null),p=f.slice();let _=c.child;for(;null!==_;){const w=l?oT(_,l):0;null!==w&&(p[w]?p[w].projectionNext=_:f[w]=_,p[w]=_),_=_.next}}}function c0(l,c=0,d){const f=ut(),p=si(),_=Ym(p,We+l,16,null,d||null);null===_.projection&&(_.projection=c),$u(),32!=(32&_.flags)&&function RE(l,c,d){iv(c[Pn],0,c,d,yt(l,d,c),Sh(d.parent||c[Dr],d,c))}(p,f,_)}function n_(l,c,d){return i_(l,"",c,"",d),n_}function i_(l,c,d,f,p){const _=ut(),w=Zh(_,c,d,f);return w!==oi&&pa(si(),tr(),_,l,w,_[Pn],p,!1),i_}function Vs(l,c){return l<<17|c<<2}function uu(l){return l>>17&32767}function f0(l){return 2|l}function kn(l){return(131068&l)>>2}function U(l,c){return-131069&l|c<<2}function ht(l){return 1|l}function cT(l,c,d,f,p){const _=l[d+1],w=null===c;let C=f?uu(_):kn(_),S=!1;for(;0!==C&&(!1===S||w);){const H=l[C+1];_1(l[C],c)&&(S=!0,l[C+1]=f?ht(H):f0(H)),C=f?uu(H):kn(H)}S&&(l[d+1]=f?f0(_):ht(_))}function _1(l,c){return null===l||null==c||(Array.isArray(l)?l[1]:l)===c||!(!Array.isArray(l)||"string"!=typeof c)&&Ds(l,c)>=0}function g0(l,c,d){return _a(l,c,d,!1),g0}function _0(l,c){return _a(l,c,null,!0),_0}function _a(l,c,d,f){const p=ut(),_=si(),w=Uo(2);_.firstUpdatePass&&function y0(l,c,d,f){const p=l.data;if(null===p[d+1]){const _=p[Er()],w=function yT(l,c){return c>=l.expandoStartIndex}(l,d);(function xT(l,c){return 0!=(l.flags&(c?8:16))})(_,f)&&null===c&&!w&&(c=!1),c=function v0(l,c,d,f){const p=qs(l);let _=f?c.residualClasses:c.residualStyles;if(null===p)0===(f?c.classBindings:c.styleBindings)&&(d=bd(d=fc(null,l,c,d,f),c.attrs,f),_=null);else{const w=c.directiveStylingLast;if(-1===w||l[w]!==p)if(d=fc(p,l,c,d,f),null===_){let S=function vT(l,c,d){const f=d?c.classBindings:c.styleBindings;if(0!==kn(f))return l[uu(f)]}(l,c,f);void 0!==S&&Array.isArray(S)&&(S=fc(null,l,c,S[1],f),S=bd(S,c.attrs,f),function b1(l,c,d,f){l[uu(d?c.classBindings:c.styleBindings)]=f}(l,c,f,S))}else _=function w1(l,c,d){let f;const p=c.directiveEnd;for(let _=1+c.directiveStylingLast;_<p;_++)f=bd(f,l[_].hostAttrs,d);return bd(f,c.attrs,d)}(l,c,f)}return void 0!==_&&(f?c.residualClasses=_:c.residualStyles=_),d}(p,_,c,f),function ip(l,c,d,f,p,_){let w=_?c.classBindings:c.styleBindings,C=uu(w),S=kn(w);l[f]=d;let H,R=!1;if(Array.isArray(d)?(H=d[1],(null===H||Ds(d,H)>0)&&(R=!0)):H=d,p)if(0!==S){const Ie=uu(l[C+1]);l[f+1]=Vs(Ie,C),0!==Ie&&(l[Ie+1]=U(l[Ie+1],f)),l[C+1]=function p1(l,c){return 131071&l|c<<17}(l[C+1],f)}else l[f+1]=Vs(C,0),0!==C&&(l[C+1]=U(l[C+1],f)),C=f;else l[f+1]=Vs(S,0),0===C?C=f:l[S+1]=U(l[S+1],f),S=f;R&&(l[f+1]=f0(l[f+1])),cT(l,H,f,!0),cT(l,H,f,!1),function g1(l,c,d,f,p){const _=p?l.residualClasses:l.residualStyles;null!=_&&"string"==typeof c&&Ds(_,c)>=0&&(d[f+1]=ht(d[f+1]))}(c,H,l,f,_),w=Vs(C,S),_?c.classBindings=w:c.styleBindings=w}(p,_,c,d,w,f)}}(_,l,w,f),c!==oi&&Qs(p,w,c)&&function wT(l,c,d,f,p,_,w,C){if(!(3&c.type))return;const S=l.data,R=S[C+1],H=function Jn(l){return 1==(1&l)}(R)?b0(S,c,d,p,kn(R),w):void 0;o_(H)||(o_(_)||function bs(l){return 2==(2&l)}(R)&&(_=b0(S,null,d,p,C,w)),function bl(l,c,d,f,p){if(c)p?l.addClass(d,f):l.removeClass(d,f);else{let _=-1===f.indexOf("-")?void 0:Fn.DashCase;null==p?l.removeStyle(d,f,_):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),_|=Fn.Important),l.setStyle(d,f,p,_))}}(f,w,ol(Er(),d),p,_))}(_,_.data[Er()],p,p[Pn],l,p[w+1]=function ET(l,c){return null==l||""===l||("string"==typeof c?l+=c:"object"==typeof l&&(l=_e(Ha(l)))),l}(c,d),f,w)}function fc(l,c,d,f,p){let _=null;const w=d.directiveEnd;let C=d.directiveStylingLast;for(-1===C?C=d.directiveStart:C++;C<w&&(_=c[C],f=bd(f,_.hostAttrs,p),_!==l);)C++;return null!==l&&(d.directiveStylingLast=C),f}function bd(l,c,d){const f=d?1:2;let p=-1;if(null!==c)for(let _=0;_<c.length;_++){const w=c[_];"number"==typeof w?p=w:p===f&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),Zs(l,w,!!d||c[++_]))}return void 0===l?null:l}function b0(l,c,d,f,p,_){const w=null===c;let C;for(;p>0;){const S=l[p],R=Array.isArray(S),H=R?S[1]:S,J=null===H;let Ie=d[p+1];Ie===oi&&(Ie=J?pe:void 0);let je=J?Hi(Ie,f):H===f?Ie:void 0;if(R&&!o_(je)&&(je=Hi(S,f)),o_(je)&&(C=je,w))return C;const ft=l[p+1];p=w?uu(ft):kn(ft)}if(null!==c){let S=_?c.residualClasses:c.residualStyles;null!=S&&(C=Hi(S,f))}return C}function o_(l){return void 0!==l}function TT(l,c=""){const d=ut(),f=si(),p=l+We,_=f.firstCreatePass?Ym(f,p,1,c,null):f.data[p],w=d[p]=function nu(l,c){return l.createText(c)}(d[Pn],c);iu(f,d,w,_),ns(_,!1)}function w0(l){return a_("",l,""),w0}function a_(l,c,d){const f=ut(),p=Zh(f,l,c,d);return p!==oi&&uc(f,Er(),p),a_}function E0(l,c,d,f,p){const _=ut(),w=dc(_,l,c,d,f,p);return w!==oi&&uc(_,Er(),w),E0}function S0(l,c,d){const f=ut();return Qs(f,zl(),c)&&pa(si(),tr(),f,l,c,f[Pn],d,!0),S0}function c_(l,c,d){const f=ut();if(Qs(f,zl(),c)){const _=si(),w=tr();pa(_,w,f,l,c,zx(qs(_.data),w,f),d,!0)}return c_}const du=void 0;var D0=["en",[["a","p"],["AM","PM"],du],[["AM","PM"],du,du],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],du,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],du,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",du,"{1} 'at' {0}",du],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ko(l){const d=Math.floor(Math.abs(l)),f=l.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===f?1:5}];let Ed={};function sf(l){const c=function UT(l){return l.toLowerCase().replace(/_/g,"-")}(l);let d=NT(c);if(d)return d;const f=c.split("-")[0];if(d=NT(f),d)return d;if("en"===f)return D0;throw new te(701,!1)}function A0(l){return sf(l)[Gn.PluralCase]}function NT(l){return l in Ed||(Ed[l]=Zn.ng&&Zn.ng.common&&Zn.ng.common.locales&&Zn.ng.common.locales[l]),Ed[l]}var Gn=(()=>((Gn=Gn||{})[Gn.LocaleId=0]="LocaleId",Gn[Gn.DayPeriodsFormat=1]="DayPeriodsFormat",Gn[Gn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Gn[Gn.DaysFormat=3]="DaysFormat",Gn[Gn.DaysStandalone=4]="DaysStandalone",Gn[Gn.MonthsFormat=5]="MonthsFormat",Gn[Gn.MonthsStandalone=6]="MonthsStandalone",Gn[Gn.Eras=7]="Eras",Gn[Gn.FirstDayOfWeek=8]="FirstDayOfWeek",Gn[Gn.WeekendRange=9]="WeekendRange",Gn[Gn.DateFormat=10]="DateFormat",Gn[Gn.TimeFormat=11]="TimeFormat",Gn[Gn.DateTimeFormat=12]="DateTimeFormat",Gn[Gn.NumberSymbols=13]="NumberSymbols",Gn[Gn.NumberFormats=14]="NumberFormats",Gn[Gn.CurrencyCode=15]="CurrencyCode",Gn[Gn.CurrencySymbol=16]="CurrencySymbol",Gn[Gn.CurrencyName=17]="CurrencyName",Gn[Gn.Currencies=18]="Currencies",Gn[Gn.Directionality=19]="Directionality",Gn[Gn.PluralCase=20]="PluralCase",Gn[Gn.ExtraData=21]="ExtraData",Gn))();const af="en-US";let VT=af;function W0(l,c,d,f,p){if(l=se(l),Array.isArray(l))for(let _=0;_<l.length;_++)W0(l[_],c,d,f,p);else{const _=si(),w=ut();let C=lc(l)?l:se(l.provide),S=bv(l);const R=ts(),H=1048575&R.providerIndexes,J=R.directiveStart,Ie=R.providerIndexes>>20;if(lc(l)||!l.multi){const je=new oa(S,p,Wh),ft=Y0(C,c,p?H:H+Ie,J);-1===ft?(ca(lh(R,w),_,C),y_(_,l,c.length),c.push(C),R.directiveStart++,R.directiveEnd++,p&&(R.providerIndexes+=1048576),d.push(je),w.push(je)):(d[ft]=je,w[ft]=je)}else{const je=Y0(C,c,H+Ie,J),ft=Y0(C,c,H,H+Ie),nn=ft>=0&&d[ft];if(p&&!nn||!p&&!(je>=0&&d[je])){ca(lh(R,w),_,C);const Jt=function K0(l,c,d,f,p){const _=new oa(l,d,Wh);return _.multi=[],_.index=c,_.componentProviders=0,rC(_,p,f&&!d),_}(p?Q1:X1,d.length,p,f,S);!p&&nn&&(d[ft].providerFactory=Jt),y_(_,l,c.length,0),c.push(C),R.directiveStart++,R.directiveEnd++,p&&(R.providerIndexes+=1048576),d.push(Jt),w.push(Jt)}else y_(_,l,je>-1?je:ft,rC(d[p?ft:je],S,!p&&f));!p&&f&&nn&&d[ft].componentProviders++}}}function y_(l,c,d,f){const p=lc(c),_=function Fg(l){return!!l.useClass}(c);if(p||_){const S=(_?se(c.useClass):c).prototype.ngOnDestroy;if(S){const R=l.destroyHooks||(l.destroyHooks=[]);if(!p&&c.multi){const H=R.indexOf(d);-1===H?R.push(d,[f,S]):R[H+1].push(f,S)}else R.push(d,S)}}}function rC(l,c,d){return d&&l.componentProviders++,l.multi.push(c)-1}function Y0(l,c,d,f){for(let p=d;p<f;p++)if(c[p]===l)return p;return-1}function X1(l,c,d,f){return q0(this.multi,[])}function Q1(l,c,d,f){const p=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,C=zo(d,d[Kt],this.providerFactory.index,f);_=C.slice(0,w),q0(p,_);for(let S=w;S<C.length;S++)_.push(C[S])}else _=[],q0(p,_);return _}function q0(l,c){for(let d=0;d<l.length;d++)c.push((0,l[d])());return c}function sC(l,c=[]){return d=>{d.providersResolver=(f,p)=>function Z1(l,c,d){const f=si();if(f.firstCreatePass){const p=cs(l);W0(d,f.data,f.blueprint,p,!0),W0(c,f.data,f.blueprint,p,!1)}}(f,p?p(l):l,c)}}class bt{}class v_{}function oC(l,c){return new aC(l,c??null)}class aC extends bt{constructor(c,d){super(),this._parent=d,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zm(this);const f=Ai(c);this._bootstrapComponents=wl(f.bootstrap),this._r3Injector=kv(c,d,[{provide:bt,useValue:this},{provide:$h,useValue:this.componentFactoryResolver}],_e(c),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(c)}get injector(){return this._r3Injector}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class Z0 extends v_{constructor(c){super(),this.moduleType=c}create(c){return new aC(this.moduleType,c)}}class J1 extends bt{constructor(c,d,f){super(),this.componentFactoryResolver=new Zm(this),this.instance=null;const p=new QE([...c,{provide:bt,useValue:this},{provide:$h,useValue:this.componentFactoryResolver}],d||Bg(),f,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(c){this.injector.onDestroy(c)}}function X0(l,c,d=null){return new J1(l,c,d).injector}let Cl=(()=>{class l{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d.id)){const f=Nh(0,d.type),p=f.length>0?X0([f],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d.id,p)}return this.cachedInjectors.get(d.id)}ngOnDestroy(){try{for(const d of this.cachedInjectors.values())null!==d&&d.destroy()}finally{this.cachedInjectors.clear()}}}return l.\u0275prov=Tt({token:l,providedIn:"environment",factory:()=>new l(ri(ud))}),l})();function Q0(l){l.getStandaloneInjector=c=>c.get(Cl).getOrCreateStandaloneInjector(l)}function dC(l,c,d){const f=or()+l,p=ut();return p[f]===oi?xl(p,f,d?c.call(d):c()):function tp(l,c){return l[c]}(p,f)}function df(l,c){const d=l[c];return d===oi?void 0:d}function gC(l,c){const d=si();let f;const p=l+We;d.firstCreatePass?(f=function dM(l,c){if(c)for(let d=c.length-1;d>=0;d--){const f=c[d];if(l===f.name)return f}}(c,d.pipeRegistry),d.data[p]=f,f.onDestroy&&(d.destroyHooks??(d.destroyHooks=[])).push(p,f.onDestroy)):f=d.data[p];const _=f.factory||(f.factory=Da(f.type)),w=bn(Wh);try{const C=cl(!1),S=_();return cl(C),function u1(l,c,d,f){d>=l.data.length&&(l.data[d]=null,l.blueprint[d]=null),c[d]=f}(d,ut(),p,S),S}finally{bn(w)}}function hf(l,c,d){const f=l+We,p=ut(),_=Ns(p,f);return mf(p,f)?function pC(l,c,d,f,p,_){const w=c+d;return Qs(l,w,p)?xl(l,w+1,_?f.call(_,p):f(p)):df(l,w+1)}(p,or(),c,_.transform,d,_):_.transform(d)}function _C(l,c,d,f){const p=l+We,_=ut(),w=Ns(_,p);return mf(_,p)?function zs(l,c,d,f,p,_,w){const C=c+d;return gd(l,C,p,_)?xl(l,C+2,w?f.call(w,p,_):f(p,_)):df(l,C+2)}(_,or(),c,w.transform,d,f,w):w.transform(d,f)}function mf(l,c){return l[Kt].data[c].pure}function sb(l){return c=>{setTimeout(l,void 0,c)}}const Ro=class rb extends a.x{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,d,f){let p=c,_=d||(()=>null),w=f;if(c&&"object"==typeof c){const S=c;p=S.next?.bind(S),_=S.error?.bind(S),w=S.complete?.bind(S)}this.__isAsync&&(_=sb(_),p&&(p=sb(p)),w&&(w=sb(w)));const C=super.subscribe({next:p,error:_,complete:w});return c instanceof K.w0&&c.add(C),C}};function hM(){return this._results[Symbol.iterator]()}class T_{get changes(){return this._changes||(this._changes=new Ro)}constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=T_.prototype;d[Symbol.iterator]||(d[Symbol.iterator]=hM)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,d){return this._results.reduce(c,d)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,d){const f=this;f.dirty=!1;const p=function So(l){return l.flat(Number.POSITIVE_INFINITY)}(c);(this._changesDetected=!function vh(l,c,d){if(l.length!==c.length)return!1;for(let f=0;f<l.length;f++){let p=l[f],_=c[f];if(d&&(p=d(p),_=d(_)),_!==p)return!1}return!0}(f._results,p,d))&&(f._results=p,f.length=p.length,f.last=p[this.length-1],f.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let pf=(()=>{class l{}return l.__NG_ELEMENT_ID__=ob,l})();const fM=pf,C_=class extends fM{constructor(c,d,f){super(),this._declarationLView=c,this._declarationTContainer=d,this.elementRef=f}createEmbeddedView(c,d){const f=this._declarationTContainer.tView,p=jg(this._declarationLView,f,c,16,null,f.declTNode,null,null,null,null,d||null);p[Qt]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[W];return null!==w&&(p[W]=w.createEmbeddedView(f)),Gr(f,p,c),new pd(p)}};function ob(){return gf(ts(),ut())}function gf(l,c){return 4&l.type?new C_(c,l,cc(l,c)):null}let vo=(()=>{class l{}return l.__NG_ELEMENT_ID__=mM,l})();function mM(){return bC(ts(),ut())}const vC=vo,ab=class extends vC{constructor(c,d,f){super(),this._lContainer=c,this._hostTNode=d,this._hostLView=f}get element(){return cc(this._hostTNode,this._hostLView)}get injector(){return new Pa(this._hostTNode,this._hostLView)}get parentInjector(){const c=la(this._hostTNode,this._hostLView);if(Zl(c)){const d=Bc(c,this._hostLView),f=Xl(c);return new Pa(d[Kt].data[f+8],d)}return new Pa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const d=lb(this._lContainer);return null!==d&&d[c]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(c,d,f){let p,_;"number"==typeof f?p=f:null!=f&&(p=f.index,_=f.injector);const w=c.createEmbeddedView(d||{},_);return this.insert(w,p),w}createComponent(c,d,f,p,_){const w=c&&!function zc(l){return"function"==typeof l}(c);let C;if(w)C=d;else{const J=d||{};C=J.index,f=J.injector,p=J.projectableNodes,_=J.environmentInjector||J.ngModuleRef}const S=w?c:new qh(_n(c)),R=f||this.parentInjector;if(!_&&null==S.ngModule){const Ie=(w?R:this.parentInjector).get(ud,null);Ie&&(_=Ie)}const H=S.create(R,p,void 0,_);return this.insert(H.hostView,C),H}insert(c,d){const f=c._lView,p=f[Kt];if(function Yd(l){return ki(l[wi])}(f)){const H=this.indexOf(c);if(-1!==H)this.detach(H);else{const J=f[wi],Ie=new ab(J,J[Dr],J[wi]);Ie.detach(Ie.indexOf(c))}}const _=this._adjustIndex(d),w=this._lContainer;!function v(l,c,d,f){const p=Bt+f,_=d.length;f>0&&(d[p-1][Ei]=c),f<_-Bt?(c[Ei]=d[p],wm(d,Bt+f,c)):(d.push(c),c[Ei]=null),c[wi]=d;const w=c[Qt];null!==w&&d!==w&&function b(l,c){const d=l[Lt];c[It]!==c[wi][wi][It]&&(l[ct]=!0),null===d?l[Lt]=[c]:d.push(c)}(w,c);const C=c[W];null!==C&&C.insertView(l),c[jn]|=64}(p,f,w,_);const C=vl(_,w),S=f[Pn],R=rs(S,w[At]);return null!==R&&function tv(l,c,d,f,p,_){f[ls]=p,f[Dr]=c,Mm(l,f,d,1,p,_)}(p,w[Dr],S,f,R,C),c.attachToViewContainerRef(),wm(cb(w),_,c),c}move(c,d){return this.insert(c,d)}indexOf(c){const d=lb(this._lContainer);return null!==d?d.indexOf(c):-1}remove(c){const d=this._adjustIndex(c,-1),f=L(this._lContainer,d);f&&(Jl(cb(this._lContainer),d),V(f[Kt],f))}detach(c){const d=this._adjustIndex(c,-1),f=L(this._lContainer,d);return f&&null!=Jl(cb(this._lContainer),d)?new pd(f):null}_adjustIndex(c,d=0){return c??this.length+d}};function lb(l){return l[gt]}function cb(l){return l[gt]||(l[gt]=[])}function bC(l,c){let d;const f=c[l.index];if(ki(f))d=f;else{let p;if(8&l.type)p=yi(f);else{const _=c[Pn];p=_.createComment("");const w=us(l,c);wn(_,rs(_,w),p,function ac(l,c){return l.nextSibling(c)}(_,w),!1)}c[l.index]=d=Uv(f,c,p,l),_r(c,d)}return new ab(d,l,c)}class ub{constructor(c){this.queryList=c,this.matches=null}clone(){return new ub(this.queryList)}setDirty(){this.queryList.setDirty()}}class I_{constructor(c=[]){this.queries=c}createEmbeddedView(c){const d=c.queries;if(null!==d){const f=null!==c.contentQueries?c.contentQueries[0]:d.length,p=[];for(let _=0;_<f;_++){const w=d.getByIndex(_);p.push(this.queries[w.indexInDeclarationView].clone())}return new I_(p)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let d=0;d<this.queries.length;d++)null!==TC(c,d).matches&&this.queries[d].setDirty()}}class Il{constructor(c,d,f=null){this.predicate=c,this.flags=d,this.read=f}}class vp{constructor(c=[]){this.queries=c}elementStart(c,d){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(c,d)}elementEnd(c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(c)}embeddedTView(c){let d=null;for(let f=0;f<this.length;f++){const p=null!==d?d.length:0,_=this.getByIndex(f).embeddedTView(c,p);_&&(_.indexInDeclarationView=f,null!==d?d.push(_):d=[_])}return null!==d?new vp(d):null}template(c,d){for(let f=0;f<this.queries.length;f++)this.queries[f].template(c,d)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class S_{constructor(c,d=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(c,d){this.isApplyingToNode(d)&&this.matchTNode(c,d)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,d){this.elementStart(c,d)}embeddedTView(c,d){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,d),new S_(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let f=c.parent;for(;null!==f&&8&f.type&&f.index!==d;)f=f.parent;return d===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(c,d){const f=this.metadata.predicate;if(Array.isArray(f))for(let p=0;p<f.length;p++){const _=f[p];this.matchTNodeWithReadOption(c,d,pM(d,_)),this.matchTNodeWithReadOption(c,d,Ho(d,c,_,!1,!1))}else f===pf?4&d.type&&this.matchTNodeWithReadOption(c,d,-1):this.matchTNodeWithReadOption(c,d,Ho(d,c,f,!1,!1))}matchTNodeWithReadOption(c,d,f){if(null!==f){const p=this.metadata.read;if(null!==p)if(p===Vh||p===vo||p===pf&&4&d.type)this.addMatch(d.index,-2);else{const _=Ho(d,c,p,!1,!1);null!==_&&this.addMatch(d.index,_)}else this.addMatch(d.index,f)}}addMatch(c,d){null===this.matches?this.matches=[c,d]:this.matches.push(c,d)}}function pM(l,c){const d=l.localNames;if(null!==d)for(let f=0;f<d.length;f+=2)if(d[f]===c)return d[f+1];return null}function D_(l,c,d,f){return-1===d?function db(l,c){return 11&l.type?cc(l,c):4&l.type?gf(l,c):null}(c,l):-2===d?function gM(l,c,d){return d===Vh?cc(c,l):d===pf?gf(c,l):d===vo?bC(c,l):void 0}(l,c,f):zo(l,l[Kt],d,c)}function wC(l,c,d,f){const p=c[W].queries[f];if(null===p.matches){const _=l.data,w=d.matches,C=[];for(let S=0;S<w.length;S+=2){const R=w[S];C.push(R<0?null:D_(c,_[R],w[S+1],d.metadata.read))}p.matches=C}return p.matches}function A_(l,c,d,f){const p=l.queries.getByIndex(d),_=p.matches;if(null!==_){const w=wC(l,c,p,d);for(let C=0;C<_.length;C+=2){const S=_[C];if(S>0)f.push(w[C/2]);else{const R=_[C+1],H=c[-S];for(let J=Bt;J<H.length;J++){const Ie=H[J];Ie[Qt]===Ie[wi]&&A_(Ie[Kt],Ie,R,f)}if(null!==H[Lt]){const J=H[Lt];for(let Ie=0;Ie<J.length;Ie++){const je=J[Ie];A_(je[Kt],je,R,f)}}}}}return f}function EC(l){const c=ut(),d=si(),f=Oc();ys(f+1);const p=TC(d,f);if(l.dirty&&function Wd(l){return 4==(4&l[jn])}(c)===(2==(2&p.metadata.flags))){if(null===p.matches)l.reset([]);else{const _=p.crossesNgTemplate?A_(d,c,f,[]):wC(d,c,p,f);l.reset(_,Um),l.notifyOnChanges()}return!0}return!1}function M_(l,c,d){const f=si();f.firstCreatePass&&(xC(f,new Il(l,c,d),-1),2==(2&c)&&(f.staticViewQueries=!0)),R_(f,ut(),c)}function k_(l,c,d,f){const p=si();if(p.firstCreatePass){const _=ts();xC(p,new Il(c,d,f),_.index),function yM(l,c){const d=l.contentQueries||(l.contentQueries=[]);c!==(d.length?d[d.length-1]:-1)&&d.push(l.queries.length-1,c)}(p,l),2==(2&d)&&(p.staticContentQueries=!0)}R_(p,ut(),d)}function hb(){return function _M(l,c){return l[W].queries[c].queryList}(ut(),Oc())}function R_(l,c,d){const f=new T_(4==(4&d));Yg(l,c,f,f.destroy),null===c[W]&&(c[W]=new I_),c[W].queries.push(new ub(f))}function xC(l,c,d){null===l.queries&&(l.queries=new vp),l.queries.track(new S_(c,d))}function TC(l,c){return l.queries.getByIndex(c)}function CC(l,c){return gf(l,c)}function mb(l){return!!Ai(l)}function Ep(...l){}const Db=new Si("Application Initializer");let N_=(()=>{class l{constructor(d){this.appInits=d,this.resolve=Ep,this.reject=Ep,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,p)=>{this.resolve=f,this.reject=p})}runInitializers(){if(this.initialized)return;const d=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const _=this.appInits[p]();if(s0(_))d.push(_);else if(f1(_)){const w=new Promise((C,S)=>{_.subscribe({complete:C,error:S})});d.push(w)}}Promise.all(d).then(()=>{f()}).catch(p=>{this.reject(p)}),0===d.length&&f(),this.initialized=!0}}return l.\u0275fac=function(d){return new(d||l)(ri(Db,8))},l.\u0275prov=Tt({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const B_=new Si("AppId",{providedIn:"root",factory:function Ab(){return`${Mb()}${Mb()}${Mb()}`}});function Mb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const U_=new Si("Platform Initializer"),$C=new Si("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),RM=new Si("AnimationModuleType");let OM=(()=>{class l{log(d){console.log(d)}warn(d){console.warn(d)}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=Tt({token:l,factory:l.\u0275fac,providedIn:"platform"}),l})();const $_=new Si("LocaleId",{providedIn:"root",factory:()=>rr($_,st.Optional|st.SkipSelf)||function PM(){return typeof $localize<"u"&&$localize.locale||af}()}),LM=new Si("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class V_{constructor(c,d){this.ngModuleFactory=c,this.componentFactories=d}}let NM=(()=>{class l{compileModuleSync(d){return new Z0(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const f=this.compileModuleSync(d),_=wl(Ai(d).declarations).reduce((w,C)=>{const S=_n(C);return S&&w.push(new qh(S)),w},[]);return new V_(f,_)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=Tt({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const jC=(()=>Promise.resolve(0))();function H_(l){typeof Zone>"u"?jC.then(()=>{l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}class Ea{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ro(!1),this.onMicrotaskEmpty=new Ro(!1),this.onStable=new Ro(!1),this.onError=new Ro(!1),typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!f&&d,p.shouldCoalesceRunChangeDetection=f,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function BM(){let l=Zn.requestAnimationFrame,c=Zn.cancelAnimationFrame;if(typeof Zone<"u"&&l&&c){const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d);const f=c[Zone.__symbol__("OriginalDelegate")];f&&(c=f)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function HM(l){const c=()=>{!function VM(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(Zn,()=>{l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{l.lastRequestAnimationFrameId=-1,kb(l),l.isCheckStableRunning=!0,z_(l),l.isCheckStableRunning=!1},void 0,()=>{},()=>{})),l.fakeTopEventTask.invoke()}),kb(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,f,p,_,w,C)=>{try{return GC(l),d.invokeTask(p,_,w,C)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||l.shouldCoalesceRunChangeDetection)&&c(),WC(l)}},onInvoke:(d,f,p,_,w,C,S)=>{try{return GC(l),d.invoke(p,_,w,C,S)}finally{l.shouldCoalesceRunChangeDetection&&c(),WC(l)}},onHasTask:(d,f,p,_)=>{d.hasTask(p,_),f===p&&("microTask"==_.change?(l._hasPendingMicrotasks=_.microTask,kb(l),z_(l)):"macroTask"==_.change&&(l.hasPendingMacrotasks=_.macroTask))},onHandleError:(d,f,p,_)=>(d.handleError(p,_),l.runOutsideAngular(()=>l.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ea.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(Ea.isInAngularZone())throw new te(909,!1)}run(c,d,f){return this._inner.run(c,d,f)}runTask(c,d,f,p){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+p,c,$M,Ep,Ep);try{return _.runTask(w,d,f)}finally{_.cancelTask(w)}}runGuarded(c,d,f){return this._inner.runGuarded(c,d,f)}runOutsideAngular(c){return this._outer.run(c)}}const $M={};function z_(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(()=>l.onStable.emit(null))}finally{l.isStable=!0}}}function kb(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function GC(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function WC(l){l._nesting--,z_(l)}class zM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ro,this.onMicrotaskEmpty=new Ro,this.onStable=new Ro,this.onError=new Ro}run(c,d,f){return c.apply(d,f)}runGuarded(c,d,f){return c.apply(d,f)}runOutsideAngular(c){return c()}runTask(c,d,f,p){return c.apply(d,f)}}const YC=new Si(""),qC=new Si("");let xp,jM=(()=>{class l{constructor(d,f,p){this._ngZone=d,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xp||(function GM(l){xp=l}(p),p.addToWindow(f)),this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ea.assertNotInAngularZone(),H_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())H_(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(d)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,f,p){let _=-1;f&&f>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),d(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:d,timeoutId:_,updateCb:p})}whenStable(d,f,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,f,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(d){this.registry.registerApplication(d,this)}unregisterApplication(d){this.registry.unregisterApplication(d)}findProviders(d,f,p){return[]}}return l.\u0275fac=function(d){return new(d||l)(ri(Ea),ri(KC),ri(qC))},l.\u0275prov=Tt({token:l,factory:l.\u0275fac}),l})(),KC=(()=>{class l{constructor(){this._applications=new Map}registerApplication(d,f){this._applications.set(d,f)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,f=!0){return xp?.findTestabilityInTree(this,d,f)??null}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=Tt({token:l,factory:l.\u0275fac,providedIn:"platform"}),l})();const yc=!1;let Sl=null;const ZC=new Si("AllowMultipleToken"),Zo=new Si("PlatformDestroyListeners"),an=new Si("appBootstrapListener");class Tp{constructor(c,d){this.name=c,this.token=d}}function QC(l,c,d=[]){const f=`Platform: ${c}`,p=new Si(f);return(_=[])=>{let w=Dl();if(!w||w.injector.get(ZC,!1)){const C=[...d,..._,{provide:p,useValue:!0}];l?l(C):function WM(l){if(Sl&&!Sl.get(ZC,!1))throw new te(400,!1);Sl=l;const c=l.get(JC);(function XC(l){const c=l.get(U_,null);c&&c.forEach(d=>d())})(l)}(function Cp(l=[],c){return zh.create({name:c,providers:[{provide:ou,useValue:"platform"},{provide:Zo,useValue:new Set([()=>Sl=null])},...l]})}(C,f))}return function eo(l){const c=Dl();if(!c)throw new te(401,!1);return c}()}}function Dl(){return Sl?.get(JC)??null}let JC=(()=>{class l{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,f){const p=function G_(l,c){let d;return d="noop"===l?new zM:("zone.js"===l?void 0:l)||new Ea(c),d}(f?.ngZone,function Pb(l){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!l||!l.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!l||!l.ngZoneRunCoalescing)||!1}}(f)),_=[{provide:Ea,useValue:p}];return p.run(()=>{const w=zh.create({providers:_,parent:this.injector,name:d.moduleType.name}),C=d.create(w),S=C.injector.get($m,null);if(!S)throw new te(402,!1);return p.runOutsideAngular(()=>{const R=p.onError.subscribe({next:H=>{S.handleError(H)}});C.onDestroy(()=>{pu(this._modules,C),R.unsubscribe()})}),function Lb(l,c,d){try{const f=d();return s0(f)?f.catch(p=>{throw c.runOutsideAngular(()=>l.handleError(p)),p}):f}catch(f){throw c.runOutsideAngular(()=>l.handleError(f)),f}}(S,p,()=>{const R=C.injector.get(N_);return R.runInitializers(),R.donePromise.then(()=>(function M0(l){de(l,"Expected localeId to be defined"),"string"==typeof l&&(VT=l.toLowerCase().replace(/_/g,"-"))}(C.injector.get($_,af)||af),this._moduleDoBootstrap(C),C))})})}bootstrapModule(d,f=[]){const p=Gs({},f);return function Rb(l,c,d){const f=new Z0(d);return Promise.resolve(f)}(0,0,d).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(d){const f=d.injector.get(W_);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(p=>f.bootstrap(p));else{if(!d.instance.ngDoBootstrap)throw new te(-403,!1);d.instance.ngDoBootstrap(f)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new te(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const d=this._injector.get(Zo,null);d&&(d.forEach(f=>f()),d.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return l.\u0275fac=function(d){return new(d||l)(ri(zh))},l.\u0275prov=Tt({token:l,factory:l.\u0275fac,providedIn:"platform"}),l})();function Gs(l,c){return Array.isArray(c)?c.reduce(Gs,l):{...l,...c}}let W_=(()=>{class l{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(d,f,p){this._zone=d,this._injector=f,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new B.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new B.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Ea.assertNotInAngularZone(),H_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Ea.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),R.unsubscribe()}});this.isStable=(0,Ee.T)(_,w.pipe((0,Ae.B)()))}bootstrap(d,f){const p=d instanceof ex;if(!this._injector.get(N_).done){!p&&Et(d);throw new te(405,yc)}let w;w=p?d:this._injector.get($h).resolveComponentFactory(d),this.componentTypes.push(w.componentType);const C=function j_(l){return l.isBoundToModule}(w)?void 0:this._injector.get(bt),R=w.create(zh.NULL,[],f||w.selector,C),H=R.location.nativeElement,J=R.injector.get(YC,null);return J?.registerApplication(H),R.onDestroy(()=>{this.detachView(R.hostView),pu(this.components,R),J?.unregisterApplication(H)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new te(101,!1);try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){const f=d;this._views.push(f),f.attachToAppRef(this)}detachView(d){const f=d;pu(this._views,f),f.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d);const f=this._injector.get(an,[]);f.push(...this._bootstrapListeners),f.forEach(p=>p(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return this._destroyListeners.push(d),()=>pu(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new te(406,!1);const d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return l.\u0275fac=function(d){return new(d||l)(ri(Ea),ri(ud),ri($m))},l.\u0275prov=Tt({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function pu(l,c){const d=l.indexOf(c);d>-1&&l.splice(d,1)}function Fb(){return!1}let Bb=(()=>{class l{}return l.__NG_ELEMENT_ID__=eI,l})();function eI(l){return function YM(l,c,d){if(Wi(l)&&!d){const f=es(l.index,c);return new pd(f,f)}return 47&l.type?new pd(c[It],c):null}(ts(),ut(),16==(16&l))}class q_{constructor(){}supports(c){return ep(c)}create(c){return new cI(c)}}const jb=(l,c)=>c;class cI{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||jb}forEachItem(c){let d;for(d=this._itHead;null!==d;d=d._next)c(d)}forEachOperation(c){let d=this._itHead,f=this._removalsHead,p=0,_=null;for(;d||f;){const w=!f||d&&d.currentIndex<Wb(f,p,_)?d:f,C=Wb(w,p,_),S=w.currentIndex;if(w===f)p--,f=f._nextRemoved;else if(d=d._next,null==w.previousIndex)p++;else{_||(_=[]);const R=C-p,H=S-p;if(R!=H){for(let Ie=0;Ie<R;Ie++){const je=Ie<_.length?_[Ie]:_[Ie]=0,ft=je+Ie;H<=ft&&ft<R&&(_[Ie]=je+1)}_[w.previousIndex]=H-R}}C!==S&&c(w,C,S)}}forEachPreviousItem(c){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)c(d)}forEachAddedItem(c){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)c(d)}forEachMovedItem(c){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)c(d)}forEachRemovedItem(c){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)c(d)}forEachIdentityChange(c){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)c(d)}diff(c){if(null==c&&(c=[]),!ep(c))throw new te(900,!1);return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let p,_,w,d=this._itHead,f=!1;if(Array.isArray(c)){this.length=c.length;for(let C=0;C<this.length;C++)_=c[C],w=this._trackByFn(C,_),null!==d&&Object.is(d.trackById,w)?(f&&(d=this._verifyReinsertion(d,_,w,C)),Object.is(d.item,_)||this._addIdentityChange(d,_)):(d=this._mismatch(d,_,w,C),f=!0),d=d._next}else p=0,function Qx(l,c){if(Array.isArray(l))for(let d=0;d<l.length;d++)c(l[d]);else{const d=l[Symbol.iterator]();let f;for(;!(f=d.next()).done;)c(f.value)}}(c,C=>{w=this._trackByFn(p,C),null!==d&&Object.is(d.trackById,w)?(f&&(d=this._verifyReinsertion(d,C,w,p)),Object.is(d.item,C)||this._addIdentityChange(d,C)):(d=this._mismatch(d,C,w,p),f=!0),d=d._next,p++}),this.length=p;return this._truncate(d),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,d,f,p){let _;return null===c?_=this._itTail:(_=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(c.item,d)||this._addIdentityChange(c,d),this._reinsertAfter(c,_,p)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(f,p))?(Object.is(c.item,d)||this._addIdentityChange(c,d),this._moveAfter(c,_,p)):c=this._addAfter(new uI(d,f),_,p),c}_verifyReinsertion(c,d,f,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==_?c=this._reinsertAfter(_,c._prev,p):c.currentIndex!=p&&(c.currentIndex=p,this._addToMoves(c,p)),c}_truncate(c){for(;null!==c;){const d=c._next;this._addToRemovals(this._unlink(c)),c=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,d,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const p=c._prevRemoved,_=c._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(c,d,f),this._addToMoves(c,f),c}_moveAfter(c,d,f){return this._unlink(c),this._insertAfter(c,d,f),this._addToMoves(c,f),c}_addAfter(c,d,f){return this._insertAfter(c,d,f),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,d,f){const p=null===d?this._itHead:d._next;return c._next=p,c._prev=d,null===p?this._itTail=c:p._prev=c,null===d?this._itHead=c:d._next=c,null===this._linkedRecords&&(this._linkedRecords=new Gb),this._linkedRecords.put(c),c.currentIndex=f,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const d=c._prev,f=c._next;return null===d?this._itHead=f:d._next=f,null===f?this._itTail=d:f._prev=d,c}_addToMoves(c,d){return c.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gb),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,d){return c.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class uI{constructor(c,d){this.item=c,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class XM{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,d){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===d||d<=f.currentIndex)&&Object.is(f.trackById,c))return f;return null}remove(c){const d=c._prevDup,f=c._nextDup;return null===d?this._head=f:d._nextDup=f,null===f?this._tail=d:f._prevDup=d,null===this._head}}class Gb{constructor(){this.map=new Map}put(c){const d=c.trackById;let f=this.map.get(d);f||(f=new XM,this.map.set(d,f)),f.add(c)}get(c,d){const p=this.map.get(c);return p?p.get(c,d):null}remove(c){const d=c.trackById;return this.map.get(d).remove(c)&&this.map.delete(d),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wb(l,c,d){const f=l.previousIndex;if(null===f)return f;let p=0;return d&&f<d.length&&(p=d[f]),f+c+p}class K_{constructor(){}supports(c){return c instanceof Map||lu(c)}create(){return new dI}}class dI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let d;for(d=this._mapHead;null!==d;d=d._next)c(d)}forEachPreviousItem(c){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)c(d)}forEachChangedItem(c){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)c(d)}forEachAddedItem(c){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)c(d)}forEachRemovedItem(c){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)c(d)}diff(c){if(c){if(!(c instanceof Map||lu(c)))throw new te(900,!1)}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(c,(f,p)=>{if(d&&d.key===p)this._maybeAddToChanges(d,f),this._appendAfter=d,d=d._next;else{const _=this._getOrCreateRecordForKey(p,f);d=this._insertBeforeOrAppend(d,_)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let f=d;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,d){if(c){const f=c._prev;return d._next=c,d._prev=f,c._prev=d,f&&(f._next=d),c===this._mapHead&&(this._mapHead=d),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(c,d){if(this._records.has(c)){const p=this._records.get(c);this._maybeAddToChanges(p,d);const _=p._prev,w=p._next;return _&&(_._next=w),w&&(w._prev=_),p._next=null,p._prev=null,p}const f=new QM(c);return this._records.set(c,f),f.currentValue=d,this._addToAdditions(f),f}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,d){Object.is(d,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=d,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,d){c instanceof Map?c.forEach(d):Object.keys(c).forEach(f=>d(c[f],f))}}class QM{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Z_(){return new kp([new q_])}let kp=(()=>{class l{constructor(d){this.factories=d}static create(d,f){if(null!=f){const p=f.factories.slice();d=d.concat(p)}return new l(d)}static extend(d){return{provide:l,useFactory:f=>l.create(d,f||Z_()),deps:[[l,new pn,new Ba]]}}find(d){const f=this.factories.find(p=>p.supports(d));if(null!=f)return f;throw new te(901,!1)}}return l.\u0275prov=Tt({token:l,providedIn:"root",factory:Z_}),l})();function ws(){return new Es([new K_])}let Es=(()=>{class l{constructor(d){this.factories=d}static create(d,f){if(f){const p=f.factories.slice();d=d.concat(p)}return new l(d)}static extend(d){return{provide:l,useFactory:f=>l.create(d,f||ws()),deps:[[l,new pn,new Ba]]}}find(d){const f=this.factories.find(p=>p.supports(d));if(f)return f;throw new te(901,!1)}}return l.\u0275prov=Tt({token:l,providedIn:"root",factory:ws}),l})();const JM=QC(null,"core",[]);let fI=(()=>{class l{constructor(d){}}return l.\u0275fac=function(d){return new(d||l)(ri(W_))},l.\u0275mod=ze({type:l}),l.\u0275inj=Vt({}),l})();function ek(l){return"boolean"==typeof l?l:null!=l&&"false"!==l}function Zb(l,c){const d=_n(l),f=c.elementInjector||Bg();return new qh(d).create(f,c.projectableNodes,c.hostElement,c.environmentInjector)}function pI(l){const c=_n(l);if(!c)return null;const d=new qh(c);return{get selector(){return d.selector},get type(){return d.componentType},get inputs(){return d.inputs},get outputs(){return d.outputs},get ngContentSelectors(){return d.ngContentSelectors},get isStandalone(){return c.standalone}}}},3942:(jt,Ze,F)=>{"use strict";F.d(Ze,{Z:()=>ke});var a=F(2090),K=F(4859),B=F(6881),Ee=F(1877);class Ae{constructor(te,le){this._delegate=te,this.firebase=le,(0,B._addComponent)(te,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this._delegate.automaticDataCollectionEnabled=te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(te=>{this._delegate.checkDestroyed(),te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(te,le=B._DEFAULT_ENTRY_NAME){var ue;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(te);return!Be.isInitialized()&&"EXPLICIT"===(null===(ue=Be.getComponent())||void 0===ue?void 0:ue.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:le})}_removeServiceInstance(te,le=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(te).clearInstance(le)}_addComponent(te){(0,B._addComponent)(this._delegate,te)}_addOrOverwriteComponent(te){(0,B._addOrOverwriteComponent)(this._delegate,te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ie=function Me(){const Ue=function _e(Ue){const te={},le={__esModule:!0,initializeApp:function Ce(Z,he={}){const ve=B.initializeApp(Z,he);if((0,a.r3)(te,ve.name))return te[ve.name];const Te=new Ue(ve,le);return te[ve.name]=Te,Te},app:Be,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function Le(Z){const he=Z.name,ve=he.replace("-compat","");if(B._registerComponent(Z)&&"PUBLIC"===Z.type){const Te=(Ye=Be())=>{if("function"!=typeof Ye[ve])throw oe.create("invalid-app-argument",{appName:he});return Ye[ve]()};void 0!==Z.serviceProps&&(0,a.ZB)(Te,Z.serviceProps),le[ve]=Te,Ue.prototype[ve]=function(...Ye){return this._getService.bind(this,he).apply(this,Z.multipleInstances?Ye:[])}}return"PUBLIC"===Z.type?le[ve]:null},removeApp:function ue(Z){delete te[Z]},useAsService:function $e(Z,he){return"serverAuth"===he?null:he},modularAPIs:B}};function Be(Z){if(!(0,a.r3)(te,Z=Z||B._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Z});return te[Z]}return le.default=le,Object.defineProperty(le,"apps",{get:function Ne(){return Object.keys(te).map(Z=>te[Z])}}),Be.App=Ue,le}(Ae);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:Me,extendNamespace:function te(le){(0,a.ZB)(Ue,le)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),Ue}(),X=new Ee.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){X.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&X.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=ie;!function xe(Ue){(0,B.registerVersion)("@firebase/app-compat","0.2.13",Ue)}()},6881:(jt,Ze,F)=>{"use strict";F.r(Ze),F.d(Ze,{FirebaseError:()=>Ee.ZR,SDK_VERSION:()=>ri,_DEFAULT_ENTRY_NAME:()=>Rn,_addComponent:()=>Ti,_addOrOverwriteComponent:()=>Mi,_apps:()=>qt,_clearComponents:()=>bi,_components:()=>Ui,_getProvider:()=>$i,_registerComponent:()=>Xi,_removeServiceInstance:()=>os,deleteApp:()=>Xr,getApp:()=>rr,getApps:()=>fr,initializeApp:()=>Sr,onLog:()=>_s,registerVersion:()=>Ji,setLogLevel:()=>as});var a=F(5861),K=F(4859),B=F(1877),Ee=F(2090);const Ae=(nt,ze)=>ze.some(Mt=>nt instanceof Mt);let me,oe;const ie=new WeakMap,X=new WeakMap,se=new WeakMap,be=new WeakMap,xe=new WeakMap;let te={get(nt,ze,Mt){if(nt instanceof IDBTransaction){if("done"===ze)return X.get(nt);if("objectStoreNames"===ze)return nt.objectStoreNames||se.get(nt);if("store"===ze)return Mt.objectStoreNames[1]?void 0:Mt.objectStore(Mt.objectStoreNames[0])}return Ce(nt[ze])},set:(nt,ze,Mt)=>(nt[ze]=Mt,!0),has:(nt,ze)=>nt instanceof IDBTransaction&&("done"===ze||"store"===ze)||ze in nt};function Be(nt){return"function"==typeof nt?function ue(nt){return nt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(nt)?function(...ze){return nt.apply(Ne(this),ze),Ce(ie.get(this))}:function(...ze){return Ce(nt.apply(Ne(this),ze))}:function(ze,...Mt){const hn=nt.call(Ne(this),ze,...Mt);return se.set(hn,ze.sort?ze.sort():[ze]),Ce(hn)}}(nt):(nt instanceof IDBTransaction&&function Ue(nt){if(X.has(nt))return;const ze=new Promise((Mt,hn)=>{const fn=()=>{nt.removeEventListener("complete",gn),nt.removeEventListener("error",_n),nt.removeEventListener("abort",_n)},gn=()=>{Mt(),fn()},_n=()=>{hn(nt.error||new DOMException("AbortError","AbortError")),fn()};nt.addEventListener("complete",gn),nt.addEventListener("error",_n),nt.addEventListener("abort",_n)});X.set(nt,ze)}(nt),Ae(nt,function _e(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(nt,te):nt)}function Ce(nt){if(nt instanceof IDBRequest)return function ke(nt){const ze=new Promise((Mt,hn)=>{const fn=()=>{nt.removeEventListener("success",gn),nt.removeEventListener("error",_n)},gn=()=>{Mt(Ce(nt.result)),fn()},_n=()=>{hn(nt.error),fn()};nt.addEventListener("success",gn),nt.addEventListener("error",_n)});return ze.then(Mt=>{Mt instanceof IDBCursor&&ie.set(Mt,nt)}).catch(()=>{}),xe.set(ze,nt),ze}(nt);if(be.has(nt))return be.get(nt);const ze=Be(nt);return ze!==nt&&(be.set(nt,ze),xe.set(ze,nt)),ze}const Ne=nt=>xe.get(nt),Z=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],ve=new Map;function Te(nt,ze){var Mt;if(!(nt instanceof IDBDatabase)||ze in nt||"string"!=typeof ze)return;if(ve.get(ze))return ve.get(ze);const hn=ze.replace(/FromIndex$/,""),fn=ze!==hn,gn=he.includes(hn);if(!(hn in(fn?IDBIndex:IDBObjectStore).prototype)||!gn&&!Z.includes(hn))return;const _n=function(Yn){return(Mt=Mt||(0,a.Z)(function*(Et,...Ai){const wr=this.transaction(Et,gn?"readwrite":"readonly");let Pi=wr.store;return fn&&(Pi=Pi.index(Ai.shift())),(yield Promise.all([Pi[hn](...Ai),gn&&wr.done]))[0]})).apply(this,arguments)};return ve.set(ze,_n),_n}var Ye,rt,Qe;!function le(nt){te=nt(te)}(nt=>({...nt,get:(ze,Mt,hn)=>Te(ze,Mt)||nt.get(ze,Mt,hn),has:(ze,Mt)=>!!Te(ze,Mt)||nt.has(ze,Mt)}));class on{constructor(ze){this.container=ze}getPlatformInfoString(){return this.container.getProviders().map(Mt=>{if(function vt(nt){return"VERSION"===nt.getComponent()?.type}(Mt)){const hn=Mt.getImmediate();return`${hn.library}/${hn.version}`}return null}).filter(Mt=>Mt).join(" ")}}const $t="@firebase/app",G=new B.Yd("@firebase/app"),Rn="[DEFAULT]",Xt={[$t]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},qt=new Map,Ui=new Map;function Ti(nt,ze){try{nt.container.addComponent(ze)}catch(Mt){G.debug(`Component ${ze.name} failed to register with FirebaseApp ${nt.name}`,Mt)}}function Mi(nt,ze){nt.container.addOrOverwriteComponent(ze)}function Xi(nt){const ze=nt.name;if(Ui.has(ze))return G.debug(`There were multiple attempts to register component ${ze}.`),!1;Ui.set(ze,nt);for(const Mt of qt.values())Ti(Mt,nt);return!0}function $i(nt,ze){const Mt=nt.container.getProvider("heartbeat").getImmediate({optional:!0});return Mt&&Mt.triggerHeartbeat(),nt.container.getProvider(ze)}function os(nt,ze,Mt=Rn){$i(nt,ze).clearInstance(Mt)}function bi(){Ui.clear()}const $n=new Ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hr{constructor(ze,Mt,hn){this._isDeleted=!1,this._options=Object.assign({},ze),this._config=Object.assign({},Mt),this._name=Mt.name,this._automaticDataCollectionEnabled=Mt.automaticDataCollectionEnabled,this._container=hn,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ze){this._isDeleted=ze}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}}const ri="9.23.0";function Sr(nt,ze={}){let Mt=nt;"object"!=typeof ze&&(ze={name:ze});const hn=Object.assign({name:Rn,automaticDataCollectionEnabled:!1},ze),fn=hn.name;if("string"!=typeof fn||!fn)throw $n.create("bad-app-name",{appName:String(fn)});if(Mt||(Mt=(0,Ee.aH)()),!Mt)throw $n.create("no-options");const gn=qt.get(fn);if(gn){if((0,Ee.vZ)(Mt,gn.options)&&(0,Ee.vZ)(hn,gn.config))return gn;throw $n.create("duplicate-app",{appName:fn})}const _n=new K.H0(fn);for(const Yn of Ui.values())_n.addComponent(Yn);const ci=new hr(Mt,hn,_n);return qt.set(fn,ci),ci}function rr(nt=Rn){const ze=qt.get(nt);if(!ze&&nt===Rn&&(0,Ee.aH)())return Sr();if(!ze)throw $n.create("no-app",{appName:nt});return ze}function fr(){return Array.from(qt.values())}function Xr(nt){return(Ye=Ye||(0,a.Z)(function*(ze){const Mt=ze.name;qt.has(Mt)&&(qt.delete(Mt),yield Promise.all(ze.container.getProviders().map(hn=>hn.delete())),ze.isDeleted=!0)})).apply(this,arguments)}function Ji(nt,ze,Mt){var hn;let fn=null!==(hn=Xt[nt])&&void 0!==hn?hn:nt;Mt&&(fn+=`-${Mt}`);const gn=fn.match(/\s|\//),_n=ze.match(/\s|\//);if(gn||_n){const ci=[`Unable to register library "${fn}" with version "${ze}":`];return gn&&ci.push(`library name "${fn}" contains illegal characters (whitespace or "/")`),gn&&_n&&ci.push("and"),_n&&ci.push(`version name "${ze}" contains illegal characters (whitespace or "/")`),void G.warn(ci.join(" "))}Xi(new K.wA(`${fn}-version`,()=>({library:fn,version:ze}),"VERSION"))}function _s(nt,ze){if(null!==nt&&"function"!=typeof nt)throw $n.create("invalid-log-argument");(0,B.Am)(nt,ze)}function as(nt){(0,B.Ub)(nt)}const ge="firebase-heartbeat-database",re=1,z="firebase-heartbeat-store";let j=null;function $(){return j||(j=function Le(nt,ze,{blocked:Mt,upgrade:hn,blocking:fn,terminated:gn}={}){const _n=indexedDB.open(nt,ze),ci=Ce(_n);return hn&&_n.addEventListener("upgradeneeded",Yn=>{hn(Ce(_n.result),Yn.oldVersion,Yn.newVersion,Ce(_n.transaction),Yn)}),Mt&&_n.addEventListener("blocked",Yn=>Mt(Yn.oldVersion,Yn.newVersion,Yn)),ci.then(Yn=>{gn&&Yn.addEventListener("close",()=>gn()),fn&&Yn.addEventListener("versionchange",Et=>fn(Et.oldVersion,Et.newVersion,Et))}).catch(()=>{}),ci}(ge,re,{upgrade:(nt,ze)=>{0===ze&&nt.createObjectStore(z)}}).catch(nt=>{throw $n.create("idb-open",{originalErrorMessage:nt.message})})),j}function et(nt,ze){return(Qe=Qe||(0,a.Z)(function*(Mt,hn){try{const gn=(yield $()).transaction(z,"readwrite");yield gn.objectStore(z).put(hn,Ut(Mt)),yield gn.done}catch(fn){if(fn instanceof Ee.ZR)G.warn(fn.message);else{const gn=$n.create("idb-set",{originalErrorMessage:fn?.message});G.warn(gn.message)}}})).apply(this,arguments)}function Ut(nt){return`${nt.name}!${nt.options.appId}`}class Wn{constructor(ze){this.container=ze,this._heartbeatsCache=null;const Mt=this.container.getProvider("app").getImmediate();this._storage=new _i(Mt),this._heartbeatsCachePromise=this._storage.read().then(hn=>(this._heartbeatsCache=hn,hn))}triggerHeartbeat(){var ze=this;return(0,a.Z)(function*(){const hn=ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),fn=xn();if(null===ze._heartbeatsCache&&(ze._heartbeatsCache=yield ze._heartbeatsCachePromise),ze._heartbeatsCache.lastSentHeartbeatDate!==fn&&!ze._heartbeatsCache.heartbeats.some(gn=>gn.date===fn))return ze._heartbeatsCache.heartbeats.push({date:fn,agent:hn}),ze._heartbeatsCache.heartbeats=ze._heartbeatsCache.heartbeats.filter(gn=>{const _n=new Date(gn.date).valueOf();return Date.now()-_n<=2592e6}),ze._storage.overwrite(ze._heartbeatsCache)})()}getHeartbeatsHeader(){var ze=this;return(0,a.Z)(function*(){if(null===ze._heartbeatsCache&&(yield ze._heartbeatsCachePromise),null===ze._heartbeatsCache||0===ze._heartbeatsCache.heartbeats.length)return"";const Mt=xn(),{heartbeatsToSend:hn,unsentEntries:fn}=function Ci(nt,ze=1024){const Mt=[];let hn=nt.slice();for(const fn of nt){const gn=Mt.find(_n=>_n.agent===fn.agent);if(gn){if(gn.dates.push(fn.date),Qr(Mt)>ze){gn.dates.pop();break}}else if(Mt.push({agent:fn.agent,dates:[fn.date]}),Qr(Mt)>ze){Mt.pop();break}hn=hn.slice(1)}return{heartbeatsToSend:Mt,unsentEntries:hn}}(ze._heartbeatsCache.heartbeats),gn=(0,Ee.L)(JSON.stringify({version:2,heartbeats:hn}));return ze._heartbeatsCache.lastSentHeartbeatDate=Mt,fn.length>0?(ze._heartbeatsCache.heartbeats=fn,yield ze._storage.overwrite(ze._heartbeatsCache)):(ze._heartbeatsCache.heartbeats=[],ze._storage.overwrite(ze._heartbeatsCache)),gn})()}}function xn(){return(new Date).toISOString().substring(0,10)}class _i{constructor(ze){this.app=ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,Ee.hl)()&&(0,Ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ze=this;return(0,a.Z)(function*(){return(yield ze._canUseIndexedDBPromise)&&(yield function pe(nt){return(rt=rt||(0,a.Z)(function*(ze){try{return yield(yield $()).transaction(z).objectStore(z).get(Ut(ze))}catch(Mt){if(Mt instanceof Ee.ZR)G.warn(Mt.message);else{const hn=$n.create("idb-get",{originalErrorMessage:Mt?.message});G.warn(hn.message)}}})).apply(this,arguments)}(ze.app))||{heartbeats:[]}})()}overwrite(ze){var Mt=this;return(0,a.Z)(function*(){var hn;if(yield Mt._canUseIndexedDBPromise){const gn=yield Mt.read();return et(Mt.app,{lastSentHeartbeatDate:null!==(hn=ze.lastSentHeartbeatDate)&&void 0!==hn?hn:gn.lastSentHeartbeatDate,heartbeats:ze.heartbeats})}})()}add(ze){var Mt=this;return(0,a.Z)(function*(){var hn;if(yield Mt._canUseIndexedDBPromise){const gn=yield Mt.read();return et(Mt.app,{lastSentHeartbeatDate:null!==(hn=ze.lastSentHeartbeatDate)&&void 0!==hn?hn:gn.lastSentHeartbeatDate,heartbeats:[...gn.heartbeats,...ze.heartbeats]})}})()}}function Qr(nt){return(0,Ee.L)(JSON.stringify({version:2,heartbeats:nt})).length}!function Jr(nt){Xi(new K.wA("platform-logger",ze=>new on(ze),"PRIVATE")),Xi(new K.wA("heartbeat",ze=>new Wn(ze),"PRIVATE")),Ji($t,"0.9.13",nt),Ji($t,"0.9.13","esm2017"),Ji("fire-js","")}("")},4859:(jt,Ze,F)=>{"use strict";F.d(Ze,{H0:()=>_e,wA:()=>B});var a=F(5861),K=F(2090);class B{constructor(ie,X,se){this.name=ie,this.instanceFactory=X,this.type=se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ie){return this.instantiationMode=ie,this}setMultipleInstances(ie){return this.multipleInstances=ie,this}setServiceProps(ie){return this.serviceProps=ie,this}setInstanceCreatedCallback(ie){return this.onInstanceCreated=ie,this}}const Ee="[DEFAULT]";class Ae{constructor(ie,X){this.name=ie,this.container=X,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ie){const X=this.normalizeInstanceIdentifier(ie);if(!this.instancesDeferred.has(X)){const se=new K.BH;if(this.instancesDeferred.set(X,se),this.isInitialized(X)||this.shouldAutoInitialize())try{const be=this.getOrInitializeService({instanceIdentifier:X});be&&se.resolve(be)}catch{}}return this.instancesDeferred.get(X).promise}getImmediate(ie){var X;const se=this.normalizeInstanceIdentifier(ie?.identifier),be=null!==(X=ie?.optional)&&void 0!==X&&X;if(!this.isInitialized(se)&&!this.shouldAutoInitialize()){if(be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:se})}catch(xe){if(be)return null;throw xe}}getComponent(){return this.component}setComponent(ie){if(ie.name!==this.name)throw Error(`Mismatching Component ${ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ie,this.shouldAutoInitialize()){if(function oe(Me){return"EAGER"===Me.instantiationMode}(ie))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch{}for(const[X,se]of this.instancesDeferred.entries()){const be=this.normalizeInstanceIdentifier(X);try{const xe=this.getOrInitializeService({instanceIdentifier:be});se.resolve(xe)}catch{}}}}clearInstance(ie=Ee){this.instancesDeferred.delete(ie),this.instancesOptions.delete(ie),this.instances.delete(ie)}delete(){var ie=this;return(0,a.Z)(function*(){const X=Array.from(ie.instances.values());yield Promise.all([...X.filter(se=>"INTERNAL"in se).map(se=>se.INTERNAL.delete()),...X.filter(se=>"_delete"in se).map(se=>se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ie=Ee){return this.instances.has(ie)}getOptions(ie=Ee){return this.instancesOptions.get(ie)||{}}initialize(ie={}){const{options:X={}}=ie,se=this.normalizeInstanceIdentifier(ie.instanceIdentifier);if(this.isInitialized(se))throw Error(`${this.name}(${se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const be=this.getOrInitializeService({instanceIdentifier:se,options:X});for(const[xe,ke]of this.instancesDeferred.entries())se===this.normalizeInstanceIdentifier(xe)&&ke.resolve(be);return be}onInit(ie,X){var se;const be=this.normalizeInstanceIdentifier(X),xe=null!==(se=this.onInitCallbacks.get(be))&&void 0!==se?se:new Set;xe.add(ie),this.onInitCallbacks.set(be,xe);const ke=this.instances.get(be);return ke&&ie(ke,be),()=>{xe.delete(ie)}}invokeOnInitCallbacks(ie,X){const se=this.onInitCallbacks.get(X);if(se)for(const be of se)try{be(ie,X)}catch{}}getOrInitializeService({instanceIdentifier:ie,options:X={}}){let se=this.instances.get(ie);if(!se&&this.component&&(se=this.component.instanceFactory(this.container,{instanceIdentifier:(Me=ie,Me===Ee?void 0:Me),options:X}),this.instances.set(ie,se),this.instancesOptions.set(ie,X),this.invokeOnInitCallbacks(se,ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ie,se)}catch{}var Me;return se||null}normalizeInstanceIdentifier(ie=Ee){return this.component?this.component.multipleInstances?ie:Ee:ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(ie){this.name=ie,this.providers=new Map}addComponent(ie){const X=this.getProvider(ie.name);if(X.isComponentSet())throw new Error(`Component ${ie.name} has already been registered with ${this.name}`);X.setComponent(ie)}addOrOverwriteComponent(ie){this.getProvider(ie.name).isComponentSet()&&this.providers.delete(ie.name),this.addComponent(ie)}getProvider(ie){if(this.providers.has(ie))return this.providers.get(ie);const X=new Ae(ie,this);return this.providers.set(ie,X),X}getProviders(){return Array.from(this.providers.values())}}},1877:(jt,Ze,F)=>{"use strict";F.d(Ze,{Am:()=>Me,Ub:()=>_e,Yd:()=>oe,in:()=>K});const a=[];var K=(()=>{return(ie=K||(K={}))[ie.DEBUG=0]="DEBUG",ie[ie.VERBOSE=1]="VERBOSE",ie[ie.INFO=2]="INFO",ie[ie.WARN=3]="WARN",ie[ie.ERROR=4]="ERROR",ie[ie.SILENT=5]="SILENT",K;var ie})();const B={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},Ee=K.INFO,Ae={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},me=(ie,X,...se)=>{if(X<ie.logLevel)return;const be=(new Date).toISOString(),xe=Ae[X];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${X})`);console[xe](`[${be}]  ${ie.name}:`,...se)};class oe{constructor(X){this.name=X,this._logLevel=Ee,this._logHandler=me,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(X){if(!(X in K))throw new TypeError(`Invalid value "${X}" assigned to \`logLevel\``);this._logLevel=X}setLogLevel(X){this._logLevel="string"==typeof X?B[X]:X}get logHandler(){return this._logHandler}set logHandler(X){if("function"!=typeof X)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=X}get userLogHandler(){return this._userLogHandler}set userLogHandler(X){this._userLogHandler=X}debug(...X){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...X),this._logHandler(this,K.DEBUG,...X)}log(...X){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...X),this._logHandler(this,K.VERBOSE,...X)}info(...X){this._userLogHandler&&this._userLogHandler(this,K.INFO,...X),this._logHandler(this,K.INFO,...X)}warn(...X){this._userLogHandler&&this._userLogHandler(this,K.WARN,...X),this._logHandler(this,K.WARN,...X)}error(...X){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...X),this._logHandler(this,K.ERROR,...X)}}function _e(ie){a.forEach(X=>{X.setLogLevel(ie)})}function Me(ie,X){for(const se of a){let be=null;X&&X.level&&(be=B[X.level]),se.userLogHandler=null===ie?null:(xe,ke,...Ue)=>{const te=Ue.map(le=>{if(null==le)return null;if("string"==typeof le)return le;if("number"==typeof le||"boolean"==typeof le)return le.toString();if(le instanceof Error)return le.message;try{return JSON.stringify(le)}catch{return null}}).filter(le=>le).join(" ");ke>=(be??xe.logLevel)&&ie({level:K[ke].toLowerCase(),message:te,args:Ue,type:xe.name})}}}},259:(jt,Ze,F)=>{"use strict";F.d(Ze,{C6:()=>a.getApps,KN:()=>a.registerVersion,Mq:()=>a.getApp,ZF:()=>a.initializeApp});var a=F(6881);(0,a.registerVersion)("firebase","9.23.0","app")},9260:(jt,Ze,F)=>{"use strict";F.d(Ze,{Z:()=>a.Z});var a=F(3942);a.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(jt,Ze,F)=>{"use strict";F.r(Ze);var _e,Me,ie,X,se,a=F(5861),K=F(3942),B=F(1389),Ee=F(2090),oe=(F(6881),F(1877),F(4859));function be(){return window}const xe=2e3;const Ne=20;class Le extends B.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(j=>{this.resolveInialized=j})}addPassiveListener(j){this.passiveListeners.add(j)}removePassiveListener(j){this.passiveListeners.delete(j)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(j){return this.resolveInialized(),this.passiveListeners.forEach($=>$(j)),super.onEvent(j)}initialized(){var j=this;return(0,a.Z)(function*(){yield j.initPromise})()}}function he(z){return(se=se||(0,a.Z)(function*(j){const $=yield Ye()._get(rt(j));return $&&(yield Ye()._remove(rt(j))),$})).apply(this,arguments)}function Te(){const z=[],j="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let $=0;$<Ne;$++){const pe=Math.floor(Math.random()*j.length);z.push(j.charAt(pe))}return z.join("")}function Ye(){return(0,B.aC)(B.b)}function rt(z){return(0,B.aD)("authEvent",z.config.apiKey,z.name)}function vt(z){if(!z?.includes("?"))return{};const[j,...$]=z.split("?");return(0,Ee.zd)($.join("?"))}const G=class Fe{constructor(){this._redirectPersistence=B.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=B.aE,this._overrideRedirectResult=B.aF}_initialize(j){var $=this;return(0,a.Z)(function*(){const pe=j._key();let et=$.eventManagers.get(pe);return et||(et=new Le(j),$.eventManagers.set(pe,et),$.attachCallbackListeners(j,et)),et})()}_openPopup(j){(0,B.av)(j,"operation-not-supported-in-this-environment")}_openRedirect(j,$,pe,et){var Ut=this;return(0,a.Z)(function*(){!function ue(z){var j,$,pe,et,Ut,Vn,Mn,Wn,xn,Ci;const _i=be();(0,B.aA)("function"==typeof(null===(j=_i?.universalLinks)||void 0===j?void 0:j.subscribe),z,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,B.aA)(typeof(null===($=_i?.BuildInfo)||void 0===$?void 0:$.packageName)<"u",z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,B.aA)("function"==typeof(null===(Ut=null===(et=null===(pe=_i?.cordova)||void 0===pe?void 0:pe.plugins)||void 0===et?void 0:et.browsertab)||void 0===Ut?void 0:Ut.openUrl),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,B.aA)("function"==typeof(null===(Wn=null===(Mn=null===(Vn=_i?.cordova)||void 0===Vn?void 0:Vn.plugins)||void 0===Mn?void 0:Mn.browsertab)||void 0===Wn?void 0:Wn.isAvailable),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,B.aA)("function"==typeof(null===(Ci=null===(xn=_i?.cordova)||void 0===xn?void 0:xn.InAppBrowser)||void 0===Ci?void 0:Ci.open),z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(j);const Vn=yield Ut._initialize(j);yield Vn.initialized(),Vn.resetRedirect(),(0,B.aG)(),yield Ut._originValidation(j);const Mn=function $e(z,j,$=null){return{type:j,eventId:$,urlResponse:null,sessionId:Te(),postBody:null,tenantId:z.tenantId,error:(0,B.az)(z,"no-auth-event")}}(j,pe,et);yield function Z(z,j){return Ye()._set(rt(z),j)}(j,Mn);const Wn=yield function ke(z,j,$){return(_e=_e||(0,a.Z)(function*(pe,et,Ut){var Vn;const{BuildInfo:Mn}=be();(0,B.as)(et.sessionId,"AuthEvent did not contain a session ID");const Wn=yield function Be(z){return(X=X||(0,a.Z)(function*(j){const $=function Ce(z){if((0,B.as)(/[0-9a-zA-Z]+/.test(z),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(z);const j=new ArrayBuffer(z.length),$=new Uint8Array(j);for(let pe=0;pe<z.length;pe++)$[pe]=z.charCodeAt(pe);return $}(j),pe=yield crypto.subtle.digest("SHA-256",$);return Array.from(new Uint8Array(pe)).map(Ut=>Ut.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}(et.sessionId),xn={};return(0,B.at)()?xn.ibi=Mn.packageName:(0,B.au)()?xn.apn=Mn.packageName:(0,B.av)(pe,"operation-not-supported-in-this-environment"),Mn.displayName&&(xn.appDisplayName=Mn.displayName),xn.sessionId=Wn,(0,B.aw)(pe,Ut,et.type,void 0,null!==(Vn=et.eventId)&&void 0!==Vn?Vn:void 0,xn)})).apply(this,arguments)}(j,Mn,$),xn=yield function te(z){const{cordova:j}=be();return new Promise($=>{j.plugins.browsertab.isAvailable(pe=>{let et=null;pe?j.plugins.browsertab.openUrl(z):et=j.InAppBrowser.open(z,(0,B.ay)()?"_blank":"_system","location=yes"),$(et)})})}(Wn);return function le(z,j,$){return(ie=ie||(0,a.Z)(function*(pe,et,Ut){const{cordova:Vn}=be();let Mn=()=>{};try{yield new Promise((Wn,xn)=>{let Ci=null;function _i(){var nt;Wn();const ze=null===(nt=Vn.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof ze&&ze(),"function"==typeof Ut?.close&&Ut.close()}function Qr(){Ci||(Ci=window.setTimeout(()=>{xn((0,B.az)(pe,"redirect-cancelled-by-user"))},xe))}function Jr(){"visible"===document?.visibilityState&&Qr()}et.addPassiveListener(_i),document.addEventListener("resume",Qr,!1),(0,B.au)()&&document.addEventListener("visibilitychange",Jr,!1),Mn=()=>{et.removePassiveListener(_i),document.removeEventListener("resume",Qr,!1),document.removeEventListener("visibilitychange",Jr,!1),Ci&&window.clearTimeout(Ci)}})}finally{Mn()}})).apply(this,arguments)}(j,Vn,xn)})()}_isIframeWebStorageSupported(j,$){throw new Error("Method not implemented.")}_originValidation(j){const $=j._key();return this.originValidationPromises[$]||(this.originValidationPromises[$]=function Ue(z){return(Me=Me||(0,a.Z)(function*(j){const{BuildInfo:$}=be(),pe={};(0,B.at)()?pe.iosBundleId=$.packageName:(0,B.au)()?pe.androidPackageName=$.packageName:(0,B.av)(j,"operation-not-supported-in-this-environment"),yield(0,B.ax)(j,pe)})).apply(this,arguments)}(j)),this.originValidationPromises[$]}attachCallbackListeners(j,$){var pe,et;const{universalLinks:Ut,handleOpenURL:Vn,BuildInfo:Mn}=be(),Wn=setTimeout((0,a.Z)(function*(){yield he(j),$.onEvent(Q())}),500),xn=function(Jr){return(pe=pe||(0,a.Z)(function*(nt){clearTimeout(Wn);const ze=yield he(j);let Mt=null;ze&&nt?.url&&(Mt=function ve(z,j){var $,pe;const et=function on(z){const j=vt(z),$=j.link?decodeURIComponent(j.link):void 0,pe=vt($).link,et=j.deep_link_id?decodeURIComponent(j.deep_link_id):void 0;return vt(et).link||et||pe||$||z}(j);if(et.includes("/__/auth/callback")){const Ut=vt(et),Vn=Ut.firebaseError?function Qe(z){try{return JSON.parse(z)}catch{return null}}(decodeURIComponent(Ut.firebaseError)):null,Mn=null===(pe=null===($=Vn?.code)||void 0===$?void 0:$.split("auth/"))||void 0===pe?void 0:pe[1],Wn=Mn?(0,B.az)(Mn):null;return Wn?{type:z.type,eventId:z.eventId,tenantId:z.tenantId,error:Wn,urlResponse:null,sessionId:null,postBody:null}:{type:z.type,eventId:z.eventId,tenantId:z.tenantId,sessionId:z.sessionId,urlResponse:et,postBody:null}}return null}(ze,nt.url)),$.onEvent(Mt||Q())})).apply(this,arguments)};typeof Ut<"u"&&"function"==typeof Ut.subscribe&&Ut.subscribe(null,xn);const Ci=Vn,_i=`${Mn.packageName.toLowerCase()}://`;be().handleOpenURL=function(Qr){return(et=et||(0,a.Z)(function*(Jr){if(Jr.toLowerCase().startsWith(_i)&&xn({url:Jr}),"function"==typeof Ci)try{Ci(Jr)}catch(nt){console.error(nt)}})).apply(this,arguments)}}};function Q(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,B.az)("no-auth-event")}}var fe,Xe,He;const Rt=1e3;function Vt(){var z;return(null===(z=self?.location)||void 0===z?void 0:z.protocol)||null}function zn(z=(0,Ee.z$)()){return!("file:"!==Vt()&&"ionic:"!==Vt()&&"capacitor:"!==Vt()||!z.toLowerCase().match(/iphone|ipad|ipod|android/))}function lt(){try{const z=self.localStorage,j=B.aL();if(z)return z.setItem(j,"1"),z.removeItem(j),!function Wt(z=(0,Ee.z$)()){return function Zt(){return(0,Ee.w1)()&&11===document?.documentMode}()||function Gt(z=(0,Ee.z$)()){return/Edge\/\d+/.test(z)}(z)}()||(0,Ee.hl)()}catch{return Ct()&&(0,Ee.hl)()}return!1}function Ct(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function at(){return(function vn(){return"http:"===Vt()||"https:"===Vt()}()||(0,Ee.ru)()||zn())&&!function Bn(){return(0,Ee.b$)()||(0,Ee.UG)()}()&&lt()&&!Ct()}function st(){return zn()&&typeof document<"u"}const bn={LOCAL:"local",NONE:"none",SESSION:"session"},ai=B.aA,In="persistence";function Rn(z){return(Xe=Xe||(0,a.Z)(function*(j){yield j._initializationPromise;const $=qt(),pe=B.aD(In,j.config.apiKey,j.name);$&&$.setItem(pe,j._getPersistence())})).apply(this,arguments)}function qt(){var z;try{return(null===(z=function mi(){return typeof window<"u"?window:null}())||void 0===z?void 0:z.sessionStorage)||null}catch{return null}}const Ui=B.aA;class Ti{constructor(){this.browserResolver=B.aC(B.k),this.cordovaResolver=B.aC(G),this.underlyingResolver=null,this._redirectPersistence=B.a,this._completeRedirectFn=B.aE,this._overrideRedirectResult=B.aF}_initialize(j){var $=this;return(0,a.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._initialize(j)})()}_openPopup(j,$,pe,et){var Ut=this;return(0,a.Z)(function*(){return yield Ut.selectUnderlyingResolver(),Ut.assertedUnderlyingResolver._openPopup(j,$,pe,et)})()}_openRedirect(j,$,pe,et){var Ut=this;return(0,a.Z)(function*(){return yield Ut.selectUnderlyingResolver(),Ut.assertedUnderlyingResolver._openRedirect(j,$,pe,et)})()}_isIframeWebStorageSupported(j,$){this.assertedUnderlyingResolver._isIframeWebStorageSupported(j,$)}_originValidation(j){return this.assertedUnderlyingResolver._originValidation(j)}get _shouldInitProactively(){return st()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ui(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var j=this;return(0,a.Z)(function*(){if(j.underlyingResolver)return;const $=yield function Dn(){return(fe=fe||(0,a.Z)(function*(){return!!st()&&new Promise(z=>{const j=setTimeout(()=>{z(!1)},Rt);document.addEventListener("deviceready",()=>{clearTimeout(j),z(!0)})})})).apply(this,arguments)}();j.underlyingResolver=$?j.cordovaResolver:j.browserResolver})()}}function Mi(z){return z.unwrap()}function $i(z){return bi(z)}function bi(z){const{_tokenResponse:j}=z instanceof Ee.ZR?z.customData:z;if(!j)return null;if(!(z instanceof Ee.ZR)&&"temporaryProof"in j&&"phoneNumber"in j)return B.P.credentialFromResult(z);const $=j.providerId;if(!$||$===B.p.PASSWORD)return null;let pe;switch($){case B.p.GOOGLE:pe=B.V;break;case B.p.FACEBOOK:pe=B.U;break;case B.p.GITHUB:pe=B.W;break;case B.p.TWITTER:pe=B.Z;break;default:const{oauthIdToken:et,oauthAccessToken:Ut,oauthTokenSecret:Vn,pendingToken:Mn,nonce:Wn}=j;return Ut||Vn||et||Mn?Mn?$.startsWith("saml.")?B.aO._create($,Mn):B.L._fromParams({providerId:$,signInMethod:$,pendingToken:Mn,idToken:et,accessToken:Ut}):new B.X($).credential({idToken:et,accessToken:Ut,rawNonce:Wn}):null}return z instanceof Ee.ZR?pe.credentialFromError(z):pe.credentialFromResult(z)}function Ii(z,j){return j.catch($=>{throw $ instanceof Ee.ZR&&function os(z,j){var $;const pe=null===($=j.customData)||void 0===$?void 0:$._tokenResponse;if("auth/multi-factor-auth-required"===j?.code)j.resolver=new hr(z,B.aq(z,j));else if(pe){const et=bi(j),Ut=j;et&&(Ut.credential=et,Ut.tenantId=pe.tenantId||void 0,Ut.email=pe.email||void 0,Ut.phoneNumber=pe.phoneNumber||void 0)}}(z,$),$}).then($=>{const et=$.user;return{operationType:$.operationType,credential:$i($),additionalUserInfo:B.ao($),user:ri.getOrCreate(et)}})}function $n(z,j){return(He=He||(0,a.Z)(function*($,pe){const et=yield pe;return{verificationId:et.verificationId,confirm:Ut=>Ii($,et.confirm(Ut))}})).apply(this,arguments)}class hr{constructor(j,$){this.resolver=$,this.auth=function Xi(z){return z.wrapped()}(j)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(j){return Ii(Mi(this.auth),this.resolver.resolveSignIn(j))}}class ri{constructor(j){this._delegate=j,this.multiFactor=B.ar(j)}static getOrCreate(j){return ri.USER_MAP.has(j)||ri.USER_MAP.set(j,new ri(j)),ri.USER_MAP.get(j)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(j){return this._delegate.getIdTokenResult(j)}getIdToken(j){return this._delegate.getIdToken(j)}linkAndRetrieveDataWithCredential(j){return this.linkWithCredential(j)}linkWithCredential(j){var $=this;return(0,a.Z)(function*(){return Ii($.auth,B.a0($._delegate,j))})()}linkWithPhoneNumber(j,$){var pe=this;return(0,a.Z)(function*(){return $n(pe.auth,B.l(pe._delegate,j,$))})()}linkWithPopup(j){var $=this;return(0,a.Z)(function*(){return Ii($.auth,B.d($._delegate,j,Ti))})()}linkWithRedirect(j){var $=this;return(0,a.Z)(function*(){return yield Rn(B.aH($.auth)),B.g($._delegate,j,Ti)})()}reauthenticateAndRetrieveDataWithCredential(j){return this.reauthenticateWithCredential(j)}reauthenticateWithCredential(j){var $=this;return(0,a.Z)(function*(){return Ii($.auth,B.a1($._delegate,j))})()}reauthenticateWithPhoneNumber(j,$){return $n(this.auth,B.r(this._delegate,j,$))}reauthenticateWithPopup(j){return Ii(this.auth,B.e(this._delegate,j,Ti))}reauthenticateWithRedirect(j){var $=this;return(0,a.Z)(function*(){return yield Rn(B.aH($.auth)),B.h($._delegate,j,Ti)})()}sendEmailVerification(j){return B.ae(this._delegate,j)}unlink(j){var $=this;return(0,a.Z)(function*(){return yield B.an($._delegate,j),$})()}updateEmail(j){return B.aj(this._delegate,j)}updatePassword(j){return B.ak(this._delegate,j)}updatePhoneNumber(j){return B.u(this._delegate,j)}updateProfile(j){return B.ai(this._delegate,j)}verifyBeforeUpdateEmail(j,$){return B.af(this._delegate,j,$)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ri.USER_MAP=new WeakMap;const Sr=B.aA;let rr=(()=>{class z{constructor($,pe){if(this.app=$,pe.isInitialized())return this._delegate=pe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:et}=$.options;Sr(et,"invalid-api-key",{appName:$.name}),Sr(et,"invalid-api-key",{appName:$.name});const Ut=typeof window<"u"?Ti:void 0;this._delegate=pe.initialize({options:{persistence:Xr(et,$.name),popupRedirectResolver:Ut}}),this._delegate._updateErrorMap(B.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ri.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode($){this._delegate.languageCode=$}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId($){this._delegate.tenantId=$}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator($,pe){B.I(this._delegate,$,pe)}applyActionCode($){return B.a5(this._delegate,$)}checkActionCode($){return B.a6(this._delegate,$)}confirmPasswordReset($,pe){return B.a4(this._delegate,$,pe)}createUserWithEmailAndPassword($,pe){var et=this;return(0,a.Z)(function*(){return Ii(et._delegate,B.a8(et._delegate,$,pe))})()}fetchProvidersForEmail($){return this.fetchSignInMethodsForEmail($)}fetchSignInMethodsForEmail($){return B.ad(this._delegate,$)}isSignInWithEmailLink($){return B.ab(this._delegate,$)}getRedirectResult(){var $=this;return(0,a.Z)(function*(){Sr(at(),$._delegate,"operation-not-supported-in-this-environment");const pe=yield B.j($._delegate,Ti);return pe?Ii($._delegate,Promise.resolve(pe)):{credential:null,user:null}})()}addFrameworkForLogging($){!function de(z,j){(0,B.aH)(z)._logFramework(j)}(this._delegate,$)}onAuthStateChanged($,pe,et){const{next:Ut,error:Vn,complete:Mn}=fr($,pe,et);return this._delegate.onAuthStateChanged(Ut,Vn,Mn)}onIdTokenChanged($,pe,et){const{next:Ut,error:Vn,complete:Mn}=fr($,pe,et);return this._delegate.onIdTokenChanged(Ut,Vn,Mn)}sendSignInLinkToEmail($,pe){return B.aa(this._delegate,$,pe)}sendPasswordResetEmail($,pe){return B.a3(this._delegate,$,pe||void 0)}setPersistence($){var pe=this;return(0,a.Z)(function*(){let et;switch(function Zn(z,j){ai(Object.values(bn).includes(j),z,"invalid-persistence-type"),(0,Ee.b$)()?ai(j!==bn.SESSION,z,"unsupported-persistence-type"):(0,Ee.UG)()?ai(j===bn.NONE,z,"unsupported-persistence-type"):Ct()?ai(j===bn.NONE||j===bn.LOCAL&&(0,Ee.hl)(),z,"unsupported-persistence-type"):ai(j===bn.NONE||lt(),z,"unsupported-persistence-type")}(pe._delegate,$),$){case bn.SESSION:et=B.a;break;case bn.LOCAL:et=(yield B.aC(B.i)._isAvailable())?B.i:B.b;break;case bn.NONE:et=B.N;break;default:return B.av("argument-error",{appName:pe._delegate.name})}return pe._delegate.setPersistence(et)})()}signInAndRetrieveDataWithCredential($){return this.signInWithCredential($)}signInAnonymously(){return Ii(this._delegate,B._(this._delegate))}signInWithCredential($){return Ii(this._delegate,B.$(this._delegate,$))}signInWithCustomToken($){return Ii(this._delegate,B.a2(this._delegate,$))}signInWithEmailAndPassword($,pe){return Ii(this._delegate,B.a9(this._delegate,$,pe))}signInWithEmailLink($,pe){return Ii(this._delegate,B.ac(this._delegate,$,pe))}signInWithPhoneNumber($,pe){return $n(this._delegate,B.s(this._delegate,$,pe))}signInWithPopup($){var pe=this;return(0,a.Z)(function*(){return Sr(at(),pe._delegate,"operation-not-supported-in-this-environment"),Ii(pe._delegate,B.c(pe._delegate,$,Ti))})()}signInWithRedirect($){var pe=this;return(0,a.Z)(function*(){return Sr(at(),pe._delegate,"operation-not-supported-in-this-environment"),yield Rn(pe._delegate),B.f(pe._delegate,$,Ti)})()}updateCurrentUser($){return this._delegate.updateCurrentUser($)}verifyPasswordResetCode($){return B.a7(this._delegate,$)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return z.Persistence=bn,z})();function fr(z,j,$){let pe=z;"function"!=typeof z&&({next:pe,error:j,complete:$}=z);const et=pe;return{next:Vn=>et(Vn&&ri.getOrCreate(Vn)),error:j,complete:$}}function Xr(z,j){const $=function Xt(z,j){const $=qt();if(!$)return[];const pe=B.aD(In,z,j);switch($.getItem(pe)){case bn.NONE:return[B.N];case bn.LOCAL:return[B.i,B.a];case bn.SESSION:return[B.a];default:return[]}}(z,j);if(typeof self<"u"&&!$.includes(B.i)&&$.push(B.i),typeof window<"u")for(const pe of[B.b,B.a])$.includes(pe)||$.push(pe);return $.includes(B.N)||$.push(B.N),$}class Ji{constructor(){this.providerId="phone",this._delegate=new B.P(Mi(K.Z.auth()))}static credential(j,$){return B.P.credential(j,$)}verifyPhoneNumber(j,$){return this._delegate.verifyPhoneNumber(j,$)}unwrap(){return this._delegate}}Ji.PHONE_SIGN_IN_METHOD=B.P.PHONE_SIGN_IN_METHOD,Ji.PROVIDER_ID=B.P.PROVIDER_ID;const _s=B.aA;class as{constructor(j,$,pe=K.Z.app()){var et;_s(null===(et=pe.options)||void 0===et?void 0:et.apiKey,"invalid-api-key",{appName:pe.name}),this._delegate=new B.R(j,$,pe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function re(z){z.INTERNAL.registerComponent(new oe.wA("auth-compat",j=>{const $=j.getProvider("app-compat").getImmediate(),pe=j.getProvider("auth");return new rr($,pe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:B.A.EMAIL_SIGNIN,PASSWORD_RESET:B.A.PASSWORD_RESET,RECOVER_EMAIL:B.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:B.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:B.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:B.A.VERIFY_EMAIL}},EmailAuthProvider:B.Q,FacebookAuthProvider:B.U,GithubAuthProvider:B.W,GoogleAuthProvider:B.V,OAuthProvider:B.X,SAMLAuthProvider:B.Y,PhoneAuthProvider:Ji,PhoneMultiFactorGenerator:B.m,RecaptchaVerifier:as,TwitterAuthProvider:B.Z,Auth:rr,AuthCredential:B.J,Error:Ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),z.registerVersion("@firebase/auth-compat","0.4.2")}(K.Z)},5861:(jt,Ze,F)=>{"use strict";function a(B,Ee,Ae,me,oe,_e,Me){try{var ie=B[_e](Me),X=ie.value}catch(se){return void Ae(se)}ie.done?Ee(X):Promise.resolve(X).then(me,oe)}function K(B){return function(){var Ee=this,Ae=arguments;return new Promise(function(me,oe){var _e=B.apply(Ee,Ae);function Me(X){a(_e,me,oe,Me,ie,"next",X)}function ie(X){a(_e,me,oe,Me,ie,"throw",X)}Me(void 0)})}}F.d(Ze,{Z:()=>K})},7582:(jt,Ze,F)=>{"use strict";function Ee(G,Q){var de={};for(var fe in G)Object.prototype.hasOwnProperty.call(G,fe)&&Q.indexOf(fe)<0&&(de[fe]=G[fe]);if(null!=G&&"function"==typeof Object.getOwnPropertySymbols){var Xe=0;for(fe=Object.getOwnPropertySymbols(G);Xe<fe.length;Xe++)Q.indexOf(fe[Xe])<0&&Object.prototype.propertyIsEnumerable.call(G,fe[Xe])&&(de[fe[Xe]]=G[fe[Xe]])}return de}function Ae(G,Q,de,fe){var kt,Xe=arguments.length,He=Xe<3?Q:null===fe?fe=Object.getOwnPropertyDescriptor(Q,de):fe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)He=Reflect.decorate(G,Q,de,fe);else for(var Tt=G.length-1;Tt>=0;Tt--)(kt=G[Tt])&&(He=(Xe<3?kt(He):Xe>3?kt(Q,de,He):kt(Q,de))||He);return Xe>3&&He&&Object.defineProperty(Q,de,He),He}function se(G,Q,de,fe){return new(de||(de=Promise))(function(He,kt){function Tt(vn){try{Vt(fe.next(vn))}catch(zn){kt(zn)}}function Rt(vn){try{Vt(fe.throw(vn))}catch(zn){kt(zn)}}function Vt(vn){vn.done?He(vn.value):function Xe(He){return He instanceof de?He:new de(function(kt){kt(He)})}(vn.value).then(Tt,Rt)}Vt((fe=fe.apply(G,Q||[])).next())})}function Ce(G){return this instanceof Ce?(this.v=G,this):new Ce(G)}function Ne(G,Q,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Xe,fe=de.apply(G,Q||[]),He=[];return Xe={},kt("next"),kt("throw"),kt("return"),Xe[Symbol.asyncIterator]=function(){return this},Xe;function kt(Bn){fe[Bn]&&(Xe[Bn]=function(Zt){return new Promise(function(Gt,Wt){He.push([Bn,Zt,Gt,Wt])>1||Tt(Bn,Zt)})})}function Tt(Bn,Zt){try{!function Rt(Bn){Bn.value instanceof Ce?Promise.resolve(Bn.value.v).then(Vt,vn):zn(He[0][2],Bn)}(fe[Bn](Zt))}catch(Gt){zn(He[0][3],Gt)}}function Vt(Bn){Tt("next",Bn)}function vn(Bn){Tt("throw",Bn)}function zn(Bn,Zt){Bn(Zt),He.shift(),He.length&&Tt(He[0][0],He[0][1])}}function $e(G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,Q=G[Symbol.asyncIterator];return Q?Q.call(G):(G=function Ue(G){var Q="function"==typeof Symbol&&Symbol.iterator,de=Q&&G[Q],fe=0;if(de)return de.call(G);if(G&&"number"==typeof G.length)return{next:function(){return G&&fe>=G.length&&(G=void 0),{value:G&&G[fe++],done:!G}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(G),de={},fe("next"),fe("throw"),fe("return"),de[Symbol.asyncIterator]=function(){return this},de);function fe(He){de[He]=G[He]&&function(kt){return new Promise(function(Tt,Rt){!function Xe(He,kt,Tt,Rt){Promise.resolve(Rt).then(function(Vt){He({value:Vt,done:Tt})},kt)}(Tt,Rt,(kt=G[He](kt)).done,kt.value)})}}}F.d(Ze,{FC:()=>Ne,KL:()=>$e,_T:()=>Ee,gn:()=>Ae,mG:()=>se,qq:()=>Ce}),"function"==typeof SuppressedError&&SuppressedError}},jt=>{jt(jt.s=2697)}]);